var wl=Object.defineProperty;var vl=(e,r,t)=>r in e?wl(e,r,{enumerable:!0,configurable:!0,writable:!0,value:t}):e[r]=t;var Ze=(e,r,t)=>(vl(e,typeof r!="symbol"?r+"":r,t),t),Si=(e,r,t)=>{if(!r.has(e))throw TypeError("Cannot "+t)};var U=(e,r,t)=>(Si(e,r,"read from private field"),t?t.call(e):r.get(e)),Ue=(e,r,t)=>{if(r.has(e))throw TypeError("Cannot add the same private member more than once");r instanceof WeakSet?r.add(e):r.set(e,t)},Be=(e,r,t,a)=>(Si(e,r,"write to private field"),a?a.call(e,t):r.set(e,t),t);var Wr=(e,r,t,a)=>({set _(u){Be(e,r,u,t)},get _(){return U(e,r,a)}}),Te=(e,r,t)=>(Si(e,r,"access private method"),t);import{s as Tr,n as mt,r as Is,f as ks,e as Ts,b as Gr,h as Ai,o as _l}from"../chunks/scheduler.f9c04a13.js";import{S as gi,i as mi,g as Ce,s as Ve,h as Oe,j as Ne,y as Xe,c as ze,f as Se,k as pe,a as Me,x as Re,z as ut,p as oi,t as Ht,b as si,d as Bt,m as Mt,n as xt,o as tr,A as ai,e as Cr,B as Ii,r as Fi,u as Wi,v as qi,C as qr,w as Hi,D as Oo,E as pr,F as gr,G as dt}from"../chunks/index.f73c5084.js";import{g as Cs,f as Os,s as El,l as Sl}from"../chunks/AuthManager.909d496c.js";import{u as Ar}from"../chunks/controller.e93c50b6.js";import{s as Al}from"../chunks/store.66e1840b.js";import{w as Il}from"../chunks/index.58c9df35.js";function kl(e){const r=e-1;return r*r*r+1}function li(e){return--e*e*e*e*e+1}function ui(e,{delay:r=0,duration:t=400,easing:a=kl,axis:u="y"}={}){const n=getComputedStyle(e),i=+n.opacity,s=u==="y"?"height":"width",o=parseFloat(n[s]),l=u==="y"?["top","bottom"]:["left","right"],h=l.map(M=>`${M[0].toUpperCase()}${M.slice(1)}`),f=parseFloat(n[`padding${h[0]}`]),d=parseFloat(n[`padding${h[1]}`]),m=parseFloat(n[`margin${h[0]}`]),b=parseFloat(n[`margin${h[1]}`]),y=parseFloat(n[`border${h[0]}Width`]),A=parseFloat(n[`border${h[1]}Width`]);return{delay:r,duration:t,easing:a,css:M=>`overflow: hidden;opacity: ${Math.min(M*20,1)*i};${s}: ${M*o}px;padding-${l[0]}: ${M*f}px;padding-${l[1]}: ${M*d}px;margin-${l[0]}: ${M*m}px;margin-${l[1]}: ${M*b}px;border-${l[0]}-width: ${M*y}px;border-${l[1]}-width: ${M*A}px;`}}function Tl(e){let r,t="-";return{c(){r=Ce("span"),r.textContent=t,this.h()},l(a){r=Oe(a,"SPAN",{class:!0,"data-svelte-h":!0}),Xe(r)!=="svelte-1seu71o"&&(r.textContent=t),this.h()},h(){pe(r,"class","text-8xl text-center absolute pointer-events-none")},m(a,u){Me(a,r,u)},p:mt,d(a){a&&Se(r)}}}function Cl(e){let r=[0,3].includes(e[0]),t,a=e[3],u,n=e[4],i,s,o="Â°",l=r&&Ro(),h=Po(e),f=Bo(e);return{c(){l&&l.c(),t=Ve(),h.c(),u=Ve(),f.c(),i=Ve(),s=Ce("span"),s.textContent=o,this.h()},l(d){l&&l.l(d),t=ze(d),h.l(d),u=ze(d),f.l(d),i=ze(d),s=Oe(d,"SPAN",{class:!0,"data-svelte-h":!0}),Xe(s)!=="svelte-umdtd2"&&(s.textContent=o),this.h()},h(){pe(s,"class","text-7xl absolute ml-[7.7rem] -top-2 pointer-events-none")},m(d,m){l&&l.m(d,m),Me(d,t,m),h.m(d,m),Me(d,u,m),f.m(d,m),Me(d,i,m),Me(d,s,m)},p(d,m){m&1&&(r=[0,3].includes(d[0])),r?l||(l=Ro(),l.c(),l.m(t.parentNode,t)):l&&(l.d(1),l=null),m&8&&Tr(a,a=d[3])?(oi(),Ht(h,1,1,mt),si(),h=Po(d),h.c(),Bt(h,1),h.m(u.parentNode,u)):h.p(d,m),m&16&&Tr(n,n=d[4])?(oi(),Ht(f,1,1,mt),si(),f=Bo(d),f.c(),Bt(f,1),f.m(i.parentNode,i)):f.p(d,m)},d(d){d&&(Se(t),Se(u),Se(i),Se(s)),l&&l.d(d),h.d(d),f.d(d)}}}function Ro(e){let r,t="Relativ temperatur";return{c(){r=Ce("span"),r.textContent=t,this.h()},l(a){r=Oe(a,"SPAN",{class:!0,"data-svelte-h":!0}),Xe(r)!=="svelte-1lr22o5"&&(r.textContent=t),this.h()},h(){pe(r,"class","absolute font-light text-sm -bottom-8")},m(a,u){Me(a,r,u)},d(a){a&&Se(r)}}}function Po(e){let r,t,a,u,n;return{c(){r=Ce("span"),t=Mt(e[3]),this.h()},l(i){r=Oe(i,"SPAN",{class:!0});var s=Ne(r);t=xt(s,e[3]),s.forEach(Se),this.h()},h(){pe(r,"class",a="text-8xl text-center absolute pointer-events-none "+(e[4]==""?"":"mr-[2.5rem]"))},m(i,s){Me(i,r,s),Re(r,t),n=!0},p(i,s){(!n||s&8)&&tr(t,i[3]),(!n||s&16&&a!==(a="text-8xl text-center absolute pointer-events-none "+(i[4]==""?"":"mr-[2.5rem]")))&&pe(r,"class",a)},i(i){n||(i&&ks(()=>{n&&(u||(u=ai(r,ui,{delay:0,duration:300,easing:li,axis:"y"},!0)),u.run(1))}),n=!0)},o(i){i&&(u||(u=ai(r,ui,{delay:0,duration:300,easing:li,axis:"y"},!1)),u.run(0)),n=!1},d(i){i&&Se(r),i&&u&&u.end()}}}function Bo(e){let r,t,a,u;return{c(){r=Ce("span"),t=Mt(e[4]),this.h()},l(n){r=Oe(n,"SPAN",{class:!0});var i=Ne(r);t=xt(i,e[4]),i.forEach(Se),this.h()},h(){pe(r,"class","text-8xl text-center absolute pointer-events-none ml-[2.5rem]")},m(n,i){Me(n,r,i),Re(r,t),u=!0},p(n,i){(!u||i&16)&&tr(t,n[4])},i(n){u||(n&&ks(()=>{u&&(a||(a=ai(r,ui,{delay:0,duration:300,easing:li,axis:"y"},!0)),a.run(1))}),u=!0)},o(n){n&&(a||(a=ai(r,ui,{delay:0,duration:300,easing:li,axis:"y"},!1)),a.run(0)),u=!1},d(n){n&&Se(r),n&&a&&a.end()}}}function Ol(e){let r,t,a='<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1" stroke="currentColor" class="w-14 h-full mr-14"><path stroke-linecap="round" stroke-linejoin="round" d="M15.75 19.5L8.25 12l7.5-7.5"></path></svg>',u,n,i,s,o='<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1" stroke="currentColor" class="w-14 h-full ml-14"><path stroke-linecap="round" stroke-linejoin="round" d="M8.25 4.5l7.5 7.5-7.5 7.5"></path></svg>',l,h,f;function d(y,A){return A&2&&(n=null),n==null&&(n=!isNaN(y[1])&&y[1]!==null),n?Cl:Tl}let m=d(e,-1),b=m(e);return{c(){r=Ce("div"),t=Ce("button"),t.innerHTML=a,u=Ve(),b.c(),i=Ve(),s=Ce("button"),s.innerHTML=o,this.h()},l(y){r=Oe(y,"DIV",{class:!0});var A=Ne(r);t=Oe(A,"BUTTON",{class:!0,"data-svelte-h":!0}),Xe(t)!=="svelte-c194v9"&&(t.innerHTML=a),u=ze(A),b.l(A),i=ze(A),s=Oe(A,"BUTTON",{class:!0,"data-svelte-h":!0}),Xe(s)!=="svelte-9lnhab"&&(s.innerHTML=o),A.forEach(Se),this.h()},h(){pe(t,"class","h-18 mt-6 mr-5 w-1/2 flex justify-end active:-translate-x-2 transition-transform duration-200"),pe(s,"class","h-18 mt-6 ml-5 w-1/2 active:translate-x-2 transition-transform duration-200"),pe(r,"class",l="w-full flex flex-row justify-center items-center drop-shadow-xl "+(e[2]?"opacity-20 pointer-events-none":""))},m(y,A){Me(y,r,A),Re(r,t),Re(r,u),b.m(r,null),Re(r,i),Re(r,s),h||(f=[ut(t,"click",e[7]),ut(s,"click",e[8])],h=!0)},p(y,[A]){m===(m=d(y,A))&&b?b.p(y,A):(b.d(1),b=m(y),b&&(b.c(),b.m(r,i))),A&4&&l!==(l="w-full flex flex-row justify-center items-center drop-shadow-xl "+(y[2]?"opacity-20 pointer-events-none":""))&&pe(r,"class",l)},i:mt,o:mt,d(y){y&&Se(r),b.d(),h=!1,Is(f)}}}function Rl(e,r,t){let{updateSetting:a}=r,{mode:u}=r,{temp:n}=r,i,s,{disabled:o}=r,l=d=>{a("temp",n+d)};const h=()=>{l(-1)},f=()=>{l(1)};return e.$$set=d=>{"updateSetting"in d&&t(6,a=d.updateSetting),"mode"in d&&t(0,u=d.mode),"temp"in d&&t(1,n=d.temp),"disabled"in d&&t(2,o=d.disabled)},e.$$.update=()=>{e.$$.dirty&2&&n&&t(3,i=n.toString().charAt(0)),e.$$.dirty&2&&n&&t(4,s=n.toString().charAt(1))},[u,n,o,i,s,l,a,h,f]}class Pl extends gi{constructor(r){super(),mi(this,r,Rl,Ol,Tr,{updateSetting:6,mode:0,temp:1,disabled:2})}}var go=Object.defineProperty,Bl=Object.getOwnPropertyDescriptor,Ml=Object.getOwnPropertyNames,xl=Object.prototype.hasOwnProperty,ht=(e,r)=>()=>(e&&(r=e(e=0)),r),ve=(e,r)=>()=>(r||e((r={exports:{}}).exports,r),r.exports),wr=(e,r)=>{for(var t in r)go(e,t,{get:r[t],enumerable:!0})},Ul=(e,r,t,a)=>{if(r&&typeof r=="object"||typeof r=="function")for(let u of Ml(r))!xl.call(e,u)&&u!==t&&go(e,u,{get:()=>r[u],enumerable:!(a=Bl(r,u))||a.enumerable});return e},Ke=e=>Ul(go({},"__esModule",{value:!0}),e),ce=ht(()=>{}),De={};wr(De,{_debugEnd:()=>Sn,_debugProcess:()=>En,_events:()=>jn,_eventsCount:()=>Dn,_exiting:()=>ln,_fatalExceptions:()=>wn,_getActiveHandles:()=>Ls,_getActiveRequests:()=>Us,_kill:()=>cn,_linkedBinding:()=>Ms,_maxListeners:()=>Nn,_preload_modules:()=>Un,_rawDebug:()=>on,_startProfilerIdleNotifier:()=>An,_stopProfilerIdleNotifier:()=>In,_tickCallback:()=>_n,abort:()=>On,addListener:()=>Fn,allowedNodeEnvironmentFlags:()=>bn,arch:()=>zi,argv:()=>Qi,argv0:()=>xn,assert:()=>Ns,binding:()=>Zi,chdir:()=>rn,config:()=>un,cpuUsage:()=>Lr,cwd:()=>tn,debugPort:()=>Mn,default:()=>bo,dlopen:()=>xs,domain:()=>an,emit:()=>zn,emitWarning:()=>Xi,env:()=>Yi,execArgv:()=>Gi,execPath:()=>Bn,exit:()=>gn,features:()=>yn,hasUncaughtExceptionCaptureCallback:()=>js,hrtime:()=>Jr,kill:()=>pn,listeners:()=>Fs,memoryUsage:()=>dn,moduleLoadList:()=>sn,nextTick:()=>Ps,off:()=>qn,on:()=>Lt,once:()=>Wn,openStdin:()=>mn,pid:()=>Rn,platform:()=>Ki,ppid:()=>Pn,prependListener:()=>Kn,prependOnceListener:()=>Yn,reallyExit:()=>hn,release:()=>nn,removeAllListeners:()=>Vn,removeListener:()=>Hn,resourceUsage:()=>fn,setSourceMapsEnabled:()=>Ln,setUncaughtExceptionCaptureCallback:()=>vn,stderr:()=>Tn,stdin:()=>Cn,stdout:()=>kn,title:()=>Vi,umask:()=>en,uptime:()=>Ds,version:()=>Ji,versions:()=>$i});function mo(e){throw new Error("Node.js process "+e+" is not supported by JSPM core outside of Node.js")}function Ll(){!mr||!fr||(mr=!1,fr.length?Rt=fr.concat(Rt):Dr=-1,Rt.length&&Rs())}function Rs(){if(!mr){var e=setTimeout(Ll,0);mr=!0;for(var r=Rt.length;r;){for(fr=Rt,Rt=[];++Dr<r;)fr&&fr[Dr].run();Dr=-1,r=Rt.length}fr=null,mr=!1,clearTimeout(e)}}function Ps(e){var r=new Array(arguments.length-1);if(arguments.length>1)for(var t=1;t<arguments.length;t++)r[t-1]=arguments[t];Rt.push(new Bs(e,r)),Rt.length===1&&!mr&&setTimeout(Rs,0)}function Bs(e,r){this.fun=e,this.array=r}function pt(){}function Ms(e){mo("_linkedBinding")}function xs(e){mo("dlopen")}function Us(){return[]}function Ls(){return[]}function Ns(e,r){if(!e)throw new Error(r||"assertion error")}function js(){return!1}function Ds(){return Ft.now()/1e3}function Jr(e){var r=Math.floor((Date.now()-Ft.now())*.001),t=Ft.now()*.001,a=Math.floor(t)+r,u=Math.floor(t%1*1e9);return e&&(a=a-e[0],u=u-e[1],u<0&&(a--,u+=$r)),[a,u]}function Lt(){return bo}function Fs(e){return[]}var Rt,mr,fr,Dr,Vi,zi,Ki,Yi,Qi,Gi,Ji,$i,Xi,Zi,en,tn,rn,nn,on,sn,an,ln,un,hn,cn,Lr,fn,dn,pn,gn,mn,bn,yn,wn,vn,_n,En,Sn,An,In,kn,Tn,Cn,On,Rn,Pn,Bn,Mn,xn,Un,Ln,Ft,ki,$r,Nn,jn,Dn,Fn,Wn,qn,Hn,Vn,zn,Kn,Yn,bo,Nl=ht(()=>{ce(),de(),fe(),Rt=[],mr=!1,Dr=-1,Bs.prototype.run=function(){this.fun.apply(null,this.array)},Vi="browser",zi="x64",Ki="browser",Yi={PATH:"/usr/bin",LANG:navigator.language+".UTF-8",PWD:"/",HOME:"/home",TMP:"/tmp"},Qi=["/usr/bin/node"],Gi=[],Ji="v16.8.0",$i={},Xi=function(e,r){console.warn((r?r+": ":"")+e)},Zi=function(e){mo("binding")},en=function(e){return 0},tn=function(){return"/"},rn=function(e){},nn={name:"node",sourceUrl:"",headersUrl:"",libUrl:""},on=pt,sn=[],an={},ln=!1,un={},hn=pt,cn=pt,Lr=function(){return{}},fn=Lr,dn=Lr,pn=pt,gn=pt,mn=pt,bn={},yn={inspector:!1,debug:!1,uv:!1,ipv6:!1,tls_alpn:!1,tls_sni:!1,tls_ocsp:!1,tls:!1,cached_builtins:!0},wn=pt,vn=pt,_n=pt,En=pt,Sn=pt,An=pt,In=pt,kn=void 0,Tn=void 0,Cn=void 0,On=pt,Rn=2,Pn=1,Bn="/bin/usr/node",Mn=9229,xn="node",Un=[],Ln=pt,Ft={now:typeof performance<"u"?performance.now.bind(performance):void 0,timing:typeof performance<"u"?performance.timing:void 0},Ft.now===void 0&&(ki=Date.now(),Ft.timing&&Ft.timing.navigationStart&&(ki=Ft.timing.navigationStart),Ft.now=()=>Date.now()-ki),$r=1e9,Jr.bigint=function(e){var r=Jr(e);return typeof BigInt>"u"?r[0]*$r+r[1]:BigInt(r[0]*$r)+BigInt(r[1])},Nn=10,jn={},Dn=0,Fn=Lt,Wn=Lt,qn=Lt,Hn=Lt,Vn=Lt,zn=pt,Kn=Lt,Yn=Lt,bo={version:Ji,versions:$i,arch:zi,platform:Ki,release:nn,_rawDebug:on,moduleLoadList:sn,binding:Zi,_linkedBinding:Ms,_events:jn,_eventsCount:Dn,_maxListeners:Nn,on:Lt,addListener:Fn,once:Wn,off:qn,removeListener:Hn,removeAllListeners:Vn,emit:zn,prependListener:Kn,prependOnceListener:Yn,listeners:Fs,domain:an,_exiting:ln,config:un,dlopen:xs,uptime:Ds,_getActiveRequests:Us,_getActiveHandles:Ls,reallyExit:hn,_kill:cn,cpuUsage:Lr,resourceUsage:fn,memoryUsage:dn,kill:pn,exit:gn,openStdin:mn,allowedNodeEnvironmentFlags:bn,assert:Ns,features:yn,_fatalExceptions:wn,setUncaughtExceptionCaptureCallback:vn,hasUncaughtExceptionCaptureCallback:js,emitWarning:Xi,nextTick:Ps,_tickCallback:_n,_debugProcess:En,_debugEnd:Sn,_startProfilerIdleNotifier:An,_stopProfilerIdleNotifier:In,stdout:kn,stdin:Cn,stderr:Tn,abort:On,umask:en,chdir:rn,cwd:tn,env:Yi,title:Vi,argv:Qi,execArgv:Gi,pid:Rn,ppid:Pn,execPath:Bn,debugPort:Mn,hrtime:Jr,argv0:xn,_preload_modules:Un,setSourceMapsEnabled:Ln}}),fe=ht(()=>{Nl()}),ct={};wr(ct,{Buffer:()=>hi,INSPECT_MAX_BYTES:()=>Ws,default:()=>Nt,kMaxLength:()=>qs});function jl(){if(Qn)return Ir;Qn=!0,Ir.byteLength=s,Ir.toByteArray=l,Ir.fromByteArray=d;for(var e=[],r=[],t=typeof Uint8Array<"u"?Uint8Array:Array,a="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",u=0,n=a.length;u<n;++u)e[u]=a[u],r[a.charCodeAt(u)]=u;r["-".charCodeAt(0)]=62,r["_".charCodeAt(0)]=63;function i(m){var b=m.length;if(b%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var y=m.indexOf("=");y===-1&&(y=b);var A=y===b?0:4-y%4;return[y,A]}function s(m){var b=i(m),y=b[0],A=b[1];return(y+A)*3/4-A}function o(m,b,y){return(b+y)*3/4-y}function l(m){var b,y=i(m),A=y[0],M=y[1],C=new t(o(m,A,M)),E=0,L=M>0?A-4:A,D;for(D=0;D<L;D+=4)b=r[m.charCodeAt(D)]<<18|r[m.charCodeAt(D+1)]<<12|r[m.charCodeAt(D+2)]<<6|r[m.charCodeAt(D+3)],C[E++]=b>>16&255,C[E++]=b>>8&255,C[E++]=b&255;return M===2&&(b=r[m.charCodeAt(D)]<<2|r[m.charCodeAt(D+1)]>>4,C[E++]=b&255),M===1&&(b=r[m.charCodeAt(D)]<<10|r[m.charCodeAt(D+1)]<<4|r[m.charCodeAt(D+2)]>>2,C[E++]=b>>8&255,C[E++]=b&255),C}function h(m){return e[m>>18&63]+e[m>>12&63]+e[m>>6&63]+e[m&63]}function f(m,b,y){for(var A,M=[],C=b;C<y;C+=3)A=(m[C]<<16&16711680)+(m[C+1]<<8&65280)+(m[C+2]&255),M.push(h(A));return M.join("")}function d(m){for(var b,y=m.length,A=y%3,M=[],C=16383,E=0,L=y-A;E<L;E+=C)M.push(f(m,E,E+C>L?L:E+C));return A===1?(b=m[y-1],M.push(e[b>>2]+e[b<<4&63]+"==")):A===2&&(b=(m[y-2]<<8)+m[y-1],M.push(e[b>>10]+e[b>>4&63]+e[b<<2&63]+"=")),M.join("")}return Ir}function Dl(){return Gn?Nr:(Gn=!0,Nr.read=function(e,r,t,a,u){var n,i,s=u*8-a-1,o=(1<<s)-1,l=o>>1,h=-7,f=t?u-1:0,d=t?-1:1,m=e[r+f];for(f+=d,n=m&(1<<-h)-1,m>>=-h,h+=s;h>0;n=n*256+e[r+f],f+=d,h-=8);for(i=n&(1<<-h)-1,n>>=-h,h+=a;h>0;i=i*256+e[r+f],f+=d,h-=8);if(n===0)n=1-l;else{if(n===o)return i?NaN:(m?-1:1)*(1/0);i=i+Math.pow(2,a),n=n-l}return(m?-1:1)*i*Math.pow(2,n-a)},Nr.write=function(e,r,t,a,u,n){var i,s,o,l=n*8-u-1,h=(1<<l)-1,f=h>>1,d=u===23?Math.pow(2,-24)-Math.pow(2,-77):0,m=a?0:n-1,b=a?1:-1,y=r<0||r===0&&1/r<0?1:0;for(r=Math.abs(r),isNaN(r)||r===1/0?(s=isNaN(r)?1:0,i=h):(i=Math.floor(Math.log(r)/Math.LN2),r*(o=Math.pow(2,-i))<1&&(i--,o*=2),i+f>=1?r+=d/o:r+=d*Math.pow(2,1-f),r*o>=2&&(i++,o/=2),i+f>=h?(s=0,i=h):i+f>=1?(s=(r*o-1)*Math.pow(2,u),i=i+f):(s=r*Math.pow(2,f-1)*Math.pow(2,u),i=0));u>=8;e[t+m]=s&255,m+=b,s/=256,u-=8);for(i=i<<u|s,l+=u;l>0;e[t+m]=i&255,m+=b,i/=256,l-=8);e[t+m-b]|=y*128},Nr)}function Fl(){if(Jn)return $t;Jn=!0;let e=jl(),r=Dl(),t=typeof Symbol=="function"&&typeof Symbol.for=="function"?Symbol.for("nodejs.util.inspect.custom"):null;$t.Buffer=i,$t.SlowBuffer=M,$t.INSPECT_MAX_BYTES=50;let a=2147483647;$t.kMaxLength=a,i.TYPED_ARRAY_SUPPORT=u(),!i.TYPED_ARRAY_SUPPORT&&typeof console<"u"&&typeof console.error=="function"&&console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support.");function u(){try{let p=new Uint8Array(1),c={foo:function(){return 42}};return Object.setPrototypeOf(c,Uint8Array.prototype),Object.setPrototypeOf(p,c),p.foo()===42}catch{return!1}}Object.defineProperty(i.prototype,"parent",{enumerable:!0,get:function(){if(i.isBuffer(this))return this.buffer}}),Object.defineProperty(i.prototype,"offset",{enumerable:!0,get:function(){if(i.isBuffer(this))return this.byteOffset}});function n(p){if(p>a)throw new RangeError('The value "'+p+'" is invalid for option "size"');let c=new Uint8Array(p);return Object.setPrototypeOf(c,i.prototype),c}function i(p,c,g){if(typeof p=="number"){if(typeof c=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return h(p)}return s(p,c,g)}i.poolSize=8192;function s(p,c,g){if(typeof p=="string")return f(p,c);if(ArrayBuffer.isView(p))return m(p);if(p==null)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof p);if(Y(p,ArrayBuffer)||p&&Y(p.buffer,ArrayBuffer)||typeof SharedArrayBuffer<"u"&&(Y(p,SharedArrayBuffer)||p&&Y(p.buffer,SharedArrayBuffer)))return b(p,c,g);if(typeof p=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');let _=p.valueOf&&p.valueOf();if(_!=null&&_!==p)return i.from(_,c,g);let O=y(p);if(O)return O;if(typeof Symbol<"u"&&Symbol.toPrimitive!=null&&typeof p[Symbol.toPrimitive]=="function")return i.from(p[Symbol.toPrimitive]("string"),c,g);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof p)}i.from=function(p,c,g){return s(p,c,g)},Object.setPrototypeOf(i.prototype,Uint8Array.prototype),Object.setPrototypeOf(i,Uint8Array);function o(p){if(typeof p!="number")throw new TypeError('"size" argument must be of type number');if(p<0)throw new RangeError('The value "'+p+'" is invalid for option "size"')}function l(p,c,g){return o(p),p<=0?n(p):c!==void 0?typeof g=="string"?n(p).fill(c,g):n(p).fill(c):n(p)}i.alloc=function(p,c,g){return l(p,c,g)};function h(p){return o(p),n(p<0?0:A(p)|0)}i.allocUnsafe=function(p){return h(p)},i.allocUnsafeSlow=function(p){return h(p)};function f(p,c){if((typeof c!="string"||c==="")&&(c="utf8"),!i.isEncoding(c))throw new TypeError("Unknown encoding: "+c);let g=C(p,c)|0,_=n(g),O=_.write(p,c);return O!==g&&(_=_.slice(0,O)),_}function d(p){let c=p.length<0?0:A(p.length)|0,g=n(c);for(let _=0;_<c;_+=1)g[_]=p[_]&255;return g}function m(p){if(Y(p,Uint8Array)){let c=new Uint8Array(p);return b(c.buffer,c.byteOffset,c.byteLength)}return d(p)}function b(p,c,g){if(c<0||p.byteLength<c)throw new RangeError('"offset" is outside of buffer bounds');if(p.byteLength<c+(g||0))throw new RangeError('"length" is outside of buffer bounds');let _;return c===void 0&&g===void 0?_=new Uint8Array(p):g===void 0?_=new Uint8Array(p,c):_=new Uint8Array(p,c,g),Object.setPrototypeOf(_,i.prototype),_}function y(p){if(i.isBuffer(p)){let c=A(p.length)|0,g=n(c);return g.length===0||p.copy(g,0,0,c),g}if(p.length!==void 0)return typeof p.length!="number"||ye(p.length)?n(0):d(p);if(p.type==="Buffer"&&Array.isArray(p.data))return d(p.data)}function A(p){if(p>=a)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+a.toString(16)+" bytes");return p|0}function M(p){return+p!=p&&(p=0),i.alloc(+p)}i.isBuffer=function(p){return p!=null&&p._isBuffer===!0&&p!==i.prototype},i.compare=function(p,c){if(Y(p,Uint8Array)&&(p=i.from(p,p.offset,p.byteLength)),Y(c,Uint8Array)&&(c=i.from(c,c.offset,c.byteLength)),!i.isBuffer(p)||!i.isBuffer(c))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(p===c)return 0;let g=p.length,_=c.length;for(let O=0,w=Math.min(g,_);O<w;++O)if(p[O]!==c[O]){g=p[O],_=c[O];break}return g<_?-1:_<g?1:0},i.isEncoding=function(p){switch(String(p).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},i.concat=function(p,c){if(!Array.isArray(p))throw new TypeError('"list" argument must be an Array of Buffers');if(p.length===0)return i.alloc(0);let g;if(c===void 0)for(c=0,g=0;g<p.length;++g)c+=p[g].length;let _=i.allocUnsafe(c),O=0;for(g=0;g<p.length;++g){let w=p[g];if(Y(w,Uint8Array))O+w.length>_.length?(i.isBuffer(w)||(w=i.from(w)),w.copy(_,O)):Uint8Array.prototype.set.call(_,w,O);else if(i.isBuffer(w))w.copy(_,O);else throw new TypeError('"list" argument must be an Array of Buffers');O+=w.length}return _};function C(p,c){if(i.isBuffer(p))return p.length;if(ArrayBuffer.isView(p)||Y(p,ArrayBuffer))return p.byteLength;if(typeof p!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof p);let g=p.length,_=arguments.length>2&&arguments[2]===!0;if(!_&&g===0)return 0;let O=!1;for(;;)switch(c){case"ascii":case"latin1":case"binary":return g;case"utf8":case"utf-8":return W(p).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return g*2;case"hex":return g>>>1;case"base64":return J(p).length;default:if(O)return _?-1:W(p).length;c=(""+c).toLowerCase(),O=!0}}i.byteLength=C;function E(p,c,g){let _=!1;if((c===void 0||c<0)&&(c=0),c>this.length||((g===void 0||g>this.length)&&(g=this.length),g<=0)||(g>>>=0,c>>>=0,g<=c))return"";for(p||(p="utf8");;)switch(p){case"hex":return H(this,c,g);case"utf8":case"utf-8":return V(this,c,g);case"ascii":return me(this,c,g);case"latin1":case"binary":return oe(this,c,g);case"base64":return v(this,c,g);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return be(this,c,g);default:if(_)throw new TypeError("Unknown encoding: "+p);p=(p+"").toLowerCase(),_=!0}}i.prototype._isBuffer=!0;function L(p,c,g){let _=p[c];p[c]=p[g],p[g]=_}i.prototype.swap16=function(){let p=this.length;if(p%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(let c=0;c<p;c+=2)L(this,c,c+1);return this},i.prototype.swap32=function(){let p=this.length;if(p%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(let c=0;c<p;c+=4)L(this,c,c+3),L(this,c+1,c+2);return this},i.prototype.swap64=function(){let p=this.length;if(p%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(let c=0;c<p;c+=8)L(this,c,c+7),L(this,c+1,c+6),L(this,c+2,c+5),L(this,c+3,c+4);return this},i.prototype.toString=function(){let p=this.length;return p===0?"":arguments.length===0?V(this,0,p):E.apply(this,arguments)},i.prototype.toLocaleString=i.prototype.toString,i.prototype.equals=function(p){if(!i.isBuffer(p))throw new TypeError("Argument must be a Buffer");return this===p?!0:i.compare(this,p)===0},i.prototype.inspect=function(){let p="",c=$t.INSPECT_MAX_BYTES;return p=this.toString("hex",0,c).replace(/(.{2})/g,"$1 ").trim(),this.length>c&&(p+=" ... "),"<Buffer "+p+">"},t&&(i.prototype[t]=i.prototype.inspect),i.prototype.compare=function(p,c,g,_,O){if(Y(p,Uint8Array)&&(p=i.from(p,p.offset,p.byteLength)),!i.isBuffer(p))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof p);if(c===void 0&&(c=0),g===void 0&&(g=p?p.length:0),_===void 0&&(_=0),O===void 0&&(O=this.length),c<0||g>p.length||_<0||O>this.length)throw new RangeError("out of range index");if(_>=O&&c>=g)return 0;if(_>=O)return-1;if(c>=g)return 1;if(c>>>=0,g>>>=0,_>>>=0,O>>>=0,this===p)return 0;let w=O-_,R=g-c,N=Math.min(w,R),$=this.slice(_,O),ne=p.slice(c,g);for(let we=0;we<N;++we)if($[we]!==ne[we]){w=$[we],R=ne[we];break}return w<R?-1:R<w?1:0};function D(p,c,g,_,O){if(p.length===0)return-1;if(typeof g=="string"?(_=g,g=0):g>2147483647?g=2147483647:g<-2147483648&&(g=-2147483648),g=+g,ye(g)&&(g=O?0:p.length-1),g<0&&(g=p.length+g),g>=p.length){if(O)return-1;g=p.length-1}else if(g<0)if(O)g=0;else return-1;if(typeof c=="string"&&(c=i.from(c,_)),i.isBuffer(c))return c.length===0?-1:I(p,c,g,_,O);if(typeof c=="number")return c=c&255,typeof Uint8Array.prototype.indexOf=="function"?O?Uint8Array.prototype.indexOf.call(p,c,g):Uint8Array.prototype.lastIndexOf.call(p,c,g):I(p,[c],g,_,O);throw new TypeError("val must be string, number or Buffer")}function I(p,c,g,_,O){let w=1,R=p.length,N=c.length;if(_!==void 0&&(_=String(_).toLowerCase(),_==="ucs2"||_==="ucs-2"||_==="utf16le"||_==="utf-16le")){if(p.length<2||c.length<2)return-1;w=2,R/=2,N/=2,g/=2}function $(we,Ie){return w===1?we[Ie]:we.readUInt16BE(Ie*w)}let ne;if(O){let we=-1;for(ne=g;ne<R;ne++)if($(p,ne)===$(c,we===-1?0:ne-we)){if(we===-1&&(we=ne),ne-we+1===N)return we*w}else we!==-1&&(ne-=ne-we),we=-1}else for(g+N>R&&(g=R-N),ne=g;ne>=0;ne--){let we=!0;for(let Ie=0;Ie<N;Ie++)if($(p,ne+Ie)!==$(c,Ie)){we=!1;break}if(we)return ne}return-1}i.prototype.includes=function(p,c,g){return this.indexOf(p,c,g)!==-1},i.prototype.indexOf=function(p,c,g){return D(this,p,c,g,!0)},i.prototype.lastIndexOf=function(p,c,g){return D(this,p,c,g,!1)};function T(p,c,g,_){g=Number(g)||0;let O=p.length-g;_?(_=Number(_),_>O&&(_=O)):_=O;let w=c.length;_>w/2&&(_=w/2);let R;for(R=0;R<_;++R){let N=parseInt(c.substr(R*2,2),16);if(ye(N))return R;p[g+R]=N}return R}function x(p,c,g,_){return j(W(c,p.length-g),p,g,_)}function q(p,c,g,_){return j(F(c),p,g,_)}function G(p,c,g,_){return j(J(c),p,g,_)}function te(p,c,g,_){return j(re(c,p.length-g),p,g,_)}i.prototype.write=function(p,c,g,_){if(c===void 0)_="utf8",g=this.length,c=0;else if(g===void 0&&typeof c=="string")_=c,g=this.length,c=0;else if(isFinite(c))c=c>>>0,isFinite(g)?(g=g>>>0,_===void 0&&(_="utf8")):(_=g,g=void 0);else throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");let O=this.length-c;if((g===void 0||g>O)&&(g=O),p.length>0&&(g<0||c<0)||c>this.length)throw new RangeError("Attempt to write outside buffer bounds");_||(_="utf8");let w=!1;for(;;)switch(_){case"hex":return T(this,p,c,g);case"utf8":case"utf-8":return x(this,p,c,g);case"ascii":case"latin1":case"binary":return q(this,p,c,g);case"base64":return G(this,p,c,g);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return te(this,p,c,g);default:if(w)throw new TypeError("Unknown encoding: "+_);_=(""+_).toLowerCase(),w=!0}},i.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function v(p,c,g){return c===0&&g===p.length?e.fromByteArray(p):e.fromByteArray(p.slice(c,g))}function V(p,c,g){g=Math.min(p.length,g);let _=[],O=c;for(;O<g;){let w=p[O],R=null,N=w>239?4:w>223?3:w>191?2:1;if(O+N<=g){let $,ne,we,Ie;switch(N){case 1:w<128&&(R=w);break;case 2:$=p[O+1],($&192)===128&&(Ie=(w&31)<<6|$&63,Ie>127&&(R=Ie));break;case 3:$=p[O+1],ne=p[O+2],($&192)===128&&(ne&192)===128&&(Ie=(w&15)<<12|($&63)<<6|ne&63,Ie>2047&&(Ie<55296||Ie>57343)&&(R=Ie));break;case 4:$=p[O+1],ne=p[O+2],we=p[O+3],($&192)===128&&(ne&192)===128&&(we&192)===128&&(Ie=(w&15)<<18|($&63)<<12|(ne&63)<<6|we&63,Ie>65535&&Ie<1114112&&(R=Ie))}}R===null?(R=65533,N=1):R>65535&&(R-=65536,_.push(R>>>10&1023|55296),R=56320|R&1023),_.push(R),O+=N}return K(_)}let Z=4096;function K(p){let c=p.length;if(c<=Z)return String.fromCharCode.apply(String,p);let g="",_=0;for(;_<c;)g+=String.fromCharCode.apply(String,p.slice(_,_+=Z));return g}function me(p,c,g){let _="";g=Math.min(p.length,g);for(let O=c;O<g;++O)_+=String.fromCharCode(p[O]&127);return _}function oe(p,c,g){let _="";g=Math.min(p.length,g);for(let O=c;O<g;++O)_+=String.fromCharCode(p[O]);return _}function H(p,c,g){let _=p.length;(!c||c<0)&&(c=0),(!g||g<0||g>_)&&(g=_);let O="";for(let w=c;w<g;++w)O+=Ee[p[w]];return O}function be(p,c,g){let _=p.slice(c,g),O="";for(let w=0;w<_.length-1;w+=2)O+=String.fromCharCode(_[w]+_[w+1]*256);return O}i.prototype.slice=function(p,c){let g=this.length;p=~~p,c=c===void 0?g:~~c,p<0?(p+=g,p<0&&(p=0)):p>g&&(p=g),c<0?(c+=g,c<0&&(c=0)):c>g&&(c=g),c<p&&(c=p);let _=this.subarray(p,c);return Object.setPrototypeOf(_,i.prototype),_};function ie(p,c,g){if(p%1!==0||p<0)throw new RangeError("offset is not uint");if(p+c>g)throw new RangeError("Trying to access beyond buffer length")}i.prototype.readUintLE=i.prototype.readUIntLE=function(p,c,g){p=p>>>0,c=c>>>0,g||ie(p,c,this.length);let _=this[p],O=1,w=0;for(;++w<c&&(O*=256);)_+=this[p+w]*O;return _},i.prototype.readUintBE=i.prototype.readUIntBE=function(p,c,g){p=p>>>0,c=c>>>0,g||ie(p,c,this.length);let _=this[p+--c],O=1;for(;c>0&&(O*=256);)_+=this[p+--c]*O;return _},i.prototype.readUint8=i.prototype.readUInt8=function(p,c){return p=p>>>0,c||ie(p,1,this.length),this[p]},i.prototype.readUint16LE=i.prototype.readUInt16LE=function(p,c){return p=p>>>0,c||ie(p,2,this.length),this[p]|this[p+1]<<8},i.prototype.readUint16BE=i.prototype.readUInt16BE=function(p,c){return p=p>>>0,c||ie(p,2,this.length),this[p]<<8|this[p+1]},i.prototype.readUint32LE=i.prototype.readUInt32LE=function(p,c){return p=p>>>0,c||ie(p,4,this.length),(this[p]|this[p+1]<<8|this[p+2]<<16)+this[p+3]*16777216},i.prototype.readUint32BE=i.prototype.readUInt32BE=function(p,c){return p=p>>>0,c||ie(p,4,this.length),this[p]*16777216+(this[p+1]<<16|this[p+2]<<8|this[p+3])},i.prototype.readBigUInt64LE=ke(function(p){p=p>>>0,X(p,"offset");let c=this[p],g=this[p+7];(c===void 0||g===void 0)&&ue(p,this.length-8);let _=c+this[++p]*2**8+this[++p]*2**16+this[++p]*2**24,O=this[++p]+this[++p]*2**8+this[++p]*2**16+g*2**24;return BigInt(_)+(BigInt(O)<<BigInt(32))}),i.prototype.readBigUInt64BE=ke(function(p){p=p>>>0,X(p,"offset");let c=this[p],g=this[p+7];(c===void 0||g===void 0)&&ue(p,this.length-8);let _=c*2**24+this[++p]*2**16+this[++p]*2**8+this[++p],O=this[++p]*2**24+this[++p]*2**16+this[++p]*2**8+g;return(BigInt(_)<<BigInt(32))+BigInt(O)}),i.prototype.readIntLE=function(p,c,g){p=p>>>0,c=c>>>0,g||ie(p,c,this.length);let _=this[p],O=1,w=0;for(;++w<c&&(O*=256);)_+=this[p+w]*O;return O*=128,_>=O&&(_-=Math.pow(2,8*c)),_},i.prototype.readIntBE=function(p,c,g){p=p>>>0,c=c>>>0,g||ie(p,c,this.length);let _=c,O=1,w=this[p+--_];for(;_>0&&(O*=256);)w+=this[p+--_]*O;return O*=128,w>=O&&(w-=Math.pow(2,8*c)),w},i.prototype.readInt8=function(p,c){return p=p>>>0,c||ie(p,1,this.length),this[p]&128?(255-this[p]+1)*-1:this[p]},i.prototype.readInt16LE=function(p,c){p=p>>>0,c||ie(p,2,this.length);let g=this[p]|this[p+1]<<8;return g&32768?g|4294901760:g},i.prototype.readInt16BE=function(p,c){p=p>>>0,c||ie(p,2,this.length);let g=this[p+1]|this[p]<<8;return g&32768?g|4294901760:g},i.prototype.readInt32LE=function(p,c){return p=p>>>0,c||ie(p,4,this.length),this[p]|this[p+1]<<8|this[p+2]<<16|this[p+3]<<24},i.prototype.readInt32BE=function(p,c){return p=p>>>0,c||ie(p,4,this.length),this[p]<<24|this[p+1]<<16|this[p+2]<<8|this[p+3]},i.prototype.readBigInt64LE=ke(function(p){p=p>>>0,X(p,"offset");let c=this[p],g=this[p+7];(c===void 0||g===void 0)&&ue(p,this.length-8);let _=this[p+4]+this[p+5]*2**8+this[p+6]*2**16+(g<<24);return(BigInt(_)<<BigInt(32))+BigInt(c+this[++p]*2**8+this[++p]*2**16+this[++p]*2**24)}),i.prototype.readBigInt64BE=ke(function(p){p=p>>>0,X(p,"offset");let c=this[p],g=this[p+7];(c===void 0||g===void 0)&&ue(p,this.length-8);let _=(c<<24)+this[++p]*2**16+this[++p]*2**8+this[++p];return(BigInt(_)<<BigInt(32))+BigInt(this[++p]*2**24+this[++p]*2**16+this[++p]*2**8+g)}),i.prototype.readFloatLE=function(p,c){return p=p>>>0,c||ie(p,4,this.length),r.read(this,p,!0,23,4)},i.prototype.readFloatBE=function(p,c){return p=p>>>0,c||ie(p,4,this.length),r.read(this,p,!1,23,4)},i.prototype.readDoubleLE=function(p,c){return p=p>>>0,c||ie(p,8,this.length),r.read(this,p,!0,52,8)},i.prototype.readDoubleBE=function(p,c){return p=p>>>0,c||ie(p,8,this.length),r.read(this,p,!1,52,8)};function _e(p,c,g,_,O,w){if(!i.isBuffer(p))throw new TypeError('"buffer" argument must be a Buffer instance');if(c>O||c<w)throw new RangeError('"value" argument is out of bounds');if(g+_>p.length)throw new RangeError("Index out of range")}i.prototype.writeUintLE=i.prototype.writeUIntLE=function(p,c,g,_){if(p=+p,c=c>>>0,g=g>>>0,!_){let R=Math.pow(2,8*g)-1;_e(this,p,c,g,R,0)}let O=1,w=0;for(this[c]=p&255;++w<g&&(O*=256);)this[c+w]=p/O&255;return c+g},i.prototype.writeUintBE=i.prototype.writeUIntBE=function(p,c,g,_){if(p=+p,c=c>>>0,g=g>>>0,!_){let R=Math.pow(2,8*g)-1;_e(this,p,c,g,R,0)}let O=g-1,w=1;for(this[c+O]=p&255;--O>=0&&(w*=256);)this[c+O]=p/w&255;return c+g},i.prototype.writeUint8=i.prototype.writeUInt8=function(p,c,g){return p=+p,c=c>>>0,g||_e(this,p,c,1,255,0),this[c]=p&255,c+1},i.prototype.writeUint16LE=i.prototype.writeUInt16LE=function(p,c,g){return p=+p,c=c>>>0,g||_e(this,p,c,2,65535,0),this[c]=p&255,this[c+1]=p>>>8,c+2},i.prototype.writeUint16BE=i.prototype.writeUInt16BE=function(p,c,g){return p=+p,c=c>>>0,g||_e(this,p,c,2,65535,0),this[c]=p>>>8,this[c+1]=p&255,c+2},i.prototype.writeUint32LE=i.prototype.writeUInt32LE=function(p,c,g){return p=+p,c=c>>>0,g||_e(this,p,c,4,4294967295,0),this[c+3]=p>>>24,this[c+2]=p>>>16,this[c+1]=p>>>8,this[c]=p&255,c+4},i.prototype.writeUint32BE=i.prototype.writeUInt32BE=function(p,c,g){return p=+p,c=c>>>0,g||_e(this,p,c,4,4294967295,0),this[c]=p>>>24,this[c+1]=p>>>16,this[c+2]=p>>>8,this[c+3]=p&255,c+4};function k(p,c,g,_,O){ee(c,_,O,p,g,7);let w=Number(c&BigInt(4294967295));p[g++]=w,w=w>>8,p[g++]=w,w=w>>8,p[g++]=w,w=w>>8,p[g++]=w;let R=Number(c>>BigInt(32)&BigInt(4294967295));return p[g++]=R,R=R>>8,p[g++]=R,R=R>>8,p[g++]=R,R=R>>8,p[g++]=R,g}function Q(p,c,g,_,O){ee(c,_,O,p,g,7);let w=Number(c&BigInt(4294967295));p[g+7]=w,w=w>>8,p[g+6]=w,w=w>>8,p[g+5]=w,w=w>>8,p[g+4]=w;let R=Number(c>>BigInt(32)&BigInt(4294967295));return p[g+3]=R,R=R>>8,p[g+2]=R,R=R>>8,p[g+1]=R,R=R>>8,p[g]=R,g+8}i.prototype.writeBigUInt64LE=ke(function(p,c=0){return k(this,p,c,BigInt(0),BigInt("0xffffffffffffffff"))}),i.prototype.writeBigUInt64BE=ke(function(p,c=0){return Q(this,p,c,BigInt(0),BigInt("0xffffffffffffffff"))}),i.prototype.writeIntLE=function(p,c,g,_){if(p=+p,c=c>>>0,!_){let N=Math.pow(2,8*g-1);_e(this,p,c,g,N-1,-N)}let O=0,w=1,R=0;for(this[c]=p&255;++O<g&&(w*=256);)p<0&&R===0&&this[c+O-1]!==0&&(R=1),this[c+O]=(p/w>>0)-R&255;return c+g},i.prototype.writeIntBE=function(p,c,g,_){if(p=+p,c=c>>>0,!_){let N=Math.pow(2,8*g-1);_e(this,p,c,g,N-1,-N)}let O=g-1,w=1,R=0;for(this[c+O]=p&255;--O>=0&&(w*=256);)p<0&&R===0&&this[c+O+1]!==0&&(R=1),this[c+O]=(p/w>>0)-R&255;return c+g},i.prototype.writeInt8=function(p,c,g){return p=+p,c=c>>>0,g||_e(this,p,c,1,127,-128),p<0&&(p=255+p+1),this[c]=p&255,c+1},i.prototype.writeInt16LE=function(p,c,g){return p=+p,c=c>>>0,g||_e(this,p,c,2,32767,-32768),this[c]=p&255,this[c+1]=p>>>8,c+2},i.prototype.writeInt16BE=function(p,c,g){return p=+p,c=c>>>0,g||_e(this,p,c,2,32767,-32768),this[c]=p>>>8,this[c+1]=p&255,c+2},i.prototype.writeInt32LE=function(p,c,g){return p=+p,c=c>>>0,g||_e(this,p,c,4,2147483647,-2147483648),this[c]=p&255,this[c+1]=p>>>8,this[c+2]=p>>>16,this[c+3]=p>>>24,c+4},i.prototype.writeInt32BE=function(p,c,g){return p=+p,c=c>>>0,g||_e(this,p,c,4,2147483647,-2147483648),p<0&&(p=4294967295+p+1),this[c]=p>>>24,this[c+1]=p>>>16,this[c+2]=p>>>8,this[c+3]=p&255,c+4},i.prototype.writeBigInt64LE=ke(function(p,c=0){return k(this,p,c,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))}),i.prototype.writeBigInt64BE=ke(function(p,c=0){return Q(this,p,c,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))});function se(p,c,g,_,O,w){if(g+_>p.length)throw new RangeError("Index out of range");if(g<0)throw new RangeError("Index out of range")}function Ae(p,c,g,_,O){return c=+c,g=g>>>0,O||se(p,c,g,4),r.write(p,c,g,_,23,4),g+4}i.prototype.writeFloatLE=function(p,c,g){return Ae(this,p,c,!0,g)},i.prototype.writeFloatBE=function(p,c,g){return Ae(this,p,c,!1,g)};function he(p,c,g,_,O){return c=+c,g=g>>>0,O||se(p,c,g,8),r.write(p,c,g,_,52,8),g+8}i.prototype.writeDoubleLE=function(p,c,g){return he(this,p,c,!0,g)},i.prototype.writeDoubleBE=function(p,c,g){return he(this,p,c,!1,g)},i.prototype.copy=function(p,c,g,_){if(!i.isBuffer(p))throw new TypeError("argument should be a Buffer");if(g||(g=0),!_&&_!==0&&(_=this.length),c>=p.length&&(c=p.length),c||(c=0),_>0&&_<g&&(_=g),_===g||p.length===0||this.length===0)return 0;if(c<0)throw new RangeError("targetStart out of bounds");if(g<0||g>=this.length)throw new RangeError("Index out of range");if(_<0)throw new RangeError("sourceEnd out of bounds");_>this.length&&(_=this.length),p.length-c<_-g&&(_=p.length-c+g);let O=_-g;return this===p&&typeof Uint8Array.prototype.copyWithin=="function"?this.copyWithin(c,g,_):Uint8Array.prototype.set.call(p,this.subarray(g,_),c),O},i.prototype.fill=function(p,c,g,_){if(typeof p=="string"){if(typeof c=="string"?(_=c,c=0,g=this.length):typeof g=="string"&&(_=g,g=this.length),_!==void 0&&typeof _!="string")throw new TypeError("encoding must be a string");if(typeof _=="string"&&!i.isEncoding(_))throw new TypeError("Unknown encoding: "+_);if(p.length===1){let w=p.charCodeAt(0);(_==="utf8"&&w<128||_==="latin1")&&(p=w)}}else typeof p=="number"?p=p&255:typeof p=="boolean"&&(p=Number(p));if(c<0||this.length<c||this.length<g)throw new RangeError("Out of range index");if(g<=c)return this;c=c>>>0,g=g===void 0?this.length:g>>>0,p||(p=0);let O;if(typeof p=="number")for(O=c;O<g;++O)this[O]=p;else{let w=i.isBuffer(p)?p:i.from(p,_),R=w.length;if(R===0)throw new TypeError('The value "'+p+'" is invalid for argument "value"');for(O=0;O<g-c;++O)this[O+c]=w[O%R]}return this};let B={};function S(p,c,g){B[p]=class extends g{constructor(){super(),Object.defineProperty(this,"message",{value:c.apply(this,arguments),writable:!0,configurable:!0}),this.name=`${this.name} [${p}]`,this.stack,delete this.name}get code(){return p}set code(_){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:_,writable:!0})}toString(){return`${this.name} [${p}]: ${this.message}`}}}S("ERR_BUFFER_OUT_OF_BOUNDS",function(p){return p?`${p} is outside of buffer bounds`:"Attempt to access memory outside buffer bounds"},RangeError),S("ERR_INVALID_ARG_TYPE",function(p,c){return`The "${p}" argument must be of type number. Received type ${typeof c}`},TypeError),S("ERR_OUT_OF_RANGE",function(p,c,g){let _=`The value of "${p}" is out of range.`,O=g;return Number.isInteger(g)&&Math.abs(g)>2**32?O=z(String(g)):typeof g=="bigint"&&(O=String(g),(g>BigInt(2)**BigInt(32)||g<-(BigInt(2)**BigInt(32)))&&(O=z(O)),O+="n"),_+=` It must be ${c}. Received ${O}`,_},RangeError);function z(p){let c="",g=p.length,_=p[0]==="-"?1:0;for(;g>=_+4;g-=3)c=`_${p.slice(g-3,g)}${c}`;return`${p.slice(0,g)}${c}`}function ae(p,c,g){X(c,"offset"),(p[c]===void 0||p[c+g]===void 0)&&ue(c,p.length-(g+1))}function ee(p,c,g,_,O,w){if(p>g||p<c){let R=typeof c=="bigint"?"n":"",N;throw w>3?c===0||c===BigInt(0)?N=`>= 0${R} and < 2${R} ** ${(w+1)*8}${R}`:N=`>= -(2${R} ** ${(w+1)*8-1}${R}) and < 2 ** ${(w+1)*8-1}${R}`:N=`>= ${c}${R} and <= ${g}${R}`,new B.ERR_OUT_OF_RANGE("value",N,p)}ae(_,O,w)}function X(p,c){if(typeof p!="number")throw new B.ERR_INVALID_ARG_TYPE(c,"number",p)}function ue(p,c,g){throw Math.floor(p)!==p?(X(p,g),new B.ERR_OUT_OF_RANGE(g||"offset","an integer",p)):c<0?new B.ERR_BUFFER_OUT_OF_BOUNDS:new B.ERR_OUT_OF_RANGE(g||"offset",`>= ${g?1:0} and <= ${c}`,p)}let le=/[^+/0-9A-Za-z-_]/g;function P(p){if(p=p.split("=")[0],p=p.trim().replace(le,""),p.length<2)return"";for(;p.length%4!==0;)p=p+"=";return p}function W(p,c){c=c||1/0;let g,_=p.length,O=null,w=[];for(let R=0;R<_;++R){if(g=p.charCodeAt(R),g>55295&&g<57344){if(!O){if(g>56319){(c-=3)>-1&&w.push(239,191,189);continue}else if(R+1===_){(c-=3)>-1&&w.push(239,191,189);continue}O=g;continue}if(g<56320){(c-=3)>-1&&w.push(239,191,189),O=g;continue}g=(O-55296<<10|g-56320)+65536}else O&&(c-=3)>-1&&w.push(239,191,189);if(O=null,g<128){if((c-=1)<0)break;w.push(g)}else if(g<2048){if((c-=2)<0)break;w.push(g>>6|192,g&63|128)}else if(g<65536){if((c-=3)<0)break;w.push(g>>12|224,g>>6&63|128,g&63|128)}else if(g<1114112){if((c-=4)<0)break;w.push(g>>18|240,g>>12&63|128,g>>6&63|128,g&63|128)}else throw new Error("Invalid code point")}return w}function F(p){let c=[];for(let g=0;g<p.length;++g)c.push(p.charCodeAt(g)&255);return c}function re(p,c){let g,_,O,w=[];for(let R=0;R<p.length&&!((c-=2)<0);++R)g=p.charCodeAt(R),_=g>>8,O=g%256,w.push(O),w.push(_);return w}function J(p){return e.toByteArray(P(p))}function j(p,c,g,_){let O;for(O=0;O<_&&!(O+g>=c.length||O>=p.length);++O)c[O+g]=p[O];return O}function Y(p,c){return p instanceof c||p!=null&&p.constructor!=null&&p.constructor.name!=null&&p.constructor.name===c.name}function ye(p){return p!==p}let Ee=function(){let p="0123456789abcdef",c=new Array(256);for(let g=0;g<16;++g){let _=g*16;for(let O=0;O<16;++O)c[_+O]=p[g]+p[O]}return c}();function ke(p){return typeof BigInt>"u"?Le:p}function Le(){throw new Error("BigInt not supported")}return $t}var Ir,Qn,Nr,Gn,$t,Jn,Nt,hi,Ws,qs,ft=ht(()=>{ce(),de(),fe(),Ir={},Qn=!1,Nr={},Gn=!1,$t={},Jn=!1,Nt=Fl(),Nt.Buffer,Nt.SlowBuffer,Nt.INSPECT_MAX_BYTES,Nt.kMaxLength,hi=Nt.Buffer,Ws=Nt.INSPECT_MAX_BYTES,qs=Nt.kMaxLength}),de=ht(()=>{ft()}),Wl=ve(e=>{ce(),de(),fe(),Object.defineProperty(e,"__esModule",{value:!0});var r=class{constructor(t){this.aliasToTopic={},this.max=t}put(t,a){return a===0||a>this.max?!1:(this.aliasToTopic[a]=t,this.length=Object.keys(this.aliasToTopic).length,!0)}getTopicByAlias(t){return this.aliasToTopic[t]}clear(){this.aliasToTopic={}}};e.default=r}),ot=ve((e,r)=>{ce(),de(),fe(),r.exports={ArrayIsArray(t){return Array.isArray(t)},ArrayPrototypeIncludes(t,a){return t.includes(a)},ArrayPrototypeIndexOf(t,a){return t.indexOf(a)},ArrayPrototypeJoin(t,a){return t.join(a)},ArrayPrototypeMap(t,a){return t.map(a)},ArrayPrototypePop(t,a){return t.pop(a)},ArrayPrototypePush(t,a){return t.push(a)},ArrayPrototypeSlice(t,a,u){return t.slice(a,u)},Error,FunctionPrototypeCall(t,a,...u){return t.call(a,...u)},FunctionPrototypeSymbolHasInstance(t,a){return Function.prototype[Symbol.hasInstance].call(t,a)},MathFloor:Math.floor,Number,NumberIsInteger:Number.isInteger,NumberIsNaN:Number.isNaN,NumberMAX_SAFE_INTEGER:Number.MAX_SAFE_INTEGER,NumberMIN_SAFE_INTEGER:Number.MIN_SAFE_INTEGER,NumberParseInt:Number.parseInt,ObjectDefineProperties(t,a){return Object.defineProperties(t,a)},ObjectDefineProperty(t,a,u){return Object.defineProperty(t,a,u)},ObjectGetOwnPropertyDescriptor(t,a){return Object.getOwnPropertyDescriptor(t,a)},ObjectKeys(t){return Object.keys(t)},ObjectSetPrototypeOf(t,a){return Object.setPrototypeOf(t,a)},Promise,PromisePrototypeCatch(t,a){return t.catch(a)},PromisePrototypeThen(t,a,u){return t.then(a,u)},PromiseReject(t){return Promise.reject(t)},ReflectApply:Reflect.apply,RegExpPrototypeTest(t,a){return t.test(a)},SafeSet:Set,String,StringPrototypeSlice(t,a,u){return t.slice(a,u)},StringPrototypeToLowerCase(t){return t.toLowerCase()},StringPrototypeToUpperCase(t){return t.toUpperCase()},StringPrototypeTrim(t){return t.trim()},Symbol,SymbolFor:Symbol.for,SymbolAsyncIterator:Symbol.asyncIterator,SymbolHasInstance:Symbol.hasInstance,SymbolIterator:Symbol.iterator,TypedArrayPrototypeSet(t,a,u){return t.set(a,u)},Uint8Array}}),Vt=ve((e,r)=>{ce(),de(),fe();var t=(ft(),Ke(ct)),a=Object.getPrototypeOf(async function(){}).constructor,u=globalThis.Blob||t.Blob,n=typeof u<"u"?function(s){return s instanceof u}:function(s){return!1},i=class extends Error{constructor(s){if(!Array.isArray(s))throw new TypeError(`Expected input to be an Array, got ${typeof s}`);let o="";for(let l=0;l<s.length;l++)o+=`    ${s[l].stack}
`;super(o),this.name="AggregateError",this.errors=s}};r.exports={AggregateError:i,kEmptyObject:Object.freeze({}),once(s){let o=!1;return function(...l){o||(o=!0,s.apply(this,l))}},createDeferredPromise:function(){let s,o;return{promise:new Promise((l,h)=>{s=l,o=h}),resolve:s,reject:o}},promisify(s){return new Promise((o,l)=>{s((h,...f)=>h?l(h):o(...f))})},debuglog(){return function(){}},format(s,...o){return s.replace(/%([sdifj])/g,function(...[l,h]){let f=o.shift();return h==="f"?f.toFixed(6):h==="j"?JSON.stringify(f):h==="s"&&typeof f=="object"?`${f.constructor!==Object?f.constructor.name:""} {}`.trim():f.toString()})},inspect(s){switch(typeof s){case"string":if(s.includes("'"))if(s.includes('"')){if(!s.includes("`")&&!s.includes("${"))return`\`${s}\``}else return`"${s}"`;return`'${s}'`;case"number":return isNaN(s)?"NaN":Object.is(s,-0)?String(s):s;case"bigint":return`${String(s)}n`;case"boolean":case"undefined":return String(s);case"object":return"{}"}},types:{isAsyncFunction(s){return s instanceof a},isArrayBufferView(s){return ArrayBuffer.isView(s)}},isBlob:n},r.exports.promisify.custom=Symbol.for("nodejs.util.promisify.custom")}),yo=ve((e,r)=>{ce(),de(),fe();var{AbortController:t,AbortSignal:a}=typeof self<"u"?self:typeof window<"u"?window:void 0;r.exports=t,r.exports.AbortSignal=a,r.exports.default=t}),wt=ve((e,r)=>{ce(),de(),fe();var{format:t,inspect:a,AggregateError:u}=Vt(),n=globalThis.AggregateError||u,i=Symbol("kIsNodeError"),s=["string","function","number","object","Function","Object","boolean","bigint","symbol"],o=/^([A-Z][a-z0-9]*)+$/,l="__node_internal_",h={};function f(C,E){if(!C)throw new h.ERR_INTERNAL_ASSERTION(E)}function d(C){let E="",L=C.length,D=C[0]==="-"?1:0;for(;L>=D+4;L-=3)E=`_${C.slice(L-3,L)}${E}`;return`${C.slice(0,L)}${E}`}function m(C,E,L){if(typeof E=="function")return f(E.length<=L.length,`Code: ${C}; The provided arguments length (${L.length}) does not match the required ones (${E.length}).`),E(...L);let D=(E.match(/%[dfijoOs]/g)||[]).length;return f(D===L.length,`Code: ${C}; The provided arguments length (${L.length}) does not match the required ones (${D}).`),L.length===0?E:t(E,...L)}function b(C,E,L){L||(L=Error);class D extends L{constructor(...T){super(m(C,E,T))}toString(){return`${this.name} [${C}]: ${this.message}`}}Object.defineProperties(D.prototype,{name:{value:L.name,writable:!0,enumerable:!1,configurable:!0},toString:{value(){return`${this.name} [${C}]: ${this.message}`},writable:!0,enumerable:!1,configurable:!0}}),D.prototype.code=C,D.prototype[i]=!0,h[C]=D}function y(C){let E=l+C.name;return Object.defineProperty(C,"name",{value:E}),C}function A(C,E){if(C&&E&&C!==E){if(Array.isArray(E.errors))return E.errors.push(C),E;let L=new n([E,C],E.message);return L.code=E.code,L}return C||E}var M=class extends Error{constructor(C="The operation was aborted",E=void 0){if(E!==void 0&&typeof E!="object")throw new h.ERR_INVALID_ARG_TYPE("options","Object",E);super(C,E),this.code="ABORT_ERR",this.name="AbortError"}};b("ERR_ASSERTION","%s",Error),b("ERR_INVALID_ARG_TYPE",(C,E,L)=>{f(typeof C=="string","'name' must be a string"),Array.isArray(E)||(E=[E]);let D="The ";C.endsWith(" argument")?D+=`${C} `:D+=`"${C}" ${C.includes(".")?"property":"argument"} `,D+="must be ";let I=[],T=[],x=[];for(let G of E)f(typeof G=="string","All expected entries have to be of type string"),s.includes(G)?I.push(G.toLowerCase()):o.test(G)?T.push(G):(f(G!=="object",'The value "object" should be written as "Object"'),x.push(G));if(T.length>0){let G=I.indexOf("object");G!==-1&&(I.splice(I,G,1),T.push("Object"))}if(I.length>0){switch(I.length){case 1:D+=`of type ${I[0]}`;break;case 2:D+=`one of type ${I[0]} or ${I[1]}`;break;default:{let G=I.pop();D+=`one of type ${I.join(", ")}, or ${G}`}}(T.length>0||x.length>0)&&(D+=" or ")}if(T.length>0){switch(T.length){case 1:D+=`an instance of ${T[0]}`;break;case 2:D+=`an instance of ${T[0]} or ${T[1]}`;break;default:{let G=T.pop();D+=`an instance of ${T.join(", ")}, or ${G}`}}x.length>0&&(D+=" or ")}switch(x.length){case 0:break;case 1:x[0].toLowerCase()!==x[0]&&(D+="an "),D+=`${x[0]}`;break;case 2:D+=`one of ${x[0]} or ${x[1]}`;break;default:{let G=x.pop();D+=`one of ${x.join(", ")}, or ${G}`}}if(L==null)D+=`. Received ${L}`;else if(typeof L=="function"&&L.name)D+=`. Received function ${L.name}`;else if(typeof L=="object"){var q;if((q=L.constructor)!==null&&q!==void 0&&q.name)D+=`. Received an instance of ${L.constructor.name}`;else{let G=a(L,{depth:-1});D+=`. Received ${G}`}}else{let G=a(L,{colors:!1});G.length>25&&(G=`${G.slice(0,25)}...`),D+=`. Received type ${typeof L} (${G})`}return D},TypeError),b("ERR_INVALID_ARG_VALUE",(C,E,L="is invalid")=>{let D=a(E);return D.length>128&&(D=D.slice(0,128)+"..."),`The ${C.includes(".")?"property":"argument"} '${C}' ${L}. Received ${D}`},TypeError),b("ERR_INVALID_RETURN_VALUE",(C,E,L)=>{var D;let I=L!=null&&(D=L.constructor)!==null&&D!==void 0&&D.name?`instance of ${L.constructor.name}`:`type ${typeof L}`;return`Expected ${C} to be returned from the "${E}" function but got ${I}.`},TypeError),b("ERR_MISSING_ARGS",(...C)=>{f(C.length>0,"At least one arg needs to be specified");let E,L=C.length;switch(C=(Array.isArray(C)?C:[C]).map(D=>`"${D}"`).join(" or "),L){case 1:E+=`The ${C[0]} argument`;break;case 2:E+=`The ${C[0]} and ${C[1]} arguments`;break;default:{let D=C.pop();E+=`The ${C.join(", ")}, and ${D} arguments`}break}return`${E} must be specified`},TypeError),b("ERR_OUT_OF_RANGE",(C,E,L)=>{f(E,'Missing "range" argument');let D;return Number.isInteger(L)&&Math.abs(L)>2**32?D=d(String(L)):typeof L=="bigint"?(D=String(L),(L>2n**32n||L<-(2n**32n))&&(D=d(D)),D+="n"):D=a(L),`The value of "${C}" is out of range. It must be ${E}. Received ${D}`},RangeError),b("ERR_MULTIPLE_CALLBACK","Callback called multiple times",Error),b("ERR_METHOD_NOT_IMPLEMENTED","The %s method is not implemented",Error),b("ERR_STREAM_ALREADY_FINISHED","Cannot call %s after a stream was finished",Error),b("ERR_STREAM_CANNOT_PIPE","Cannot pipe, not readable",Error),b("ERR_STREAM_DESTROYED","Cannot call %s after a stream was destroyed",Error),b("ERR_STREAM_NULL_VALUES","May not write null values to stream",TypeError),b("ERR_STREAM_PREMATURE_CLOSE","Premature close",Error),b("ERR_STREAM_PUSH_AFTER_EOF","stream.push() after EOF",Error),b("ERR_STREAM_UNSHIFT_AFTER_END_EVENT","stream.unshift() after end event",Error),b("ERR_STREAM_WRITE_AFTER_END","write after end",Error),b("ERR_UNKNOWN_ENCODING","Unknown encoding: %s",TypeError),r.exports={AbortError:M,aggregateTwoErrors:y(A),hideStackFrames:y,codes:h}}),bi=ve((e,r)=>{ce(),de(),fe();var{ArrayIsArray:t,ArrayPrototypeIncludes:a,ArrayPrototypeJoin:u,ArrayPrototypeMap:n,NumberIsInteger:i,NumberIsNaN:s,NumberMAX_SAFE_INTEGER:o,NumberMIN_SAFE_INTEGER:l,NumberParseInt:h,ObjectPrototypeHasOwnProperty:f,RegExpPrototypeExec:d,String:m,StringPrototypeToUpperCase:b,StringPrototypeTrim:y}=ot(),{hideStackFrames:A,codes:{ERR_SOCKET_BAD_PORT:M,ERR_INVALID_ARG_TYPE:C,ERR_INVALID_ARG_VALUE:E,ERR_OUT_OF_RANGE:L,ERR_UNKNOWN_SIGNAL:D}}=wt(),{normalizeEncoding:I}=Vt(),{isAsyncFunction:T,isArrayBufferView:x}=Vt().types,q={};function G(j){return j===(j|0)}function te(j){return j===j>>>0}var v=/^[0-7]+$/,V="must be a 32-bit unsigned integer or an octal string";function Z(j,Y,ye){if(typeof j>"u"&&(j=ye),typeof j=="string"){if(d(v,j)===null)throw new E(Y,j,V);j=h(j,8)}return oe(j,Y),j}var K=A((j,Y,ye=l,Ee=o)=>{if(typeof j!="number")throw new C(Y,"number",j);if(!i(j))throw new L(Y,"an integer",j);if(j<ye||j>Ee)throw new L(Y,`>= ${ye} && <= ${Ee}`,j)}),me=A((j,Y,ye=-2147483648,Ee=2147483647)=>{if(typeof j!="number")throw new C(Y,"number",j);if(!i(j))throw new L(Y,"an integer",j);if(j<ye||j>Ee)throw new L(Y,`>= ${ye} && <= ${Ee}`,j)}),oe=A((j,Y,ye=!1)=>{if(typeof j!="number")throw new C(Y,"number",j);if(!i(j))throw new L(Y,"an integer",j);let Ee=ye?1:0,ke=4294967295;if(j<Ee||j>ke)throw new L(Y,`>= ${Ee} && <= ${ke}`,j)});function H(j,Y){if(typeof j!="string")throw new C(Y,"string",j)}function be(j,Y,ye=void 0,Ee){if(typeof j!="number")throw new C(Y,"number",j);if(ye!=null&&j<ye||Ee!=null&&j>Ee||(ye!=null||Ee!=null)&&s(j))throw new L(Y,`${ye!=null?`>= ${ye}`:""}${ye!=null&&Ee!=null?" && ":""}${Ee!=null?`<= ${Ee}`:""}`,j)}var ie=A((j,Y,ye)=>{if(!a(ye,j)){let Ee="must be one of: "+u(n(ye,ke=>typeof ke=="string"?`'${ke}'`:m(ke)),", ");throw new E(Y,j,Ee)}});function _e(j,Y){if(typeof j!="boolean")throw new C(Y,"boolean",j)}function k(j,Y,ye){return j==null||!f(j,Y)?ye:j[Y]}var Q=A((j,Y,ye=null)=>{let Ee=k(ye,"allowArray",!1),ke=k(ye,"allowFunction",!1);if(!k(ye,"nullable",!1)&&j===null||!Ee&&t(j)||typeof j!="object"&&(!ke||typeof j!="function"))throw new C(Y,"Object",j)}),se=A((j,Y)=>{if(j!=null&&typeof j!="object"&&typeof j!="function")throw new C(Y,"a dictionary",j)}),Ae=A((j,Y,ye=0)=>{if(!t(j))throw new C(Y,"Array",j);if(j.length<ye){let Ee=`must be longer than ${ye}`;throw new E(Y,j,Ee)}});function he(j,Y){Ae(j,Y);for(let ye=0;ye<j.length;ye++)H(j[ye],`${Y}[${ye}]`)}function B(j,Y){Ae(j,Y);for(let ye=0;ye<j.length;ye++)_e(j[ye],`${Y}[${ye}]`)}function S(j,Y="signal"){if(H(j,Y),q[j]===void 0)throw q[b(j)]!==void 0?new D(j+" (signals must use all capital letters)"):new D(j)}var z=A((j,Y="buffer")=>{if(!x(j))throw new C(Y,["Buffer","TypedArray","DataView"],j)});function ae(j,Y){let ye=I(Y),Ee=j.length;if(ye==="hex"&&Ee%2!==0)throw new E("encoding",Y,`is invalid for data of length ${Ee}`)}function ee(j,Y="Port",ye=!0){if(typeof j!="number"&&typeof j!="string"||typeof j=="string"&&y(j).length===0||+j!==+j>>>0||j>65535||j===0&&!ye)throw new M(Y,j,ye);return j|0}var X=A((j,Y)=>{if(j!==void 0&&(j===null||typeof j!="object"||!("aborted"in j)))throw new C(Y,"AbortSignal",j)}),ue=A((j,Y)=>{if(typeof j!="function")throw new C(Y,"Function",j)}),le=A((j,Y)=>{if(typeof j!="function"||T(j))throw new C(Y,"Function",j)}),P=A((j,Y)=>{if(j!==void 0)throw new C(Y,"undefined",j)});function W(j,Y,ye){if(!a(ye,j))throw new C(Y,`('${u(ye,"|")}')`,j)}var F=/^(?:<[^>]*>)(?:\s*;\s*[^;"\s]+(?:=(")?[^;"\s]*\1)?)*$/;function re(j,Y){if(typeof j>"u"||!d(F,j))throw new E(Y,j,'must be an array or string of format "</styles.css>; rel=preload; as=style"')}function J(j){if(typeof j=="string")return re(j,"hints"),j;if(t(j)){let Y=j.length,ye="";if(Y===0)return ye;for(let Ee=0;Ee<Y;Ee++){let ke=j[Ee];re(ke,"hints"),ye+=ke,Ee!==Y-1&&(ye+=", ")}return ye}throw new E("hints",j,'must be an array or string of format "</styles.css>; rel=preload; as=style"')}r.exports={isInt32:G,isUint32:te,parseFileMode:Z,validateArray:Ae,validateStringArray:he,validateBooleanArray:B,validateBoolean:_e,validateBuffer:z,validateDictionary:se,validateEncoding:ae,validateFunction:ue,validateInt32:me,validateInteger:K,validateNumber:be,validateObject:Q,validateOneOf:ie,validatePlainFunction:le,validatePort:ee,validateSignalName:S,validateString:H,validateUint32:oe,validateUndefined:P,validateUnion:W,validateAbortSignal:X,validateLinkHeaderValue:J}}),vr=ve((e,r)=>{ce(),de(),fe();var t=r.exports={},a,u;function n(){throw new Error("setTimeout has not been defined")}function i(){throw new Error("clearTimeout has not been defined")}(function(){try{typeof setTimeout=="function"?a=setTimeout:a=n}catch{a=n}try{typeof clearTimeout=="function"?u=clearTimeout:u=i}catch{u=i}})();function s(M){if(a===setTimeout)return setTimeout(M,0);if((a===n||!a)&&setTimeout)return a=setTimeout,setTimeout(M,0);try{return a(M,0)}catch{try{return a.call(null,M,0)}catch{return a.call(this,M,0)}}}function o(M){if(u===clearTimeout)return clearTimeout(M);if((u===i||!u)&&clearTimeout)return u=clearTimeout,clearTimeout(M);try{return u(M)}catch{try{return u.call(null,M)}catch{return u.call(this,M)}}}var l=[],h=!1,f,d=-1;function m(){!h||!f||(h=!1,f.length?l=f.concat(l):d=-1,l.length&&b())}function b(){if(!h){var M=s(m);h=!0;for(var C=l.length;C;){for(f=l,l=[];++d<C;)f&&f[d].run();d=-1,C=l.length}f=null,h=!1,o(M)}}t.nextTick=function(M){var C=new Array(arguments.length-1);if(arguments.length>1)for(var E=1;E<arguments.length;E++)C[E-1]=arguments[E];l.push(new y(M,C)),l.length===1&&!h&&s(b)};function y(M,C){this.fun=M,this.array=C}y.prototype.run=function(){this.fun.apply(null,this.array)},t.title="browser",t.browser=!0,t.env={},t.argv=[],t.version="",t.versions={};function A(){}t.on=A,t.addListener=A,t.once=A,t.off=A,t.removeListener=A,t.removeAllListeners=A,t.emit=A,t.prependListener=A,t.prependOnceListener=A,t.listeners=function(M){return[]},t.binding=function(M){throw new Error("process.binding is not supported")},t.cwd=function(){return"/"},t.chdir=function(M){throw new Error("process.chdir is not supported")},t.umask=function(){return 0}}),Yt=ve((e,r)=>{ce(),de(),fe();var{Symbol:t,SymbolAsyncIterator:a,SymbolIterator:u,SymbolFor:n}=ot(),i=t("kDestroyed"),s=t("kIsErrored"),o=t("kIsReadable"),l=t("kIsDisturbed"),h=n("nodejs.webstream.isClosedPromise"),f=n("nodejs.webstream.controllerErrorFunction");function d(k,Q=!1){var se;return!!(k&&typeof k.pipe=="function"&&typeof k.on=="function"&&(!Q||typeof k.pause=="function"&&typeof k.resume=="function")&&(!k._writableState||((se=k._readableState)===null||se===void 0?void 0:se.readable)!==!1)&&(!k._writableState||k._readableState))}function m(k){var Q;return!!(k&&typeof k.write=="function"&&typeof k.on=="function"&&(!k._readableState||((Q=k._writableState)===null||Q===void 0?void 0:Q.writable)!==!1))}function b(k){return!!(k&&typeof k.pipe=="function"&&k._readableState&&typeof k.on=="function"&&typeof k.write=="function")}function y(k){return k&&(k._readableState||k._writableState||typeof k.write=="function"&&typeof k.on=="function"||typeof k.pipe=="function"&&typeof k.on=="function")}function A(k){return!!(k&&!y(k)&&typeof k.pipeThrough=="function"&&typeof k.getReader=="function"&&typeof k.cancel=="function")}function M(k){return!!(k&&!y(k)&&typeof k.getWriter=="function"&&typeof k.abort=="function")}function C(k){return!!(k&&!y(k)&&typeof k.readable=="object"&&typeof k.writable=="object")}function E(k){return A(k)||M(k)||C(k)}function L(k,Q){return k==null?!1:Q===!0?typeof k[a]=="function":Q===!1?typeof k[u]=="function":typeof k[a]=="function"||typeof k[u]=="function"}function D(k){if(!y(k))return null;let Q=k._writableState,se=k._readableState,Ae=Q||se;return!!(k.destroyed||k[i]||Ae!=null&&Ae.destroyed)}function I(k){if(!m(k))return null;if(k.writableEnded===!0)return!0;let Q=k._writableState;return Q!=null&&Q.errored?!1:typeof(Q==null?void 0:Q.ended)!="boolean"?null:Q.ended}function T(k,Q){if(!m(k))return null;if(k.writableFinished===!0)return!0;let se=k._writableState;return se!=null&&se.errored?!1:typeof(se==null?void 0:se.finished)!="boolean"?null:!!(se.finished||Q===!1&&se.ended===!0&&se.length===0)}function x(k){if(!d(k))return null;if(k.readableEnded===!0)return!0;let Q=k._readableState;return!Q||Q.errored?!1:typeof(Q==null?void 0:Q.ended)!="boolean"?null:Q.ended}function q(k,Q){if(!d(k))return null;let se=k._readableState;return se!=null&&se.errored?!1:typeof(se==null?void 0:se.endEmitted)!="boolean"?null:!!(se.endEmitted||Q===!1&&se.ended===!0&&se.length===0)}function G(k){return k&&k[o]!=null?k[o]:typeof(k==null?void 0:k.readable)!="boolean"?null:D(k)?!1:d(k)&&k.readable&&!q(k)}function te(k){return typeof(k==null?void 0:k.writable)!="boolean"?null:D(k)?!1:m(k)&&k.writable&&!I(k)}function v(k,Q){return y(k)?D(k)?!0:!((Q==null?void 0:Q.readable)!==!1&&G(k)||(Q==null?void 0:Q.writable)!==!1&&te(k)):null}function V(k){var Q,se;return y(k)?k.writableErrored?k.writableErrored:(Q=(se=k._writableState)===null||se===void 0?void 0:se.errored)!==null&&Q!==void 0?Q:null:null}function Z(k){var Q,se;return y(k)?k.readableErrored?k.readableErrored:(Q=(se=k._readableState)===null||se===void 0?void 0:se.errored)!==null&&Q!==void 0?Q:null:null}function K(k){if(!y(k))return null;if(typeof k.closed=="boolean")return k.closed;let Q=k._writableState,se=k._readableState;return typeof(Q==null?void 0:Q.closed)=="boolean"||typeof(se==null?void 0:se.closed)=="boolean"?(Q==null?void 0:Q.closed)||(se==null?void 0:se.closed):typeof k._closed=="boolean"&&me(k)?k._closed:null}function me(k){return typeof k._closed=="boolean"&&typeof k._defaultKeepAlive=="boolean"&&typeof k._removedConnection=="boolean"&&typeof k._removedContLen=="boolean"}function oe(k){return typeof k._sent100=="boolean"&&me(k)}function H(k){var Q;return typeof k._consuming=="boolean"&&typeof k._dumped=="boolean"&&((Q=k.req)===null||Q===void 0?void 0:Q.upgradeOrConnect)===void 0}function be(k){if(!y(k))return null;let Q=k._writableState,se=k._readableState,Ae=Q||se;return!Ae&&oe(k)||!!(Ae&&Ae.autoDestroy&&Ae.emitClose&&Ae.closed===!1)}function ie(k){var Q;return!!(k&&((Q=k[l])!==null&&Q!==void 0?Q:k.readableDidRead||k.readableAborted))}function _e(k){var Q,se,Ae,he,B,S,z,ae,ee,X;return!!(k&&((Q=(se=(Ae=(he=(B=(S=k[s])!==null&&S!==void 0?S:k.readableErrored)!==null&&B!==void 0?B:k.writableErrored)!==null&&he!==void 0?he:(z=k._readableState)===null||z===void 0?void 0:z.errorEmitted)!==null&&Ae!==void 0?Ae:(ae=k._writableState)===null||ae===void 0?void 0:ae.errorEmitted)!==null&&se!==void 0?se:(ee=k._readableState)===null||ee===void 0?void 0:ee.errored)!==null&&Q!==void 0?Q:!((X=k._writableState)===null||X===void 0)&&X.errored))}r.exports={kDestroyed:i,isDisturbed:ie,kIsDisturbed:l,isErrored:_e,kIsErrored:s,isReadable:G,kIsReadable:o,kIsClosedPromise:h,kControllerErrorFunction:f,isClosed:K,isDestroyed:D,isDuplexNodeStream:b,isFinished:v,isIterable:L,isReadableNodeStream:d,isReadableStream:A,isReadableEnded:x,isReadableFinished:q,isReadableErrored:Z,isNodeStream:y,isWebStream:E,isWritable:te,isWritableNodeStream:m,isWritableStream:M,isWritableEnded:I,isWritableFinished:T,isWritableErrored:V,isServerRequest:H,isServerResponse:oe,willEmitClose:be,isTransformStream:C}}),rr=ve((e,r)=>{ce(),de(),fe();var t=vr(),{AbortError:a,codes:u}=wt(),{ERR_INVALID_ARG_TYPE:n,ERR_STREAM_PREMATURE_CLOSE:i}=u,{kEmptyObject:s,once:o}=Vt(),{validateAbortSignal:l,validateFunction:h,validateObject:f,validateBoolean:d}=bi(),{Promise:m,PromisePrototypeThen:b}=ot(),{isClosed:y,isReadable:A,isReadableNodeStream:M,isReadableStream:C,isReadableFinished:E,isReadableErrored:L,isWritable:D,isWritableNodeStream:I,isWritableStream:T,isWritableFinished:x,isWritableErrored:q,isNodeStream:G,willEmitClose:te,kIsClosedPromise:v}=Yt();function V(H){return H.setHeader&&typeof H.abort=="function"}var Z=()=>{};function K(H,be,ie){var _e,k;if(arguments.length===2?(ie=be,be=s):be==null?be=s:f(be,"options"),h(ie,"callback"),l(be.signal,"options.signal"),ie=o(ie),C(H)||T(H))return me(H,be,ie);if(!G(H))throw new n("stream",["ReadableStream","WritableStream","Stream"],H);let Q=(_e=be.readable)!==null&&_e!==void 0?_e:M(H),se=(k=be.writable)!==null&&k!==void 0?k:I(H),Ae=H._writableState,he=H._readableState,B=()=>{H.writable||ae()},S=te(H)&&M(H)===Q&&I(H)===se,z=x(H,!1),ae=()=>{z=!0,H.destroyed&&(S=!1),!(S&&(!H.readable||Q))&&(!Q||ee)&&ie.call(H)},ee=E(H,!1),X=()=>{ee=!0,H.destroyed&&(S=!1),!(S&&(!H.writable||se))&&(!se||z)&&ie.call(H)},ue=J=>{ie.call(H,J)},le=y(H),P=()=>{le=!0;let J=q(H)||L(H);if(J&&typeof J!="boolean")return ie.call(H,J);if(Q&&!ee&&M(H,!0)&&!E(H,!1))return ie.call(H,new i);if(se&&!z&&!x(H,!1))return ie.call(H,new i);ie.call(H)},W=()=>{le=!0;let J=q(H)||L(H);if(J&&typeof J!="boolean")return ie.call(H,J);ie.call(H)},F=()=>{H.req.on("finish",ae)};V(H)?(H.on("complete",ae),S||H.on("abort",P),H.req?F():H.on("request",F)):se&&!Ae&&(H.on("end",B),H.on("close",B)),!S&&typeof H.aborted=="boolean"&&H.on("aborted",P),H.on("end",X),H.on("finish",ae),be.error!==!1&&H.on("error",ue),H.on("close",P),le?t.nextTick(P):Ae!=null&&Ae.errorEmitted||he!=null&&he.errorEmitted?S||t.nextTick(W):(!Q&&(!S||A(H))&&(z||D(H)===!1)||!se&&(!S||D(H))&&(ee||A(H)===!1)||he&&H.req&&H.aborted)&&t.nextTick(W);let re=()=>{ie=Z,H.removeListener("aborted",P),H.removeListener("complete",ae),H.removeListener("abort",P),H.removeListener("request",F),H.req&&H.req.removeListener("finish",ae),H.removeListener("end",B),H.removeListener("close",B),H.removeListener("finish",ae),H.removeListener("end",X),H.removeListener("error",ue),H.removeListener("close",P)};if(be.signal&&!le){let J=()=>{let j=ie;re(),j.call(H,new a(void 0,{cause:be.signal.reason}))};if(be.signal.aborted)t.nextTick(J);else{let j=ie;ie=o((...Y)=>{be.signal.removeEventListener("abort",J),j.apply(H,Y)}),be.signal.addEventListener("abort",J)}}return re}function me(H,be,ie){let _e=!1,k=Z;if(be.signal)if(k=()=>{_e=!0,ie.call(H,new a(void 0,{cause:be.signal.reason}))},be.signal.aborted)t.nextTick(k);else{let se=ie;ie=o((...Ae)=>{be.signal.removeEventListener("abort",k),se.apply(H,Ae)}),be.signal.addEventListener("abort",k)}let Q=(...se)=>{_e||t.nextTick(()=>ie.apply(H,se))};return b(H[v].promise,Q,Q),Z}function oe(H,be){var ie;let _e=!1;return be===null&&(be=s),(ie=be)!==null&&ie!==void 0&&ie.cleanup&&(d(be.cleanup,"cleanup"),_e=be.cleanup),new m((k,Q)=>{let se=K(H,be,Ae=>{_e&&se(),Ae?Q(Ae):k()})})}r.exports=K,r.exports.finished=oe}),Or=ve((e,r)=>{ce(),de(),fe();var t=vr(),{aggregateTwoErrors:a,codes:{ERR_MULTIPLE_CALLBACK:u},AbortError:n}=wt(),{Symbol:i}=ot(),{kDestroyed:s,isDestroyed:o,isFinished:l,isServerRequest:h}=Yt(),f=i("kDestroy"),d=i("kConstruct");function m(v,V,Z){v&&(v.stack,V&&!V.errored&&(V.errored=v),Z&&!Z.errored&&(Z.errored=v))}function b(v,V){let Z=this._readableState,K=this._writableState,me=K||Z;return K!=null&&K.destroyed||Z!=null&&Z.destroyed?(typeof V=="function"&&V(),this):(m(v,K,Z),K&&(K.destroyed=!0),Z&&(Z.destroyed=!0),me.constructed?y(this,v,V):this.once(f,function(oe){y(this,a(oe,v),V)}),this)}function y(v,V,Z){let K=!1;function me(oe){if(K)return;K=!0;let H=v._readableState,be=v._writableState;m(oe,be,H),be&&(be.closed=!0),H&&(H.closed=!0),typeof Z=="function"&&Z(oe),oe?t.nextTick(A,v,oe):t.nextTick(M,v)}try{v._destroy(V||null,me)}catch(oe){me(oe)}}function A(v,V){C(v,V),M(v)}function M(v){let V=v._readableState,Z=v._writableState;Z&&(Z.closeEmitted=!0),V&&(V.closeEmitted=!0),(Z!=null&&Z.emitClose||V!=null&&V.emitClose)&&v.emit("close")}function C(v,V){let Z=v._readableState,K=v._writableState;K!=null&&K.errorEmitted||Z!=null&&Z.errorEmitted||(K&&(K.errorEmitted=!0),Z&&(Z.errorEmitted=!0),v.emit("error",V))}function E(){let v=this._readableState,V=this._writableState;v&&(v.constructed=!0,v.closed=!1,v.closeEmitted=!1,v.destroyed=!1,v.errored=null,v.errorEmitted=!1,v.reading=!1,v.ended=v.readable===!1,v.endEmitted=v.readable===!1),V&&(V.constructed=!0,V.destroyed=!1,V.closed=!1,V.closeEmitted=!1,V.errored=null,V.errorEmitted=!1,V.finalCalled=!1,V.prefinished=!1,V.ended=V.writable===!1,V.ending=V.writable===!1,V.finished=V.writable===!1)}function L(v,V,Z){let K=v._readableState,me=v._writableState;if(me!=null&&me.destroyed||K!=null&&K.destroyed)return this;K!=null&&K.autoDestroy||me!=null&&me.autoDestroy?v.destroy(V):V&&(V.stack,me&&!me.errored&&(me.errored=V),K&&!K.errored&&(K.errored=V),Z?t.nextTick(C,v,V):C(v,V))}function D(v,V){if(typeof v._construct!="function")return;let Z=v._readableState,K=v._writableState;Z&&(Z.constructed=!1),K&&(K.constructed=!1),v.once(d,V),!(v.listenerCount(d)>1)&&t.nextTick(I,v)}function I(v){let V=!1;function Z(K){if(V){L(v,K??new u);return}V=!0;let me=v._readableState,oe=v._writableState,H=oe||me;me&&(me.constructed=!0),oe&&(oe.constructed=!0),H.destroyed?v.emit(f,K):K?L(v,K,!0):t.nextTick(T,v)}try{v._construct(K=>{t.nextTick(Z,K)})}catch(K){t.nextTick(Z,K)}}function T(v){v.emit(d)}function x(v){return(v==null?void 0:v.setHeader)&&typeof v.abort=="function"}function q(v){v.emit("close")}function G(v,V){v.emit("error",V),t.nextTick(q,v)}function te(v,V){!v||o(v)||(!V&&!l(v)&&(V=new n),h(v)?(v.socket=null,v.destroy(V)):x(v)?v.abort():x(v.req)?v.req.abort():typeof v.destroy=="function"?v.destroy(V):typeof v.close=="function"?v.close():V?t.nextTick(G,v,V):t.nextTick(q,v),v.destroyed||(v[s]=!0))}r.exports={construct:D,destroyer:te,destroy:b,undestroy:E,errorOrDestroy:L}});function qe(){qe.init.call(this)}function Xr(e){if(typeof e!="function")throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof e)}function Hs(e){return e._maxListeners===void 0?qe.defaultMaxListeners:e._maxListeners}function Mo(e,r,t,a){var u,n,i,s;if(Xr(t),(n=e._events)===void 0?(n=e._events=Object.create(null),e._eventsCount=0):(n.newListener!==void 0&&(e.emit("newListener",r,t.listener?t.listener:t),n=e._events),i=n[r]),i===void 0)i=n[r]=t,++e._eventsCount;else if(typeof i=="function"?i=n[r]=a?[t,i]:[i,t]:a?i.unshift(t):i.push(t),(u=Hs(e))>0&&i.length>u&&!i.warned){i.warned=!0;var o=new Error("Possible EventEmitter memory leak detected. "+i.length+" "+String(r)+" listeners added. Use emitter.setMaxListeners() to increase limit");o.name="MaxListenersExceededWarning",o.emitter=e,o.type=r,o.count=i.length,s=o,console&&console.warn&&console.warn(s)}return e}function ql(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length===0?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function xo(e,r,t){var a={fired:!1,wrapFn:void 0,target:e,type:r,listener:t},u=ql.bind(a);return u.listener=t,a.wrapFn=u,u}function Uo(e,r,t){var a=e._events;if(a===void 0)return[];var u=a[r];return u===void 0?[]:typeof u=="function"?t?[u.listener||u]:[u]:t?function(n){for(var i=new Array(n.length),s=0;s<i.length;++s)i[s]=n[s].listener||n[s];return i}(u):Vs(u,u.length)}function Lo(e){var r=this._events;if(r!==void 0){var t=r[e];if(typeof t=="function")return 1;if(t!==void 0)return t.length}return 0}function Vs(e,r){for(var t=new Array(r),a=0;a<r;++a)t[a]=e[a];return t}var No,jo,nr,Ti,Ci,Oi,_t,Do=ht(()=>{ce(),de(),fe(),nr=typeof Reflect=="object"?Reflect:null,Ti=nr&&typeof nr.apply=="function"?nr.apply:function(e,r,t){return Function.prototype.apply.call(e,r,t)},jo=nr&&typeof nr.ownKeys=="function"?nr.ownKeys:Object.getOwnPropertySymbols?function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:function(e){return Object.getOwnPropertyNames(e)},Ci=Number.isNaN||function(e){return e!=e},No=qe,qe.EventEmitter=qe,qe.prototype._events=void 0,qe.prototype._eventsCount=0,qe.prototype._maxListeners=void 0,Oi=10,Object.defineProperty(qe,"defaultMaxListeners",{enumerable:!0,get:function(){return Oi},set:function(e){if(typeof e!="number"||e<0||Ci(e))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+e+".");Oi=e}}),qe.init=function(){this._events!==void 0&&this._events!==Object.getPrototypeOf(this)._events||(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},qe.prototype.setMaxListeners=function(e){if(typeof e!="number"||e<0||Ci(e))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+e+".");return this._maxListeners=e,this},qe.prototype.getMaxListeners=function(){return Hs(this)},qe.prototype.emit=function(e){for(var r=[],t=1;t<arguments.length;t++)r.push(arguments[t]);var a=e==="error",u=this._events;if(u!==void 0)a=a&&u.error===void 0;else if(!a)return!1;if(a){var n;if(r.length>0&&(n=r[0]),n instanceof Error)throw n;var i=new Error("Unhandled error."+(n?" ("+n.message+")":""));throw i.context=n,i}var s=u[e];if(s===void 0)return!1;if(typeof s=="function")Ti(s,this,r);else{var o=s.length,l=Vs(s,o);for(t=0;t<o;++t)Ti(l[t],this,r)}return!0},qe.prototype.addListener=function(e,r){return Mo(this,e,r,!1)},qe.prototype.on=qe.prototype.addListener,qe.prototype.prependListener=function(e,r){return Mo(this,e,r,!0)},qe.prototype.once=function(e,r){return Xr(r),this.on(e,xo(this,e,r)),this},qe.prototype.prependOnceListener=function(e,r){return Xr(r),this.prependListener(e,xo(this,e,r)),this},qe.prototype.removeListener=function(e,r){var t,a,u,n,i;if(Xr(r),(a=this._events)===void 0)return this;if((t=a[e])===void 0)return this;if(t===r||t.listener===r)--this._eventsCount==0?this._events=Object.create(null):(delete a[e],a.removeListener&&this.emit("removeListener",e,t.listener||r));else if(typeof t!="function"){for(u=-1,n=t.length-1;n>=0;n--)if(t[n]===r||t[n].listener===r){i=t[n].listener,u=n;break}if(u<0)return this;u===0?t.shift():function(s,o){for(;o+1<s.length;o++)s[o]=s[o+1];s.pop()}(t,u),t.length===1&&(a[e]=t[0]),a.removeListener!==void 0&&this.emit("removeListener",e,i||r)}return this},qe.prototype.off=qe.prototype.removeListener,qe.prototype.removeAllListeners=function(e){var r,t,a;if((t=this._events)===void 0)return this;if(t.removeListener===void 0)return arguments.length===0?(this._events=Object.create(null),this._eventsCount=0):t[e]!==void 0&&(--this._eventsCount==0?this._events=Object.create(null):delete t[e]),this;if(arguments.length===0){var u,n=Object.keys(t);for(a=0;a<n.length;++a)(u=n[a])!=="removeListener"&&this.removeAllListeners(u);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if(typeof(r=t[e])=="function")this.removeListener(e,r);else if(r!==void 0)for(a=r.length-1;a>=0;a--)this.removeListener(e,r[a]);return this},qe.prototype.listeners=function(e){return Uo(this,e,!0)},qe.prototype.rawListeners=function(e){return Uo(this,e,!1)},qe.listenerCount=function(e,r){return typeof e.listenerCount=="function"?e.listenerCount(r):Lo.call(e,r)},qe.prototype.listenerCount=Lo,qe.prototype.eventNames=function(){return this._eventsCount>0?jo(this._events):[]},_t=No,_t.EventEmitter,_t.defaultMaxListeners,_t.init,_t.listenerCount,_t.EventEmitter,_t.defaultMaxListeners,_t.init,_t.listenerCount}),_r={};wr(_r,{EventEmitter:()=>zs,default:()=>_t,defaultMaxListeners:()=>Ks,init:()=>Ys,listenerCount:()=>Qs,on:()=>Gs,once:()=>Js});var zs,Ks,Ys,Qs,Gs,Js,Rr=ht(()=>{ce(),de(),fe(),Do(),Do(),_t.once=function(e,r){return new Promise((t,a)=>{function u(...i){n!==void 0&&e.removeListener("error",n),t(i)}let n;r!=="error"&&(n=i=>{e.removeListener(name,u),a(i)},e.once("error",n)),e.once(r,u)})},_t.on=function(e,r){let t=[],a=[],u=null,n=!1,i={async next(){let l=t.shift();if(l)return createIterResult(l,!1);if(u){let h=Promise.reject(u);return u=null,h}return n?createIterResult(void 0,!0):new Promise((h,f)=>a.push({resolve:h,reject:f}))},async return(){e.removeListener(r,s),e.removeListener("error",o),n=!0;for(let l of a)l.resolve(createIterResult(void 0,!0));return createIterResult(void 0,!0)},throw(l){u=l,e.removeListener(r,s),e.removeListener("error",o)},[Symbol.asyncIterator](){return this}};return e.on(r,s),e.on("error",o),i;function s(...l){let h=a.shift();h?h.resolve(createIterResult(l,!1)):t.push(l)}function o(l){n=!0;let h=a.shift();h?h.reject(l):u=l,i.return()}},{EventEmitter:zs,defaultMaxListeners:Ks,init:Ys,listenerCount:Qs,on:Gs,once:Js}=_t}),wo=ve((e,r)=>{ce(),de(),fe();var{ArrayIsArray:t,ObjectSetPrototypeOf:a}=ot(),{EventEmitter:u}=(Rr(),Ke(_r));function n(s){u.call(this,s)}a(n.prototype,u.prototype),a(n,u),n.prototype.pipe=function(s,o){let l=this;function h(M){s.writable&&s.write(M)===!1&&l.pause&&l.pause()}l.on("data",h);function f(){l.readable&&l.resume&&l.resume()}s.on("drain",f),!s._isStdio&&(!o||o.end!==!1)&&(l.on("end",m),l.on("close",b));let d=!1;function m(){d||(d=!0,s.end())}function b(){d||(d=!0,typeof s.destroy=="function"&&s.destroy())}function y(M){A(),u.listenerCount(this,"error")===0&&this.emit("error",M)}i(l,"error",y),i(s,"error",y);function A(){l.removeListener("data",h),s.removeListener("drain",f),l.removeListener("end",m),l.removeListener("close",b),l.removeListener("error",y),s.removeListener("error",y),l.removeListener("end",A),l.removeListener("close",A),s.removeListener("close",A)}return l.on("end",A),l.on("close",A),s.on("close",A),s.emit("pipe",l),s};function i(s,o,l){if(typeof s.prependListener=="function")return s.prependListener(o,l);!s._events||!s._events[o]?s.on(o,l):t(s._events[o])?s._events[o].unshift(l):s._events[o]=[l,s._events[o]]}r.exports={Stream:n,prependListener:i}}),yi=ve((e,r)=>{ce(),de(),fe();var{AbortError:t,codes:a}=wt(),{isNodeStream:u,isWebStream:n,kControllerErrorFunction:i}=Yt(),s=rr(),{ERR_INVALID_ARG_TYPE:o}=a,l=(h,f)=>{if(typeof h!="object"||!("aborted"in h))throw new o(f,"AbortSignal",h)};r.exports.addAbortSignal=function(h,f){if(l(h,"signal"),!u(f)&&!n(f))throw new o("stream",["ReadableStream","WritableStream","Stream"],f);return r.exports.addAbortSignalNoValidate(h,f)},r.exports.addAbortSignalNoValidate=function(h,f){if(typeof h!="object"||!("aborted"in h))return f;let d=u(f)?()=>{f.destroy(new t(void 0,{cause:h.reason}))}:()=>{f[i](new t(void 0,{cause:h.reason}))};return h.aborted?d():(h.addEventListener("abort",d),s(f,()=>h.removeEventListener("abort",d))),f}}),Hl=ve((e,r)=>{ce(),de(),fe();var{StringPrototypeSlice:t,SymbolIterator:a,TypedArrayPrototypeSet:u,Uint8Array:n}=ot(),{Buffer:i}=(ft(),Ke(ct)),{inspect:s}=Vt();r.exports=class{constructor(){this.head=null,this.tail=null,this.length=0}push(o){let l={data:o,next:null};this.length>0?this.tail.next=l:this.head=l,this.tail=l,++this.length}unshift(o){let l={data:o,next:this.head};this.length===0&&(this.tail=l),this.head=l,++this.length}shift(){if(this.length===0)return;let o=this.head.data;return this.length===1?this.head=this.tail=null:this.head=this.head.next,--this.length,o}clear(){this.head=this.tail=null,this.length=0}join(o){if(this.length===0)return"";let l=this.head,h=""+l.data;for(;(l=l.next)!==null;)h+=o+l.data;return h}concat(o){if(this.length===0)return i.alloc(0);let l=i.allocUnsafe(o>>>0),h=this.head,f=0;for(;h;)u(l,h.data,f),f+=h.data.length,h=h.next;return l}consume(o,l){let h=this.head.data;if(o<h.length){let f=h.slice(0,o);return this.head.data=h.slice(o),f}return o===h.length?this.shift():l?this._getString(o):this._getBuffer(o)}first(){return this.head.data}*[a](){for(let o=this.head;o;o=o.next)yield o.data}_getString(o){let l="",h=this.head,f=0;do{let d=h.data;if(o>d.length)l+=d,o-=d.length;else{o===d.length?(l+=d,++f,h.next?this.head=h.next:this.head=this.tail=null):(l+=t(d,0,o),this.head=h,h.data=t(d,o));break}++f}while((h=h.next)!==null);return this.length-=f,l}_getBuffer(o){let l=i.allocUnsafe(o),h=o,f=this.head,d=0;do{let m=f.data;if(o>m.length)u(l,m,h-o),o-=m.length;else{o===m.length?(u(l,m,h-o),++d,f.next?this.head=f.next:this.head=this.tail=null):(u(l,new n(m.buffer,m.byteOffset,o),h-o),this.head=f,f.data=m.slice(o));break}++d}while((f=f.next)!==null);return this.length-=d,l}[Symbol.for("nodejs.util.inspect.custom")](o,l){return s(this,{...l,depth:0,customInspect:!1})}}}),vo=ve((e,r)=>{ce(),de(),fe();var{MathFloor:t,NumberIsInteger:a}=ot(),{ERR_INVALID_ARG_VALUE:u}=wt().codes;function n(o,l,h){return o.highWaterMark!=null?o.highWaterMark:l?o[h]:null}function i(o){return o?16:16*1024}function s(o,l,h,f){let d=n(l,f,h);if(d!=null){if(!a(d)||d<0){let m=f?`options.${h}`:"options.highWaterMark";throw new u(m,d)}return t(d)}return i(o.objectMode)}r.exports={getHighWaterMark:s,getDefaultHighWaterMark:i}});function Fo(e){var r=e.length;if(r%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var t=e.indexOf("=");return t===-1&&(t=r),[t,t===r?0:4-t%4]}function Vl(e,r,t){for(var a,u,n=[],i=r;i<t;i+=3)a=(e[i]<<16&16711680)+(e[i+1]<<8&65280)+(255&e[i+2]),n.push(Tt[(u=a)>>18&63]+Tt[u>>12&63]+Tt[u>>6&63]+Tt[63&u]);return n.join("")}function Wt(e){if(e>2147483647)throw new RangeError('The value "'+e+'" is invalid for option "size"');var r=new Uint8Array(e);return Object.setPrototypeOf(r,ge.prototype),r}function ge(e,r,t){if(typeof e=="number"){if(typeof r=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return $n(e)}return $s(e,r,t)}function $s(e,r,t){if(typeof e=="string")return function(n,i){if(typeof i=="string"&&i!==""||(i="utf8"),!ge.isEncoding(i))throw new TypeError("Unknown encoding: "+i);var s=0|Zs(n,i),o=Wt(s),l=o.write(n,i);return l!==s&&(o=o.slice(0,l)),o}(e,r);if(ArrayBuffer.isView(e))return Ri(e);if(e==null)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof e);if(qt(e,ArrayBuffer)||e&&qt(e.buffer,ArrayBuffer)||typeof SharedArrayBuffer<"u"&&(qt(e,SharedArrayBuffer)||e&&qt(e.buffer,SharedArrayBuffer)))return zl(e,r,t);if(typeof e=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');var a=e.valueOf&&e.valueOf();if(a!=null&&a!==e)return ge.from(a,r,t);var u=function(n){if(ge.isBuffer(n)){var i=0|_o(n.length),s=Wt(i);return s.length===0||n.copy(s,0,0,i),s}if(n.length!==void 0)return typeof n.length!="number"||Eo(n.length)?Wt(0):Ri(n);if(n.type==="Buffer"&&Array.isArray(n.data))return Ri(n.data)}(e);if(u)return u;if(typeof Symbol<"u"&&Symbol.toPrimitive!=null&&typeof e[Symbol.toPrimitive]=="function")return ge.from(e[Symbol.toPrimitive]("string"),r,t);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof e)}function Xs(e){if(typeof e!="number")throw new TypeError('"size" argument must be of type number');if(e<0)throw new RangeError('The value "'+e+'" is invalid for option "size"')}function $n(e){return Xs(e),Wt(e<0?0:0|_o(e))}function Ri(e){for(var r=e.length<0?0:0|_o(e.length),t=Wt(r),a=0;a<r;a+=1)t[a]=255&e[a];return t}function zl(e,r,t){if(r<0||e.byteLength<r)throw new RangeError('"offset" is outside of buffer bounds');if(e.byteLength<r+(t||0))throw new RangeError('"length" is outside of buffer bounds');var a;return a=r===void 0&&t===void 0?new Uint8Array(e):t===void 0?new Uint8Array(e,r):new Uint8Array(e,r,t),Object.setPrototypeOf(a,ge.prototype),a}function _o(e){if(e>=2147483647)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+2147483647 .toString(16)+" bytes");return 0|e}function Zs(e,r){if(ge.isBuffer(e))return e.length;if(ArrayBuffer.isView(e)||qt(e,ArrayBuffer))return e.byteLength;if(typeof e!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof e);var t=e.length,a=arguments.length>2&&arguments[2]===!0;if(!a&&t===0)return 0;for(var u=!1;;)switch(r){case"ascii":case"latin1":case"binary":return t;case"utf8":case"utf-8":return Xn(e).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*t;case"hex":return t>>>1;case"base64":return ia(e).length;default:if(u)return a?-1:Xn(e).length;r=(""+r).toLowerCase(),u=!0}}function Kl(e,r,t){var a=!1;if((r===void 0||r<0)&&(r=0),r>this.length||((t===void 0||t>this.length)&&(t=this.length),t<=0)||(t>>>=0)<=(r>>>=0))return"";for(e||(e="utf8");;)switch(e){case"hex":return tu(this,r,t);case"utf8":case"utf-8":return ta(this,r,t);case"ascii":return Zl(this,r,t);case"latin1":case"binary":return eu(this,r,t);case"base64":return Xl(this,r,t);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return ru(this,r,t);default:if(a)throw new TypeError("Unknown encoding: "+e);e=(e+"").toLowerCase(),a=!0}}function or(e,r,t){var a=e[r];e[r]=e[t],e[t]=a}function Wo(e,r,t,a,u){if(e.length===0)return-1;if(typeof t=="string"?(a=t,t=0):t>2147483647?t=2147483647:t<-2147483648&&(t=-2147483648),Eo(t=+t)&&(t=u?0:e.length-1),t<0&&(t=e.length+t),t>=e.length){if(u)return-1;t=e.length-1}else if(t<0){if(!u)return-1;t=0}if(typeof r=="string"&&(r=ge.from(r,a)),ge.isBuffer(r))return r.length===0?-1:qo(e,r,t,a,u);if(typeof r=="number")return r&=255,typeof Uint8Array.prototype.indexOf=="function"?u?Uint8Array.prototype.indexOf.call(e,r,t):Uint8Array.prototype.lastIndexOf.call(e,r,t):qo(e,[r],t,a,u);throw new TypeError("val must be string, number or Buffer")}function qo(e,r,t,a,u){var n,i=1,s=e.length,o=r.length;if(a!==void 0&&((a=String(a).toLowerCase())==="ucs2"||a==="ucs-2"||a==="utf16le"||a==="utf-16le")){if(e.length<2||r.length<2)return-1;i=2,s/=2,o/=2,t/=2}function l(m,b){return i===1?m[b]:m.readUInt16BE(b*i)}if(u){var h=-1;for(n=t;n<s;n++)if(l(e,n)===l(r,h===-1?0:n-h)){if(h===-1&&(h=n),n-h+1===o)return h*i}else h!==-1&&(n-=n-h),h=-1}else for(t+o>s&&(t=s-o),n=t;n>=0;n--){for(var f=!0,d=0;d<o;d++)if(l(e,n+d)!==l(r,d)){f=!1;break}if(f)return n}return-1}function Yl(e,r,t,a){t=Number(t)||0;var u=e.length-t;a?(a=Number(a))>u&&(a=u):a=u;var n=r.length;a>n/2&&(a=n/2);for(var i=0;i<a;++i){var s=parseInt(r.substr(2*i,2),16);if(Eo(s))return i;e[t+i]=s}return i}function Ql(e,r,t,a){return wi(Xn(r,e.length-t),e,t,a)}function ea(e,r,t,a){return wi(function(u){for(var n=[],i=0;i<u.length;++i)n.push(255&u.charCodeAt(i));return n}(r),e,t,a)}function Gl(e,r,t,a){return ea(e,r,t,a)}function Jl(e,r,t,a){return wi(ia(r),e,t,a)}function $l(e,r,t,a){return wi(function(u,n){for(var i,s,o,l=[],h=0;h<u.length&&!((n-=2)<0);++h)i=u.charCodeAt(h),s=i>>8,o=i%256,l.push(o),l.push(s);return l}(r,e.length-t),e,t,a)}function Xl(e,r,t){return r===0&&t===e.length?ci.fromByteArray(e):ci.fromByteArray(e.slice(r,t))}function ta(e,r,t){t=Math.min(e.length,t);for(var a=[],u=r;u<t;){var n,i,s,o,l=e[u],h=null,f=l>239?4:l>223?3:l>191?2:1;if(u+f<=t)switch(f){case 1:l<128&&(h=l);break;case 2:(192&(n=e[u+1]))==128&&(o=(31&l)<<6|63&n)>127&&(h=o);break;case 3:n=e[u+1],i=e[u+2],(192&n)==128&&(192&i)==128&&(o=(15&l)<<12|(63&n)<<6|63&i)>2047&&(o<55296||o>57343)&&(h=o);break;case 4:n=e[u+1],i=e[u+2],s=e[u+3],(192&n)==128&&(192&i)==128&&(192&s)==128&&(o=(15&l)<<18|(63&n)<<12|(63&i)<<6|63&s)>65535&&o<1114112&&(h=o)}h===null?(h=65533,f=1):h>65535&&(h-=65536,a.push(h>>>10&1023|55296),h=56320|1023&h),a.push(h),u+=f}return function(d){var m=d.length;if(m<=4096)return String.fromCharCode.apply(String,d);for(var b="",y=0;y<m;)b+=String.fromCharCode.apply(String,d.slice(y,y+=4096));return b}(a)}function Zl(e,r,t){var a="";t=Math.min(e.length,t);for(var u=r;u<t;++u)a+=String.fromCharCode(127&e[u]);return a}function eu(e,r,t){var a="";t=Math.min(e.length,t);for(var u=r;u<t;++u)a+=String.fromCharCode(e[u]);return a}function tu(e,r,t){var a=e.length;(!r||r<0)&&(r=0),(!t||t<0||t>a)&&(t=a);for(var u="",n=r;n<t;++n)u+=oa[e[n]];return u}function ru(e,r,t){for(var a=e.slice(r,t),u="",n=0;n<a.length;n+=2)u+=String.fromCharCode(a[n]+256*a[n+1]);return u}function st(e,r,t){if(e%1!=0||e<0)throw new RangeError("offset is not uint");if(e+r>t)throw new RangeError("Trying to access beyond buffer length")}function yt(e,r,t,a,u,n){if(!ge.isBuffer(e))throw new TypeError('"buffer" argument must be a Buffer instance');if(r>u||r<n)throw new RangeError('"value" argument is out of bounds');if(t+a>e.length)throw new RangeError("Index out of range")}function ra(e,r,t,a,u,n){if(t+a>e.length)throw new RangeError("Index out of range");if(t<0)throw new RangeError("Index out of range")}function Ho(e,r,t,a,u){return r=+r,t>>>=0,u||ra(e,0,t,4),cr.write(e,r,t,a,23,4),t+4}function Vo(e,r,t,a,u){return r=+r,t>>>=0,u||ra(e,0,t,8),cr.write(e,r,t,a,52,8),t+8}function Xn(e,r){var t;r=r||1/0;for(var a=e.length,u=null,n=[],i=0;i<a;++i){if((t=e.charCodeAt(i))>55295&&t<57344){if(!u){if(t>56319){(r-=3)>-1&&n.push(239,191,189);continue}if(i+1===a){(r-=3)>-1&&n.push(239,191,189);continue}u=t;continue}if(t<56320){(r-=3)>-1&&n.push(239,191,189),u=t;continue}t=65536+(u-55296<<10|t-56320)}else u&&(r-=3)>-1&&n.push(239,191,189);if(u=null,t<128){if((r-=1)<0)break;n.push(t)}else if(t<2048){if((r-=2)<0)break;n.push(t>>6|192,63&t|128)}else if(t<65536){if((r-=3)<0)break;n.push(t>>12|224,t>>6&63|128,63&t|128)}else{if(!(t<1114112))throw new Error("Invalid code point");if((r-=4)<0)break;n.push(t>>18|240,t>>12&63|128,t>>6&63|128,63&t|128)}}return n}function ia(e){return ci.toByteArray(function(r){if((r=(r=r.split("=")[0]).trim().replace(na,"")).length<2)return"";for(;r.length%4!=0;)r+="=";return r}(e))}function wi(e,r,t,a){for(var u=0;u<a&&!(u+t>=r.length||u>=e.length);++u)r[u+t]=e[u];return u}function qt(e,r){return e instanceof r||e!=null&&e.constructor!=null&&e.constructor.name!=null&&e.constructor.name===r.name}function Eo(e){return e!=e}function zo(e,r){for(var t in e)r[t]=e[t]}function sr(e,r,t){return It(e,r,t)}function Br(e){var r;switch(this.encoding=function(t){var a=function(u){if(!u)return"utf8";for(var n;;)switch(u){case"utf8":case"utf-8":return"utf8";case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return"utf16le";case"latin1":case"binary":return"latin1";case"base64":case"ascii":case"hex":return u;default:if(n)return;u=(""+u).toLowerCase(),n=!0}}(t);if(typeof a!="string"&&(fi.isEncoding===Zn||!Zn(t)))throw new Error("Unknown encoding: "+t);return a||t}(e),this.encoding){case"utf16le":this.text=nu,this.end=ou,r=4;break;case"utf8":this.fillLast=iu,r=4;break;case"base64":this.text=su,this.end=au,r=3;break;default:return this.write=lu,this.end=uu,void 0}this.lastNeed=0,this.lastTotal=0,this.lastChar=fi.allocUnsafe(r)}function Pi(e){return e<=127?0:e>>5==6?2:e>>4==14?3:e>>3==30?4:e>>6==2?-1:-2}function iu(e){var r=this.lastTotal-this.lastNeed,t=function(a,u,n){if((192&u[0])!=128)return a.lastNeed=0,"ï¿½";if(a.lastNeed>1&&u.length>1){if((192&u[1])!=128)return a.lastNeed=1,"ï¿½";if(a.lastNeed>2&&u.length>2&&(192&u[2])!=128)return a.lastNeed=2,"ï¿½"}}(this,e);return t!==void 0?t:this.lastNeed<=e.length?(e.copy(this.lastChar,r,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal)):(e.copy(this.lastChar,r,0,e.length),this.lastNeed-=e.length,void 0)}function nu(e,r){if((e.length-r)%2==0){var t=e.toString("utf16le",r);if(t){var a=t.charCodeAt(t.length-1);if(a>=55296&&a<=56319)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=e[e.length-2],this.lastChar[1]=e[e.length-1],t.slice(0,-1)}return t}return this.lastNeed=1,this.lastTotal=2,this.lastChar[0]=e[e.length-1],e.toString("utf16le",r,e.length-1)}function ou(e){var r=e&&e.length?this.write(e):"";if(this.lastNeed){var t=this.lastTotal-this.lastNeed;return r+this.lastChar.toString("utf16le",0,t)}return r}function su(e,r){var t=(e.length-r)%3;return t===0?e.toString("base64",r):(this.lastNeed=3-t,this.lastTotal=3,t===1?this.lastChar[0]=e[e.length-1]:(this.lastChar[0]=e[e.length-2],this.lastChar[1]=e[e.length-1]),e.toString("base64",r,e.length-t))}function au(e){var r=e&&e.length?this.write(e):"";return this.lastNeed?r+this.lastChar.toString("base64",0,3-this.lastNeed):r}function lu(e){return e.toString(this.encoding)}function uu(e){return e&&e.length?this.write(e):""}var Ko,Tt,vt,Yo,Hr,ar,Qo,Go,Ct,ci,cr,Bi,na,oa,Mr,xr,It,Jo,kr,fi,Zn,$o=ht(()=>{for(ce(),de(),fe(),Ko={byteLength:function(e){var r=Fo(e),t=r[0],a=r[1];return 3*(t+a)/4-a},toByteArray:function(e){var r,t,a=Fo(e),u=a[0],n=a[1],i=new Yo(function(l,h,f){return 3*(h+f)/4-f}(0,u,n)),s=0,o=n>0?u-4:u;for(t=0;t<o;t+=4)r=vt[e.charCodeAt(t)]<<18|vt[e.charCodeAt(t+1)]<<12|vt[e.charCodeAt(t+2)]<<6|vt[e.charCodeAt(t+3)],i[s++]=r>>16&255,i[s++]=r>>8&255,i[s++]=255&r;return n===2&&(r=vt[e.charCodeAt(t)]<<2|vt[e.charCodeAt(t+1)]>>4,i[s++]=255&r),n===1&&(r=vt[e.charCodeAt(t)]<<10|vt[e.charCodeAt(t+1)]<<4|vt[e.charCodeAt(t+2)]>>2,i[s++]=r>>8&255,i[s++]=255&r),i},fromByteArray:function(e){for(var r,t=e.length,a=t%3,u=[],n=0,i=t-a;n<i;n+=16383)u.push(Vl(e,n,n+16383>i?i:n+16383));return a===1?(r=e[t-1],u.push(Tt[r>>2]+Tt[r<<4&63]+"==")):a===2&&(r=(e[t-2]<<8)+e[t-1],u.push(Tt[r>>10]+Tt[r>>4&63]+Tt[r<<2&63]+"=")),u.join("")}},Tt=[],vt=[],Yo=typeof Uint8Array<"u"?Uint8Array:Array,Hr="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",ar=0,Qo=Hr.length;ar<Qo;++ar)Tt[ar]=Hr[ar],vt[Hr.charCodeAt(ar)]=ar;vt["-".charCodeAt(0)]=62,vt["_".charCodeAt(0)]=63,Go={read:function(e,r,t,a,u){var n,i,s=8*u-a-1,o=(1<<s)-1,l=o>>1,h=-7,f=t?u-1:0,d=t?-1:1,m=e[r+f];for(f+=d,n=m&(1<<-h)-1,m>>=-h,h+=s;h>0;n=256*n+e[r+f],f+=d,h-=8);for(i=n&(1<<-h)-1,n>>=-h,h+=a;h>0;i=256*i+e[r+f],f+=d,h-=8);if(n===0)n=1-l;else{if(n===o)return i?NaN:1/0*(m?-1:1);i+=Math.pow(2,a),n-=l}return(m?-1:1)*i*Math.pow(2,n-a)},write:function(e,r,t,a,u,n){var i,s,o,l=8*n-u-1,h=(1<<l)-1,f=h>>1,d=u===23?Math.pow(2,-24)-Math.pow(2,-77):0,m=a?0:n-1,b=a?1:-1,y=r<0||r===0&&1/r<0?1:0;for(r=Math.abs(r),isNaN(r)||r===1/0?(s=isNaN(r)?1:0,i=h):(i=Math.floor(Math.log(r)/Math.LN2),r*(o=Math.pow(2,-i))<1&&(i--,o*=2),(r+=i+f>=1?d/o:d*Math.pow(2,1-f))*o>=2&&(i++,o/=2),i+f>=h?(s=0,i=h):i+f>=1?(s=(r*o-1)*Math.pow(2,u),i+=f):(s=r*Math.pow(2,f-1)*Math.pow(2,u),i=0));u>=8;e[t+m]=255&s,m+=b,s/=256,u-=8);for(i=i<<u|s,l+=u;l>0;e[t+m]=255&i,m+=b,i/=256,l-=8);e[t+m-b]|=128*y}},Ct={},ci=Ko,cr=Go,Bi=typeof Symbol=="function"&&typeof Symbol.for=="function"?Symbol.for("nodejs.util.inspect.custom"):null,Ct.Buffer=ge,Ct.SlowBuffer=function(e){return+e!=e&&(e=0),ge.alloc(+e)},Ct.INSPECT_MAX_BYTES=50,Ct.kMaxLength=2147483647,ge.TYPED_ARRAY_SUPPORT=function(){try{var e=new Uint8Array(1),r={foo:function(){return 42}};return Object.setPrototypeOf(r,Uint8Array.prototype),Object.setPrototypeOf(e,r),e.foo()===42}catch{return!1}}(),ge.TYPED_ARRAY_SUPPORT||typeof console>"u"||typeof console.error!="function"||console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support."),Object.defineProperty(ge.prototype,"parent",{enumerable:!0,get:function(){if(ge.isBuffer(this))return this.buffer}}),Object.defineProperty(ge.prototype,"offset",{enumerable:!0,get:function(){if(ge.isBuffer(this))return this.byteOffset}}),ge.poolSize=8192,ge.from=function(e,r,t){return $s(e,r,t)},Object.setPrototypeOf(ge.prototype,Uint8Array.prototype),Object.setPrototypeOf(ge,Uint8Array),ge.alloc=function(e,r,t){return function(a,u,n){return Xs(a),a<=0?Wt(a):u!==void 0?typeof n=="string"?Wt(a).fill(u,n):Wt(a).fill(u):Wt(a)}(e,r,t)},ge.allocUnsafe=function(e){return $n(e)},ge.allocUnsafeSlow=function(e){return $n(e)},ge.isBuffer=function(e){return e!=null&&e._isBuffer===!0&&e!==ge.prototype},ge.compare=function(e,r){if(qt(e,Uint8Array)&&(e=ge.from(e,e.offset,e.byteLength)),qt(r,Uint8Array)&&(r=ge.from(r,r.offset,r.byteLength)),!ge.isBuffer(e)||!ge.isBuffer(r))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(e===r)return 0;for(var t=e.length,a=r.length,u=0,n=Math.min(t,a);u<n;++u)if(e[u]!==r[u]){t=e[u],a=r[u];break}return t<a?-1:a<t?1:0},ge.isEncoding=function(e){switch(String(e).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},ge.concat=function(e,r){if(!Array.isArray(e))throw new TypeError('"list" argument must be an Array of Buffers');if(e.length===0)return ge.alloc(0);var t;if(r===void 0)for(r=0,t=0;t<e.length;++t)r+=e[t].length;var a=ge.allocUnsafe(r),u=0;for(t=0;t<e.length;++t){var n=e[t];if(qt(n,Uint8Array)&&(n=ge.from(n)),!ge.isBuffer(n))throw new TypeError('"list" argument must be an Array of Buffers');n.copy(a,u),u+=n.length}return a},ge.byteLength=Zs,ge.prototype._isBuffer=!0,ge.prototype.swap16=function(){var e=this.length;if(e%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var r=0;r<e;r+=2)or(this,r,r+1);return this},ge.prototype.swap32=function(){var e=this.length;if(e%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var r=0;r<e;r+=4)or(this,r,r+3),or(this,r+1,r+2);return this},ge.prototype.swap64=function(){var e=this.length;if(e%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var r=0;r<e;r+=8)or(this,r,r+7),or(this,r+1,r+6),or(this,r+2,r+5),or(this,r+3,r+4);return this},ge.prototype.toString=function(){var e=this.length;return e===0?"":arguments.length===0?ta(this,0,e):Kl.apply(this,arguments)},ge.prototype.toLocaleString=ge.prototype.toString,ge.prototype.equals=function(e){if(!ge.isBuffer(e))throw new TypeError("Argument must be a Buffer");return this===e||ge.compare(this,e)===0},ge.prototype.inspect=function(){var e="",r=Ct.INSPECT_MAX_BYTES;return e=this.toString("hex",0,r).replace(/(.{2})/g,"$1 ").trim(),this.length>r&&(e+=" ... "),"<Buffer "+e+">"},Bi&&(ge.prototype[Bi]=ge.prototype.inspect),ge.prototype.compare=function(e,r,t,a,u){if(qt(e,Uint8Array)&&(e=ge.from(e,e.offset,e.byteLength)),!ge.isBuffer(e))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof e);if(r===void 0&&(r=0),t===void 0&&(t=e?e.length:0),a===void 0&&(a=0),u===void 0&&(u=this.length),r<0||t>e.length||a<0||u>this.length)throw new RangeError("out of range index");if(a>=u&&r>=t)return 0;if(a>=u)return-1;if(r>=t)return 1;if(this===e)return 0;for(var n=(u>>>=0)-(a>>>=0),i=(t>>>=0)-(r>>>=0),s=Math.min(n,i),o=this.slice(a,u),l=e.slice(r,t),h=0;h<s;++h)if(o[h]!==l[h]){n=o[h],i=l[h];break}return n<i?-1:i<n?1:0},ge.prototype.includes=function(e,r,t){return this.indexOf(e,r,t)!==-1},ge.prototype.indexOf=function(e,r,t){return Wo(this,e,r,t,!0)},ge.prototype.lastIndexOf=function(e,r,t){return Wo(this,e,r,t,!1)},ge.prototype.write=function(e,r,t,a){if(r===void 0)a="utf8",t=this.length,r=0;else if(t===void 0&&typeof r=="string")a=r,t=this.length,r=0;else{if(!isFinite(r))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");r>>>=0,isFinite(t)?(t>>>=0,a===void 0&&(a="utf8")):(a=t,t=void 0)}var u=this.length-r;if((t===void 0||t>u)&&(t=u),e.length>0&&(t<0||r<0)||r>this.length)throw new RangeError("Attempt to write outside buffer bounds");a||(a="utf8");for(var n=!1;;)switch(a){case"hex":return Yl(this,e,r,t);case"utf8":case"utf-8":return Ql(this,e,r,t);case"ascii":return ea(this,e,r,t);case"latin1":case"binary":return Gl(this,e,r,t);case"base64":return Jl(this,e,r,t);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return $l(this,e,r,t);default:if(n)throw new TypeError("Unknown encoding: "+a);a=(""+a).toLowerCase(),n=!0}},ge.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}},ge.prototype.slice=function(e,r){var t=this.length;(e=~~e)<0?(e+=t)<0&&(e=0):e>t&&(e=t),(r=r===void 0?t:~~r)<0?(r+=t)<0&&(r=0):r>t&&(r=t),r<e&&(r=e);var a=this.subarray(e,r);return Object.setPrototypeOf(a,ge.prototype),a},ge.prototype.readUIntLE=function(e,r,t){e>>>=0,r>>>=0,t||st(e,r,this.length);for(var a=this[e],u=1,n=0;++n<r&&(u*=256);)a+=this[e+n]*u;return a},ge.prototype.readUIntBE=function(e,r,t){e>>>=0,r>>>=0,t||st(e,r,this.length);for(var a=this[e+--r],u=1;r>0&&(u*=256);)a+=this[e+--r]*u;return a},ge.prototype.readUInt8=function(e,r){return e>>>=0,r||st(e,1,this.length),this[e]},ge.prototype.readUInt16LE=function(e,r){return e>>>=0,r||st(e,2,this.length),this[e]|this[e+1]<<8},ge.prototype.readUInt16BE=function(e,r){return e>>>=0,r||st(e,2,this.length),this[e]<<8|this[e+1]},ge.prototype.readUInt32LE=function(e,r){return e>>>=0,r||st(e,4,this.length),(this[e]|this[e+1]<<8|this[e+2]<<16)+16777216*this[e+3]},ge.prototype.readUInt32BE=function(e,r){return e>>>=0,r||st(e,4,this.length),16777216*this[e]+(this[e+1]<<16|this[e+2]<<8|this[e+3])},ge.prototype.readIntLE=function(e,r,t){e>>>=0,r>>>=0,t||st(e,r,this.length);for(var a=this[e],u=1,n=0;++n<r&&(u*=256);)a+=this[e+n]*u;return a>=(u*=128)&&(a-=Math.pow(2,8*r)),a},ge.prototype.readIntBE=function(e,r,t){e>>>=0,r>>>=0,t||st(e,r,this.length);for(var a=r,u=1,n=this[e+--a];a>0&&(u*=256);)n+=this[e+--a]*u;return n>=(u*=128)&&(n-=Math.pow(2,8*r)),n},ge.prototype.readInt8=function(e,r){return e>>>=0,r||st(e,1,this.length),128&this[e]?-1*(255-this[e]+1):this[e]},ge.prototype.readInt16LE=function(e,r){e>>>=0,r||st(e,2,this.length);var t=this[e]|this[e+1]<<8;return 32768&t?4294901760|t:t},ge.prototype.readInt16BE=function(e,r){e>>>=0,r||st(e,2,this.length);var t=this[e+1]|this[e]<<8;return 32768&t?4294901760|t:t},ge.prototype.readInt32LE=function(e,r){return e>>>=0,r||st(e,4,this.length),this[e]|this[e+1]<<8|this[e+2]<<16|this[e+3]<<24},ge.prototype.readInt32BE=function(e,r){return e>>>=0,r||st(e,4,this.length),this[e]<<24|this[e+1]<<16|this[e+2]<<8|this[e+3]},ge.prototype.readFloatLE=function(e,r){return e>>>=0,r||st(e,4,this.length),cr.read(this,e,!0,23,4)},ge.prototype.readFloatBE=function(e,r){return e>>>=0,r||st(e,4,this.length),cr.read(this,e,!1,23,4)},ge.prototype.readDoubleLE=function(e,r){return e>>>=0,r||st(e,8,this.length),cr.read(this,e,!0,52,8)},ge.prototype.readDoubleBE=function(e,r){return e>>>=0,r||st(e,8,this.length),cr.read(this,e,!1,52,8)},ge.prototype.writeUIntLE=function(e,r,t,a){e=+e,r>>>=0,t>>>=0,a||yt(this,e,r,t,Math.pow(2,8*t)-1,0);var u=1,n=0;for(this[r]=255&e;++n<t&&(u*=256);)this[r+n]=e/u&255;return r+t},ge.prototype.writeUIntBE=function(e,r,t,a){e=+e,r>>>=0,t>>>=0,a||yt(this,e,r,t,Math.pow(2,8*t)-1,0);var u=t-1,n=1;for(this[r+u]=255&e;--u>=0&&(n*=256);)this[r+u]=e/n&255;return r+t},ge.prototype.writeUInt8=function(e,r,t){return e=+e,r>>>=0,t||yt(this,e,r,1,255,0),this[r]=255&e,r+1},ge.prototype.writeUInt16LE=function(e,r,t){return e=+e,r>>>=0,t||yt(this,e,r,2,65535,0),this[r]=255&e,this[r+1]=e>>>8,r+2},ge.prototype.writeUInt16BE=function(e,r,t){return e=+e,r>>>=0,t||yt(this,e,r,2,65535,0),this[r]=e>>>8,this[r+1]=255&e,r+2},ge.prototype.writeUInt32LE=function(e,r,t){return e=+e,r>>>=0,t||yt(this,e,r,4,4294967295,0),this[r+3]=e>>>24,this[r+2]=e>>>16,this[r+1]=e>>>8,this[r]=255&e,r+4},ge.prototype.writeUInt32BE=function(e,r,t){return e=+e,r>>>=0,t||yt(this,e,r,4,4294967295,0),this[r]=e>>>24,this[r+1]=e>>>16,this[r+2]=e>>>8,this[r+3]=255&e,r+4},ge.prototype.writeIntLE=function(e,r,t,a){if(e=+e,r>>>=0,!a){var u=Math.pow(2,8*t-1);yt(this,e,r,t,u-1,-u)}var n=0,i=1,s=0;for(this[r]=255&e;++n<t&&(i*=256);)e<0&&s===0&&this[r+n-1]!==0&&(s=1),this[r+n]=(e/i>>0)-s&255;return r+t},ge.prototype.writeIntBE=function(e,r,t,a){if(e=+e,r>>>=0,!a){var u=Math.pow(2,8*t-1);yt(this,e,r,t,u-1,-u)}var n=t-1,i=1,s=0;for(this[r+n]=255&e;--n>=0&&(i*=256);)e<0&&s===0&&this[r+n+1]!==0&&(s=1),this[r+n]=(e/i>>0)-s&255;return r+t},ge.prototype.writeInt8=function(e,r,t){return e=+e,r>>>=0,t||yt(this,e,r,1,127,-128),e<0&&(e=255+e+1),this[r]=255&e,r+1},ge.prototype.writeInt16LE=function(e,r,t){return e=+e,r>>>=0,t||yt(this,e,r,2,32767,-32768),this[r]=255&e,this[r+1]=e>>>8,r+2},ge.prototype.writeInt16BE=function(e,r,t){return e=+e,r>>>=0,t||yt(this,e,r,2,32767,-32768),this[r]=e>>>8,this[r+1]=255&e,r+2},ge.prototype.writeInt32LE=function(e,r,t){return e=+e,r>>>=0,t||yt(this,e,r,4,2147483647,-2147483648),this[r]=255&e,this[r+1]=e>>>8,this[r+2]=e>>>16,this[r+3]=e>>>24,r+4},ge.prototype.writeInt32BE=function(e,r,t){return e=+e,r>>>=0,t||yt(this,e,r,4,2147483647,-2147483648),e<0&&(e=4294967295+e+1),this[r]=e>>>24,this[r+1]=e>>>16,this[r+2]=e>>>8,this[r+3]=255&e,r+4},ge.prototype.writeFloatLE=function(e,r,t){return Ho(this,e,r,!0,t)},ge.prototype.writeFloatBE=function(e,r,t){return Ho(this,e,r,!1,t)},ge.prototype.writeDoubleLE=function(e,r,t){return Vo(this,e,r,!0,t)},ge.prototype.writeDoubleBE=function(e,r,t){return Vo(this,e,r,!1,t)},ge.prototype.copy=function(e,r,t,a){if(!ge.isBuffer(e))throw new TypeError("argument should be a Buffer");if(t||(t=0),a||a===0||(a=this.length),r>=e.length&&(r=e.length),r||(r=0),a>0&&a<t&&(a=t),a===t||e.length===0||this.length===0)return 0;if(r<0)throw new RangeError("targetStart out of bounds");if(t<0||t>=this.length)throw new RangeError("Index out of range");if(a<0)throw new RangeError("sourceEnd out of bounds");a>this.length&&(a=this.length),e.length-r<a-t&&(a=e.length-r+t);var u=a-t;if(this===e&&typeof Uint8Array.prototype.copyWithin=="function")this.copyWithin(r,t,a);else if(this===e&&t<r&&r<a)for(var n=u-1;n>=0;--n)e[n+r]=this[n+t];else Uint8Array.prototype.set.call(e,this.subarray(t,a),r);return u},ge.prototype.fill=function(e,r,t,a){if(typeof e=="string"){if(typeof r=="string"?(a=r,r=0,t=this.length):typeof t=="string"&&(a=t,t=this.length),a!==void 0&&typeof a!="string")throw new TypeError("encoding must be a string");if(typeof a=="string"&&!ge.isEncoding(a))throw new TypeError("Unknown encoding: "+a);if(e.length===1){var u=e.charCodeAt(0);(a==="utf8"&&u<128||a==="latin1")&&(e=u)}}else typeof e=="number"?e&=255:typeof e=="boolean"&&(e=Number(e));if(r<0||this.length<r||this.length<t)throw new RangeError("Out of range index");if(t<=r)return this;var n;if(r>>>=0,t=t===void 0?this.length:t>>>0,e||(e=0),typeof e=="number")for(n=r;n<t;++n)this[n]=e;else{var i=ge.isBuffer(e)?e:ge.from(e,a),s=i.length;if(s===0)throw new TypeError('The value "'+e+'" is invalid for argument "value"');for(n=0;n<t-r;++n)this[n+r]=i[n%s]}return this},na=/[^+/0-9A-Za-z-_]/g,oa=function(){for(var e=new Array(256),r=0;r<16;++r)for(var t=16*r,a=0;a<16;++a)e[t+a]="0123456789abcdef"[r]+"0123456789abcdef"[a];return e}(),Ct.Buffer,Ct.INSPECT_MAX_BYTES,Ct.kMaxLength,Mr={},xr=Ct,It=xr.Buffer,It.from&&It.alloc&&It.allocUnsafe&&It.allocUnsafeSlow?Mr=xr:(zo(xr,Mr),Mr.Buffer=sr),sr.prototype=Object.create(It.prototype),zo(It,sr),sr.from=function(e,r,t){if(typeof e=="number")throw new TypeError("Argument must not be a number");return It(e,r,t)},sr.alloc=function(e,r,t){if(typeof e!="number")throw new TypeError("Argument must be a number");var a=It(e);return r!==void 0?typeof t=="string"?a.fill(r,t):a.fill(r):a.fill(0),a},sr.allocUnsafe=function(e){if(typeof e!="number")throw new TypeError("Argument must be a number");return It(e)},sr.allocUnsafeSlow=function(e){if(typeof e!="number")throw new TypeError("Argument must be a number");return xr.SlowBuffer(e)},Jo=Mr,kr={},fi=Jo.Buffer,Zn=fi.isEncoding||function(e){switch((e=""+e)&&e.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}},kr.StringDecoder=Br,Br.prototype.write=function(e){if(e.length===0)return"";var r,t;if(this.lastNeed){if((r=this.fillLast(e))===void 0)return"";t=this.lastNeed,this.lastNeed=0}else t=0;return t<e.length?r?r+this.text(e,t):this.text(e,t):r||""},Br.prototype.end=function(e){var r=e&&e.length?this.write(e):"";return this.lastNeed?r+"ï¿½":r},Br.prototype.text=function(e,r){var t=function(u,n,i){var s=n.length-1;if(s<i)return 0;var o=Pi(n[s]);return o>=0?(o>0&&(u.lastNeed=o-1),o):--s<i||o===-2?0:(o=Pi(n[s]))>=0?(o>0&&(u.lastNeed=o-2),o):--s<i||o===-2?0:(o=Pi(n[s]))>=0?(o>0&&(o===2?o=0:u.lastNeed=o-3),o):0}(this,e,r);if(!this.lastNeed)return e.toString("utf8",r);this.lastTotal=t;var a=e.length-(t-this.lastNeed);return e.copy(this.lastChar,0,a),e.toString("utf8",r,a)},Br.prototype.fillLast=function(e){if(this.lastNeed<=e.length)return e.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);e.copy(this.lastChar,this.lastTotal-this.lastNeed,0,e.length),this.lastNeed-=e.length},kr.StringDecoder,kr.StringDecoder}),sa={};wr(sa,{StringDecoder:()=>aa,default:()=>kr});var aa,hu=ht(()=>{ce(),de(),fe(),$o(),$o(),aa=kr.StringDecoder}),la=ve((e,r)=>{ce(),de(),fe();var t=vr(),{PromisePrototypeThen:a,SymbolAsyncIterator:u,SymbolIterator:n}=ot(),{Buffer:i}=(ft(),Ke(ct)),{ERR_INVALID_ARG_TYPE:s,ERR_STREAM_NULL_VALUES:o}=wt().codes;function l(h,f,d){let m;if(typeof f=="string"||f instanceof i)return new h({objectMode:!0,...d,read(){this.push(f),this.push(null)}});let b;if(f&&f[u])b=!0,m=f[u]();else if(f&&f[n])b=!1,m=f[n]();else throw new s("iterable",["Iterable"],f);let y=new h({objectMode:!0,highWaterMark:1,...d}),A=!1;y._read=function(){A||(A=!0,C())},y._destroy=function(E,L){a(M(E),()=>t.nextTick(L,E),D=>t.nextTick(L,D||E))};async function M(E){let L=E!=null,D=typeof m.throw=="function";if(L&&D){let{value:I,done:T}=await m.throw(E);if(await I,T)return}if(typeof m.return=="function"){let{value:I}=await m.return();await I}}async function C(){for(;;){try{let{value:E,done:L}=b?await m.next():m.next();if(L)y.push(null);else{let D=E&&typeof E.then=="function"?await E:E;if(D===null)throw A=!1,new o;if(y.push(D))continue;A=!1}}catch(E){y.destroy(E)}break}}return y}r.exports=l}),vi=ve((e,r)=>{ce(),de(),fe();var t=vr(),{ArrayPrototypeIndexOf:a,NumberIsInteger:u,NumberIsNaN:n,NumberParseInt:i,ObjectDefineProperties:s,ObjectKeys:o,ObjectSetPrototypeOf:l,Promise:h,SafeSet:f,SymbolAsyncIterator:d,Symbol:m}=ot();r.exports=k,k.ReadableState=_e;var{EventEmitter:b}=(Rr(),Ke(_r)),{Stream:y,prependListener:A}=wo(),{Buffer:M}=(ft(),Ke(ct)),{addAbortSignal:C}=yi(),E=rr(),L=Vt().debuglog("stream",c=>{L=c}),D=Hl(),I=Or(),{getHighWaterMark:T,getDefaultHighWaterMark:x}=vo(),{aggregateTwoErrors:q,codes:{ERR_INVALID_ARG_TYPE:G,ERR_METHOD_NOT_IMPLEMENTED:te,ERR_OUT_OF_RANGE:v,ERR_STREAM_PUSH_AFTER_EOF:V,ERR_STREAM_UNSHIFT_AFTER_END_EVENT:Z}}=wt(),{validateObject:K}=bi(),me=m("kPaused"),{StringDecoder:oe}=(hu(),Ke(sa)),H=la();l(k.prototype,y.prototype),l(k,y);var be=()=>{},{errorOrDestroy:ie}=I;function _e(c,g,_){typeof _!="boolean"&&(_=g instanceof zt()),this.objectMode=!!(c&&c.objectMode),_&&(this.objectMode=this.objectMode||!!(c&&c.readableObjectMode)),this.highWaterMark=c?T(this,c,"readableHighWaterMark",_):x(!1),this.buffer=new D,this.length=0,this.pipes=[],this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.constructed=!0,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this[me]=null,this.errorEmitted=!1,this.emitClose=!c||c.emitClose!==!1,this.autoDestroy=!c||c.autoDestroy!==!1,this.destroyed=!1,this.errored=null,this.closed=!1,this.closeEmitted=!1,this.defaultEncoding=c&&c.defaultEncoding||"utf8",this.awaitDrainWriters=null,this.multiAwaitDrain=!1,this.readingMore=!1,this.dataEmitted=!1,this.decoder=null,this.encoding=null,c&&c.encoding&&(this.decoder=new oe(c.encoding),this.encoding=c.encoding)}function k(c){if(!(this instanceof k))return new k(c);let g=this instanceof zt();this._readableState=new _e(c,this,g),c&&(typeof c.read=="function"&&(this._read=c.read),typeof c.destroy=="function"&&(this._destroy=c.destroy),typeof c.construct=="function"&&(this._construct=c.construct),c.signal&&!g&&C(c.signal,this)),y.call(this,c),I.construct(this,()=>{this._readableState.needReadable&&ee(this,this._readableState)})}k.prototype.destroy=I.destroy,k.prototype._undestroy=I.undestroy,k.prototype._destroy=function(c,g){g(c)},k.prototype[b.captureRejectionSymbol]=function(c){this.destroy(c)},k.prototype.push=function(c,g){return Q(this,c,g,!1)},k.prototype.unshift=function(c,g){return Q(this,c,g,!0)};function Q(c,g,_,O){L("readableAddChunk",g);let w=c._readableState,R;if(w.objectMode||(typeof g=="string"?(_=_||w.defaultEncoding,w.encoding!==_&&(O&&w.encoding?g=M.from(g,_).toString(w.encoding):(g=M.from(g,_),_=""))):g instanceof M?_="":y._isUint8Array(g)?(g=y._uint8ArrayToBuffer(g),_=""):g!=null&&(R=new G("chunk",["string","Buffer","Uint8Array"],g))),R)ie(c,R);else if(g===null)w.reading=!1,S(c,w);else if(w.objectMode||g&&g.length>0)if(O)if(w.endEmitted)ie(c,new Z);else{if(w.destroyed||w.errored)return!1;se(c,w,g,!0)}else if(w.ended)ie(c,new V);else{if(w.destroyed||w.errored)return!1;w.reading=!1,w.decoder&&!_?(g=w.decoder.write(g),w.objectMode||g.length!==0?se(c,w,g,!1):ee(c,w)):se(c,w,g,!1)}else O||(w.reading=!1,ee(c,w));return!w.ended&&(w.length<w.highWaterMark||w.length===0)}function se(c,g,_,O){g.flowing&&g.length===0&&!g.sync&&c.listenerCount("data")>0?(g.multiAwaitDrain?g.awaitDrainWriters.clear():g.awaitDrainWriters=null,g.dataEmitted=!0,c.emit("data",_)):(g.length+=g.objectMode?1:_.length,O?g.buffer.unshift(_):g.buffer.push(_),g.needReadable&&z(c)),ee(c,g)}k.prototype.isPaused=function(){let c=this._readableState;return c[me]===!0||c.flowing===!1},k.prototype.setEncoding=function(c){let g=new oe(c);this._readableState.decoder=g,this._readableState.encoding=this._readableState.decoder.encoding;let _=this._readableState.buffer,O="";for(let w of _)O+=g.write(w);return _.clear(),O!==""&&_.push(O),this._readableState.length=O.length,this};var Ae=1073741824;function he(c){if(c>Ae)throw new v("size","<= 1GiB",c);return c--,c|=c>>>1,c|=c>>>2,c|=c>>>4,c|=c>>>8,c|=c>>>16,c++,c}function B(c,g){return c<=0||g.length===0&&g.ended?0:g.objectMode?1:n(c)?g.flowing&&g.length?g.buffer.first().length:g.length:c<=g.length?c:g.ended?g.length:0}k.prototype.read=function(c){L("read",c),c===void 0?c=NaN:u(c)||(c=i(c,10));let g=this._readableState,_=c;if(c>g.highWaterMark&&(g.highWaterMark=he(c)),c!==0&&(g.emittedReadable=!1),c===0&&g.needReadable&&((g.highWaterMark!==0?g.length>=g.highWaterMark:g.length>0)||g.ended))return L("read: emitReadable",g.length,g.ended),g.length===0&&g.ended?ye(this):z(this),null;if(c=B(c,g),c===0&&g.ended)return g.length===0&&ye(this),null;let O=g.needReadable;if(L("need readable",O),(g.length===0||g.length-c<g.highWaterMark)&&(O=!0,L("length less than watermark",O)),g.ended||g.reading||g.destroyed||g.errored||!g.constructed)O=!1,L("reading, ended or constructing",O);else if(O){L("do read"),g.reading=!0,g.sync=!0,g.length===0&&(g.needReadable=!0);try{this._read(g.highWaterMark)}catch(R){ie(this,R)}g.sync=!1,g.reading||(c=B(_,g))}let w;return c>0?w=Y(c,g):w=null,w===null?(g.needReadable=g.length<=g.highWaterMark,c=0):(g.length-=c,g.multiAwaitDrain?g.awaitDrainWriters.clear():g.awaitDrainWriters=null),g.length===0&&(g.ended||(g.needReadable=!0),_!==c&&g.ended&&ye(this)),w!==null&&!g.errorEmitted&&!g.closeEmitted&&(g.dataEmitted=!0,this.emit("data",w)),w};function S(c,g){if(L("onEofChunk"),!g.ended){if(g.decoder){let _=g.decoder.end();_&&_.length&&(g.buffer.push(_),g.length+=g.objectMode?1:_.length)}g.ended=!0,g.sync?z(c):(g.needReadable=!1,g.emittedReadable=!0,ae(c))}}function z(c){let g=c._readableState;L("emitReadable",g.needReadable,g.emittedReadable),g.needReadable=!1,g.emittedReadable||(L("emitReadable",g.flowing),g.emittedReadable=!0,t.nextTick(ae,c))}function ae(c){let g=c._readableState;L("emitReadable_",g.destroyed,g.length,g.ended),!g.destroyed&&!g.errored&&(g.length||g.ended)&&(c.emit("readable"),g.emittedReadable=!1),g.needReadable=!g.flowing&&!g.ended&&g.length<=g.highWaterMark,re(c)}function ee(c,g){!g.readingMore&&g.constructed&&(g.readingMore=!0,t.nextTick(X,c,g))}function X(c,g){for(;!g.reading&&!g.ended&&(g.length<g.highWaterMark||g.flowing&&g.length===0);){let _=g.length;if(L("maybeReadMore read 0"),c.read(0),_===g.length)break}g.readingMore=!1}k.prototype._read=function(c){throw new te("_read()")},k.prototype.pipe=function(c,g){let _=this,O=this._readableState;O.pipes.length===1&&(O.multiAwaitDrain||(O.multiAwaitDrain=!0,O.awaitDrainWriters=new f(O.awaitDrainWriters?[O.awaitDrainWriters]:[]))),O.pipes.push(c),L("pipe count=%d opts=%j",O.pipes.length,g);let w=(!g||g.end!==!1)&&c!==t.stdout&&c!==t.stderr?N:it;O.endEmitted?t.nextTick(w):_.once("end",w),c.on("unpipe",R);function R(He,Ye){L("onunpipe"),He===_&&Ye&&Ye.hasUnpiped===!1&&(Ye.hasUnpiped=!0,we())}function N(){L("onend"),c.end()}let $,ne=!1;function we(){L("cleanup"),c.removeListener("close",at),c.removeListener("finish",je),$&&c.removeListener("drain",$),c.removeListener("error",Qe),c.removeListener("unpipe",R),_.removeListener("end",N),_.removeListener("end",it),_.removeListener("data",Pe),ne=!0,$&&O.awaitDrainWriters&&(!c._writableState||c._writableState.needDrain)&&$()}function Ie(){ne||(O.pipes.length===1&&O.pipes[0]===c?(L("false write response, pause",0),O.awaitDrainWriters=c,O.multiAwaitDrain=!1):O.pipes.length>1&&O.pipes.includes(c)&&(L("false write response, pause",O.awaitDrainWriters.size),O.awaitDrainWriters.add(c)),_.pause()),$||($=ue(_,c),c.on("drain",$))}_.on("data",Pe);function Pe(He){L("ondata");let Ye=c.write(He);L("dest.write",Ye),Ye===!1&&Ie()}function Qe(He){if(L("onerror",He),it(),c.removeListener("error",Qe),c.listenerCount("error")===0){let Ye=c._writableState||c._readableState;Ye&&!Ye.errorEmitted?ie(c,He):c.emit("error",He)}}A(c,"error",Qe);function at(){c.removeListener("finish",je),it()}c.once("close",at);function je(){L("onfinish"),c.removeListener("close",at),it()}c.once("finish",je);function it(){L("unpipe"),_.unpipe(c)}return c.emit("pipe",_),c.writableNeedDrain===!0?O.flowing&&Ie():O.flowing||(L("pipe resume"),_.resume()),c};function ue(c,g){return function(){let _=c._readableState;_.awaitDrainWriters===g?(L("pipeOnDrain",1),_.awaitDrainWriters=null):_.multiAwaitDrain&&(L("pipeOnDrain",_.awaitDrainWriters.size),_.awaitDrainWriters.delete(g)),(!_.awaitDrainWriters||_.awaitDrainWriters.size===0)&&c.listenerCount("data")&&c.resume()}}k.prototype.unpipe=function(c){let g=this._readableState,_={hasUnpiped:!1};if(g.pipes.length===0)return this;if(!c){let w=g.pipes;g.pipes=[],this.pause();for(let R=0;R<w.length;R++)w[R].emit("unpipe",this,{hasUnpiped:!1});return this}let O=a(g.pipes,c);return O===-1?this:(g.pipes.splice(O,1),g.pipes.length===0&&this.pause(),c.emit("unpipe",this,_),this)},k.prototype.on=function(c,g){let _=y.prototype.on.call(this,c,g),O=this._readableState;return c==="data"?(O.readableListening=this.listenerCount("readable")>0,O.flowing!==!1&&this.resume()):c==="readable"&&!O.endEmitted&&!O.readableListening&&(O.readableListening=O.needReadable=!0,O.flowing=!1,O.emittedReadable=!1,L("on readable",O.length,O.reading),O.length?z(this):O.reading||t.nextTick(P,this)),_},k.prototype.addListener=k.prototype.on,k.prototype.removeListener=function(c,g){let _=y.prototype.removeListener.call(this,c,g);return c==="readable"&&t.nextTick(le,this),_},k.prototype.off=k.prototype.removeListener,k.prototype.removeAllListeners=function(c){let g=y.prototype.removeAllListeners.apply(this,arguments);return(c==="readable"||c===void 0)&&t.nextTick(le,this),g};function le(c){let g=c._readableState;g.readableListening=c.listenerCount("readable")>0,g.resumeScheduled&&g[me]===!1?g.flowing=!0:c.listenerCount("data")>0?c.resume():g.readableListening||(g.flowing=null)}function P(c){L("readable nexttick read 0"),c.read(0)}k.prototype.resume=function(){let c=this._readableState;return c.flowing||(L("resume"),c.flowing=!c.readableListening,W(this,c)),c[me]=!1,this};function W(c,g){g.resumeScheduled||(g.resumeScheduled=!0,t.nextTick(F,c,g))}function F(c,g){L("resume",g.reading),g.reading||c.read(0),g.resumeScheduled=!1,c.emit("resume"),re(c),g.flowing&&!g.reading&&c.read(0)}k.prototype.pause=function(){return L("call pause flowing=%j",this._readableState.flowing),this._readableState.flowing!==!1&&(L("pause"),this._readableState.flowing=!1,this.emit("pause")),this._readableState[me]=!0,this};function re(c){let g=c._readableState;for(L("flow",g.flowing);g.flowing&&c.read()!==null;);}k.prototype.wrap=function(c){let g=!1;c.on("data",O=>{!this.push(O)&&c.pause&&(g=!0,c.pause())}),c.on("end",()=>{this.push(null)}),c.on("error",O=>{ie(this,O)}),c.on("close",()=>{this.destroy()}),c.on("destroy",()=>{this.destroy()}),this._read=()=>{g&&c.resume&&(g=!1,c.resume())};let _=o(c);for(let O=1;O<_.length;O++){let w=_[O];this[w]===void 0&&typeof c[w]=="function"&&(this[w]=c[w].bind(c))}return this},k.prototype[d]=function(){return J(this)},k.prototype.iterator=function(c){return c!==void 0&&K(c,"options"),J(this,c)};function J(c,g){typeof c.read!="function"&&(c=k.wrap(c,{objectMode:!0}));let _=j(c,g);return _.stream=c,_}async function*j(c,g){let _=be;function O(N){this===c?(_(),_=be):_=N}c.on("readable",O);let w,R=E(c,{writable:!1},N=>{w=N?q(w,N):null,_(),_=be});try{for(;;){let N=c.destroyed?null:c.read();if(N!==null)yield N;else{if(w)throw w;if(w===null)return;await new h(O)}}}catch(N){throw w=q(w,N),w}finally{(w||(g==null?void 0:g.destroyOnReturn)!==!1)&&(w===void 0||c._readableState.autoDestroy)?I.destroyer(c,null):(c.off("readable",O),R())}}s(k.prototype,{readable:{__proto__:null,get(){let c=this._readableState;return!!c&&c.readable!==!1&&!c.destroyed&&!c.errorEmitted&&!c.endEmitted},set(c){this._readableState&&(this._readableState.readable=!!c)}},readableDidRead:{__proto__:null,enumerable:!1,get:function(){return this._readableState.dataEmitted}},readableAborted:{__proto__:null,enumerable:!1,get:function(){return!!(this._readableState.readable!==!1&&(this._readableState.destroyed||this._readableState.errored)&&!this._readableState.endEmitted)}},readableHighWaterMark:{__proto__:null,enumerable:!1,get:function(){return this._readableState.highWaterMark}},readableBuffer:{__proto__:null,enumerable:!1,get:function(){return this._readableState&&this._readableState.buffer}},readableFlowing:{__proto__:null,enumerable:!1,get:function(){return this._readableState.flowing},set:function(c){this._readableState&&(this._readableState.flowing=c)}},readableLength:{__proto__:null,enumerable:!1,get(){return this._readableState.length}},readableObjectMode:{__proto__:null,enumerable:!1,get(){return this._readableState?this._readableState.objectMode:!1}},readableEncoding:{__proto__:null,enumerable:!1,get(){return this._readableState?this._readableState.encoding:null}},errored:{__proto__:null,enumerable:!1,get(){return this._readableState?this._readableState.errored:null}},closed:{__proto__:null,get(){return this._readableState?this._readableState.closed:!1}},destroyed:{__proto__:null,enumerable:!1,get(){return this._readableState?this._readableState.destroyed:!1},set(c){this._readableState&&(this._readableState.destroyed=c)}},readableEnded:{__proto__:null,enumerable:!1,get(){return this._readableState?this._readableState.endEmitted:!1}}}),s(_e.prototype,{pipesCount:{__proto__:null,get(){return this.pipes.length}},paused:{__proto__:null,get(){return this[me]!==!1},set(c){this[me]=!!c}}}),k._fromList=Y;function Y(c,g){if(g.length===0)return null;let _;return g.objectMode?_=g.buffer.shift():!c||c>=g.length?(g.decoder?_=g.buffer.join(""):g.buffer.length===1?_=g.buffer.first():_=g.buffer.concat(g.length),g.buffer.clear()):_=g.buffer.consume(c,g.decoder),_}function ye(c){let g=c._readableState;L("endReadable",g.endEmitted),g.endEmitted||(g.ended=!0,t.nextTick(Ee,g,c))}function Ee(c,g){if(L("endReadableNT",c.endEmitted,c.length),!c.errored&&!c.closeEmitted&&!c.endEmitted&&c.length===0){if(c.endEmitted=!0,g.emit("end"),g.writable&&g.allowHalfOpen===!1)t.nextTick(ke,g);else if(c.autoDestroy){let _=g._writableState;(!_||_.autoDestroy&&(_.finished||_.writable===!1))&&g.destroy()}}}function ke(c){c.writable&&!c.writableEnded&&!c.destroyed&&c.end()}k.from=function(c,g){return H(k,c,g)};var Le;function p(){return Le===void 0&&(Le={}),Le}k.fromWeb=function(c,g){return p().newStreamReadableFromReadableStream(c,g)},k.toWeb=function(c,g){return p().newReadableStreamFromStreamReadable(c,g)},k.wrap=function(c,g){var _,O;return new k({objectMode:(_=(O=c.readableObjectMode)!==null&&O!==void 0?O:c.objectMode)!==null&&_!==void 0?_:!0,...g,destroy(w,R){I.destroyer(c,w),R(w)}}).wrap(c)}}),ua=ve((e,r)=>{ce(),de(),fe();var t=vr(),{ArrayPrototypeSlice:a,Error:u,FunctionPrototypeSymbolHasInstance:n,ObjectDefineProperty:i,ObjectDefineProperties:s,ObjectSetPrototypeOf:o,StringPrototypeToLowerCase:l,Symbol:h,SymbolHasInstance:f}=ot();r.exports=oe,oe.WritableState=K;var{EventEmitter:d}=(Rr(),Ke(_r)),m=wo().Stream,{Buffer:b}=(ft(),Ke(ct)),y=Or(),{addAbortSignal:A}=yi(),{getHighWaterMark:M,getDefaultHighWaterMark:C}=vo(),{ERR_INVALID_ARG_TYPE:E,ERR_METHOD_NOT_IMPLEMENTED:L,ERR_MULTIPLE_CALLBACK:D,ERR_STREAM_CANNOT_PIPE:I,ERR_STREAM_DESTROYED:T,ERR_STREAM_ALREADY_FINISHED:x,ERR_STREAM_NULL_VALUES:q,ERR_STREAM_WRITE_AFTER_END:G,ERR_UNKNOWN_ENCODING:te}=wt().codes,{errorOrDestroy:v}=y;o(oe.prototype,m.prototype),o(oe,m);function V(){}var Z=h("kOnFinished");function K(P,W,F){typeof F!="boolean"&&(F=W instanceof zt()),this.objectMode=!!(P&&P.objectMode),F&&(this.objectMode=this.objectMode||!!(P&&P.writableObjectMode)),this.highWaterMark=P?M(this,P,"writableHighWaterMark",F):C(!1),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1;let re=!!(P&&P.decodeStrings===!1);this.decodeStrings=!re,this.defaultEncoding=P&&P.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=k.bind(void 0,W),this.writecb=null,this.writelen=0,this.afterWriteTickInfo=null,me(this),this.pendingcb=0,this.constructed=!0,this.prefinished=!1,this.errorEmitted=!1,this.emitClose=!P||P.emitClose!==!1,this.autoDestroy=!P||P.autoDestroy!==!1,this.errored=null,this.closed=!1,this.closeEmitted=!1,this[Z]=[]}function me(P){P.buffered=[],P.bufferedIndex=0,P.allBuffers=!0,P.allNoop=!0}K.prototype.getBuffer=function(){return a(this.buffered,this.bufferedIndex)},i(K.prototype,"bufferedRequestCount",{__proto__:null,get(){return this.buffered.length-this.bufferedIndex}});function oe(P){let W=this instanceof zt();if(!W&&!n(oe,this))return new oe(P);this._writableState=new K(P,this,W),P&&(typeof P.write=="function"&&(this._write=P.write),typeof P.writev=="function"&&(this._writev=P.writev),typeof P.destroy=="function"&&(this._destroy=P.destroy),typeof P.final=="function"&&(this._final=P.final),typeof P.construct=="function"&&(this._construct=P.construct),P.signal&&A(P.signal,this)),m.call(this,P),y.construct(this,()=>{let F=this._writableState;F.writing||he(this,F),ae(this,F)})}i(oe,f,{__proto__:null,value:function(P){return n(this,P)?!0:this!==oe?!1:P&&P._writableState instanceof K}}),oe.prototype.pipe=function(){v(this,new I)};function H(P,W,F,re){let J=P._writableState;if(typeof F=="function")re=F,F=J.defaultEncoding;else{if(!F)F=J.defaultEncoding;else if(F!=="buffer"&&!b.isEncoding(F))throw new te(F);typeof re!="function"&&(re=V)}if(W===null)throw new q;if(!J.objectMode)if(typeof W=="string")J.decodeStrings!==!1&&(W=b.from(W,F),F="buffer");else if(W instanceof b)F="buffer";else if(m._isUint8Array(W))W=m._uint8ArrayToBuffer(W),F="buffer";else throw new E("chunk",["string","Buffer","Uint8Array"],W);let j;return J.ending?j=new G:J.destroyed&&(j=new T("write")),j?(t.nextTick(re,j),v(P,j,!0),j):(J.pendingcb++,be(P,J,W,F,re))}oe.prototype.write=function(P,W,F){return H(this,P,W,F)===!0},oe.prototype.cork=function(){this._writableState.corked++},oe.prototype.uncork=function(){let P=this._writableState;P.corked&&(P.corked--,P.writing||he(this,P))},oe.prototype.setDefaultEncoding=function(P){if(typeof P=="string"&&(P=l(P)),!b.isEncoding(P))throw new te(P);return this._writableState.defaultEncoding=P,this};function be(P,W,F,re,J){let j=W.objectMode?1:F.length;W.length+=j;let Y=W.length<W.highWaterMark;return Y||(W.needDrain=!0),W.writing||W.corked||W.errored||!W.constructed?(W.buffered.push({chunk:F,encoding:re,callback:J}),W.allBuffers&&re!=="buffer"&&(W.allBuffers=!1),W.allNoop&&J!==V&&(W.allNoop=!1)):(W.writelen=j,W.writecb=J,W.writing=!0,W.sync=!0,P._write(F,re,W.onwrite),W.sync=!1),Y&&!W.errored&&!W.destroyed}function ie(P,W,F,re,J,j,Y){W.writelen=re,W.writecb=Y,W.writing=!0,W.sync=!0,W.destroyed?W.onwrite(new T("write")):F?P._writev(J,W.onwrite):P._write(J,j,W.onwrite),W.sync=!1}function _e(P,W,F,re){--W.pendingcb,re(F),Ae(W),v(P,F)}function k(P,W){let F=P._writableState,re=F.sync,J=F.writecb;if(typeof J!="function"){v(P,new D);return}F.writing=!1,F.writecb=null,F.length-=F.writelen,F.writelen=0,W?(W.stack,F.errored||(F.errored=W),P._readableState&&!P._readableState.errored&&(P._readableState.errored=W),re?t.nextTick(_e,P,F,W,J):_e(P,F,W,J)):(F.buffered.length>F.bufferedIndex&&he(P,F),re?F.afterWriteTickInfo!==null&&F.afterWriteTickInfo.cb===J?F.afterWriteTickInfo.count++:(F.afterWriteTickInfo={count:1,cb:J,stream:P,state:F},t.nextTick(Q,F.afterWriteTickInfo)):se(P,F,1,J))}function Q({stream:P,state:W,count:F,cb:re}){return W.afterWriteTickInfo=null,se(P,W,F,re)}function se(P,W,F,re){for(!W.ending&&!P.destroyed&&W.length===0&&W.needDrain&&(W.needDrain=!1,P.emit("drain"));F-- >0;)W.pendingcb--,re();W.destroyed&&Ae(W),ae(P,W)}function Ae(P){if(P.writing)return;for(let J=P.bufferedIndex;J<P.buffered.length;++J){var W;let{chunk:j,callback:Y}=P.buffered[J],ye=P.objectMode?1:j.length;P.length-=ye,Y((W=P.errored)!==null&&W!==void 0?W:new T("write"))}let F=P[Z].splice(0);for(let J=0;J<F.length;J++){var re;F[J]((re=P.errored)!==null&&re!==void 0?re:new T("end"))}me(P)}function he(P,W){if(W.corked||W.bufferProcessing||W.destroyed||!W.constructed)return;let{buffered:F,bufferedIndex:re,objectMode:J}=W,j=F.length-re;if(!j)return;let Y=re;if(W.bufferProcessing=!0,j>1&&P._writev){W.pendingcb-=j-1;let ye=W.allNoop?V:ke=>{for(let Le=Y;Le<F.length;++Le)F[Le].callback(ke)},Ee=W.allNoop&&Y===0?F:a(F,Y);Ee.allBuffers=W.allBuffers,ie(P,W,!0,W.length,Ee,"",ye),me(W)}else{do{let{chunk:ye,encoding:Ee,callback:ke}=F[Y];F[Y++]=null;let Le=J?1:ye.length;ie(P,W,!1,Le,ye,Ee,ke)}while(Y<F.length&&!W.writing);Y===F.length?me(W):Y>256?(F.splice(0,Y),W.bufferedIndex=0):W.bufferedIndex=Y}W.bufferProcessing=!1}oe.prototype._write=function(P,W,F){if(this._writev)this._writev([{chunk:P,encoding:W}],F);else throw new L("_write()")},oe.prototype._writev=null,oe.prototype.end=function(P,W,F){let re=this._writableState;typeof P=="function"?(F=P,P=null,W=null):typeof W=="function"&&(F=W,W=null);let J;if(P!=null){let j=H(this,P,W);j instanceof u&&(J=j)}return re.corked&&(re.corked=1,this.uncork()),J||(!re.errored&&!re.ending?(re.ending=!0,ae(this,re,!0),re.ended=!0):re.finished?J=new x("end"):re.destroyed&&(J=new T("end"))),typeof F=="function"&&(J||re.finished?t.nextTick(F,J):re[Z].push(F)),this};function B(P){return P.ending&&!P.destroyed&&P.constructed&&P.length===0&&!P.errored&&P.buffered.length===0&&!P.finished&&!P.writing&&!P.errorEmitted&&!P.closeEmitted}function S(P,W){let F=!1;function re(J){if(F){v(P,J??D());return}if(F=!0,W.pendingcb--,J){let j=W[Z].splice(0);for(let Y=0;Y<j.length;Y++)j[Y](J);v(P,J,W.sync)}else B(W)&&(W.prefinished=!0,P.emit("prefinish"),W.pendingcb++,t.nextTick(ee,P,W))}W.sync=!0,W.pendingcb++;try{P._final(re)}catch(J){re(J)}W.sync=!1}function z(P,W){!W.prefinished&&!W.finalCalled&&(typeof P._final=="function"&&!W.destroyed?(W.finalCalled=!0,S(P,W)):(W.prefinished=!0,P.emit("prefinish")))}function ae(P,W,F){B(W)&&(z(P,W),W.pendingcb===0&&(F?(W.pendingcb++,t.nextTick((re,J)=>{B(J)?ee(re,J):J.pendingcb--},P,W)):B(W)&&(W.pendingcb++,ee(P,W))))}function ee(P,W){W.pendingcb--,W.finished=!0;let F=W[Z].splice(0);for(let re=0;re<F.length;re++)F[re]();if(P.emit("finish"),W.autoDestroy){let re=P._readableState;(!re||re.autoDestroy&&(re.endEmitted||re.readable===!1))&&P.destroy()}}s(oe.prototype,{closed:{__proto__:null,get(){return this._writableState?this._writableState.closed:!1}},destroyed:{__proto__:null,get(){return this._writableState?this._writableState.destroyed:!1},set(P){this._writableState&&(this._writableState.destroyed=P)}},writable:{__proto__:null,get(){let P=this._writableState;return!!P&&P.writable!==!1&&!P.destroyed&&!P.errored&&!P.ending&&!P.ended},set(P){this._writableState&&(this._writableState.writable=!!P)}},writableFinished:{__proto__:null,get(){return this._writableState?this._writableState.finished:!1}},writableObjectMode:{__proto__:null,get(){return this._writableState?this._writableState.objectMode:!1}},writableBuffer:{__proto__:null,get(){return this._writableState&&this._writableState.getBuffer()}},writableEnded:{__proto__:null,get(){return this._writableState?this._writableState.ending:!1}},writableNeedDrain:{__proto__:null,get(){let P=this._writableState;return P?!P.destroyed&&!P.ending&&P.needDrain:!1}},writableHighWaterMark:{__proto__:null,get(){return this._writableState&&this._writableState.highWaterMark}},writableCorked:{__proto__:null,get(){return this._writableState?this._writableState.corked:0}},writableLength:{__proto__:null,get(){return this._writableState&&this._writableState.length}},errored:{__proto__:null,enumerable:!1,get(){return this._writableState?this._writableState.errored:null}},writableAborted:{__proto__:null,enumerable:!1,get:function(){return!!(this._writableState.writable!==!1&&(this._writableState.destroyed||this._writableState.errored)&&!this._writableState.finished)}}});var X=y.destroy;oe.prototype.destroy=function(P,W){let F=this._writableState;return!F.destroyed&&(F.bufferedIndex<F.buffered.length||F[Z].length)&&t.nextTick(Ae,F),X.call(this,P,W),this},oe.prototype._undestroy=y.undestroy,oe.prototype._destroy=function(P,W){W(P)},oe.prototype[d.captureRejectionSymbol]=function(P){this.destroy(P)};var ue;function le(){return ue===void 0&&(ue={}),ue}oe.fromWeb=function(P,W){return le().newStreamWritableFromWritableStream(P,W)},oe.toWeb=function(P){return le().newWritableStreamFromStreamWritable(P)}}),cu=ve((e,r)=>{ce(),de(),fe();var t=vr(),a=(ft(),Ke(ct)),{isReadable:u,isWritable:n,isIterable:i,isNodeStream:s,isReadableNodeStream:o,isWritableNodeStream:l,isDuplexNodeStream:h}=Yt(),f=rr(),{AbortError:d,codes:{ERR_INVALID_ARG_TYPE:m,ERR_INVALID_RETURN_VALUE:b}}=wt(),{destroyer:y}=Or(),A=zt(),M=vi(),{createDeferredPromise:C}=Vt(),E=la(),L=globalThis.Blob||a.Blob,D=typeof L<"u"?function(te){return te instanceof L}:function(te){return!1},I=globalThis.AbortController||yo().AbortController,{FunctionPrototypeCall:T}=ot(),x=class extends A{constructor(te){super(te),(te==null?void 0:te.readable)===!1&&(this._readableState.readable=!1,this._readableState.ended=!0,this._readableState.endEmitted=!0),(te==null?void 0:te.writable)===!1&&(this._writableState.writable=!1,this._writableState.ending=!0,this._writableState.ended=!0,this._writableState.finished=!0)}};r.exports=function te(v,V){if(h(v))return v;if(o(v))return G({readable:v});if(l(v))return G({writable:v});if(s(v))return G({writable:!1,readable:!1});if(typeof v=="function"){let{value:K,write:me,final:oe,destroy:H}=q(v);if(i(K))return E(x,K,{objectMode:!0,write:me,final:oe,destroy:H});let be=K==null?void 0:K.then;if(typeof be=="function"){let ie,_e=T(be,K,k=>{if(k!=null)throw new b("nully","body",k)},k=>{y(ie,k)});return ie=new x({objectMode:!0,readable:!1,write:me,final(k){oe(async()=>{try{await _e,t.nextTick(k,null)}catch(Q){t.nextTick(k,Q)}})},destroy:H})}throw new b("Iterable, AsyncIterable or AsyncFunction",V,K)}if(D(v))return te(v.arrayBuffer());if(i(v))return E(x,v,{objectMode:!0,writable:!1});if(typeof(v==null?void 0:v.writable)=="object"||typeof(v==null?void 0:v.readable)=="object"){let K=v!=null&&v.readable?o(v==null?void 0:v.readable)?v==null?void 0:v.readable:te(v.readable):void 0,me=v!=null&&v.writable?l(v==null?void 0:v.writable)?v==null?void 0:v.writable:te(v.writable):void 0;return G({readable:K,writable:me})}let Z=v==null?void 0:v.then;if(typeof Z=="function"){let K;return T(Z,v,me=>{me!=null&&K.push(me),K.push(null)},me=>{y(K,me)}),K=new x({objectMode:!0,writable:!1,read(){}})}throw new m(V,["Blob","ReadableStream","WritableStream","Stream","Iterable","AsyncIterable","Function","{ readable, writable } pair","Promise"],v)};function q(te){let{promise:v,resolve:V}=C(),Z=new I,K=Z.signal;return{value:te(async function*(){for(;;){let me=v;v=null;let{chunk:oe,done:H,cb:be}=await me;if(t.nextTick(be),H)return;if(K.aborted)throw new d(void 0,{cause:K.reason});({promise:v,resolve:V}=C()),yield oe}}(),{signal:K}),write(me,oe,H){let be=V;V=null,be({chunk:me,done:!1,cb:H})},final(me){let oe=V;V=null,oe({done:!0,cb:me})},destroy(me,oe){Z.abort(),oe(me)}}}function G(te){let v=te.readable&&typeof te.readable.read!="function"?M.wrap(te.readable):te.readable,V=te.writable,Z=!!u(v),K=!!n(V),me,oe,H,be,ie;function _e(k){let Q=be;be=null,Q?Q(k):k&&ie.destroy(k)}return ie=new x({readableObjectMode:!!(v!=null&&v.readableObjectMode),writableObjectMode:!!(V!=null&&V.writableObjectMode),readable:Z,writable:K}),K&&(f(V,k=>{K=!1,k&&y(v,k),_e(k)}),ie._write=function(k,Q,se){V.write(k,Q)?se():me=se},ie._final=function(k){V.end(),oe=k},V.on("drain",function(){if(me){let k=me;me=null,k()}}),V.on("finish",function(){if(oe){let k=oe;oe=null,k()}})),Z&&(f(v,k=>{Z=!1,k&&y(v,k),_e(k)}),v.on("readable",function(){if(H){let k=H;H=null,k()}}),v.on("end",function(){ie.push(null)}),ie._read=function(){for(;;){let k=v.read();if(k===null){H=ie._read;return}if(!ie.push(k))return}}),ie._destroy=function(k,Q){!k&&be!==null&&(k=new d),H=null,me=null,oe=null,be===null?Q(k):(be=Q,y(V,k),y(v,k))},ie}}),zt=ve((e,r)=>{ce(),de(),fe();var{ObjectDefineProperties:t,ObjectGetOwnPropertyDescriptor:a,ObjectKeys:u,ObjectSetPrototypeOf:n}=ot();r.exports=o;var i=vi(),s=ua();n(o.prototype,i.prototype),n(o,i);{let d=u(s.prototype);for(let m=0;m<d.length;m++){let b=d[m];o.prototype[b]||(o.prototype[b]=s.prototype[b])}}function o(d){if(!(this instanceof o))return new o(d);i.call(this,d),s.call(this,d),d?(this.allowHalfOpen=d.allowHalfOpen!==!1,d.readable===!1&&(this._readableState.readable=!1,this._readableState.ended=!0,this._readableState.endEmitted=!0),d.writable===!1&&(this._writableState.writable=!1,this._writableState.ending=!0,this._writableState.ended=!0,this._writableState.finished=!0)):this.allowHalfOpen=!0}t(o.prototype,{writable:{__proto__:null,...a(s.prototype,"writable")},writableHighWaterMark:{__proto__:null,...a(s.prototype,"writableHighWaterMark")},writableObjectMode:{__proto__:null,...a(s.prototype,"writableObjectMode")},writableBuffer:{__proto__:null,...a(s.prototype,"writableBuffer")},writableLength:{__proto__:null,...a(s.prototype,"writableLength")},writableFinished:{__proto__:null,...a(s.prototype,"writableFinished")},writableCorked:{__proto__:null,...a(s.prototype,"writableCorked")},writableEnded:{__proto__:null,...a(s.prototype,"writableEnded")},writableNeedDrain:{__proto__:null,...a(s.prototype,"writableNeedDrain")},destroyed:{__proto__:null,get(){return this._readableState===void 0||this._writableState===void 0?!1:this._readableState.destroyed&&this._writableState.destroyed},set(d){this._readableState&&this._writableState&&(this._readableState.destroyed=d,this._writableState.destroyed=d)}}});var l;function h(){return l===void 0&&(l={}),l}o.fromWeb=function(d,m){return h().newStreamDuplexFromReadableWritablePair(d,m)},o.toWeb=function(d){return h().newReadableWritablePairFromDuplex(d)};var f;o.from=function(d){return f||(f=cu()),f(d,"body")}}),ha=ve((e,r)=>{ce(),de(),fe();var{ObjectSetPrototypeOf:t,Symbol:a}=ot();r.exports=o;var{ERR_METHOD_NOT_IMPLEMENTED:u}=wt().codes,n=zt(),{getHighWaterMark:i}=vo();t(o.prototype,n.prototype),t(o,n);var s=a("kCallback");function o(f){if(!(this instanceof o))return new o(f);let d=f?i(this,f,"readableHighWaterMark",!0):null;d===0&&(f={...f,highWaterMark:null,readableHighWaterMark:d,writableHighWaterMark:f.writableHighWaterMark||0}),n.call(this,f),this._readableState.sync=!1,this[s]=null,f&&(typeof f.transform=="function"&&(this._transform=f.transform),typeof f.flush=="function"&&(this._flush=f.flush)),this.on("prefinish",h)}function l(f){typeof this._flush=="function"&&!this.destroyed?this._flush((d,m)=>{if(d){f?f(d):this.destroy(d);return}m!=null&&this.push(m),this.push(null),f&&f()}):(this.push(null),f&&f())}function h(){this._final!==l&&l.call(this)}o.prototype._final=l,o.prototype._transform=function(f,d,m){throw new u("_transform()")},o.prototype._write=function(f,d,m){let b=this._readableState,y=this._writableState,A=b.length;this._transform(f,d,(M,C)=>{if(M){m(M);return}C!=null&&this.push(C),y.ended||A===b.length||b.length<b.highWaterMark?m():this[s]=m})},o.prototype._read=function(){if(this[s]){let f=this[s];this[s]=null,f()}}}),ca=ve((e,r)=>{ce(),de(),fe();var{ObjectSetPrototypeOf:t}=ot();r.exports=u;var a=ha();t(u.prototype,a.prototype),t(u,a);function u(n){if(!(this instanceof u))return new u(n);a.call(this,n)}u.prototype._transform=function(n,i,s){s(null,n)}}),So=ve((e,r)=>{ce(),de(),fe();var t=vr(),{ArrayIsArray:a,Promise:u,SymbolAsyncIterator:n}=ot(),i=rr(),{once:s}=Vt(),o=Or(),l=zt(),{aggregateTwoErrors:h,codes:{ERR_INVALID_ARG_TYPE:f,ERR_INVALID_RETURN_VALUE:d,ERR_MISSING_ARGS:m,ERR_STREAM_DESTROYED:b,ERR_STREAM_PREMATURE_CLOSE:y},AbortError:A}=wt(),{validateFunction:M,validateAbortSignal:C}=bi(),{isIterable:E,isReadable:L,isReadableNodeStream:D,isNodeStream:I,isTransformStream:T,isWebStream:x,isReadableStream:q,isReadableEnded:G}=Yt(),te=globalThis.AbortController||yo().AbortController,v,V;function Z(Q,se,Ae){let he=!1;Q.on("close",()=>{he=!0});let B=i(Q,{readable:se,writable:Ae},S=>{he=!S});return{destroy:S=>{he||(he=!0,o.destroyer(Q,S||new b("pipe")))},cleanup:B}}function K(Q){return M(Q[Q.length-1],"streams[stream.length - 1]"),Q.pop()}function me(Q){if(E(Q))return Q;if(D(Q))return oe(Q);throw new f("val",["Readable","Iterable","AsyncIterable"],Q)}async function*oe(Q){V||(V=vi()),yield*V.prototype[n].call(Q)}async function H(Q,se,Ae,{end:he}){let B,S=null,z=X=>{if(X&&(B=X),S){let ue=S;S=null,ue()}},ae=()=>new u((X,ue)=>{B?ue(B):S=()=>{B?ue(B):X()}});se.on("drain",z);let ee=i(se,{readable:!1},z);try{se.writableNeedDrain&&await ae();for await(let X of Q)se.write(X)||await ae();he&&se.end(),await ae(),Ae()}catch(X){Ae(B!==X?h(B,X):X)}finally{ee(),se.off("drain",z)}}async function be(Q,se,Ae,{end:he}){T(se)&&(se=se.writable);let B=se.getWriter();try{for await(let S of Q)await B.ready,B.write(S).catch(()=>{});await B.ready,he&&await B.close(),Ae()}catch(S){try{await B.abort(S),Ae(S)}catch(z){Ae(z)}}}function ie(...Q){return _e(Q,s(K(Q)))}function _e(Q,se,Ae){if(Q.length===1&&a(Q[0])&&(Q=Q[0]),Q.length<2)throw new m("streams");let he=new te,B=he.signal,S=Ae==null?void 0:Ae.signal,z=[];C(S,"options.signal");function ae(){W(new A)}S==null||S.addEventListener("abort",ae);let ee,X,ue=[],le=0;function P(j){W(j,--le===0)}function W(j,Y){if(j&&(!ee||ee.code==="ERR_STREAM_PREMATURE_CLOSE")&&(ee=j),!(!ee&&!Y)){for(;ue.length;)ue.shift()(ee);S==null||S.removeEventListener("abort",ae),he.abort(),Y&&(ee||z.forEach(ye=>ye()),t.nextTick(se,ee,X))}}let F;for(let j=0;j<Q.length;j++){let Y=Q[j],ye=j<Q.length-1,Ee=j>0,ke=ye||(Ae==null?void 0:Ae.end)!==!1,Le=j===Q.length-1;if(I(Y)){let p=function(c){c&&c.name!=="AbortError"&&c.code!=="ERR_STREAM_PREMATURE_CLOSE"&&P(c)};if(ke){let{destroy:c,cleanup:g}=Z(Y,ye,Ee);ue.push(c),L(Y)&&Le&&z.push(g)}Y.on("error",p),L(Y)&&Le&&z.push(()=>{Y.removeListener("error",p)})}if(j===0)if(typeof Y=="function"){if(F=Y({signal:B}),!E(F))throw new d("Iterable, AsyncIterable or Stream","source",F)}else E(Y)||D(Y)||T(Y)?F=Y:F=l.from(Y);else if(typeof Y=="function"){if(T(F)){var re;F=me((re=F)===null||re===void 0?void 0:re.readable)}else F=me(F);if(F=Y(F,{signal:B}),ye){if(!E(F,!0))throw new d("AsyncIterable",`transform[${j-1}]`,F)}else{var J;v||(v=ca());let p=new v({objectMode:!0}),c=(J=F)===null||J===void 0?void 0:J.then;if(typeof c=="function")le++,c.call(F,O=>{X=O,O!=null&&p.write(O),ke&&p.end(),t.nextTick(P)},O=>{p.destroy(O),t.nextTick(P,O)});else if(E(F,!0))le++,H(F,p,P,{end:ke});else if(q(F)||T(F)){let O=F.readable||F;le++,H(O,p,P,{end:ke})}else throw new d("AsyncIterable or Promise","destination",F);F=p;let{destroy:g,cleanup:_}=Z(F,!1,!0);ue.push(g),Le&&z.push(_)}}else if(I(Y)){if(D(F)){le+=2;let p=k(F,Y,P,{end:ke});L(Y)&&Le&&z.push(p)}else if(T(F)||q(F)){let p=F.readable||F;le++,H(p,Y,P,{end:ke})}else if(E(F))le++,H(F,Y,P,{end:ke});else throw new f("val",["Readable","Iterable","AsyncIterable","ReadableStream","TransformStream"],F);F=Y}else if(x(Y)){if(D(F))le++,be(me(F),Y,P,{end:ke});else if(q(F)||E(F))le++,be(F,Y,P,{end:ke});else if(T(F))le++,be(F.readable,Y,P,{end:ke});else throw new f("val",["Readable","Iterable","AsyncIterable","ReadableStream","TransformStream"],F);F=Y}else F=l.from(Y)}return(B!=null&&B.aborted||S!=null&&S.aborted)&&t.nextTick(ae),F}function k(Q,se,Ae,{end:he}){let B=!1;if(se.on("close",()=>{B||Ae(new y)}),Q.pipe(se,{end:!1}),he){let S=function(){B=!0,se.end()};G(Q)?t.nextTick(S):Q.once("end",S)}else Ae();return i(Q,{readable:!0,writable:!1},S=>{let z=Q._readableState;S&&S.code==="ERR_STREAM_PREMATURE_CLOSE"&&z&&z.ended&&!z.errored&&!z.errorEmitted?Q.once("end",Ae).once("error",Ae):Ae(S)}),i(se,{readable:!1,writable:!0},Ae)}r.exports={pipelineImpl:_e,pipeline:ie}}),fa=ve((e,r)=>{ce(),de(),fe();var{pipeline:t}=So(),a=zt(),{destroyer:u}=Or(),{isNodeStream:n,isReadable:i,isWritable:s,isWebStream:o,isTransformStream:l,isWritableStream:h,isReadableStream:f}=Yt(),{AbortError:d,codes:{ERR_INVALID_ARG_VALUE:m,ERR_MISSING_ARGS:b}}=wt(),y=rr();r.exports=function(...A){if(A.length===0)throw new b("streams");if(A.length===1)return a.from(A[0]);let M=[...A];if(typeof A[0]=="function"&&(A[0]=a.from(A[0])),typeof A[A.length-1]=="function"){let v=A.length-1;A[v]=a.from(A[v])}for(let v=0;v<A.length;++v)if(!(!n(A[v])&&!o(A[v]))){if(v<A.length-1&&!(i(A[v])||f(A[v])||l(A[v])))throw new m(`streams[${v}]`,M[v],"must be readable");if(v>0&&!(s(A[v])||h(A[v])||l(A[v])))throw new m(`streams[${v}]`,M[v],"must be writable")}let C,E,L,D,I;function T(v){let V=D;D=null,V?V(v):v?I.destroy(v):!te&&!G&&I.destroy()}let x=A[0],q=t(A,T),G=!!(s(x)||h(x)||l(x)),te=!!(i(q)||f(q)||l(q));if(I=new a({writableObjectMode:!!(x!=null&&x.writableObjectMode),readableObjectMode:!!(q!=null&&q.writableObjectMode),writable:G,readable:te}),G){if(n(x))I._write=function(V,Z,K){x.write(V,Z)?K():C=K},I._final=function(V){x.end(),E=V},x.on("drain",function(){if(C){let V=C;C=null,V()}});else if(o(x)){let V=(l(x)?x.writable:x).getWriter();I._write=async function(Z,K,me){try{await V.ready,V.write(Z).catch(()=>{}),me()}catch(oe){me(oe)}},I._final=async function(Z){try{await V.ready,V.close().catch(()=>{}),E=Z}catch(K){Z(K)}}}let v=l(q)?q.readable:q;y(v,()=>{if(E){let V=E;E=null,V()}})}if(te){if(n(q))q.on("readable",function(){if(L){let v=L;L=null,v()}}),q.on("end",function(){I.push(null)}),I._read=function(){for(;;){let v=q.read();if(v===null){L=I._read;return}if(!I.push(v))return}};else if(o(q)){let v=(l(q)?q.readable:q).getReader();I._read=async function(){for(;;)try{let{value:V,done:Z}=await v.read();if(!I.push(V))return;if(Z){I.push(null);return}}catch{return}}}}return I._destroy=function(v,V){!v&&D!==null&&(v=new d),L=null,C=null,E=null,D===null?V(v):(D=V,n(q)&&u(q,v))},I}}),fu=ve((e,r)=>{ce(),de(),fe();var t=globalThis.AbortController||yo().AbortController,{codes:{ERR_INVALID_ARG_VALUE:a,ERR_INVALID_ARG_TYPE:u,ERR_MISSING_ARGS:n,ERR_OUT_OF_RANGE:i},AbortError:s}=wt(),{validateAbortSignal:o,validateInteger:l,validateObject:h}=bi(),f=ot().Symbol("kWeak"),{finished:d}=rr(),m=fa(),{addAbortSignalNoValidate:b}=yi(),{isWritable:y,isNodeStream:A}=Yt(),{ArrayPrototypePush:M,MathFloor:C,Number:E,NumberIsNaN:L,Promise:D,PromiseReject:I,PromisePrototypeThen:T,Symbol:x}=ot(),q=x("kEmpty"),G=x("kEof");function te(he,B){if(B!=null&&h(B,"options"),(B==null?void 0:B.signal)!=null&&o(B.signal,"options.signal"),A(he)&&!y(he))throw new a("stream",he,"must be writable");let S=m(this,he);return B!=null&&B.signal&&b(B.signal,S),S}function v(he,B){if(typeof he!="function")throw new u("fn",["Function","AsyncFunction"],he);B!=null&&h(B,"options"),(B==null?void 0:B.signal)!=null&&o(B.signal,"options.signal");let S=1;return(B==null?void 0:B.concurrency)!=null&&(S=C(B.concurrency)),l(S,"concurrency",1),(async function*(){var z,ae;let ee=new t,X=this,ue=[],le=ee.signal,P={signal:le},W=()=>ee.abort();B!=null&&(z=B.signal)!==null&&z!==void 0&&z.aborted&&W(),B==null||(ae=B.signal)===null||ae===void 0||ae.addEventListener("abort",W);let F,re,J=!1;function j(){J=!0}async function Y(){try{for await(let ke of X){var ye;if(J)return;if(le.aborted)throw new s;try{ke=he(ke,P)}catch(Le){ke=I(Le)}ke!==q&&(typeof((ye=ke)===null||ye===void 0?void 0:ye.catch)=="function"&&ke.catch(j),ue.push(ke),F&&(F(),F=null),!J&&ue.length&&ue.length>=S&&await new D(Le=>{re=Le}))}ue.push(G)}catch(ke){let Le=I(ke);T(Le,void 0,j),ue.push(Le)}finally{var Ee;J=!0,F&&(F(),F=null),B==null||(Ee=B.signal)===null||Ee===void 0||Ee.removeEventListener("abort",W)}}Y();try{for(;;){for(;ue.length>0;){let ye=await ue[0];if(ye===G)return;if(le.aborted)throw new s;ye!==q&&(yield ye),ue.shift(),re&&(re(),re=null)}await new D(ye=>{F=ye})}}finally{ee.abort(),J=!0,re&&(re(),re=null)}}).call(this)}function V(he=void 0){return he!=null&&h(he,"options"),(he==null?void 0:he.signal)!=null&&o(he.signal,"options.signal"),(async function*(){let B=0;for await(let z of this){var S;if(he!=null&&(S=he.signal)!==null&&S!==void 0&&S.aborted)throw new s({cause:he.signal.reason});yield[B++,z]}}).call(this)}async function Z(he,B=void 0){for await(let S of H.call(this,he,B))return!0;return!1}async function K(he,B=void 0){if(typeof he!="function")throw new u("fn",["Function","AsyncFunction"],he);return!await Z.call(this,async(...S)=>!await he(...S),B)}async function me(he,B){for await(let S of H.call(this,he,B))return S}async function oe(he,B){if(typeof he!="function")throw new u("fn",["Function","AsyncFunction"],he);async function S(z,ae){return await he(z,ae),q}for await(let z of v.call(this,S,B));}function H(he,B){if(typeof he!="function")throw new u("fn",["Function","AsyncFunction"],he);async function S(z,ae){return await he(z,ae)?z:q}return v.call(this,S,B)}var be=class extends n{constructor(){super("reduce"),this.message="Reduce of an empty stream requires an initial value"}};async function ie(he,B,S){var z;if(typeof he!="function")throw new u("reducer",["Function","AsyncFunction"],he);S!=null&&h(S,"options"),(S==null?void 0:S.signal)!=null&&o(S.signal,"options.signal");let ae=arguments.length>1;if(S!=null&&(z=S.signal)!==null&&z!==void 0&&z.aborted){let P=new s(void 0,{cause:S.signal.reason});throw this.once("error",()=>{}),await d(this.destroy(P)),P}let ee=new t,X=ee.signal;if(S!=null&&S.signal){let P={once:!0,[f]:this};S.signal.addEventListener("abort",()=>ee.abort(),P)}let ue=!1;try{for await(let P of this){var le;if(ue=!0,S!=null&&(le=S.signal)!==null&&le!==void 0&&le.aborted)throw new s;ae?B=await he(B,P,{signal:X}):(B=P,ae=!0)}if(!ue&&!ae)throw new be}finally{ee.abort()}return B}async function _e(he){he!=null&&h(he,"options"),(he==null?void 0:he.signal)!=null&&o(he.signal,"options.signal");let B=[];for await(let z of this){var S;if(he!=null&&(S=he.signal)!==null&&S!==void 0&&S.aborted)throw new s(void 0,{cause:he.signal.reason});M(B,z)}return B}function k(he,B){let S=v.call(this,he,B);return(async function*(){for await(let z of S)yield*z}).call(this)}function Q(he){if(he=E(he),L(he))return 0;if(he<0)throw new i("number",">= 0",he);return he}function se(he,B=void 0){return B!=null&&h(B,"options"),(B==null?void 0:B.signal)!=null&&o(B.signal,"options.signal"),he=Q(he),(async function*(){var S;if(B!=null&&(S=B.signal)!==null&&S!==void 0&&S.aborted)throw new s;for await(let ae of this){var z;if(B!=null&&(z=B.signal)!==null&&z!==void 0&&z.aborted)throw new s;he--<=0&&(yield ae)}}).call(this)}function Ae(he,B=void 0){return B!=null&&h(B,"options"),(B==null?void 0:B.signal)!=null&&o(B.signal,"options.signal"),he=Q(he),(async function*(){var S;if(B!=null&&(S=B.signal)!==null&&S!==void 0&&S.aborted)throw new s;for await(let ae of this){var z;if(B!=null&&(z=B.signal)!==null&&z!==void 0&&z.aborted)throw new s;if(he-- >0)yield ae;else return}}).call(this)}r.exports.streamReturningOperators={asIndexedPairs:V,drop:se,filter:H,flatMap:k,map:v,take:Ae,compose:te},r.exports.promiseReturningOperators={every:K,forEach:oe,reduce:ie,toArray:_e,some:Z,find:me}}),da=ve((e,r)=>{ce(),de(),fe();var{ArrayPrototypePop:t,Promise:a}=ot(),{isIterable:u,isNodeStream:n,isWebStream:i}=Yt(),{pipelineImpl:s}=So(),{finished:o}=rr();pa();function l(...h){return new a((f,d)=>{let m,b,y=h[h.length-1];if(y&&typeof y=="object"&&!n(y)&&!u(y)&&!i(y)){let A=t(h);m=A.signal,b=A.end}s(h,(A,M)=>{A?d(A):f(M)},{signal:m,end:b})})}r.exports={finished:o,pipeline:l}}),pa=ve((e,r)=>{ce(),de(),fe();var{Buffer:t}=(ft(),Ke(ct)),{ObjectDefineProperty:a,ObjectKeys:u,ReflectApply:n}=ot(),{promisify:{custom:i}}=Vt(),{streamReturningOperators:s,promiseReturningOperators:o}=fu(),{codes:{ERR_ILLEGAL_CONSTRUCTOR:l}}=wt(),h=fa(),{pipeline:f}=So(),{destroyer:d}=Or(),m=rr(),b=da(),y=Yt(),A=r.exports=wo().Stream;A.isDisturbed=y.isDisturbed,A.isErrored=y.isErrored,A.isReadable=y.isReadable,A.Readable=vi();for(let C of u(s)){let E=function(...D){if(new.target)throw l();return A.Readable.from(n(L,this,D))},L=s[C];a(E,"name",{__proto__:null,value:L.name}),a(E,"length",{__proto__:null,value:L.length}),a(A.Readable.prototype,C,{__proto__:null,value:E,enumerable:!1,configurable:!0,writable:!0})}for(let C of u(o)){let E=function(...D){if(new.target)throw l();return n(L,this,D)},L=o[C];a(E,"name",{__proto__:null,value:L.name}),a(E,"length",{__proto__:null,value:L.length}),a(A.Readable.prototype,C,{__proto__:null,value:E,enumerable:!1,configurable:!0,writable:!0})}A.Writable=ua(),A.Duplex=zt(),A.Transform=ha(),A.PassThrough=ca(),A.pipeline=f;var{addAbortSignal:M}=yi();A.addAbortSignal=M,A.finished=m,A.destroy=d,A.compose=h,a(A,"promises",{__proto__:null,configurable:!0,enumerable:!0,get(){return b}}),a(f,i,{__proto__:null,enumerable:!0,get(){return b.pipeline}}),a(m,i,{__proto__:null,enumerable:!0,get(){return b.finished}}),A.Stream=A,A._isUint8Array=function(C){return C instanceof Uint8Array},A._uint8ArrayToBuffer=function(C){return t.from(C.buffer,C.byteOffset,C.byteLength)}}),Er=ve((e,r)=>{ce(),de(),fe();var t=pa(),a=da(),u=t.Readable.destroy;r.exports=t.Readable,r.exports._uint8ArrayToBuffer=t._uint8ArrayToBuffer,r.exports._isUint8Array=t._isUint8Array,r.exports.isDisturbed=t.isDisturbed,r.exports.isErrored=t.isErrored,r.exports.isReadable=t.isReadable,r.exports.Readable=t.Readable,r.exports.Writable=t.Writable,r.exports.Duplex=t.Duplex,r.exports.Transform=t.Transform,r.exports.PassThrough=t.PassThrough,r.exports.addAbortSignal=t.addAbortSignal,r.exports.finished=t.finished,r.exports.destroy=t.destroy,r.exports.destroy=u,r.exports.pipeline=t.pipeline,r.exports.compose=t.compose,Object.defineProperty(t,"promises",{configurable:!0,enumerable:!0,get(){return a}}),r.exports.Stream=t.Stream,r.exports.default=r.exports}),du=ve((e,r)=>{ce(),de(),fe(),typeof Object.create=="function"?r.exports=function(t,a){a&&(t.super_=a,t.prototype=Object.create(a.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}))}:r.exports=function(t,a){if(a){t.super_=a;var u=function(){};u.prototype=a.prototype,t.prototype=new u,t.prototype.constructor=t}}}),pu=ve((e,r)=>{ce(),de(),fe();var{Buffer:t}=(ft(),Ke(ct)),a=Symbol.for("BufferList");function u(n){if(!(this instanceof u))return new u(n);u._init.call(this,n)}u._init=function(n){Object.defineProperty(this,a,{value:!0}),this._bufs=[],this.length=0,n&&this.append(n)},u.prototype._new=function(n){return new u(n)},u.prototype._offset=function(n){if(n===0)return[0,0];let i=0;for(let s=0;s<this._bufs.length;s++){let o=i+this._bufs[s].length;if(n<o||s===this._bufs.length-1)return[s,n-i];i=o}},u.prototype._reverseOffset=function(n){let i=n[0],s=n[1];for(let o=0;o<i;o++)s+=this._bufs[o].length;return s},u.prototype.get=function(n){if(n>this.length||n<0)return;let i=this._offset(n);return this._bufs[i[0]][i[1]]},u.prototype.slice=function(n,i){return typeof n=="number"&&n<0&&(n+=this.length),typeof i=="number"&&i<0&&(i+=this.length),this.copy(null,0,n,i)},u.prototype.copy=function(n,i,s,o){if((typeof s!="number"||s<0)&&(s=0),(typeof o!="number"||o>this.length)&&(o=this.length),s>=this.length||o<=0)return n||t.alloc(0);let l=!!n,h=this._offset(s),f=o-s,d=f,m=l&&i||0,b=h[1];if(s===0&&o===this.length){if(!l)return this._bufs.length===1?this._bufs[0]:t.concat(this._bufs,this.length);for(let y=0;y<this._bufs.length;y++)this._bufs[y].copy(n,m),m+=this._bufs[y].length;return n}if(d<=this._bufs[h[0]].length-b)return l?this._bufs[h[0]].copy(n,i,b,b+d):this._bufs[h[0]].slice(b,b+d);l||(n=t.allocUnsafe(f));for(let y=h[0];y<this._bufs.length;y++){let A=this._bufs[y].length-b;if(d>A)this._bufs[y].copy(n,m,b),m+=A;else{this._bufs[y].copy(n,m,b,b+d),m+=A;break}d-=A,b&&(b=0)}return n.length>m?n.slice(0,m):n},u.prototype.shallowSlice=function(n,i){if(n=n||0,i=typeof i!="number"?this.length:i,n<0&&(n+=this.length),i<0&&(i+=this.length),n===i)return this._new();let s=this._offset(n),o=this._offset(i),l=this._bufs.slice(s[0],o[0]+1);return o[1]===0?l.pop():l[l.length-1]=l[l.length-1].slice(0,o[1]),s[1]!==0&&(l[0]=l[0].slice(s[1])),this._new(l)},u.prototype.toString=function(n,i,s){return this.slice(i,s).toString(n)},u.prototype.consume=function(n){if(n=Math.trunc(n),Number.isNaN(n)||n<=0)return this;for(;this._bufs.length;)if(n>=this._bufs[0].length)n-=this._bufs[0].length,this.length-=this._bufs[0].length,this._bufs.shift();else{this._bufs[0]=this._bufs[0].slice(n),this.length-=n;break}return this},u.prototype.duplicate=function(){let n=this._new();for(let i=0;i<this._bufs.length;i++)n.append(this._bufs[i]);return n},u.prototype.append=function(n){if(n==null)return this;if(n.buffer)this._appendBuffer(t.from(n.buffer,n.byteOffset,n.byteLength));else if(Array.isArray(n))for(let i=0;i<n.length;i++)this.append(n[i]);else if(this._isBufferList(n))for(let i=0;i<n._bufs.length;i++)this.append(n._bufs[i]);else typeof n=="number"&&(n=n.toString()),this._appendBuffer(t.from(n));return this},u.prototype._appendBuffer=function(n){this._bufs.push(n),this.length+=n.length},u.prototype.indexOf=function(n,i,s){if(s===void 0&&typeof i=="string"&&(s=i,i=void 0),typeof n=="function"||Array.isArray(n))throw new TypeError('The "value" argument must be one of type string, Buffer, BufferList, or Uint8Array.');if(typeof n=="number"?n=t.from([n]):typeof n=="string"?n=t.from(n,s):this._isBufferList(n)?n=n.slice():Array.isArray(n.buffer)?n=t.from(n.buffer,n.byteOffset,n.byteLength):t.isBuffer(n)||(n=t.from(n)),i=Number(i||0),isNaN(i)&&(i=0),i<0&&(i=this.length+i),i<0&&(i=0),n.length===0)return i>this.length?this.length:i;let o=this._offset(i),l=o[0],h=o[1];for(;l<this._bufs.length;l++){let f=this._bufs[l];for(;h<f.length;)if(f.length-h>=n.length){let d=f.indexOf(n,h);if(d!==-1)return this._reverseOffset([l,d]);h=f.length-n.length+1}else{let d=this._reverseOffset([l,h]);if(this._match(d,n))return d;h++}h=0}return-1},u.prototype._match=function(n,i){if(this.length-n<i.length)return!1;for(let s=0;s<i.length;s++)if(this.get(n+s)!==i[s])return!1;return!0},function(){let n={readDoubleBE:8,readDoubleLE:8,readFloatBE:4,readFloatLE:4,readBigInt64BE:8,readBigInt64LE:8,readBigUInt64BE:8,readBigUInt64LE:8,readInt32BE:4,readInt32LE:4,readUInt32BE:4,readUInt32LE:4,readInt16BE:2,readInt16LE:2,readUInt16BE:2,readUInt16LE:2,readInt8:1,readUInt8:1,readIntBE:null,readIntLE:null,readUIntBE:null,readUIntLE:null};for(let i in n)(function(s){n[s]===null?u.prototype[s]=function(o,l){return this.slice(o,o+l)[s](0,l)}:u.prototype[s]=function(o=0){return this.slice(o,o+n[s])[s](0)}})(i)}(),u.prototype._isBufferList=function(n){return n instanceof u||u.isBufferList(n)},u.isBufferList=function(n){return n!=null&&n[a]},r.exports=u}),gu=ve((e,r)=>{ce(),de(),fe();var t=Er().Duplex,a=du(),u=pu();function n(i){if(!(this instanceof n))return new n(i);if(typeof i=="function"){this._callback=i;let s=(function(o){this._callback&&(this._callback(o),this._callback=null)}).bind(this);this.on("pipe",function(o){o.on("error",s)}),this.on("unpipe",function(o){o.removeListener("error",s)}),i=null}u._init.call(this,i),t.call(this)}a(n,t),Object.assign(n.prototype,u.prototype),n.prototype._new=function(i){return new n(i)},n.prototype._write=function(i,s,o){this._appendBuffer(i),typeof o=="function"&&o()},n.prototype._read=function(i){if(!this.length)return this.push(null);i=Math.min(i,this.length),this.push(this.slice(0,i)),this.consume(i)},n.prototype.end=function(i){t.prototype.end.call(this,i),this._callback&&(this._callback(null,this.slice()),this._callback=null)},n.prototype._destroy=function(i,s){this._bufs.length=0,this.length=0,s(i)},n.prototype._isBufferList=function(i){return i instanceof n||i instanceof u||n.isBufferList(i)},n.isBufferList=u.isBufferList,r.exports=n,r.exports.BufferListStream=n,r.exports.BufferList=u}),mu=ve((e,r)=>{ce(),de(),fe();var t=class{constructor(){this.cmd=null,this.retain=!1,this.qos=0,this.dup=!1,this.length=-1,this.topic=null,this.payload=null}};r.exports=t}),ga=ve((e,r)=>{ce(),de(),fe();var t=r.exports,{Buffer:a}=(ft(),Ke(ct));t.types={0:"reserved",1:"connect",2:"connack",3:"publish",4:"puback",5:"pubrec",6:"pubrel",7:"pubcomp",8:"subscribe",9:"suback",10:"unsubscribe",11:"unsuback",12:"pingreq",13:"pingresp",14:"disconnect",15:"auth"},t.requiredHeaderFlags={1:0,2:0,4:0,5:0,6:2,7:0,8:2,9:0,10:2,11:0,12:0,13:0,14:0,15:0},t.requiredHeaderFlagsErrors={};for(let n in t.requiredHeaderFlags){let i=t.requiredHeaderFlags[n];t.requiredHeaderFlagsErrors[n]="Invalid header flag bits, must be 0x"+i.toString(16)+" for "+t.types[n]+" packet"}t.codes={};for(let n in t.types){let i=t.types[n];t.codes[i]=n}t.CMD_SHIFT=4,t.CMD_MASK=240,t.DUP_MASK=8,t.QOS_MASK=3,t.QOS_SHIFT=1,t.RETAIN_MASK=1,t.VARBYTEINT_MASK=127,t.VARBYTEINT_FIN_MASK=128,t.VARBYTEINT_MAX=268435455,t.SESSIONPRESENT_MASK=1,t.SESSIONPRESENT_HEADER=a.from([t.SESSIONPRESENT_MASK]),t.CONNACK_HEADER=a.from([t.codes.connack<<t.CMD_SHIFT]),t.USERNAME_MASK=128,t.PASSWORD_MASK=64,t.WILL_RETAIN_MASK=32,t.WILL_QOS_MASK=24,t.WILL_QOS_SHIFT=3,t.WILL_FLAG_MASK=4,t.CLEAN_SESSION_MASK=2,t.CONNECT_HEADER=a.from([t.codes.connect<<t.CMD_SHIFT]),t.properties={sessionExpiryInterval:17,willDelayInterval:24,receiveMaximum:33,maximumPacketSize:39,topicAliasMaximum:34,requestResponseInformation:25,requestProblemInformation:23,userProperties:38,authenticationMethod:21,authenticationData:22,payloadFormatIndicator:1,messageExpiryInterval:2,contentType:3,responseTopic:8,correlationData:9,maximumQoS:36,retainAvailable:37,assignedClientIdentifier:18,reasonString:31,wildcardSubscriptionAvailable:40,subscriptionIdentifiersAvailable:41,sharedSubscriptionAvailable:42,serverKeepAlive:19,responseInformation:26,serverReference:28,topicAlias:35,subscriptionIdentifier:11},t.propertiesCodes={};for(let n in t.properties){let i=t.properties[n];t.propertiesCodes[i]=n}t.propertiesTypes={sessionExpiryInterval:"int32",willDelayInterval:"int32",receiveMaximum:"int16",maximumPacketSize:"int32",topicAliasMaximum:"int16",requestResponseInformation:"byte",requestProblemInformation:"byte",userProperties:"pair",authenticationMethod:"string",authenticationData:"binary",payloadFormatIndicator:"byte",messageExpiryInterval:"int32",contentType:"string",responseTopic:"string",correlationData:"binary",maximumQoS:"int8",retainAvailable:"byte",assignedClientIdentifier:"string",reasonString:"string",wildcardSubscriptionAvailable:"byte",subscriptionIdentifiersAvailable:"byte",sharedSubscriptionAvailable:"byte",serverKeepAlive:"int16",responseInformation:"string",serverReference:"string",topicAlias:"int16",subscriptionIdentifier:"var"};function u(n){return[0,1,2].map(i=>[0,1].map(s=>[0,1].map(o=>{let l=a.alloc(1);return l.writeUInt8(t.codes[n]<<t.CMD_SHIFT|(s?t.DUP_MASK:0)|i<<t.QOS_SHIFT|o,0,!0),l})))}t.PUBLISH_HEADER=u("publish"),t.SUBSCRIBE_HEADER=u("subscribe"),t.SUBSCRIBE_OPTIONS_QOS_MASK=3,t.SUBSCRIBE_OPTIONS_NL_MASK=1,t.SUBSCRIBE_OPTIONS_NL_SHIFT=2,t.SUBSCRIBE_OPTIONS_RAP_MASK=1,t.SUBSCRIBE_OPTIONS_RAP_SHIFT=3,t.SUBSCRIBE_OPTIONS_RH_MASK=3,t.SUBSCRIBE_OPTIONS_RH_SHIFT=4,t.SUBSCRIBE_OPTIONS_RH=[0,16,32],t.SUBSCRIBE_OPTIONS_NL=4,t.SUBSCRIBE_OPTIONS_RAP=8,t.SUBSCRIBE_OPTIONS_QOS=[0,1,2],t.UNSUBSCRIBE_HEADER=u("unsubscribe"),t.ACKS={unsuback:u("unsuback"),puback:u("puback"),pubcomp:u("pubcomp"),pubrel:u("pubrel"),pubrec:u("pubrec")},t.SUBACK_HEADER=a.from([t.codes.suback<<t.CMD_SHIFT]),t.VERSION3=a.from([3]),t.VERSION4=a.from([4]),t.VERSION5=a.from([5]),t.VERSION131=a.from([131]),t.VERSION132=a.from([132]),t.QOS=[0,1,2].map(n=>a.from([n])),t.EMPTY={pingreq:a.from([t.codes.pingreq<<4,0]),pingresp:a.from([t.codes.pingresp<<4,0]),disconnect:a.from([t.codes.disconnect<<4,0])},t.MQTT5_PUBACK_PUBREC_CODES={0:"Success",16:"No matching subscribers",128:"Unspecified error",131:"Implementation specific error",135:"Not authorized",144:"Topic Name invalid",145:"Packet identifier in use",151:"Quota exceeded",153:"Payload format invalid"},t.MQTT5_PUBREL_PUBCOMP_CODES={0:"Success",146:"Packet Identifier not found"},t.MQTT5_SUBACK_CODES={0:"Granted QoS 0",1:"Granted QoS 1",2:"Granted QoS 2",128:"Unspecified error",131:"Implementation specific error",135:"Not authorized",143:"Topic Filter invalid",145:"Packet Identifier in use",151:"Quota exceeded",158:"Shared Subscriptions not supported",161:"Subscription Identifiers not supported",162:"Wildcard Subscriptions not supported"},t.MQTT5_UNSUBACK_CODES={0:"Success",17:"No subscription existed",128:"Unspecified error",131:"Implementation specific error",135:"Not authorized",143:"Topic Filter invalid",145:"Packet Identifier in use"},t.MQTT5_DISCONNECT_CODES={0:"Normal disconnection",4:"Disconnect with Will Message",128:"Unspecified error",129:"Malformed Packet",130:"Protocol Error",131:"Implementation specific error",135:"Not authorized",137:"Server busy",139:"Server shutting down",141:"Keep Alive timeout",142:"Session taken over",143:"Topic Filter invalid",144:"Topic Name invalid",147:"Receive Maximum exceeded",148:"Topic Alias invalid",149:"Packet too large",150:"Message rate too high",151:"Quota exceeded",152:"Administrative action",153:"Payload format invalid",154:"Retain not supported",155:"QoS not supported",156:"Use another server",157:"Server moved",158:"Shared Subscriptions not supported",159:"Connection rate exceeded",160:"Maximum connect time",161:"Subscription Identifiers not supported",162:"Wildcard Subscriptions not supported"},t.MQTT5_AUTH_CODES={0:"Success",24:"Continue authentication",25:"Re-authenticate"}}),bu=ve((e,r)=>{ce(),de(),fe();var t=1e3,a=t*60,u=a*60,n=u*24,i=n*7,s=n*365.25;r.exports=function(d,m){m=m||{};var b=typeof d;if(b==="string"&&d.length>0)return o(d);if(b==="number"&&isFinite(d))return m.long?h(d):l(d);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(d))};function o(d){if(d=String(d),!(d.length>100)){var m=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(d);if(m){var b=parseFloat(m[1]),y=(m[2]||"ms").toLowerCase();switch(y){case"years":case"year":case"yrs":case"yr":case"y":return b*s;case"weeks":case"week":case"w":return b*i;case"days":case"day":case"d":return b*n;case"hours":case"hour":case"hrs":case"hr":case"h":return b*u;case"minutes":case"minute":case"mins":case"min":case"m":return b*a;case"seconds":case"second":case"secs":case"sec":case"s":return b*t;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return b;default:return}}}}function l(d){var m=Math.abs(d);return m>=n?Math.round(d/n)+"d":m>=u?Math.round(d/u)+"h":m>=a?Math.round(d/a)+"m":m>=t?Math.round(d/t)+"s":d+"ms"}function h(d){var m=Math.abs(d);return m>=n?f(d,m,n,"day"):m>=u?f(d,m,u,"hour"):m>=a?f(d,m,a,"minute"):m>=t?f(d,m,t,"second"):d+" ms"}function f(d,m,b,y){var A=m>=b*1.5;return Math.round(d/b)+" "+y+(A?"s":"")}}),yu=ve((e,r)=>{ce(),de(),fe();function t(a){n.debug=n,n.default=n,n.coerce=f,n.disable=o,n.enable=s,n.enabled=l,n.humanize=bu(),n.destroy=d,Object.keys(a).forEach(m=>{n[m]=a[m]}),n.names=[],n.skips=[],n.formatters={};function u(m){let b=0;for(let y=0;y<m.length;y++)b=(b<<5)-b+m.charCodeAt(y),b|=0;return n.colors[Math.abs(b)%n.colors.length]}n.selectColor=u;function n(m){let b,y=null,A,M;function C(...E){if(!C.enabled)return;let L=C,D=Number(new Date),I=D-(b||D);L.diff=I,L.prev=b,L.curr=D,b=D,E[0]=n.coerce(E[0]),typeof E[0]!="string"&&E.unshift("%O");let T=0;E[0]=E[0].replace(/%([a-zA-Z%])/g,(x,q)=>{if(x==="%%")return"%";T++;let G=n.formatters[q];if(typeof G=="function"){let te=E[T];x=G.call(L,te),E.splice(T,1),T--}return x}),n.formatArgs.call(L,E),(L.log||n.log).apply(L,E)}return C.namespace=m,C.useColors=n.useColors(),C.color=n.selectColor(m),C.extend=i,C.destroy=n.destroy,Object.defineProperty(C,"enabled",{enumerable:!0,configurable:!1,get:()=>y!==null?y:(A!==n.namespaces&&(A=n.namespaces,M=n.enabled(m)),M),set:E=>{y=E}}),typeof n.init=="function"&&n.init(C),C}function i(m,b){let y=n(this.namespace+(typeof b>"u"?":":b)+m);return y.log=this.log,y}function s(m){n.save(m),n.namespaces=m,n.names=[],n.skips=[];let b,y=(typeof m=="string"?m:"").split(/[\s,]+/),A=y.length;for(b=0;b<A;b++)y[b]&&(m=y[b].replace(/\*/g,".*?"),m[0]==="-"?n.skips.push(new RegExp("^"+m.slice(1)+"$")):n.names.push(new RegExp("^"+m+"$")))}function o(){let m=[...n.names.map(h),...n.skips.map(h).map(b=>"-"+b)].join(",");return n.enable(""),m}function l(m){if(m[m.length-1]==="*")return!0;let b,y;for(b=0,y=n.skips.length;b<y;b++)if(n.skips[b].test(m))return!1;for(b=0,y=n.names.length;b<y;b++)if(n.names[b].test(m))return!0;return!1}function h(m){return m.toString().substring(2,m.toString().length-2).replace(/\.\*\?$/,"*")}function f(m){return m instanceof Error?m.stack||m.message:m}function d(){console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.")}return n.enable(n.load()),n}r.exports=t}),Kt=ve((e,r)=>{ce(),de(),fe(),e.formatArgs=a,e.save=u,e.load=n,e.useColors=t,e.storage=i(),e.destroy=(()=>{let o=!1;return()=>{o||(o=!0,console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`."))}})(),e.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"];function t(){return typeof window<"u"&&window.process&&(window.process.type==="renderer"||window.process.__nwjs)?!0:typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/)?!1:typeof document<"u"&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||typeof window<"u"&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)}function a(o){if(o[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+o[0]+(this.useColors?"%c ":" ")+"+"+r.exports.humanize(this.diff),!this.useColors)return;let l="color: "+this.color;o.splice(1,0,l,"color: inherit");let h=0,f=0;o[0].replace(/%[a-zA-Z%]/g,d=>{d!=="%%"&&(h++,d==="%c"&&(f=h))}),o.splice(f,0,l)}e.log=console.debug||console.log||(()=>{});function u(o){try{o?e.storage.setItem("debug",o):e.storage.removeItem("debug")}catch{}}function n(){let o;try{o=e.storage.getItem("debug")}catch{}return!o&&typeof De<"u"&&"env"in De&&(o=De.env.DEBUG),o}function i(){try{return localStorage}catch{}}r.exports=yu()(e);var{formatters:s}=r.exports;s.j=function(o){try{return JSON.stringify(o)}catch(l){return"[UnexpectedJSONParseError]: "+l.message}}}),wu=ve((e,r)=>{ce(),de(),fe();var t=gu(),{EventEmitter:a}=(Rr(),Ke(_r)),u=mu(),n=ga(),i=Kt()("mqtt-packet:parser"),s=class eo extends a{constructor(){super(),this.parser=this.constructor.parser}static parser(l){return this instanceof eo?(this.settings=l||{},this._states=["_parseHeader","_parseLength","_parsePayload","_newPacket"],this._resetState(),this):new eo().parser(l)}_resetState(){i("_resetState: resetting packet, error, _list, and _stateCounter"),this.packet=new u,this.error=null,this._list=t(),this._stateCounter=0}parse(l){for(this.error&&this._resetState(),this._list.append(l),i("parse: current state: %s",this._states[this._stateCounter]);(this.packet.length!==-1||this._list.length>0)&&this[this._states[this._stateCounter]]()&&!this.error;)this._stateCounter++,i("parse: state complete. _stateCounter is now: %d",this._stateCounter),i("parse: packet.length: %d, buffer list length: %d",this.packet.length,this._list.length),this._stateCounter>=this._states.length&&(this._stateCounter=0);return i("parse: exited while loop. packet: %d, buffer list length: %d",this.packet.length,this._list.length),this._list.length}_parseHeader(){let l=this._list.readUInt8(0),h=l>>n.CMD_SHIFT;this.packet.cmd=n.types[h];let f=l&15,d=n.requiredHeaderFlags[h];return d!=null&&f!==d?this._emitError(new Error(n.requiredHeaderFlagsErrors[h])):(this.packet.retain=(l&n.RETAIN_MASK)!==0,this.packet.qos=l>>n.QOS_SHIFT&n.QOS_MASK,this.packet.qos>2?this._emitError(new Error("Packet must not have both QoS bits set to 1")):(this.packet.dup=(l&n.DUP_MASK)!==0,i("_parseHeader: packet: %o",this.packet),this._list.consume(1),!0))}_parseLength(){let l=this._parseVarByteNum(!0);return l&&(this.packet.length=l.value,this._list.consume(l.bytes)),i("_parseLength %d",l.value),!!l}_parsePayload(){i("_parsePayload: payload %O",this._list);let l=!1;if(this.packet.length===0||this._list.length>=this.packet.length){switch(this._pos=0,this.packet.cmd){case"connect":this._parseConnect();break;case"connack":this._parseConnack();break;case"publish":this._parsePublish();break;case"puback":case"pubrec":case"pubrel":case"pubcomp":this._parseConfirmation();break;case"subscribe":this._parseSubscribe();break;case"suback":this._parseSuback();break;case"unsubscribe":this._parseUnsubscribe();break;case"unsuback":this._parseUnsuback();break;case"pingreq":case"pingresp":break;case"disconnect":this._parseDisconnect();break;case"auth":this._parseAuth();break;default:this._emitError(new Error("Not supported"))}l=!0}return i("_parsePayload complete result: %s",l),l}_parseConnect(){i("_parseConnect");let l,h,f,d,m={},b=this.packet,y=this._parseString();if(y===null)return this._emitError(new Error("Cannot parse protocolId"));if(y!=="MQTT"&&y!=="MQIsdp")return this._emitError(new Error("Invalid protocolId"));if(b.protocolId=y,this._pos>=this._list.length)return this._emitError(new Error("Packet too short"));if(b.protocolVersion=this._list.readUInt8(this._pos),b.protocolVersion>=128&&(b.bridgeMode=!0,b.protocolVersion=b.protocolVersion-128),b.protocolVersion!==3&&b.protocolVersion!==4&&b.protocolVersion!==5)return this._emitError(new Error("Invalid protocol version"));if(this._pos++,this._pos>=this._list.length)return this._emitError(new Error("Packet too short"));if(this._list.readUInt8(this._pos)&1)return this._emitError(new Error("Connect flag bit 0 must be 0, but got 1"));m.username=this._list.readUInt8(this._pos)&n.USERNAME_MASK,m.password=this._list.readUInt8(this._pos)&n.PASSWORD_MASK,m.will=this._list.readUInt8(this._pos)&n.WILL_FLAG_MASK;let A=!!(this._list.readUInt8(this._pos)&n.WILL_RETAIN_MASK),M=(this._list.readUInt8(this._pos)&n.WILL_QOS_MASK)>>n.WILL_QOS_SHIFT;if(m.will)b.will={},b.will.retain=A,b.will.qos=M;else{if(A)return this._emitError(new Error("Will Retain Flag must be set to zero when Will Flag is set to 0"));if(M)return this._emitError(new Error("Will QoS must be set to zero when Will Flag is set to 0"))}if(b.clean=(this._list.readUInt8(this._pos)&n.CLEAN_SESSION_MASK)!==0,this._pos++,b.keepalive=this._parseNum(),b.keepalive===-1)return this._emitError(new Error("Packet too short"));if(b.protocolVersion===5){let E=this._parseProperties();Object.getOwnPropertyNames(E).length&&(b.properties=E)}let C=this._parseString();if(C===null)return this._emitError(new Error("Packet too short"));if(b.clientId=C,i("_parseConnect: packet.clientId: %s",b.clientId),m.will){if(b.protocolVersion===5){let E=this._parseProperties();Object.getOwnPropertyNames(E).length&&(b.will.properties=E)}if(l=this._parseString(),l===null)return this._emitError(new Error("Cannot parse will topic"));if(b.will.topic=l,i("_parseConnect: packet.will.topic: %s",b.will.topic),h=this._parseBuffer(),h===null)return this._emitError(new Error("Cannot parse will payload"));b.will.payload=h,i("_parseConnect: packet.will.paylaod: %s",b.will.payload)}if(m.username){if(d=this._parseString(),d===null)return this._emitError(new Error("Cannot parse username"));b.username=d,i("_parseConnect: packet.username: %s",b.username)}if(m.password){if(f=this._parseBuffer(),f===null)return this._emitError(new Error("Cannot parse password"));b.password=f}return this.settings=b,i("_parseConnect: complete"),b}_parseConnack(){i("_parseConnack");let l=this.packet;if(this._list.length<1)return null;let h=this._list.readUInt8(this._pos++);if(h>1)return this._emitError(new Error("Invalid connack flags, bits 7-1 must be set to 0"));if(l.sessionPresent=!!(h&n.SESSIONPRESENT_MASK),this.settings.protocolVersion===5)this._list.length>=2?l.reasonCode=this._list.readUInt8(this._pos++):l.reasonCode=0;else{if(this._list.length<2)return null;l.returnCode=this._list.readUInt8(this._pos++)}if(l.returnCode===-1||l.reasonCode===-1)return this._emitError(new Error("Cannot parse return code"));if(this.settings.protocolVersion===5){let f=this._parseProperties();Object.getOwnPropertyNames(f).length&&(l.properties=f)}i("_parseConnack: complete")}_parsePublish(){i("_parsePublish");let l=this.packet;if(l.topic=this._parseString(),l.topic===null)return this._emitError(new Error("Cannot parse topic"));if(!(l.qos>0&&!this._parseMessageId())){if(this.settings.protocolVersion===5){let h=this._parseProperties();Object.getOwnPropertyNames(h).length&&(l.properties=h)}l.payload=this._list.slice(this._pos,l.length),i("_parsePublish: payload from buffer list: %o",l.payload)}}_parseSubscribe(){i("_parseSubscribe");let l=this.packet,h,f,d,m,b,y,A;if(l.subscriptions=[],!!this._parseMessageId()){if(this.settings.protocolVersion===5){let M=this._parseProperties();Object.getOwnPropertyNames(M).length&&(l.properties=M)}if(l.length<=0)return this._emitError(new Error("Malformed subscribe, no payload specified"));for(;this._pos<l.length;){if(h=this._parseString(),h===null)return this._emitError(new Error("Cannot parse topic"));if(this._pos>=l.length)return this._emitError(new Error("Malformed Subscribe Payload"));if(f=this._parseByte(),this.settings.protocolVersion===5){if(f&192)return this._emitError(new Error("Invalid subscribe topic flag bits, bits 7-6 must be 0"))}else if(f&252)return this._emitError(new Error("Invalid subscribe topic flag bits, bits 7-2 must be 0"));if(d=f&n.SUBSCRIBE_OPTIONS_QOS_MASK,d>2)return this._emitError(new Error("Invalid subscribe QoS, must be <= 2"));if(y=(f>>n.SUBSCRIBE_OPTIONS_NL_SHIFT&n.SUBSCRIBE_OPTIONS_NL_MASK)!==0,b=(f>>n.SUBSCRIBE_OPTIONS_RAP_SHIFT&n.SUBSCRIBE_OPTIONS_RAP_MASK)!==0,m=f>>n.SUBSCRIBE_OPTIONS_RH_SHIFT&n.SUBSCRIBE_OPTIONS_RH_MASK,m>2)return this._emitError(new Error("Invalid retain handling, must be <= 2"));A={topic:h,qos:d},this.settings.protocolVersion===5?(A.nl=y,A.rap=b,A.rh=m):this.settings.bridgeMode&&(A.rh=0,A.rap=!0,A.nl=!0),i("_parseSubscribe: push subscription `%s` to subscription",A),l.subscriptions.push(A)}}}_parseSuback(){i("_parseSuback");let l=this.packet;if(this.packet.granted=[],!!this._parseMessageId()){if(this.settings.protocolVersion===5){let h=this._parseProperties();Object.getOwnPropertyNames(h).length&&(l.properties=h)}if(l.length<=0)return this._emitError(new Error("Malformed suback, no payload specified"));for(;this._pos<this.packet.length;){let h=this._list.readUInt8(this._pos++);if(this.settings.protocolVersion===5){if(!n.MQTT5_SUBACK_CODES[h])return this._emitError(new Error("Invalid suback code"))}else if(h>2&&h!==128)return this._emitError(new Error("Invalid suback QoS, must be 0, 1, 2 or 128"));this.packet.granted.push(h)}}}_parseUnsubscribe(){i("_parseUnsubscribe");let l=this.packet;if(l.unsubscriptions=[],!!this._parseMessageId()){if(this.settings.protocolVersion===5){let h=this._parseProperties();Object.getOwnPropertyNames(h).length&&(l.properties=h)}if(l.length<=0)return this._emitError(new Error("Malformed unsubscribe, no payload specified"));for(;this._pos<l.length;){let h=this._parseString();if(h===null)return this._emitError(new Error("Cannot parse topic"));i("_parseUnsubscribe: push topic `%s` to unsubscriptions",h),l.unsubscriptions.push(h)}}}_parseUnsuback(){i("_parseUnsuback");let l=this.packet;if(!this._parseMessageId())return this._emitError(new Error("Cannot parse messageId"));if((this.settings.protocolVersion===3||this.settings.protocolVersion===4)&&l.length!==2)return this._emitError(new Error("Malformed unsuback, payload length must be 2"));if(l.length<=0)return this._emitError(new Error("Malformed unsuback, no payload specified"));if(this.settings.protocolVersion===5){let h=this._parseProperties();for(Object.getOwnPropertyNames(h).length&&(l.properties=h),l.granted=[];this._pos<this.packet.length;){let f=this._list.readUInt8(this._pos++);if(!n.MQTT5_UNSUBACK_CODES[f])return this._emitError(new Error("Invalid unsuback code"));this.packet.granted.push(f)}}}_parseConfirmation(){i("_parseConfirmation: packet.cmd: `%s`",this.packet.cmd);let l=this.packet;if(this._parseMessageId(),this.settings.protocolVersion===5){if(l.length>2){switch(l.reasonCode=this._parseByte(),this.packet.cmd){case"puback":case"pubrec":if(!n.MQTT5_PUBACK_PUBREC_CODES[l.reasonCode])return this._emitError(new Error("Invalid "+this.packet.cmd+" reason code"));break;case"pubrel":case"pubcomp":if(!n.MQTT5_PUBREL_PUBCOMP_CODES[l.reasonCode])return this._emitError(new Error("Invalid "+this.packet.cmd+" reason code"));break}i("_parseConfirmation: packet.reasonCode `%d`",l.reasonCode)}else l.reasonCode=0;if(l.length>3){let h=this._parseProperties();Object.getOwnPropertyNames(h).length&&(l.properties=h)}}return!0}_parseDisconnect(){let l=this.packet;if(i("_parseDisconnect"),this.settings.protocolVersion===5){this._list.length>0?(l.reasonCode=this._parseByte(),n.MQTT5_DISCONNECT_CODES[l.reasonCode]||this._emitError(new Error("Invalid disconnect reason code"))):l.reasonCode=0;let h=this._parseProperties();Object.getOwnPropertyNames(h).length&&(l.properties=h)}return i("_parseDisconnect result: true"),!0}_parseAuth(){i("_parseAuth");let l=this.packet;if(this.settings.protocolVersion!==5)return this._emitError(new Error("Not supported auth packet for this version MQTT"));if(l.reasonCode=this._parseByte(),!n.MQTT5_AUTH_CODES[l.reasonCode])return this._emitError(new Error("Invalid auth reason code"));let h=this._parseProperties();return Object.getOwnPropertyNames(h).length&&(l.properties=h),i("_parseAuth: result: true"),!0}_parseMessageId(){let l=this.packet;return l.messageId=this._parseNum(),l.messageId===null?(this._emitError(new Error("Cannot parse messageId")),!1):(i("_parseMessageId: packet.messageId %d",l.messageId),!0)}_parseString(l){let h=this._parseNum(),f=h+this._pos;if(h===-1||f>this._list.length||f>this.packet.length)return null;let d=this._list.toString("utf8",this._pos,f);return this._pos+=h,i("_parseString: result: %s",d),d}_parseStringPair(){return i("_parseStringPair"),{name:this._parseString(),value:this._parseString()}}_parseBuffer(){let l=this._parseNum(),h=l+this._pos;if(l===-1||h>this._list.length||h>this.packet.length)return null;let f=this._list.slice(this._pos,h);return this._pos+=l,i("_parseBuffer: result: %o",f),f}_parseNum(){if(this._list.length-this._pos<2)return-1;let l=this._list.readUInt16BE(this._pos);return this._pos+=2,i("_parseNum: result: %s",l),l}_parse4ByteNum(){if(this._list.length-this._pos<4)return-1;let l=this._list.readUInt32BE(this._pos);return this._pos+=4,i("_parse4ByteNum: result: %s",l),l}_parseVarByteNum(l){i("_parseVarByteNum");let h=4,f=0,d=1,m=0,b=!1,y,A=this._pos?this._pos:0;for(;f<h&&A+f<this._list.length;){if(y=this._list.readUInt8(A+f++),m+=d*(y&n.VARBYTEINT_MASK),d*=128,!(y&n.VARBYTEINT_FIN_MASK)){b=!0;break}if(this._list.length<=f)break}return!b&&f===h&&this._list.length>=f&&this._emitError(new Error("Invalid variable byte integer")),A&&(this._pos+=f),b?l?b={bytes:f,value:m}:b=m:b=!1,i("_parseVarByteNum: result: %o",b),b}_parseByte(){let l;return this._pos<this._list.length&&(l=this._list.readUInt8(this._pos),this._pos++),i("_parseByte: result: %o",l),l}_parseByType(l){switch(i("_parseByType: type: %s",l),l){case"byte":return this._parseByte()!==0;case"int8":return this._parseByte();case"int16":return this._parseNum();case"int32":return this._parse4ByteNum();case"var":return this._parseVarByteNum();case"string":return this._parseString();case"pair":return this._parseStringPair();case"binary":return this._parseBuffer()}}_parseProperties(){i("_parseProperties");let l=this._parseVarByteNum(),h=this._pos+l,f={};for(;this._pos<h;){let d=this._parseByte();if(!d)return this._emitError(new Error("Cannot parse property code type")),!1;let m=n.propertiesCodes[d];if(!m)return this._emitError(new Error("Unknown property")),!1;if(m==="userProperties"){f[m]||(f[m]=Object.create(null));let b=this._parseByType(n.propertiesTypes[m]);if(f[m][b.name])if(Array.isArray(f[m][b.name]))f[m][b.name].push(b.value);else{let y=f[m][b.name];f[m][b.name]=[y],f[m][b.name].push(b.value)}else f[m][b.name]=b.value;continue}f[m]?Array.isArray(f[m])?f[m].push(this._parseByType(n.propertiesTypes[m])):(f[m]=[f[m]],f[m].push(this._parseByType(n.propertiesTypes[m]))):f[m]=this._parseByType(n.propertiesTypes[m])}return f}_newPacket(){return i("_newPacket"),this.packet&&(this._list.consume(this.packet.length),i("_newPacket: parser emit packet: packet.cmd: %s, packet.payload: %s, packet.length: %d",this.packet.cmd,this.packet.payload,this.packet.length),this.emit("packet",this.packet)),i("_newPacket: new packet"),this.packet=new u,this._pos=0,!0}_emitError(l){i("_emitError",l),this.error=l,this.emit("error",l)}};r.exports=s}),vu=ve((e,r)=>{ce(),de(),fe();var{Buffer:t}=(ft(),Ke(ct)),a=65536,u={},n=t.isBuffer(t.from([1,2]).subarray(0,1));function i(h){let f=t.allocUnsafe(2);return f.writeUInt8(h>>8,0),f.writeUInt8(h&255,0+1),f}function s(){for(let h=0;h<a;h++)u[h]=i(h)}function o(h){let f=0,d=0,m=t.allocUnsafe(4);do f=h%128|0,h=h/128|0,h>0&&(f=f|128),m.writeUInt8(f,d++);while(h>0&&d<4);return h>0&&(d=0),n?m.subarray(0,d):m.slice(0,d)}function l(h){let f=t.allocUnsafe(4);return f.writeUInt32BE(h,0),f}r.exports={cache:u,generateCache:s,generateNumber:i,genBufVariableByteInt:o,generate4ByteBuffer:l}}),_u=ve((e,r)=>{ce(),de(),fe(),typeof De>"u"||!De.version||De.version.indexOf("v0.")===0||De.version.indexOf("v1.")===0&&De.version.indexOf("v1.8.")!==0?r.exports={nextTick:t}:r.exports=De;function t(a,u,n,i){if(typeof a!="function")throw new TypeError('"callback" argument must be a function');var s=arguments.length,o,l;switch(s){case 0:case 1:return De.nextTick(a);case 2:return De.nextTick(function(){a.call(null,u)});case 3:return De.nextTick(function(){a.call(null,u,n)});case 4:return De.nextTick(function(){a.call(null,u,n,i)});default:for(o=new Array(s-1),l=0;l<o.length;)o[l++]=arguments[l];return De.nextTick(function(){a.apply(null,o)})}}}),ma=ve((e,r)=>{ce(),de(),fe();var t=ga(),{Buffer:a}=(ft(),Ke(ct)),u=a.allocUnsafe(0),n=a.from([0]),i=vu(),s=_u().nextTick,o=Kt()("mqtt-packet:writeToStream"),l=i.cache,h=i.generateNumber,f=i.generateCache,d=i.genBufVariableByteInt,m=i.generate4ByteBuffer,b=oe,y=!0;function A(B,S,z){switch(o("generate called"),S.cork&&(S.cork(),s(M,S)),y&&(y=!1,f()),o("generate: packet.cmd: %s",B.cmd),B.cmd){case"connect":return C(B,S);case"connack":return E(B,S,z);case"publish":return L(B,S,z);case"puback":case"pubrec":case"pubrel":case"pubcomp":return D(B,S,z);case"subscribe":return I(B,S,z);case"suback":return T(B,S,z);case"unsubscribe":return x(B,S,z);case"unsuback":return q(B,S,z);case"pingreq":case"pingresp":return G(B,S);case"disconnect":return te(B,S,z);case"auth":return v(B,S,z);default:return S.destroy(new Error("Unknown command")),!1}}Object.defineProperty(A,"cacheNumbers",{get(){return b===oe},set(B){B?((!l||Object.keys(l).length===0)&&(y=!0),b=oe):(y=!1,b=H)}});function M(B){B.uncork()}function C(B,S,z){let ae=B||{},ee=ae.protocolId||"MQTT",X=ae.protocolVersion||4,ue=ae.will,le=ae.clean,P=ae.keepalive||0,W=ae.clientId||"",F=ae.username,re=ae.password,J=ae.properties;le===void 0&&(le=!0);let j=0;if(!ee||typeof ee!="string"&&!a.isBuffer(ee))return S.destroy(new Error("Invalid protocolId")),!1;if(j+=ee.length+2,X!==3&&X!==4&&X!==5)return S.destroy(new Error("Invalid protocol version")),!1;if(j+=1,(typeof W=="string"||a.isBuffer(W))&&(W||X>=4)&&(W||le))j+=a.byteLength(W)+2;else{if(X<4)return S.destroy(new Error("clientId must be supplied before 3.1.1")),!1;if(le*1===0)return S.destroy(new Error("clientId must be given if cleanSession set to 0")),!1}if(typeof P!="number"||P<0||P>65535||P%1!==0)return S.destroy(new Error("Invalid keepalive")),!1;j+=2,j+=1;let Y,ye;if(X===5){if(Y=_e(S,J),!Y)return!1;j+=Y.length}if(ue){if(typeof ue!="object")return S.destroy(new Error("Invalid will")),!1;if(!ue.topic||typeof ue.topic!="string")return S.destroy(new Error("Invalid will topic")),!1;if(j+=a.byteLength(ue.topic)+2,j+=2,ue.payload)if(ue.payload.length>=0)typeof ue.payload=="string"?j+=a.byteLength(ue.payload):j+=ue.payload.length;else return S.destroy(new Error("Invalid will payload")),!1;if(ye={},X===5){if(ye=_e(S,ue.properties),!ye)return!1;j+=ye.length}}let Ee=!1;if(F!=null)if(he(F))Ee=!0,j+=a.byteLength(F)+2;else return S.destroy(new Error("Invalid username")),!1;if(re!=null){if(!Ee)return S.destroy(new Error("Username is required to use password")),!1;if(he(re))j+=Ae(re)+2;else return S.destroy(new Error("Invalid password")),!1}S.write(t.CONNECT_HEADER),Z(S,j),ie(S,ee),ae.bridgeMode&&(X+=128),S.write(X===131?t.VERSION131:X===132?t.VERSION132:X===4?t.VERSION4:X===5?t.VERSION5:t.VERSION3);let ke=0;return ke|=F!=null?t.USERNAME_MASK:0,ke|=re!=null?t.PASSWORD_MASK:0,ke|=ue&&ue.retain?t.WILL_RETAIN_MASK:0,ke|=ue&&ue.qos?ue.qos<<t.WILL_QOS_SHIFT:0,ke|=ue?t.WILL_FLAG_MASK:0,ke|=le?t.CLEAN_SESSION_MASK:0,S.write(a.from([ke])),b(S,P),X===5&&Y.write(),ie(S,W),ue&&(X===5&&ye.write(),K(S,ue.topic),ie(S,ue.payload)),F!=null&&ie(S,F),re!=null&&ie(S,re),!0}function E(B,S,z){let ae=z?z.protocolVersion:4,ee=B||{},X=ae===5?ee.reasonCode:ee.returnCode,ue=ee.properties,le=2;if(typeof X!="number")return S.destroy(new Error("Invalid return code")),!1;let P=null;if(ae===5){if(P=_e(S,ue),!P)return!1;le+=P.length}return S.write(t.CONNACK_HEADER),Z(S,le),S.write(ee.sessionPresent?t.SESSIONPRESENT_HEADER:n),S.write(a.from([X])),P==null||P.write(),!0}function L(B,S,z){o("publish: packet: %o",B);let ae=z?z.protocolVersion:4,ee=B||{},X=ee.qos||0,ue=ee.retain?t.RETAIN_MASK:0,le=ee.topic,P=ee.payload||u,W=ee.messageId,F=ee.properties,re=0;if(typeof le=="string")re+=a.byteLength(le)+2;else if(a.isBuffer(le))re+=le.length+2;else return S.destroy(new Error("Invalid topic")),!1;if(a.isBuffer(P)?re+=P.length:re+=a.byteLength(P),X&&typeof W!="number")return S.destroy(new Error("Invalid messageId")),!1;X&&(re+=2);let J=null;if(ae===5){if(J=_e(S,F),!J)return!1;re+=J.length}return S.write(t.PUBLISH_HEADER[X][ee.dup?1:0][ue?1:0]),Z(S,re),b(S,Ae(le)),S.write(le),X>0&&b(S,W),J==null||J.write(),o("publish: payload: %o",P),S.write(P)}function D(B,S,z){let ae=z?z.protocolVersion:4,ee=B||{},X=ee.cmd||"puback",ue=ee.messageId,le=ee.dup&&X==="pubrel"?t.DUP_MASK:0,P=0,W=ee.reasonCode,F=ee.properties,re=ae===5?3:2;if(X==="pubrel"&&(P=1),typeof ue!="number")return S.destroy(new Error("Invalid messageId")),!1;let J=null;if(ae===5&&typeof F=="object"){if(J=k(S,F,z,re),!J)return!1;re+=J.length}return S.write(t.ACKS[X][P][le][0]),re===3&&(re+=W!==0?1:-1),Z(S,re),b(S,ue),ae===5&&re!==2&&S.write(a.from([W])),J!==null?J.write():re===4&&S.write(a.from([0])),!0}function I(B,S,z){o("subscribe: packet: ");let ae=z?z.protocolVersion:4,ee=B||{},X=ee.dup?t.DUP_MASK:0,ue=ee.messageId,le=ee.subscriptions,P=ee.properties,W=0;if(typeof ue!="number")return S.destroy(new Error("Invalid messageId")),!1;W+=2;let F=null;if(ae===5){if(F=_e(S,P),!F)return!1;W+=F.length}if(typeof le=="object"&&le.length)for(let J=0;J<le.length;J+=1){let j=le[J].topic,Y=le[J].qos;if(typeof j!="string")return S.destroy(new Error("Invalid subscriptions - invalid topic")),!1;if(typeof Y!="number")return S.destroy(new Error("Invalid subscriptions - invalid qos")),!1;if(ae===5){if(typeof(le[J].nl||!1)!="boolean")return S.destroy(new Error("Invalid subscriptions - invalid No Local")),!1;if(typeof(le[J].rap||!1)!="boolean")return S.destroy(new Error("Invalid subscriptions - invalid Retain as Published")),!1;let ye=le[J].rh||0;if(typeof ye!="number"||ye>2)return S.destroy(new Error("Invalid subscriptions - invalid Retain Handling")),!1}W+=a.byteLength(j)+2+1}else return S.destroy(new Error("Invalid subscriptions")),!1;o("subscribe: writing to stream: %o",t.SUBSCRIBE_HEADER),S.write(t.SUBSCRIBE_HEADER[1][X?1:0][0]),Z(S,W),b(S,ue),F!==null&&F.write();let re=!0;for(let J of le){let j=J.topic,Y=J.qos,ye=+J.nl,Ee=+J.rap,ke=J.rh,Le;K(S,j),Le=t.SUBSCRIBE_OPTIONS_QOS[Y],ae===5&&(Le|=ye?t.SUBSCRIBE_OPTIONS_NL:0,Le|=Ee?t.SUBSCRIBE_OPTIONS_RAP:0,Le|=ke?t.SUBSCRIBE_OPTIONS_RH[ke]:0),re=S.write(a.from([Le]))}return re}function T(B,S,z){let ae=z?z.protocolVersion:4,ee=B||{},X=ee.messageId,ue=ee.granted,le=ee.properties,P=0;if(typeof X!="number")return S.destroy(new Error("Invalid messageId")),!1;if(P+=2,typeof ue=="object"&&ue.length)for(let F=0;F<ue.length;F+=1){if(typeof ue[F]!="number")return S.destroy(new Error("Invalid qos vector")),!1;P+=1}else return S.destroy(new Error("Invalid qos vector")),!1;let W=null;if(ae===5){if(W=k(S,le,z,P),!W)return!1;P+=W.length}return S.write(t.SUBACK_HEADER),Z(S,P),b(S,X),W!==null&&W.write(),S.write(a.from(ue))}function x(B,S,z){let ae=z?z.protocolVersion:4,ee=B||{},X=ee.messageId,ue=ee.dup?t.DUP_MASK:0,le=ee.unsubscriptions,P=ee.properties,W=0;if(typeof X!="number")return S.destroy(new Error("Invalid messageId")),!1;if(W+=2,typeof le=="object"&&le.length)for(let J=0;J<le.length;J+=1){if(typeof le[J]!="string")return S.destroy(new Error("Invalid unsubscriptions")),!1;W+=a.byteLength(le[J])+2}else return S.destroy(new Error("Invalid unsubscriptions")),!1;let F=null;if(ae===5){if(F=_e(S,P),!F)return!1;W+=F.length}S.write(t.UNSUBSCRIBE_HEADER[1][ue?1:0][0]),Z(S,W),b(S,X),F!==null&&F.write();let re=!0;for(let J=0;J<le.length;J++)re=K(S,le[J]);return re}function q(B,S,z){let ae=z?z.protocolVersion:4,ee=B||{},X=ee.messageId,ue=ee.dup?t.DUP_MASK:0,le=ee.granted,P=ee.properties,W=ee.cmd,F=0,re=2;if(typeof X!="number")return S.destroy(new Error("Invalid messageId")),!1;if(ae===5)if(typeof le=="object"&&le.length)for(let j=0;j<le.length;j+=1){if(typeof le[j]!="number")return S.destroy(new Error("Invalid qos vector")),!1;re+=1}else return S.destroy(new Error("Invalid qos vector")),!1;let J=null;if(ae===5){if(J=k(S,P,z,re),!J)return!1;re+=J.length}return S.write(t.ACKS[W][F][ue][0]),Z(S,re),b(S,X),J!==null&&J.write(),ae===5&&S.write(a.from(le)),!0}function G(B,S,z){return S.write(t.EMPTY[B.cmd])}function te(B,S,z){let ae=z?z.protocolVersion:4,ee=B||{},X=ee.reasonCode,ue=ee.properties,le=ae===5?1:0,P=null;if(ae===5){if(P=k(S,ue,z,le),!P)return!1;le+=P.length}return S.write(a.from([t.codes.disconnect<<4])),Z(S,le),ae===5&&S.write(a.from([X])),P!==null&&P.write(),!0}function v(B,S,z){let ae=z?z.protocolVersion:4,ee=B||{},X=ee.reasonCode,ue=ee.properties,le=ae===5?1:0;ae!==5&&S.destroy(new Error("Invalid mqtt version for auth packet"));let P=k(S,ue,z,le);return P?(le+=P.length,S.write(a.from([t.codes.auth<<4])),Z(S,le),S.write(a.from([X])),P!==null&&P.write(),!0):!1}var V={};function Z(B,S){if(S>t.VARBYTEINT_MAX)return B.destroy(new Error(`Invalid variable byte integer: ${S}`)),!1;let z=V[S];return z||(z=d(S),S<16384&&(V[S]=z)),o("writeVarByteInt: writing to stream: %o",z),B.write(z)}function K(B,S){let z=a.byteLength(S);return b(B,z),o("writeString: %s",S),B.write(S,"utf8")}function me(B,S,z){K(B,S),K(B,z)}function oe(B,S){return o("writeNumberCached: number: %d",S),o("writeNumberCached: %o",l[S]),B.write(l[S])}function H(B,S){let z=h(S);return o("writeNumberGenerated: %o",z),B.write(z)}function be(B,S){let z=m(S);return o("write4ByteNumber: %o",z),B.write(z)}function ie(B,S){typeof S=="string"?K(B,S):S?(b(B,S.length),B.write(S)):b(B,0)}function _e(B,S){if(typeof S!="object"||S.length!=null)return{length:1,write(){se(B,{},0)}};let z=0;function ae(ee,X){let ue=t.propertiesTypes[ee],le=0;switch(ue){case"byte":{if(typeof X!="boolean")return B.destroy(new Error(`Invalid ${ee}: ${X}`)),!1;le+=1+1;break}case"int8":{if(typeof X!="number"||X<0||X>255)return B.destroy(new Error(`Invalid ${ee}: ${X}`)),!1;le+=1+1;break}case"binary":{if(X&&X===null)return B.destroy(new Error(`Invalid ${ee}: ${X}`)),!1;le+=1+a.byteLength(X)+2;break}case"int16":{if(typeof X!="number"||X<0||X>65535)return B.destroy(new Error(`Invalid ${ee}: ${X}`)),!1;le+=1+2;break}case"int32":{if(typeof X!="number"||X<0||X>4294967295)return B.destroy(new Error(`Invalid ${ee}: ${X}`)),!1;le+=1+4;break}case"var":{if(typeof X!="number"||X<0||X>268435455)return B.destroy(new Error(`Invalid ${ee}: ${X}`)),!1;le+=1+a.byteLength(d(X));break}case"string":{if(typeof X!="string")return B.destroy(new Error(`Invalid ${ee}: ${X}`)),!1;le+=1+2+a.byteLength(X.toString());break}case"pair":{if(typeof X!="object")return B.destroy(new Error(`Invalid ${ee}: ${X}`)),!1;le+=Object.getOwnPropertyNames(X).reduce((P,W)=>{let F=X[W];return Array.isArray(F)?P+=F.reduce((re,J)=>(re+=1+2+a.byteLength(W.toString())+2+a.byteLength(J.toString()),re),0):P+=1+2+a.byteLength(W.toString())+2+a.byteLength(X[W].toString()),P},0);break}default:return B.destroy(new Error(`Invalid property ${ee}: ${X}`)),!1}return le}if(S)for(let ee in S){let X=0,ue=0,le=S[ee];if(Array.isArray(le))for(let P=0;P<le.length;P++){if(ue=ae(ee,le[P]),!ue)return!1;X+=ue}else{if(ue=ae(ee,le),!ue)return!1;X=ue}if(!X)return!1;z+=X}return{length:a.byteLength(d(z))+z,write(){se(B,S,z)}}}function k(B,S,z,ae){let ee=["reasonString","userProperties"],X=z&&z.properties&&z.properties.maximumPacketSize?z.properties.maximumPacketSize:0,ue=_e(B,S);if(X)for(;ae+ue.length>X;){let le=ee.shift();if(le&&S[le])delete S[le],ue=_e(B,S);else return!1}return ue}function Q(B,S,z){switch(t.propertiesTypes[S]){case"byte":{B.write(a.from([t.properties[S]])),B.write(a.from([+z]));break}case"int8":{B.write(a.from([t.properties[S]])),B.write(a.from([z]));break}case"binary":{B.write(a.from([t.properties[S]])),ie(B,z);break}case"int16":{B.write(a.from([t.properties[S]])),b(B,z);break}case"int32":{B.write(a.from([t.properties[S]])),be(B,z);break}case"var":{B.write(a.from([t.properties[S]])),Z(B,z);break}case"string":{B.write(a.from([t.properties[S]])),K(B,z);break}case"pair":{Object.getOwnPropertyNames(z).forEach(ae=>{let ee=z[ae];Array.isArray(ee)?ee.forEach(X=>{B.write(a.from([t.properties[S]])),me(B,ae.toString(),X.toString())}):(B.write(a.from([t.properties[S]])),me(B,ae.toString(),ee.toString()))});break}default:return B.destroy(new Error(`Invalid property ${S} value: ${z}`)),!1}}function se(B,S,z){Z(B,z);for(let ae in S)if(Object.prototype.hasOwnProperty.call(S,ae)&&S[ae]!==null){let ee=S[ae];if(Array.isArray(ee))for(let X=0;X<ee.length;X++)Q(B,ae,ee[X]);else Q(B,ae,ee)}}function Ae(B){return B?B instanceof a?B.length:a.byteLength(B):0}function he(B){return typeof B=="string"||B instanceof a}r.exports=A}),Eu=ve((e,r)=>{ce(),de(),fe();var t=ma(),{EventEmitter:a}=(Rr(),Ke(_r)),{Buffer:u}=(ft(),Ke(ct));function n(s,o){let l=new i;return t(s,l,o),l.concat()}var i=class extends a{constructor(){super(),this._array=new Array(20),this._i=0}write(s){return this._array[this._i++]=s,!0}concat(){let s=0,o=new Array(this._array.length),l=this._array,h=0,f;for(f=0;f<l.length&&l[f]!==void 0;f++)typeof l[f]!="string"?o[f]=l[f].length:o[f]=u.byteLength(l[f]),s+=o[f];let d=u.allocUnsafe(s);for(f=0;f<l.length&&l[f]!==void 0;f++)typeof l[f]!="string"?(l[f].copy(d,h),h+=o[f]):(d.write(l[f],h),h+=o[f]);return d}destroy(s){s&&this.emit("error",s)}};r.exports=n}),Su=ve(e=>{ce(),de(),fe(),e.parser=wu().parser,e.generate=Eu(),e.writeToStream=ma()}),ba=ve(e=>{ce(),de(),fe(),Object.defineProperty(e,"__esModule",{value:!0});var r=class{constructor(){this.nextId=Math.max(1,Math.floor(Math.random()*65535))}allocate(){let t=this.nextId++;return this.nextId===65536&&(this.nextId=1),t}getLastAllocated(){return this.nextId===1?65535:this.nextId-1}register(t){return!0}deallocate(t){}clear(){}};e.default=r}),Au=ve((e,r)=>{ce(),de(),fe(),r.exports=a;function t(n){return n instanceof hi?hi.from(n):new n.constructor(n.buffer.slice(),n.byteOffset,n.length)}function a(n){if(n=n||{},n.circles)return u(n);return n.proto?o:s;function i(l,h){for(var f=Object.keys(l),d=new Array(f.length),m=0;m<f.length;m++){var b=f[m],y=l[b];typeof y!="object"||y===null?d[b]=y:y instanceof Date?d[b]=new Date(y):ArrayBuffer.isView(y)?d[b]=t(y):d[b]=h(y)}return d}function s(l){if(typeof l!="object"||l===null)return l;if(l instanceof Date)return new Date(l);if(Array.isArray(l))return i(l,s);if(l instanceof Map)return new Map(i(Array.from(l),s));if(l instanceof Set)return new Set(i(Array.from(l),s));var h={};for(var f in l)if(Object.hasOwnProperty.call(l,f)!==!1){var d=l[f];typeof d!="object"||d===null?h[f]=d:d instanceof Date?h[f]=new Date(d):d instanceof Map?h[f]=new Map(i(Array.from(d),s)):d instanceof Set?h[f]=new Set(i(Array.from(d),s)):ArrayBuffer.isView(d)?h[f]=t(d):h[f]=s(d)}return h}function o(l){if(typeof l!="object"||l===null)return l;if(l instanceof Date)return new Date(l);if(Array.isArray(l))return i(l,o);if(l instanceof Map)return new Map(i(Array.from(l),o));if(l instanceof Set)return new Set(i(Array.from(l),o));var h={};for(var f in l){var d=l[f];typeof d!="object"||d===null?h[f]=d:d instanceof Date?h[f]=new Date(d):d instanceof Map?h[f]=new Map(i(Array.from(d),o)):d instanceof Set?h[f]=new Set(i(Array.from(d),o)):ArrayBuffer.isView(d)?h[f]=t(d):h[f]=o(d)}return h}}function u(n){var i=[],s=[];return n.proto?h:l;function o(f,d){for(var m=Object.keys(f),b=new Array(m.length),y=0;y<m.length;y++){var A=m[y],M=f[A];if(typeof M!="object"||M===null)b[A]=M;else if(M instanceof Date)b[A]=new Date(M);else if(ArrayBuffer.isView(M))b[A]=t(M);else{var C=i.indexOf(M);C!==-1?b[A]=s[C]:b[A]=d(M)}}return b}function l(f){if(typeof f!="object"||f===null)return f;if(f instanceof Date)return new Date(f);if(Array.isArray(f))return o(f,l);if(f instanceof Map)return new Map(o(Array.from(f),l));if(f instanceof Set)return new Set(o(Array.from(f),l));var d={};i.push(f),s.push(d);for(var m in f)if(Object.hasOwnProperty.call(f,m)!==!1){var b=f[m];if(typeof b!="object"||b===null)d[m]=b;else if(b instanceof Date)d[m]=new Date(b);else if(b instanceof Map)d[m]=new Map(o(Array.from(b),l));else if(b instanceof Set)d[m]=new Set(o(Array.from(b),l));else if(ArrayBuffer.isView(b))d[m]=t(b);else{var y=i.indexOf(b);y!==-1?d[m]=s[y]:d[m]=l(b)}}return i.pop(),s.pop(),d}function h(f){if(typeof f!="object"||f===null)return f;if(f instanceof Date)return new Date(f);if(Array.isArray(f))return o(f,h);if(f instanceof Map)return new Map(o(Array.from(f),h));if(f instanceof Set)return new Set(o(Array.from(f),h));var d={};i.push(f),s.push(d);for(var m in f){var b=f[m];if(typeof b!="object"||b===null)d[m]=b;else if(b instanceof Date)d[m]=new Date(b);else if(b instanceof Map)d[m]=new Map(o(Array.from(b),h));else if(b instanceof Set)d[m]=new Set(o(Array.from(b),h));else if(ArrayBuffer.isView(b))d[m]=t(b);else{var y=i.indexOf(b);y!==-1?d[m]=s[y]:d[m]=h(b)}}return i.pop(),s.pop(),d}}}),Iu=ve((e,r)=>{ce(),de(),fe(),r.exports=Au()()}),ku=ve(e=>{ce(),de(),fe(),Object.defineProperty(e,"__esModule",{value:!0}),e.validateTopics=e.validateTopic=void 0;function r(a){let u=a.split("/");for(let n=0;n<u.length;n++)if(u[n]!=="+"){if(u[n]==="#")return n===u.length-1;if(u[n].indexOf("+")!==-1||u[n].indexOf("#")!==-1)return!1}return!0}e.validateTopic=r;function t(a){if(a.length===0)return"empty_topic_list";for(let u=0;u<a.length;u++)if(!r(a[u]))return a[u];return null}e.validateTopics=t}),ya=ve(e=>{ce(),de(),fe(),Object.defineProperty(e,"__esModule",{value:!0});var r=Er(),t={objectMode:!0},a={clean:!0},u=class{constructor(n){this.options=n||{},this.options=Object.assign(Object.assign({},a),n),this._inflights=new Map}put(n,i){return this._inflights.set(n.messageId,n),i&&i(),this}createStream(){let n=new r.Readable(t),i=[],s=!1,o=0;return this._inflights.forEach((l,h)=>{i.push(l)}),n._read=()=>{!s&&o<i.length?n.push(i[o++]):n.push(null)},n.destroy=l=>{if(!s)return s=!0,setTimeout(()=>{n.emit("close")},0),n},n}del(n,i){let s=this._inflights.get(n.messageId);return s?(this._inflights.delete(n.messageId),i(null,s)):i&&i(new Error("missing packet")),this}get(n,i){let s=this._inflights.get(n.messageId);return s?i(null,s):i&&i(new Error("missing packet")),this}close(n){this.options.clean&&(this._inflights=null),n&&n()}};e.default=u}),Tu=ve(e=>{ce(),de(),fe(),Object.defineProperty(e,"__esModule",{value:!0});var r=[0,16,128,131,135,144,145,151,153],t=(a,u,n)=>{a.log("handlePublish: packet %o",u),n=typeof n<"u"?n:a.noop;let i=u.topic.toString(),s=u.payload,{qos:o}=u,{messageId:l}=u,{options:h}=a;if(a.options.protocolVersion===5){let f;if(u.properties&&(f=u.properties.topicAlias),typeof f<"u")if(i.length===0)if(f>0&&f<=65535){let d=a.topicAliasRecv.getTopicByAlias(f);if(d)i=d,a.log("handlePublish :: topic complemented by alias. topic: %s - alias: %d",i,f);else{a.log("handlePublish :: unregistered topic alias. alias: %d",f),a.emit("error",new Error("Received unregistered Topic Alias"));return}}else{a.log("handlePublish :: topic alias out of range. alias: %d",f),a.emit("error",new Error("Received Topic Alias is out of range"));return}else if(a.topicAliasRecv.put(i,f))a.log("handlePublish :: registered topic: %s - alias: %d",i,f);else{a.log("handlePublish :: topic alias out of range. alias: %d",f),a.emit("error",new Error("Received Topic Alias is out of range"));return}}switch(a.log("handlePublish: qos %d",o),o){case 2:{h.customHandleAcks(i,s,u,(f,d)=>{if(typeof f=="number"&&(d=f,f=null),f)return a.emit("error",f);if(r.indexOf(d)===-1)return a.emit("error",new Error("Wrong reason code for pubrec"));d?a._sendPacket({cmd:"pubrec",messageId:l,reasonCode:d},n):a.incomingStore.put(u,()=>{a._sendPacket({cmd:"pubrec",messageId:l},n)})});break}case 1:{h.customHandleAcks(i,s,u,(f,d)=>{if(typeof f=="number"&&(d=f,f=null),f)return a.emit("error",f);if(r.indexOf(d)===-1)return a.emit("error",new Error("Wrong reason code for puback"));d||a.emit("message",i,s,u),a.handleMessage(u,m=>{if(m)return n&&n(m);a._sendPacket({cmd:"puback",messageId:l,reasonCode:d},n)})});break}case 0:a.emit("message",i,s,u),a.handleMessage(u,n);break;default:a.log("handlePublish: unknown QoS. Doing nothing.");break}};e.default=t}),Cu=ve((e,r)=>{r.exports={version:"5.10.3"}}),Pr=ve(e=>{ce(),de(),fe(),Object.defineProperty(e,"__esModule",{value:!0}),e.MQTTJS_VERSION=e.nextTick=e.applyMixin=e.ErrorWithReasonCode=void 0;var r=class wa extends Error{constructor(u,n){super(u),this.code=n,Object.setPrototypeOf(this,wa.prototype),Object.getPrototypeOf(this).name="ErrorWithReasonCode"}};e.ErrorWithReasonCode=r;function t(a,u,n=!1){var i;let s=[u];for(;;){let o=s[0],l=Object.getPrototypeOf(o);if(l!=null&&l.prototype)s.unshift(l);else break}for(let o of s)for(let l of Object.getOwnPropertyNames(o.prototype))(n||l!=="constructor")&&Object.defineProperty(a.prototype,l,(i=Object.getOwnPropertyDescriptor(o.prototype,l))!==null&&i!==void 0?i:Object.create(null))}e.applyMixin=t,e.nextTick=typeof(De==null?void 0:De.nextTick)=="function"?De.nextTick:a=>{setTimeout(a,0)},e.MQTTJS_VERSION=Cu().version}),_i=ve(e=>{ce(),de(),fe(),Object.defineProperty(e,"__esModule",{value:!0}),e.ReasonCodes=void 0;var r=Pr();e.ReasonCodes={0:"",1:"Unacceptable protocol version",2:"Identifier rejected",3:"Server unavailable",4:"Bad username or password",5:"Not authorized",16:"No matching subscribers",17:"No subscription existed",128:"Unspecified error",129:"Malformed Packet",130:"Protocol Error",131:"Implementation specific error",132:"Unsupported Protocol Version",133:"Client Identifier not valid",134:"Bad User Name or Password",135:"Not authorized",136:"Server unavailable",137:"Server busy",138:"Banned",139:"Server shutting down",140:"Bad authentication method",141:"Keep Alive timeout",142:"Session taken over",143:"Topic Filter invalid",144:"Topic Name invalid",145:"Packet identifier in use",146:"Packet Identifier not found",147:"Receive Maximum exceeded",148:"Topic Alias invalid",149:"Packet too large",150:"Message rate too high",151:"Quota exceeded",152:"Administrative action",153:"Payload format invalid",154:"Retain not supported",155:"QoS not supported",156:"Use another server",157:"Server moved",158:"Shared Subscriptions not supported",159:"Connection rate exceeded",160:"Maximum connect time",161:"Subscription Identifiers not supported",162:"Wildcard Subscriptions not supported"};var t=(a,u)=>{let{messageId:n}=u,i=u.cmd,s=null,o=a.outgoing[n]?a.outgoing[n].cb:null,l=null;if(!o){a.log("_handleAck :: Server sent an ack in error. Ignoring.");return}switch(a.log("_handleAck :: packet type",i),i){case"pubcomp":case"puback":{let h=u.reasonCode;h&&h>0&&h!==16?(l=new r.ErrorWithReasonCode(`Publish error: ${e.ReasonCodes[h]}`,h),a._removeOutgoingAndStoreMessage(n,()=>{o(l,u)})):a._removeOutgoingAndStoreMessage(n,o);break}case"pubrec":{s={cmd:"pubrel",qos:2,messageId:n};let h=u.reasonCode;h&&h>0&&h!==16?(l=new r.ErrorWithReasonCode(`Publish error: ${e.ReasonCodes[h]}`,h),a._removeOutgoingAndStoreMessage(n,()=>{o(l,u)})):a._sendPacket(s);break}case"suback":{delete a.outgoing[n],a.messageIdProvider.deallocate(n);let h=u.granted;for(let f=0;f<h.length;f++){let d=h[f];if(d&128){l=new Error(`Subscribe error: ${e.ReasonCodes[d]}`),l.code=d;let m=a.messageIdToTopic[n];m&&m.forEach(b=>{delete a._resubscribeTopics[b]})}}delete a.messageIdToTopic[n],a._invokeStoreProcessingQueue(),o(l,u);break}case"unsuback":{delete a.outgoing[n],a.messageIdProvider.deallocate(n),a._invokeStoreProcessingQueue(),o(null,u);break}default:a.emit("error",new Error("unrecognized packet type"))}a.disconnecting&&Object.keys(a.outgoing).length===0&&a.emit("outgoingEmpty")};e.default=t}),Ou=ve(e=>{ce(),de(),fe(),Object.defineProperty(e,"__esModule",{value:!0});var r=Pr(),t=_i(),a=(u,n)=>{let{options:i}=u,s=i.protocolVersion,o=s===5?n.reasonCode:n.returnCode;if(s!==5){let l=new r.ErrorWithReasonCode(`Protocol error: Auth packets are only supported in MQTT 5. Your version:${s}`,o);u.emit("error",l);return}u.handleAuth(n,(l,h)=>{if(l){u.emit("error",l);return}if(o===24)u.reconnecting=!1,u._sendPacket(h);else{let f=new r.ErrorWithReasonCode(`Connection refused: ${t.ReasonCodes[o]}`,o);u.emit("error",f)}})};e.default=a}),Ru=ve(e=>{var m,b,y,A,M,C,E,L,D,I,T,x,q,G,te,v,V,Z,K,me,oe,H,be,ie,_e,k,to,se,Ae,he,B,S,va,ae,ee,X,ue,Xt,P,Zt,F,ro,J,Zr,Y,ei,Ee,Ge,Le,io,c,jr,_;ce(),de(),fe(),Object.defineProperty(e,"__esModule",{value:!0}),e.LRUCache=void 0;var r=typeof performance=="object"&&performance&&typeof performance.now=="function"?performance:Date,t=new Set,a=typeof De=="object"&&De?De:{},u=(O,w,R,N)=>{typeof a.emitWarning=="function"?a.emitWarning(O,w,R,N):console.error(`[${R}] ${w}: ${O}`)},n=globalThis.AbortController,i=globalThis.AbortSignal;if(typeof n>"u"){i=class{constructor(){Ze(this,"onabort");Ze(this,"_onabort",[]);Ze(this,"reason");Ze(this,"aborted",!1)}addEventListener(R,N){this._onabort.push(N)}},n=class{constructor(){Ze(this,"signal",new i);w()}abort(R){var N,$;if(!this.signal.aborted){this.signal.reason=R,this.signal.aborted=!0;for(let ne of this.signal._onabort)ne(R);($=(N=this.signal).onabort)==null||$.call(N,R)}}};let O=((m=a.env)==null?void 0:m.LRU_CACHE_IGNORE_AC_WARNING)!=="1",w=()=>{O&&(O=!1,u("AbortController is not defined. If using lru-cache in node 14, load an AbortController polyfill from the `node-abort-controller` package. A minimal polyfill is provided for use by LRUCache.fetch(), but it should not be relied upon in other contexts (eg, passing it to other APIs that use AbortController/AbortSignal might have undesirable effects). You may disable this with LRU_CACHE_IGNORE_AC_WARNING=1 in the env.","NO_ABORT_CONTROLLER","ENOTSUP",w))}}var s=O=>!t.has(O),o=O=>O&&O===Math.floor(O)&&O>0&&isFinite(O),l=O=>o(O)?O<=Math.pow(2,8)?Uint8Array:O<=Math.pow(2,16)?Uint16Array:O<=Math.pow(2,32)?Uint32Array:O<=Number.MAX_SAFE_INTEGER?h:null:null,h=class extends Array{constructor(O){super(O),this.fill(0)}},f=(b=class{constructor(w,R){Ze(this,"heap");Ze(this,"length");if(!U(b,y))throw new TypeError("instantiate Stack using Stack.create(n)");this.heap=new R(w),this.length=0}static create(w){let R=l(w);if(!R)return[];Be(b,y,!0);let N=new b(w,R);return Be(b,y,!1),N}push(w){this.heap[this.length++]=w}pop(){return this.heap[--this.length]}},y=new WeakMap,Ue(b,y,!1),b),d=(_=class{constructor(w){Ue(this,k);Ue(this,S);Ue(this,ue);Ue(this,P);Ue(this,F);Ue(this,J);Ue(this,Y);Ue(this,Ee);Ue(this,Le);Ue(this,c);Ue(this,A,void 0);Ue(this,M,void 0);Ue(this,C,void 0);Ue(this,E,void 0);Ue(this,L,void 0);Ze(this,"ttl");Ze(this,"ttlResolution");Ze(this,"ttlAutopurge");Ze(this,"updateAgeOnGet");Ze(this,"updateAgeOnHas");Ze(this,"allowStale");Ze(this,"noDisposeOnSet");Ze(this,"noUpdateTTL");Ze(this,"maxEntrySize");Ze(this,"sizeCalculation");Ze(this,"noDeleteOnFetchRejection");Ze(this,"noDeleteOnStaleGet");Ze(this,"allowStaleOnFetchAbort");Ze(this,"allowStaleOnFetchRejection");Ze(this,"ignoreFetchAbort");Ue(this,D,void 0);Ue(this,I,void 0);Ue(this,T,void 0);Ue(this,x,void 0);Ue(this,q,void 0);Ue(this,G,void 0);Ue(this,te,void 0);Ue(this,v,void 0);Ue(this,V,void 0);Ue(this,Z,void 0);Ue(this,K,void 0);Ue(this,me,void 0);Ue(this,oe,void 0);Ue(this,H,void 0);Ue(this,be,void 0);Ue(this,ie,void 0);Ue(this,_e,void 0);Ue(this,se,()=>{});Ue(this,Ae,()=>{});Ue(this,he,()=>{});Ue(this,B,()=>!1);Ue(this,ae,w=>{});Ue(this,ee,(w,R,N)=>{});Ue(this,X,(w,R,N,$)=>{if(N||$)throw new TypeError("cannot set size without setting maxSize or maxEntrySize on cache");return 0});let{max:R=0,ttl:N,ttlResolution:$=1,ttlAutopurge:ne,updateAgeOnGet:we,updateAgeOnHas:Ie,allowStale:Pe,dispose:Qe,disposeAfter:at,noDisposeOnSet:je,noUpdateTTL:it,maxSize:He=0,maxEntrySize:Ye=0,sizeCalculation:Fe,fetchMethod:nt,noDeleteOnFetchRejection:xe,noDeleteOnStaleGet:tt,allowStaleOnFetchRejection:bt,allowStaleOnFetchAbort:lt,ignoreFetchAbort:St}=w;if(R!==0&&!o(R))throw new TypeError("max option must be a nonnegative integer");let ir=R?l(R):Array;if(!ir)throw new Error("invalid max value: "+R);if(Be(this,A,R),Be(this,M,He),this.maxEntrySize=Ye||U(this,M),this.sizeCalculation=Fe,this.sizeCalculation){if(!U(this,M)&&!this.maxEntrySize)throw new TypeError("cannot set sizeCalculation without setting maxSize or maxEntrySize");if(typeof this.sizeCalculation!="function")throw new TypeError("sizeCalculation set to non-function")}if(nt!==void 0&&typeof nt!="function")throw new TypeError("fetchMethod must be a function if specified");if(Be(this,L,nt),Be(this,ie,!!nt),Be(this,T,new Map),Be(this,x,new Array(R).fill(void 0)),Be(this,q,new Array(R).fill(void 0)),Be(this,G,new ir(R)),Be(this,te,new ir(R)),Be(this,v,0),Be(this,V,0),Be(this,Z,f.create(R)),Be(this,D,0),Be(this,I,0),typeof Qe=="function"&&Be(this,C,Qe),typeof at=="function"?(Be(this,E,at),Be(this,K,[])):(Be(this,E,void 0),Be(this,K,void 0)),Be(this,be,!!U(this,C)),Be(this,_e,!!U(this,E)),this.noDisposeOnSet=!!je,this.noUpdateTTL=!!it,this.noDeleteOnFetchRejection=!!xe,this.allowStaleOnFetchRejection=!!bt,this.allowStaleOnFetchAbort=!!lt,this.ignoreFetchAbort=!!St,this.maxEntrySize!==0){if(U(this,M)!==0&&!o(U(this,M)))throw new TypeError("maxSize must be a positive integer if specified");if(!o(this.maxEntrySize))throw new TypeError("maxEntrySize must be a positive integer if specified");Te(this,S,va).call(this)}if(this.allowStale=!!Pe,this.noDeleteOnStaleGet=!!tt,this.updateAgeOnGet=!!we,this.updateAgeOnHas=!!Ie,this.ttlResolution=o($)||$===0?$:1,this.ttlAutopurge=!!ne,this.ttl=N||0,this.ttl){if(!o(this.ttl))throw new TypeError("ttl must be a positive integer if specified");Te(this,k,to).call(this)}if(U(this,A)===0&&this.ttl===0&&U(this,M)===0)throw new TypeError("At least one of max, maxSize, or ttl is required");if(!this.ttlAutopurge&&!U(this,A)&&!U(this,M)){let Jt="LRU_CACHE_UNBOUNDED";s(Jt)&&(t.add(Jt),u("TTL caching without ttlAutopurge, max, or maxSize can result in unbounded memory consumption.","UnboundedCacheWarning",Jt,_))}}static unsafeExposeInternals(w){return{starts:U(w,oe),ttls:U(w,H),sizes:U(w,me),keyMap:U(w,T),keyList:U(w,x),valList:U(w,q),next:U(w,G),prev:U(w,te),get head(){return U(w,v)},get tail(){return U(w,V)},free:U(w,Z),isBackgroundFetch:R=>{var N;return Te(N=w,Ee,Ge).call(N,R)},backgroundFetch:(R,N,$,ne)=>{var we;return Te(we=w,Y,ei).call(we,R,N,$,ne)},moveToTail:R=>{var N;return Te(N=w,c,jr).call(N,R)},indexes:R=>{var N;return Te(N=w,ue,Xt).call(N,R)},rindexes:R=>{var N;return Te(N=w,P,Zt).call(N,R)},isStale:R=>{var N;return U(N=w,B).call(N,R)}}}get max(){return U(this,A)}get maxSize(){return U(this,M)}get calculatedSize(){return U(this,I)}get size(){return U(this,D)}get fetchMethod(){return U(this,L)}get dispose(){return U(this,C)}get disposeAfter(){return U(this,E)}getRemainingTTL(w){return U(this,T).has(w)?1/0:0}*entries(){for(let w of Te(this,ue,Xt).call(this))U(this,q)[w]!==void 0&&U(this,x)[w]!==void 0&&!Te(this,Ee,Ge).call(this,U(this,q)[w])&&(yield[U(this,x)[w],U(this,q)[w]])}*rentries(){for(let w of Te(this,P,Zt).call(this))U(this,q)[w]!==void 0&&U(this,x)[w]!==void 0&&!Te(this,Ee,Ge).call(this,U(this,q)[w])&&(yield[U(this,x)[w],U(this,q)[w]])}*keys(){for(let w of Te(this,ue,Xt).call(this)){let R=U(this,x)[w];R!==void 0&&!Te(this,Ee,Ge).call(this,U(this,q)[w])&&(yield R)}}*rkeys(){for(let w of Te(this,P,Zt).call(this)){let R=U(this,x)[w];R!==void 0&&!Te(this,Ee,Ge).call(this,U(this,q)[w])&&(yield R)}}*values(){for(let w of Te(this,ue,Xt).call(this))U(this,q)[w]!==void 0&&!Te(this,Ee,Ge).call(this,U(this,q)[w])&&(yield U(this,q)[w])}*rvalues(){for(let w of Te(this,P,Zt).call(this))U(this,q)[w]!==void 0&&!Te(this,Ee,Ge).call(this,U(this,q)[w])&&(yield U(this,q)[w])}[Symbol.iterator](){return this.entries()}find(w,R={}){for(let N of Te(this,ue,Xt).call(this)){let $=U(this,q)[N],ne=Te(this,Ee,Ge).call(this,$)?$.__staleWhileFetching:$;if(ne!==void 0&&w(ne,U(this,x)[N],this))return this.get(U(this,x)[N],R)}}forEach(w,R=this){for(let N of Te(this,ue,Xt).call(this)){let $=U(this,q)[N],ne=Te(this,Ee,Ge).call(this,$)?$.__staleWhileFetching:$;ne!==void 0&&w.call(R,ne,U(this,x)[N],this)}}rforEach(w,R=this){for(let N of Te(this,P,Zt).call(this)){let $=U(this,q)[N],ne=Te(this,Ee,Ge).call(this,$)?$.__staleWhileFetching:$;ne!==void 0&&w.call(R,ne,U(this,x)[N],this)}}purgeStale(){let w=!1;for(let R of Te(this,P,Zt).call(this,{allowStale:!0}))U(this,B).call(this,R)&&(this.delete(U(this,x)[R]),w=!0);return w}dump(){let w=[];for(let R of Te(this,ue,Xt).call(this,{allowStale:!0})){let N=U(this,x)[R],$=U(this,q)[R],ne=Te(this,Ee,Ge).call(this,$)?$.__staleWhileFetching:$;if(ne===void 0||N===void 0)continue;let we={value:ne};if(U(this,H)&&U(this,oe)){we.ttl=U(this,H)[R];let Ie=r.now()-U(this,oe)[R];we.start=Math.floor(Date.now()-Ie)}U(this,me)&&(we.size=U(this,me)[R]),w.unshift([N,we])}return w}load(w){this.clear();for(let[R,N]of w){if(N.start){let $=Date.now()-N.start;N.start=r.now()-$}this.set(R,N.value,N)}}set(w,R,N={}){var it,He,Ye,Fe,nt;if(R===void 0)return this.delete(w),this;let{ttl:$=this.ttl,start:ne,noDisposeOnSet:we=this.noDisposeOnSet,sizeCalculation:Ie=this.sizeCalculation,status:Pe}=N,{noUpdateTTL:Qe=this.noUpdateTTL}=N,at=U(this,X).call(this,w,R,N.size||0,Ie);if(this.maxEntrySize&&at>this.maxEntrySize)return Pe&&(Pe.set="miss",Pe.maxEntrySizeExceeded=!0),this.delete(w),this;let je=U(this,D)===0?void 0:U(this,T).get(w);if(je===void 0)je=U(this,D)===0?U(this,V):U(this,Z).length!==0?U(this,Z).pop():U(this,D)===U(this,A)?Te(this,J,Zr).call(this,!1):U(this,D),U(this,x)[je]=w,U(this,q)[je]=R,U(this,T).set(w,je),U(this,G)[U(this,V)]=je,U(this,te)[je]=U(this,V),Be(this,V,je),Wr(this,D)._++,U(this,ee).call(this,je,at,Pe),Pe&&(Pe.set="add"),Qe=!1;else{Te(this,c,jr).call(this,je);let xe=U(this,q)[je];if(R!==xe){if(U(this,ie)&&Te(this,Ee,Ge).call(this,xe)){xe.__abortController.abort(new Error("replaced"));let{__staleWhileFetching:tt}=xe;tt!==void 0&&!we&&(U(this,be)&&((it=U(this,C))==null||it.call(this,tt,w,"set")),U(this,_e)&&((He=U(this,K))==null||He.push([tt,w,"set"])))}else we||(U(this,be)&&((Ye=U(this,C))==null||Ye.call(this,xe,w,"set")),U(this,_e)&&((Fe=U(this,K))==null||Fe.push([xe,w,"set"])));if(U(this,ae).call(this,je),U(this,ee).call(this,je,at,Pe),U(this,q)[je]=R,Pe){Pe.set="replace";let tt=xe&&Te(this,Ee,Ge).call(this,xe)?xe.__staleWhileFetching:xe;tt!==void 0&&(Pe.oldValue=tt)}}else Pe&&(Pe.set="update")}if($!==0&&!U(this,H)&&Te(this,k,to).call(this),U(this,H)&&(Qe||U(this,he).call(this,je,$,ne),Pe&&U(this,Ae).call(this,Pe,je)),!we&&U(this,_e)&&U(this,K)){let xe=U(this,K),tt;for(;tt=xe==null?void 0:xe.shift();)(nt=U(this,E))==null||nt.call(this,...tt)}return this}pop(){var w;try{for(;U(this,D);){let R=U(this,q)[U(this,v)];if(Te(this,J,Zr).call(this,!0),Te(this,Ee,Ge).call(this,R)){if(R.__staleWhileFetching)return R.__staleWhileFetching}else if(R!==void 0)return R}}finally{if(U(this,_e)&&U(this,K)){let R=U(this,K),N;for(;N=R==null?void 0:R.shift();)(w=U(this,E))==null||w.call(this,...N)}}}has(w,R={}){let{updateAgeOnHas:N=this.updateAgeOnHas,status:$}=R,ne=U(this,T).get(w);if(ne!==void 0){let we=U(this,q)[ne];if(Te(this,Ee,Ge).call(this,we)&&we.__staleWhileFetching===void 0)return!1;if(U(this,B).call(this,ne))$&&($.has="stale",U(this,Ae).call(this,$,ne));else return N&&U(this,se).call(this,ne),$&&($.has="hit",U(this,Ae).call(this,$,ne)),!0}else $&&($.has="miss");return!1}peek(w,R={}){let{allowStale:N=this.allowStale}=R,$=U(this,T).get(w);if($!==void 0&&(N||!U(this,B).call(this,$))){let ne=U(this,q)[$];return Te(this,Ee,Ge).call(this,ne)?ne.__staleWhileFetching:ne}}async fetch(w,R={}){let{allowStale:N=this.allowStale,updateAgeOnGet:$=this.updateAgeOnGet,noDeleteOnStaleGet:ne=this.noDeleteOnStaleGet,ttl:we=this.ttl,noDisposeOnSet:Ie=this.noDisposeOnSet,size:Pe=0,sizeCalculation:Qe=this.sizeCalculation,noUpdateTTL:at=this.noUpdateTTL,noDeleteOnFetchRejection:je=this.noDeleteOnFetchRejection,allowStaleOnFetchRejection:it=this.allowStaleOnFetchRejection,ignoreFetchAbort:He=this.ignoreFetchAbort,allowStaleOnFetchAbort:Ye=this.allowStaleOnFetchAbort,context:Fe,forceRefresh:nt=!1,status:xe,signal:tt}=R;if(!U(this,ie))return xe&&(xe.fetch="get"),this.get(w,{allowStale:N,updateAgeOnGet:$,noDeleteOnStaleGet:ne,status:xe});let bt={allowStale:N,updateAgeOnGet:$,noDeleteOnStaleGet:ne,ttl:we,noDisposeOnSet:Ie,size:Pe,sizeCalculation:Qe,noUpdateTTL:at,noDeleteOnFetchRejection:je,allowStaleOnFetchRejection:it,allowStaleOnFetchAbort:Ye,ignoreFetchAbort:He,status:xe,signal:tt},lt=U(this,T).get(w);if(lt===void 0){xe&&(xe.fetch="miss");let St=Te(this,Y,ei).call(this,w,lt,bt,Fe);return St.__returned=St}else{let St=U(this,q)[lt];if(Te(this,Ee,Ge).call(this,St)){let Co=N&&St.__staleWhileFetching!==void 0;return xe&&(xe.fetch="inflight",Co&&(xe.returnedStale=!0)),Co?St.__staleWhileFetching:St.__returned=St}let ir=U(this,B).call(this,lt);if(!nt&&!ir)return xe&&(xe.fetch="hit"),Te(this,c,jr).call(this,lt),$&&U(this,se).call(this,lt),xe&&U(this,Ae).call(this,xe,lt),St;let Jt=Te(this,Y,ei).call(this,w,lt,bt,Fe),To=Jt.__staleWhileFetching!==void 0&&N;return xe&&(xe.fetch=ir?"stale":"refresh",To&&ir&&(xe.returnedStale=!0)),To?Jt.__staleWhileFetching:Jt.__returned=Jt}}get(w,R={}){let{allowStale:N=this.allowStale,updateAgeOnGet:$=this.updateAgeOnGet,noDeleteOnStaleGet:ne=this.noDeleteOnStaleGet,status:we}=R,Ie=U(this,T).get(w);if(Ie!==void 0){let Pe=U(this,q)[Ie],Qe=Te(this,Ee,Ge).call(this,Pe);return we&&U(this,Ae).call(this,we,Ie),U(this,B).call(this,Ie)?(we&&(we.get="stale"),Qe?(we&&N&&Pe.__staleWhileFetching!==void 0&&(we.returnedStale=!0),N?Pe.__staleWhileFetching:void 0):(ne||this.delete(w),we&&N&&(we.returnedStale=!0),N?Pe:void 0)):(we&&(we.get="hit"),Qe?Pe.__staleWhileFetching:(Te(this,c,jr).call(this,Ie),$&&U(this,se).call(this,Ie),Pe))}else we&&(we.get="miss")}delete(w){var N,$,ne,we;let R=!1;if(U(this,D)!==0){let Ie=U(this,T).get(w);if(Ie!==void 0)if(R=!0,U(this,D)===1)this.clear();else{U(this,ae).call(this,Ie);let Pe=U(this,q)[Ie];Te(this,Ee,Ge).call(this,Pe)?Pe.__abortController.abort(new Error("deleted")):(U(this,be)||U(this,_e))&&(U(this,be)&&((N=U(this,C))==null||N.call(this,Pe,w,"delete")),U(this,_e)&&(($=U(this,K))==null||$.push([Pe,w,"delete"]))),U(this,T).delete(w),U(this,x)[Ie]=void 0,U(this,q)[Ie]=void 0,Ie===U(this,V)?Be(this,V,U(this,te)[Ie]):Ie===U(this,v)?Be(this,v,U(this,G)[Ie]):(U(this,G)[U(this,te)[Ie]]=U(this,G)[Ie],U(this,te)[U(this,G)[Ie]]=U(this,te)[Ie]),Wr(this,D)._--,U(this,Z).push(Ie)}}if(U(this,_e)&&((ne=U(this,K))!=null&&ne.length)){let Ie=U(this,K),Pe;for(;Pe=Ie==null?void 0:Ie.shift();)(we=U(this,E))==null||we.call(this,...Pe)}return R}clear(){var w,R,N;for(let $ of Te(this,P,Zt).call(this,{allowStale:!0})){let ne=U(this,q)[$];if(Te(this,Ee,Ge).call(this,ne))ne.__abortController.abort(new Error("deleted"));else{let we=U(this,x)[$];U(this,be)&&((w=U(this,C))==null||w.call(this,ne,we,"delete")),U(this,_e)&&((R=U(this,K))==null||R.push([ne,we,"delete"]))}}if(U(this,T).clear(),U(this,q).fill(void 0),U(this,x).fill(void 0),U(this,H)&&U(this,oe)&&(U(this,H).fill(0),U(this,oe).fill(0)),U(this,me)&&U(this,me).fill(0),Be(this,v,0),Be(this,V,0),U(this,Z).length=0,Be(this,I,0),Be(this,D,0),U(this,_e)&&U(this,K)){let $=U(this,K),ne;for(;ne=$==null?void 0:$.shift();)(N=U(this,E))==null||N.call(this,...ne)}}},A=new WeakMap,M=new WeakMap,C=new WeakMap,E=new WeakMap,L=new WeakMap,D=new WeakMap,I=new WeakMap,T=new WeakMap,x=new WeakMap,q=new WeakMap,G=new WeakMap,te=new WeakMap,v=new WeakMap,V=new WeakMap,Z=new WeakMap,K=new WeakMap,me=new WeakMap,oe=new WeakMap,H=new WeakMap,be=new WeakMap,ie=new WeakMap,_e=new WeakMap,k=new WeakSet,to=function(){let w=new h(U(this,A)),R=new h(U(this,A));Be(this,H,w),Be(this,oe,R),Be(this,he,(ne,we,Ie=r.now())=>{if(R[ne]=we!==0?Ie:0,w[ne]=we,we!==0&&this.ttlAutopurge){let Pe=setTimeout(()=>{U(this,B).call(this,ne)&&this.delete(U(this,x)[ne])},we+1);Pe.unref&&Pe.unref()}}),Be(this,se,ne=>{R[ne]=w[ne]!==0?r.now():0}),Be(this,Ae,(ne,we)=>{if(w[we]){let Ie=w[we],Pe=R[we];ne.ttl=Ie,ne.start=Pe,ne.now=N||$();let Qe=ne.now-Pe;ne.remainingTTL=Ie-Qe}});let N=0,$=()=>{let ne=r.now();if(this.ttlResolution>0){N=ne;let we=setTimeout(()=>N=0,this.ttlResolution);we.unref&&we.unref()}return ne};this.getRemainingTTL=ne=>{let we=U(this,T).get(ne);if(we===void 0)return 0;let Ie=w[we],Pe=R[we];if(Ie===0||Pe===0)return 1/0;let Qe=(N||$())-Pe;return Ie-Qe},Be(this,B,ne=>w[ne]!==0&&R[ne]!==0&&(N||$())-R[ne]>w[ne])},se=new WeakMap,Ae=new WeakMap,he=new WeakMap,B=new WeakMap,S=new WeakSet,va=function(){let w=new h(U(this,A));Be(this,I,0),Be(this,me,w),Be(this,ae,R=>{Be(this,I,U(this,I)-w[R]),w[R]=0}),Be(this,X,(R,N,$,ne)=>{if(Te(this,Ee,Ge).call(this,N))return 0;if(!o($))if(ne){if(typeof ne!="function")throw new TypeError("sizeCalculation must be a function");if($=ne(N,R),!o($))throw new TypeError("sizeCalculation return invalid (expect positive integer)")}else throw new TypeError("invalid size value (must be positive integer). When maxSize or maxEntrySize is used, sizeCalculation or size must be set.");return $}),Be(this,ee,(R,N,$)=>{if(w[R]=N,U(this,M)){let ne=U(this,M)-w[R];for(;U(this,I)>ne;)Te(this,J,Zr).call(this,!0)}Be(this,I,U(this,I)+w[R]),$&&($.entrySize=N,$.totalCalculatedSize=U(this,I))})},ae=new WeakMap,ee=new WeakMap,X=new WeakMap,ue=new WeakSet,Xt=function*({allowStale:w=this.allowStale}={}){if(U(this,D))for(let R=U(this,V);!(!Te(this,F,ro).call(this,R)||((w||!U(this,B).call(this,R))&&(yield R),R===U(this,v)));)R=U(this,te)[R]},P=new WeakSet,Zt=function*({allowStale:w=this.allowStale}={}){if(U(this,D))for(let R=U(this,v);!(!Te(this,F,ro).call(this,R)||((w||!U(this,B).call(this,R))&&(yield R),R===U(this,V)));)R=U(this,G)[R]},F=new WeakSet,ro=function(w){return w!==void 0&&U(this,T).get(U(this,x)[w])===w},J=new WeakSet,Zr=function(w){var ne,we;let R=U(this,v),N=U(this,x)[R],$=U(this,q)[R];return U(this,ie)&&Te(this,Ee,Ge).call(this,$)?$.__abortController.abort(new Error("evicted")):(U(this,be)||U(this,_e))&&(U(this,be)&&((ne=U(this,C))==null||ne.call(this,$,N,"evict")),U(this,_e)&&((we=U(this,K))==null||we.push([$,N,"evict"]))),U(this,ae).call(this,R),w&&(U(this,x)[R]=void 0,U(this,q)[R]=void 0,U(this,Z).push(R)),U(this,D)===1?(Be(this,v,Be(this,V,0)),U(this,Z).length=0):Be(this,v,U(this,G)[R]),U(this,T).delete(N),Wr(this,D)._--,R},Y=new WeakSet,ei=function(w,R,N,$){let ne=R===void 0?void 0:U(this,q)[R];if(Te(this,Ee,Ge).call(this,ne))return ne;let we=new n,{signal:Ie}=N;Ie==null||Ie.addEventListener("abort",()=>we.abort(Ie.reason),{signal:we.signal});let Pe={signal:we.signal,options:N,context:$},Qe=(Fe,nt=!1)=>{let{aborted:xe}=we.signal,tt=N.ignoreFetchAbort&&Fe!==void 0;if(N.status&&(xe&&!nt?(N.status.fetchAborted=!0,N.status.fetchError=we.signal.reason,tt&&(N.status.fetchAbortIgnored=!0)):N.status.fetchResolved=!0),xe&&!tt&&!nt)return je(we.signal.reason);let bt=He;return U(this,q)[R]===He&&(Fe===void 0?bt.__staleWhileFetching?U(this,q)[R]=bt.__staleWhileFetching:this.delete(w):(N.status&&(N.status.fetchUpdated=!0),this.set(w,Fe,Pe.options))),Fe},at=Fe=>(N.status&&(N.status.fetchRejected=!0,N.status.fetchError=Fe),je(Fe)),je=Fe=>{let{aborted:nt}=we.signal,xe=nt&&N.allowStaleOnFetchAbort,tt=xe||N.allowStaleOnFetchRejection,bt=tt||N.noDeleteOnFetchRejection,lt=He;if(U(this,q)[R]===He&&(!bt||lt.__staleWhileFetching===void 0?this.delete(w):xe||(U(this,q)[R]=lt.__staleWhileFetching)),tt)return N.status&&lt.__staleWhileFetching!==void 0&&(N.status.returnedStale=!0),lt.__staleWhileFetching;if(lt.__returned===lt)throw Fe},it=(Fe,nt)=>{var tt;let xe=(tt=U(this,L))==null?void 0:tt.call(this,w,ne,Pe);xe&&xe instanceof Promise&&xe.then(bt=>Fe(bt===void 0?void 0:bt),nt),we.signal.addEventListener("abort",()=>{(!N.ignoreFetchAbort||N.allowStaleOnFetchAbort)&&(Fe(void 0),N.allowStaleOnFetchAbort&&(Fe=bt=>Qe(bt,!0)))})};N.status&&(N.status.fetchDispatched=!0);let He=new Promise(it).then(Qe,at),Ye=Object.assign(He,{__abortController:we,__staleWhileFetching:ne,__returned:void 0});return R===void 0?(this.set(w,Ye,{...Pe.options,status:void 0}),R=U(this,T).get(w)):U(this,q)[R]=Ye,Ye},Ee=new WeakSet,Ge=function(w){if(!U(this,ie))return!1;let R=w;return!!R&&R instanceof Promise&&R.hasOwnProperty("__staleWhileFetching")&&R.__abortController instanceof n},Le=new WeakSet,io=function(w,R){U(this,te)[R]=w,U(this,G)[w]=R},c=new WeakSet,jr=function(w){w!==U(this,V)&&(w===U(this,v)?Be(this,v,U(this,G)[w]):Te(this,Le,io).call(this,U(this,te)[w],U(this,G)[w]),Te(this,Le,io).call(this,U(this,V),w),Be(this,V,w))},_);e.LRUCache=d}),Qt=ve(e=>{ce(),de(),fe(),Object.defineProperty(e,"t",{value:!0}),e.ContainerIterator=e.Container=e.Base=void 0;var r=class{constructor(u=0){this.iteratorType=u}equals(u){return this.o===u.o}};e.ContainerIterator=r;var t=class{constructor(){this.i=0}get length(){return this.i}size(){return this.i}empty(){return this.i===0}};e.Base=t;var a=class extends t{};e.Container=a}),Pu=ve(e=>{ce(),de(),fe(),Object.defineProperty(e,"t",{value:!0}),e.default=void 0;var r=Qt(),t=class extends r.Base{constructor(u=[]){super(),this.S=[];let n=this;u.forEach(function(i){n.push(i)})}clear(){this.i=0,this.S=[]}push(u){return this.S.push(u),this.i+=1,this.i}pop(){if(this.i!==0)return this.i-=1,this.S.pop()}top(){return this.S[this.i-1]}},a=t;e.default=a}),Bu=ve(e=>{ce(),de(),fe(),Object.defineProperty(e,"t",{value:!0}),e.default=void 0;var r=Qt(),t=class extends r.Base{constructor(u=[]){super(),this.j=0,this.q=[];let n=this;u.forEach(function(i){n.push(i)})}clear(){this.q=[],this.i=this.j=0}push(u){let n=this.q.length;if(this.j/n>.5&&this.j+this.i>=n&&n>4096){let i=this.i;for(let s=0;s<i;++s)this.q[s]=this.q[this.j+s];this.j=0,this.q[this.i]=u}else this.q[this.j+this.i]=u;return++this.i}pop(){if(this.i===0)return;let u=this.q[this.j++];return this.i-=1,u}front(){if(this.i!==0)return this.q[this.j]}},a=t;e.default=a}),Mu=ve(e=>{ce(),de(),fe(),Object.defineProperty(e,"t",{value:!0}),e.default=void 0;var r=Qt(),t=class extends r.Base{constructor(u=[],n=function(s,o){return s>o?-1:s<o?1:0},i=!0){if(super(),this.v=n,Array.isArray(u))this.C=i?[...u]:u;else{this.C=[];let o=this;u.forEach(function(l){o.C.push(l)})}this.i=this.C.length;let s=this.i>>1;for(let o=this.i-1>>1;o>=0;--o)this.k(o,s)}m(u){let n=this.C[u];for(;u>0;){let i=u-1>>1,s=this.C[i];if(this.v(s,n)<=0)break;this.C[u]=s,u=i}this.C[u]=n}k(u,n){let i=this.C[u];for(;u<n;){let s=u<<1|1,o=s+1,l=this.C[s];if(o<this.i&&this.v(l,this.C[o])>0&&(s=o,l=this.C[o]),this.v(l,i)>=0)break;this.C[u]=l,u=s}this.C[u]=i}clear(){this.i=0,this.C.length=0}push(u){this.C.push(u),this.m(this.i),this.i+=1}pop(){if(this.i===0)return;let u=this.C[0],n=this.C.pop();return this.i-=1,this.i&&(this.C[0]=n,this.k(0,this.i>>1)),u}top(){return this.C[0]}find(u){return this.C.indexOf(u)>=0}remove(u){let n=this.C.indexOf(u);return n<0?!1:(n===0?this.pop():n===this.i-1?(this.C.pop(),this.i-=1):(this.C.splice(n,1,this.C.pop()),this.i-=1,this.m(n),this.k(n,this.i>>1)),!0)}updateItem(u){let n=this.C.indexOf(u);return n<0?!1:(this.m(n),this.k(n,this.i>>1),!0)}toArray(){return[...this.C]}},a=t;e.default=a}),Ao=ve(e=>{ce(),de(),fe(),Object.defineProperty(e,"t",{value:!0}),e.default=void 0;var r=Qt(),t=class extends r.Container{},a=t;e.default=a}),Gt=ve(e=>{ce(),de(),fe(),Object.defineProperty(e,"t",{value:!0}),e.throwIteratorAccessError=r;function r(){throw new RangeError("Iterator access denied!")}}),_a=ve(e=>{ce(),de(),fe(),Object.defineProperty(e,"t",{value:!0}),e.RandomIterator=void 0;var r=Qt(),t=Gt(),a=class extends r.ContainerIterator{constructor(u,n){super(n),this.o=u,this.iteratorType===0?(this.pre=function(){return this.o===0&&(0,t.throwIteratorAccessError)(),this.o-=1,this},this.next=function(){return this.o===this.container.size()&&(0,t.throwIteratorAccessError)(),this.o+=1,this}):(this.pre=function(){return this.o===this.container.size()-1&&(0,t.throwIteratorAccessError)(),this.o+=1,this},this.next=function(){return this.o===-1&&(0,t.throwIteratorAccessError)(),this.o-=1,this})}get pointer(){return this.container.getElementByPos(this.o)}set pointer(u){this.container.setElementByPos(this.o,u)}};e.RandomIterator=a}),xu=ve(e=>{ce(),de(),fe(),Object.defineProperty(e,"t",{value:!0}),e.default=void 0;var r=a(Ao()),t=_a();function a(s){return s&&s.t?s:{default:s}}var u=class Ea extends t.RandomIterator{constructor(o,l,h){super(o,h),this.container=l}copy(){return new Ea(this.o,this.container,this.iteratorType)}},n=class extends r.default{constructor(s=[],o=!0){if(super(),Array.isArray(s))this.J=o?[...s]:s,this.i=s.length;else{this.J=[];let l=this;s.forEach(function(h){l.pushBack(h)})}}clear(){this.i=0,this.J.length=0}begin(){return new u(0,this)}end(){return new u(this.i,this)}rBegin(){return new u(this.i-1,this,1)}rEnd(){return new u(-1,this,1)}front(){return this.J[0]}back(){return this.J[this.i-1]}getElementByPos(s){if(s<0||s>this.i-1)throw new RangeError;return this.J[s]}eraseElementByPos(s){if(s<0||s>this.i-1)throw new RangeError;return this.J.splice(s,1),this.i-=1,this.i}eraseElementByValue(s){let o=0;for(let l=0;l<this.i;++l)this.J[l]!==s&&(this.J[o++]=this.J[l]);return this.i=this.J.length=o,this.i}eraseElementByIterator(s){let o=s.o;return s=s.next(),this.eraseElementByPos(o),s}pushBack(s){return this.J.push(s),this.i+=1,this.i}popBack(){if(this.i!==0)return this.i-=1,this.J.pop()}setElementByPos(s,o){if(s<0||s>this.i-1)throw new RangeError;this.J[s]=o}insert(s,o,l=1){if(s<0||s>this.i)throw new RangeError;return this.J.splice(s,0,...new Array(l).fill(o)),this.i+=l,this.i}find(s){for(let o=0;o<this.i;++o)if(this.J[o]===s)return new u(o,this);return this.end()}reverse(){this.J.reverse()}unique(){let s=1;for(let o=1;o<this.i;++o)this.J[o]!==this.J[o-1]&&(this.J[s++]=this.J[o]);return this.i=this.J.length=s,this.i}sort(s){this.J.sort(s)}forEach(s){for(let o=0;o<this.i;++o)s(this.J[o],o,this)}[Symbol.iterator](){return(function*(){yield*this.J}).bind(this)()}},i=n;e.default=i}),Uu=ve(e=>{ce(),de(),fe(),Object.defineProperty(e,"t",{value:!0}),e.default=void 0;var r=u(Ao()),t=Qt(),a=Gt();function u(o){return o&&o.t?o:{default:o}}var n=class Sa extends t.ContainerIterator{constructor(l,h,f,d){super(d),this.o=l,this.h=h,this.container=f,this.iteratorType===0?(this.pre=function(){return this.o.L===this.h&&(0,a.throwIteratorAccessError)(),this.o=this.o.L,this},this.next=function(){return this.o===this.h&&(0,a.throwIteratorAccessError)(),this.o=this.o.B,this}):(this.pre=function(){return this.o.B===this.h&&(0,a.throwIteratorAccessError)(),this.o=this.o.B,this},this.next=function(){return this.o===this.h&&(0,a.throwIteratorAccessError)(),this.o=this.o.L,this})}get pointer(){return this.o===this.h&&(0,a.throwIteratorAccessError)(),this.o.l}set pointer(l){this.o===this.h&&(0,a.throwIteratorAccessError)(),this.o.l=l}copy(){return new Sa(this.o,this.h,this.container,this.iteratorType)}},i=class extends r.default{constructor(o=[]){super(),this.h={},this.p=this._=this.h.L=this.h.B=this.h;let l=this;o.forEach(function(h){l.pushBack(h)})}V(o){let{L:l,B:h}=o;l.B=h,h.L=l,o===this.p&&(this.p=h),o===this._&&(this._=l),this.i-=1}G(o,l){let h=l.B,f={l:o,L:l,B:h};l.B=f,h.L=f,l===this.h&&(this.p=f),h===this.h&&(this._=f),this.i+=1}clear(){this.i=0,this.p=this._=this.h.L=this.h.B=this.h}begin(){return new n(this.p,this.h,this)}end(){return new n(this.h,this.h,this)}rBegin(){return new n(this._,this.h,this,1)}rEnd(){return new n(this.h,this.h,this,1)}front(){return this.p.l}back(){return this._.l}getElementByPos(o){if(o<0||o>this.i-1)throw new RangeError;let l=this.p;for(;o--;)l=l.B;return l.l}eraseElementByPos(o){if(o<0||o>this.i-1)throw new RangeError;let l=this.p;for(;o--;)l=l.B;return this.V(l),this.i}eraseElementByValue(o){let l=this.p;for(;l!==this.h;)l.l===o&&this.V(l),l=l.B;return this.i}eraseElementByIterator(o){let l=o.o;return l===this.h&&(0,a.throwIteratorAccessError)(),o=o.next(),this.V(l),o}pushBack(o){return this.G(o,this._),this.i}popBack(){if(this.i===0)return;let o=this._.l;return this.V(this._),o}pushFront(o){return this.G(o,this.h),this.i}popFront(){if(this.i===0)return;let o=this.p.l;return this.V(this.p),o}setElementByPos(o,l){if(o<0||o>this.i-1)throw new RangeError;let h=this.p;for(;o--;)h=h.B;h.l=l}insert(o,l,h=1){if(o<0||o>this.i)throw new RangeError;if(h<=0)return this.i;if(o===0)for(;h--;)this.pushFront(l);else if(o===this.i)for(;h--;)this.pushBack(l);else{let f=this.p;for(let m=1;m<o;++m)f=f.B;let d=f.B;for(this.i+=h;h--;)f.B={l,L:f},f.B.L=f,f=f.B;f.B=d,d.L=f}return this.i}find(o){let l=this.p;for(;l!==this.h;){if(l.l===o)return new n(l,this.h,this);l=l.B}return this.end()}reverse(){if(this.i<=1)return;let o=this.p,l=this._,h=0;for(;h<<1<this.i;){let f=o.l;o.l=l.l,l.l=f,o=o.B,l=l.L,h+=1}}unique(){if(this.i<=1)return this.i;let o=this.p;for(;o!==this.h;){let l=o;for(;l.B!==this.h&&l.l===l.B.l;)l=l.B,this.i-=1;o.B=l.B,o.B.L=o,o=o.B}return this.i}sort(o){if(this.i<=1)return;let l=[];this.forEach(function(f){l.push(f)}),l.sort(o);let h=this.p;l.forEach(function(f){h.l=f,h=h.B})}merge(o){let l=this;if(this.i===0)o.forEach(function(h){l.pushBack(h)});else{let h=this.p;o.forEach(function(f){for(;h!==l.h&&h.l<=f;)h=h.B;l.G(f,h.L)})}return this.i}forEach(o){let l=this.p,h=0;for(;l!==this.h;)o(l.l,h++,this),l=l.B}[Symbol.iterator](){return(function*(){if(this.i===0)return;let o=this.p;for(;o!==this.h;)yield o.l,o=o.B}).bind(this)()}},s=i;e.default=s}),Lu=ve(e=>{ce(),de(),fe(),Object.defineProperty(e,"t",{value:!0}),e.default=void 0;var r=a(Ao()),t=_a();function a(s){return s&&s.t?s:{default:s}}var u=class Aa extends t.RandomIterator{constructor(o,l,h){super(o,h),this.container=l}copy(){return new Aa(this.o,this.container,this.iteratorType)}},n=class extends r.default{constructor(s=[],o=4096){super(),this.j=0,this.D=0,this.R=0,this.N=0,this.P=0,this.A=[];let l=(()=>{if(typeof s.length=="number")return s.length;if(typeof s.size=="number")return s.size;if(typeof s.size=="function")return s.size();throw new TypeError("Cannot get the length or size of the container")})();this.F=o,this.P=Math.max(Math.ceil(l/this.F),1);for(let d=0;d<this.P;++d)this.A.push(new Array(this.F));let h=Math.ceil(l/this.F);this.j=this.R=(this.P>>1)-(h>>1),this.D=this.N=this.F-l%this.F>>1;let f=this;s.forEach(function(d){f.pushBack(d)})}T(){let s=[],o=Math.max(this.P>>1,1);for(let l=0;l<o;++l)s[l]=new Array(this.F);for(let l=this.j;l<this.P;++l)s[s.length]=this.A[l];for(let l=0;l<this.R;++l)s[s.length]=this.A[l];s[s.length]=[...this.A[this.R]],this.j=o,this.R=s.length-1;for(let l=0;l<o;++l)s[s.length]=new Array(this.F);this.A=s,this.P=s.length}O(s){let o=this.D+s+1,l=o%this.F,h=l-1,f=this.j+(o-l)/this.F;return l===0&&(f-=1),f%=this.P,h<0&&(h+=this.F),{curNodeBucketIndex:f,curNodePointerIndex:h}}clear(){this.A=[new Array(this.F)],this.P=1,this.j=this.R=this.i=0,this.D=this.N=this.F>>1}begin(){return new u(0,this)}end(){return new u(this.i,this)}rBegin(){return new u(this.i-1,this,1)}rEnd(){return new u(-1,this,1)}front(){if(this.i!==0)return this.A[this.j][this.D]}back(){if(this.i!==0)return this.A[this.R][this.N]}pushBack(s){return this.i&&(this.N<this.F-1?this.N+=1:this.R<this.P-1?(this.R+=1,this.N=0):(this.R=0,this.N=0),this.R===this.j&&this.N===this.D&&this.T()),this.i+=1,this.A[this.R][this.N]=s,this.i}popBack(){if(this.i===0)return;let s=this.A[this.R][this.N];return this.i!==1&&(this.N>0?this.N-=1:this.R>0?(this.R-=1,this.N=this.F-1):(this.R=this.P-1,this.N=this.F-1)),this.i-=1,s}pushFront(s){return this.i&&(this.D>0?this.D-=1:this.j>0?(this.j-=1,this.D=this.F-1):(this.j=this.P-1,this.D=this.F-1),this.j===this.R&&this.D===this.N&&this.T()),this.i+=1,this.A[this.j][this.D]=s,this.i}popFront(){if(this.i===0)return;let s=this.A[this.j][this.D];return this.i!==1&&(this.D<this.F-1?this.D+=1:this.j<this.P-1?(this.j+=1,this.D=0):(this.j=0,this.D=0)),this.i-=1,s}getElementByPos(s){if(s<0||s>this.i-1)throw new RangeError;let{curNodeBucketIndex:o,curNodePointerIndex:l}=this.O(s);return this.A[o][l]}setElementByPos(s,o){if(s<0||s>this.i-1)throw new RangeError;let{curNodeBucketIndex:l,curNodePointerIndex:h}=this.O(s);this.A[l][h]=o}insert(s,o,l=1){if(s<0||s>this.i)throw new RangeError;if(s===0)for(;l--;)this.pushFront(o);else if(s===this.i)for(;l--;)this.pushBack(o);else{let h=[];for(let f=s;f<this.i;++f)h.push(this.getElementByPos(f));this.cut(s-1);for(let f=0;f<l;++f)this.pushBack(o);for(let f=0;f<h.length;++f)this.pushBack(h[f])}return this.i}cut(s){if(s<0)return this.clear(),0;let{curNodeBucketIndex:o,curNodePointerIndex:l}=this.O(s);return this.R=o,this.N=l,this.i=s+1,this.i}eraseElementByPos(s){if(s<0||s>this.i-1)throw new RangeError;if(s===0)this.popFront();else if(s===this.i-1)this.popBack();else{let o=[];for(let h=s+1;h<this.i;++h)o.push(this.getElementByPos(h));this.cut(s),this.popBack();let l=this;o.forEach(function(h){l.pushBack(h)})}return this.i}eraseElementByValue(s){if(this.i===0)return 0;let o=[];for(let h=0;h<this.i;++h){let f=this.getElementByPos(h);f!==s&&o.push(f)}let l=o.length;for(let h=0;h<l;++h)this.setElementByPos(h,o[h]);return this.cut(l-1)}eraseElementByIterator(s){let o=s.o;return this.eraseElementByPos(o),s=s.next(),s}find(s){for(let o=0;o<this.i;++o)if(this.getElementByPos(o)===s)return new u(o,this);return this.end()}reverse(){let s=0,o=this.i-1;for(;s<o;){let l=this.getElementByPos(s);this.setElementByPos(s,this.getElementByPos(o)),this.setElementByPos(o,l),s+=1,o-=1}}unique(){if(this.i<=1)return this.i;let s=1,o=this.getElementByPos(0);for(let l=1;l<this.i;++l){let h=this.getElementByPos(l);h!==o&&(o=h,this.setElementByPos(s++,h))}for(;this.i>s;)this.popBack();return this.i}sort(s){let o=[];for(let l=0;l<this.i;++l)o.push(this.getElementByPos(l));o.sort(s);for(let l=0;l<this.i;++l)this.setElementByPos(l,o[l])}shrinkToFit(){if(this.i===0)return;let s=[];this.forEach(function(o){s.push(o)}),this.P=Math.max(Math.ceil(this.i/this.F),1),this.i=this.j=this.R=this.D=this.N=0,this.A=[];for(let o=0;o<this.P;++o)this.A.push(new Array(this.F));for(let o=0;o<s.length;++o)this.pushBack(s[o])}forEach(s){for(let o=0;o<this.i;++o)s(this.getElementByPos(o),o,this)}[Symbol.iterator](){return(function*(){for(let s=0;s<this.i;++s)yield this.getElementByPos(s)}).bind(this)()}},i=n;e.default=i}),Nu=ve(e=>{ce(),de(),fe(),Object.defineProperty(e,"t",{value:!0}),e.TreeNodeEnableIndex=e.TreeNode=void 0;var r=class{constructor(a,u){this.ee=1,this.u=void 0,this.l=void 0,this.U=void 0,this.W=void 0,this.tt=void 0,this.u=a,this.l=u}L(){let a=this;if(a.ee===1&&a.tt.tt===a)a=a.W;else if(a.U)for(a=a.U;a.W;)a=a.W;else{let u=a.tt;for(;u.U===a;)a=u,u=a.tt;a=u}return a}B(){let a=this;if(a.W){for(a=a.W;a.U;)a=a.U;return a}else{let u=a.tt;for(;u.W===a;)a=u,u=a.tt;return a.W!==u?u:a}}te(){let a=this.tt,u=this.W,n=u.U;return a.tt===this?a.tt=u:a.U===this?a.U=u:a.W=u,u.tt=a,u.U=this,this.tt=u,this.W=n,n&&(n.tt=this),u}se(){let a=this.tt,u=this.U,n=u.W;return a.tt===this?a.tt=u:a.U===this?a.U=u:a.W=u,u.tt=a,u.W=this,this.tt=u,this.U=n,n&&(n.tt=this),u}};e.TreeNode=r;var t=class extends r{constructor(){super(...arguments),this.rt=1}te(){let a=super.te();return this.ie(),a.ie(),a}se(){let a=super.se();return this.ie(),a.ie(),a}ie(){this.rt=1,this.U&&(this.rt+=this.U.rt),this.W&&(this.rt+=this.W.rt)}};e.TreeNodeEnableIndex=t}),Ia=ve(e=>{ce(),de(),fe(),Object.defineProperty(e,"t",{value:!0}),e.default=void 0;var r=Nu(),t=Qt(),a=Gt(),u=class extends t.Container{constructor(i=function(o,l){return o<l?-1:o>l?1:0},s=!1){super(),this.Y=void 0,this.v=i,s?(this.re=r.TreeNodeEnableIndex,this.M=function(o,l,h){let f=this.ne(o,l,h);if(f){let d=f.tt;for(;d!==this.h;)d.rt+=1,d=d.tt;let m=this.he(f);if(m){let{parentNode:b,grandParent:y,curNode:A}=m;b.ie(),y.ie(),A.ie()}}return this.i},this.V=function(o){let l=this.fe(o);for(;l!==this.h;)l.rt-=1,l=l.tt}):(this.re=r.TreeNode,this.M=function(o,l,h){let f=this.ne(o,l,h);return f&&this.he(f),this.i},this.V=this.fe),this.h=new this.re}X(i,s){let o=this.h;for(;i;){let l=this.v(i.u,s);if(l<0)i=i.W;else if(l>0)o=i,i=i.U;else return i}return o}Z(i,s){let o=this.h;for(;i;)this.v(i.u,s)<=0?i=i.W:(o=i,i=i.U);return o}$(i,s){let o=this.h;for(;i;){let l=this.v(i.u,s);if(l<0)o=i,i=i.W;else if(l>0)i=i.U;else return i}return o}rr(i,s){let o=this.h;for(;i;)this.v(i.u,s)<0?(o=i,i=i.W):i=i.U;return o}ue(i){for(;;){let s=i.tt;if(s===this.h)return;if(i.ee===1){i.ee=0;return}if(i===s.U){let o=s.W;if(o.ee===1)o.ee=0,s.ee=1,s===this.Y?this.Y=s.te():s.te();else if(o.W&&o.W.ee===1){o.ee=s.ee,s.ee=0,o.W.ee=0,s===this.Y?this.Y=s.te():s.te();return}else o.U&&o.U.ee===1?(o.ee=1,o.U.ee=0,o.se()):(o.ee=1,i=s)}else{let o=s.U;if(o.ee===1)o.ee=0,s.ee=1,s===this.Y?this.Y=s.se():s.se();else if(o.U&&o.U.ee===1){o.ee=s.ee,s.ee=0,o.U.ee=0,s===this.Y?this.Y=s.se():s.se();return}else o.W&&o.W.ee===1?(o.ee=1,o.W.ee=0,o.te()):(o.ee=1,i=s)}}}fe(i){if(this.i===1)return this.clear(),this.h;let s=i;for(;s.U||s.W;){if(s.W)for(s=s.W;s.U;)s=s.U;else s=s.U;[i.u,s.u]=[s.u,i.u],[i.l,s.l]=[s.l,i.l],i=s}this.h.U===s?this.h.U=s.tt:this.h.W===s&&(this.h.W=s.tt),this.ue(s);let o=s.tt;return s===o.U?o.U=void 0:o.W=void 0,this.i-=1,this.Y.ee=0,o}oe(i,s){return i===void 0?!1:this.oe(i.U,s)||s(i)?!0:this.oe(i.W,s)}he(i){for(;;){let s=i.tt;if(s.ee===0)return;let o=s.tt;if(s===o.U){let l=o.W;if(l&&l.ee===1){if(l.ee=s.ee=0,o===this.Y)return;o.ee=1,i=o;continue}else if(i===s.W){if(i.ee=0,i.U&&(i.U.tt=s),i.W&&(i.W.tt=o),s.W=i.U,o.U=i.W,i.U=s,i.W=o,o===this.Y)this.Y=i,this.h.tt=i;else{let h=o.tt;h.U===o?h.U=i:h.W=i}return i.tt=o.tt,s.tt=i,o.tt=i,o.ee=1,{parentNode:s,grandParent:o,curNode:i}}else s.ee=0,o===this.Y?this.Y=o.se():o.se(),o.ee=1}else{let l=o.U;if(l&&l.ee===1){if(l.ee=s.ee=0,o===this.Y)return;o.ee=1,i=o;continue}else if(i===s.U){if(i.ee=0,i.U&&(i.U.tt=o),i.W&&(i.W.tt=s),o.W=i.U,s.U=i.W,i.U=o,i.W=s,o===this.Y)this.Y=i,this.h.tt=i;else{let h=o.tt;h.U===o?h.U=i:h.W=i}return i.tt=o.tt,s.tt=i,o.tt=i,o.ee=1,{parentNode:s,grandParent:o,curNode:i}}else s.ee=0,o===this.Y?this.Y=o.te():o.te(),o.ee=1}return}}ne(i,s,o){if(this.Y===void 0){this.i+=1,this.Y=new this.re(i,s),this.Y.ee=0,this.Y.tt=this.h,this.h.tt=this.Y,this.h.U=this.Y,this.h.W=this.Y;return}let l,h=this.h.U,f=this.v(h.u,i);if(f===0){h.l=s;return}else if(f>0)h.U=new this.re(i,s),h.U.tt=h,l=h.U,this.h.U=l;else{let d=this.h.W,m=this.v(d.u,i);if(m===0){d.l=s;return}else if(m<0)d.W=new this.re(i,s),d.W.tt=d,l=d.W,this.h.W=l;else{if(o!==void 0){let b=o.o;if(b!==this.h){let y=this.v(b.u,i);if(y===0){b.l=s;return}else if(y>0){let A=b.L(),M=this.v(A.u,i);if(M===0){A.l=s;return}else M<0&&(l=new this.re(i,s),A.W===void 0?(A.W=l,l.tt=A):(b.U=l,l.tt=b))}}}if(l===void 0)for(l=this.Y;;){let b=this.v(l.u,i);if(b>0){if(l.U===void 0){l.U=new this.re(i,s),l.U.tt=l,l=l.U;break}l=l.U}else if(b<0){if(l.W===void 0){l.W=new this.re(i,s),l.W.tt=l,l=l.W;break}l=l.W}else{l.l=s;return}}}}return this.i+=1,l}I(i,s){for(;i;){let o=this.v(i.u,s);if(o<0)i=i.W;else if(o>0)i=i.U;else return i}return i||this.h}clear(){this.i=0,this.Y=void 0,this.h.tt=void 0,this.h.U=this.h.W=void 0}updateKeyByIterator(i,s){let o=i.o;if(o===this.h&&(0,a.throwIteratorAccessError)(),this.i===1)return o.u=s,!0;if(o===this.h.U)return this.v(o.B().u,s)>0?(o.u=s,!0):!1;if(o===this.h.W)return this.v(o.L().u,s)<0?(o.u=s,!0):!1;let l=o.L().u;if(this.v(l,s)>=0)return!1;let h=o.B().u;return this.v(h,s)<=0?!1:(o.u=s,!0)}eraseElementByPos(i){if(i<0||i>this.i-1)throw new RangeError;let s=0,o=this;return this.oe(this.Y,function(l){return i===s?(o.V(l),!0):(s+=1,!1)}),this.i}eraseElementByKey(i){if(this.i===0)return!1;let s=this.I(this.Y,i);return s===this.h?!1:(this.V(s),!0)}eraseElementByIterator(i){let s=i.o;s===this.h&&(0,a.throwIteratorAccessError)();let o=s.W===void 0;return i.iteratorType===0?o&&i.next():(!o||s.U===void 0)&&i.next(),this.V(s),i}forEach(i){let s=0;for(let o of this)i(o,s++,this)}getElementByPos(i){if(i<0||i>this.i-1)throw new RangeError;let s,o=0;for(let l of this){if(o===i){s=l;break}o+=1}return s}getHeight(){if(this.i===0)return 0;let i=function(s){return s?Math.max(i(s.U),i(s.W))+1:0};return i(this.Y)}},n=u;e.default=n}),ka=ve(e=>{ce(),de(),fe(),Object.defineProperty(e,"t",{value:!0}),e.default=void 0;var r=Qt(),t=Gt(),a=class extends r.ContainerIterator{constructor(n,i,s){super(s),this.o=n,this.h=i,this.iteratorType===0?(this.pre=function(){return this.o===this.h.U&&(0,t.throwIteratorAccessError)(),this.o=this.o.L(),this},this.next=function(){return this.o===this.h&&(0,t.throwIteratorAccessError)(),this.o=this.o.B(),this}):(this.pre=function(){return this.o===this.h.W&&(0,t.throwIteratorAccessError)(),this.o=this.o.B(),this},this.next=function(){return this.o===this.h&&(0,t.throwIteratorAccessError)(),this.o=this.o.L(),this})}get index(){let n=this.o,i=this.h.tt;if(n===this.h)return i?i.rt-1:0;let s=0;for(n.U&&(s+=n.U.rt);n!==i;){let o=n.tt;n===o.W&&(s+=1,o.U&&(s+=o.U.rt)),n=o}return s}},u=a;e.default=u}),ju=ve(e=>{ce(),de(),fe(),Object.defineProperty(e,"t",{value:!0}),e.default=void 0;var r=u(Ia()),t=u(ka()),a=Gt();function u(o){return o&&o.t?o:{default:o}}var n=class Ta extends t.default{constructor(l,h,f,d){super(l,h,d),this.container=f}get pointer(){return this.o===this.h&&(0,a.throwIteratorAccessError)(),this.o.u}copy(){return new Ta(this.o,this.h,this.container,this.iteratorType)}},i=class extends r.default{constructor(o=[],l,h){super(l,h);let f=this;o.forEach(function(d){f.insert(d)})}*K(o){o!==void 0&&(yield*this.K(o.U),yield o.u,yield*this.K(o.W))}begin(){return new n(this.h.U||this.h,this.h,this)}end(){return new n(this.h,this.h,this)}rBegin(){return new n(this.h.W||this.h,this.h,this,1)}rEnd(){return new n(this.h,this.h,this,1)}front(){return this.h.U?this.h.U.u:void 0}back(){return this.h.W?this.h.W.u:void 0}insert(o,l){return this.M(o,void 0,l)}find(o){let l=this.I(this.Y,o);return new n(l,this.h,this)}lowerBound(o){let l=this.X(this.Y,o);return new n(l,this.h,this)}upperBound(o){let l=this.Z(this.Y,o);return new n(l,this.h,this)}reverseLowerBound(o){let l=this.$(this.Y,o);return new n(l,this.h,this)}reverseUpperBound(o){let l=this.rr(this.Y,o);return new n(l,this.h,this)}union(o){let l=this;return o.forEach(function(h){l.insert(h)}),this.i}[Symbol.iterator](){return this.K(this.Y)}},s=i;e.default=s}),Du=ve(e=>{ce(),de(),fe(),Object.defineProperty(e,"t",{value:!0}),e.default=void 0;var r=u(Ia()),t=u(ka()),a=Gt();function u(o){return o&&o.t?o:{default:o}}var n=class Ca extends t.default{constructor(l,h,f,d){super(l,h,d),this.container=f}get pointer(){this.o===this.h&&(0,a.throwIteratorAccessError)();let l=this;return new Proxy([],{get(h,f){if(f==="0")return l.o.u;if(f==="1")return l.o.l},set(h,f,d){if(f!=="1")throw new TypeError("props must be 1");return l.o.l=d,!0}})}copy(){return new Ca(this.o,this.h,this.container,this.iteratorType)}},i=class extends r.default{constructor(o=[],l,h){super(l,h);let f=this;o.forEach(function(d){f.setElement(d[0],d[1])})}*K(o){o!==void 0&&(yield*this.K(o.U),yield[o.u,o.l],yield*this.K(o.W))}begin(){return new n(this.h.U||this.h,this.h,this)}end(){return new n(this.h,this.h,this)}rBegin(){return new n(this.h.W||this.h,this.h,this,1)}rEnd(){return new n(this.h,this.h,this,1)}front(){if(this.i===0)return;let o=this.h.U;return[o.u,o.l]}back(){if(this.i===0)return;let o=this.h.W;return[o.u,o.l]}lowerBound(o){let l=this.X(this.Y,o);return new n(l,this.h,this)}upperBound(o){let l=this.Z(this.Y,o);return new n(l,this.h,this)}reverseLowerBound(o){let l=this.$(this.Y,o);return new n(l,this.h,this)}reverseUpperBound(o){let l=this.rr(this.Y,o);return new n(l,this.h,this)}setElement(o,l,h){return this.M(o,l,h)}find(o){let l=this.I(this.Y,o);return new n(l,this.h,this)}getElementByKey(o){return this.I(this.Y,o).l}union(o){let l=this;return o.forEach(function(h){l.setElement(h[0],h[1])}),this.i}[Symbol.iterator](){return this.K(this.Y)}},s=i;e.default=s}),Oa=ve(e=>{ce(),de(),fe(),Object.defineProperty(e,"t",{value:!0}),e.default=r;function r(t){let a=typeof t;return a==="object"&&t!==null||a==="function"}}),Ra=ve(e=>{ce(),de(),fe(),Object.defineProperty(e,"t",{value:!0}),e.HashContainerIterator=e.HashContainer=void 0;var r=Qt(),t=u(Oa()),a=Gt();function u(s){return s&&s.t?s:{default:s}}var n=class extends r.ContainerIterator{constructor(s,o,l){super(l),this.o=s,this.h=o,this.iteratorType===0?(this.pre=function(){return this.o.L===this.h&&(0,a.throwIteratorAccessError)(),this.o=this.o.L,this},this.next=function(){return this.o===this.h&&(0,a.throwIteratorAccessError)(),this.o=this.o.B,this}):(this.pre=function(){return this.o.B===this.h&&(0,a.throwIteratorAccessError)(),this.o=this.o.B,this},this.next=function(){return this.o===this.h&&(0,a.throwIteratorAccessError)(),this.o=this.o.L,this})}};e.HashContainerIterator=n;var i=class extends r.Container{constructor(){super(),this.H=[],this.g={},this.HASH_TAG=Symbol("@@HASH_TAG"),Object.setPrototypeOf(this.g,null),this.h={},this.h.L=this.h.B=this.p=this._=this.h}V(s){let{L:o,B:l}=s;o.B=l,l.L=o,s===this.p&&(this.p=l),s===this._&&(this._=o),this.i-=1}M(s,o,l){l===void 0&&(l=(0,t.default)(s));let h;if(l){let f=s[this.HASH_TAG];if(f!==void 0)return this.H[f].l=o,this.i;Object.defineProperty(s,this.HASH_TAG,{value:this.H.length,configurable:!0}),h={u:s,l:o,L:this._,B:this.h},this.H.push(h)}else{let f=this.g[s];if(f)return f.l=o,this.i;h={u:s,l:o,L:this._,B:this.h},this.g[s]=h}return this.i===0?(this.p=h,this.h.B=h):this._.B=h,this._=h,this.h.L=h,++this.i}I(s,o){if(o===void 0&&(o=(0,t.default)(s)),o){let l=s[this.HASH_TAG];return l===void 0?this.h:this.H[l]}else return this.g[s]||this.h}clear(){let s=this.HASH_TAG;this.H.forEach(function(o){delete o.u[s]}),this.H=[],this.g={},Object.setPrototypeOf(this.g,null),this.i=0,this.p=this._=this.h.L=this.h.B=this.h}eraseElementByKey(s,o){let l;if(o===void 0&&(o=(0,t.default)(s)),o){let h=s[this.HASH_TAG];if(h===void 0)return!1;delete s[this.HASH_TAG],l=this.H[h],delete this.H[h]}else{if(l=this.g[s],l===void 0)return!1;delete this.g[s]}return this.V(l),!0}eraseElementByIterator(s){let o=s.o;return o===this.h&&(0,a.throwIteratorAccessError)(),this.V(o),s.next()}eraseElementByPos(s){if(s<0||s>this.i-1)throw new RangeError;let o=this.p;for(;s--;)o=o.B;return this.V(o),this.i}};e.HashContainer=i}),Fu=ve(e=>{ce(),de(),fe(),Object.defineProperty(e,"t",{value:!0}),e.default=void 0;var r=Ra(),t=Gt(),a=class Pa extends r.HashContainerIterator{constructor(s,o,l,h){super(s,o,h),this.container=l}get pointer(){return this.o===this.h&&(0,t.throwIteratorAccessError)(),this.o.u}copy(){return new Pa(this.o,this.h,this.container,this.iteratorType)}},u=class extends r.HashContainer{constructor(i=[]){super();let s=this;i.forEach(function(o){s.insert(o)})}begin(){return new a(this.p,this.h,this)}end(){return new a(this.h,this.h,this)}rBegin(){return new a(this._,this.h,this,1)}rEnd(){return new a(this.h,this.h,this,1)}front(){return this.p.u}back(){return this._.u}insert(i,s){return this.M(i,void 0,s)}getElementByPos(i){if(i<0||i>this.i-1)throw new RangeError;let s=this.p;for(;i--;)s=s.B;return s.u}find(i,s){let o=this.I(i,s);return new a(o,this.h,this)}forEach(i){let s=0,o=this.p;for(;o!==this.h;)i(o.u,s++,this),o=o.B}[Symbol.iterator](){return(function*(){let i=this.p;for(;i!==this.h;)yield i.u,i=i.B}).bind(this)()}},n=u;e.default=n}),Wu=ve(e=>{ce(),de(),fe(),Object.defineProperty(e,"t",{value:!0}),e.default=void 0;var r=Ra(),t=u(Oa()),a=Gt();function u(o){return o&&o.t?o:{default:o}}var n=class Ba extends r.HashContainerIterator{constructor(l,h,f,d){super(l,h,d),this.container=f}get pointer(){this.o===this.h&&(0,a.throwIteratorAccessError)();let l=this;return new Proxy([],{get(h,f){if(f==="0")return l.o.u;if(f==="1")return l.o.l},set(h,f,d){if(f!=="1")throw new TypeError("props must be 1");return l.o.l=d,!0}})}copy(){return new Ba(this.o,this.h,this.container,this.iteratorType)}},i=class extends r.HashContainer{constructor(o=[]){super();let l=this;o.forEach(function(h){l.setElement(h[0],h[1])})}begin(){return new n(this.p,this.h,this)}end(){return new n(this.h,this.h,this)}rBegin(){return new n(this._,this.h,this,1)}rEnd(){return new n(this.h,this.h,this,1)}front(){if(this.i!==0)return[this.p.u,this.p.l]}back(){if(this.i!==0)return[this._.u,this._.l]}setElement(o,l,h){return this.M(o,l,h)}getElementByKey(o,l){if(l===void 0&&(l=(0,t.default)(o)),l){let f=o[this.HASH_TAG];return f!==void 0?this.H[f].l:void 0}let h=this.g[o];return h?h.l:void 0}getElementByPos(o){if(o<0||o>this.i-1)throw new RangeError;let l=this.p;for(;o--;)l=l.B;return[l.u,l.l]}find(o,l){let h=this.I(o,l);return new n(h,this.h,this)}forEach(o){let l=0,h=this.p;for(;h!==this.h;)o([h.u,h.l],l++,this),h=h.B}[Symbol.iterator](){return(function*(){let o=this.p;for(;o!==this.h;)yield[o.u,o.l],o=o.B}).bind(this)()}},s=i;e.default=s}),qu=ve(e=>{ce(),de(),fe(),Object.defineProperty(e,"t",{value:!0}),Object.defineProperty(e,"Deque",{enumerable:!0,get:function(){return i.default}}),Object.defineProperty(e,"HashMap",{enumerable:!0,get:function(){return h.default}}),Object.defineProperty(e,"HashSet",{enumerable:!0,get:function(){return l.default}}),Object.defineProperty(e,"LinkList",{enumerable:!0,get:function(){return n.default}}),Object.defineProperty(e,"OrderedMap",{enumerable:!0,get:function(){return o.default}}),Object.defineProperty(e,"OrderedSet",{enumerable:!0,get:function(){return s.default}}),Object.defineProperty(e,"PriorityQueue",{enumerable:!0,get:function(){return a.default}}),Object.defineProperty(e,"Queue",{enumerable:!0,get:function(){return t.default}}),Object.defineProperty(e,"Stack",{enumerable:!0,get:function(){return r.default}}),Object.defineProperty(e,"Vector",{enumerable:!0,get:function(){return u.default}});var r=f(Pu()),t=f(Bu()),a=f(Mu()),u=f(xu()),n=f(Uu()),i=f(Lu()),s=f(ju()),o=f(Du()),l=f(Fu()),h=f(Wu());function f(d){return d&&d.t?d:{default:d}}}),Hu=ve((e,r)=>{ce(),de(),fe();var t=qu().OrderedSet,a=Kt()("number-allocator:trace"),u=Kt()("number-allocator:error");function n(s,o){this.low=s,this.high=o}n.prototype.equals=function(s){return this.low===s.low&&this.high===s.high},n.prototype.compare=function(s){return this.low<s.low&&this.high<s.low?-1:s.low<this.low&&s.high<this.low?1:0};function i(s,o){if(!(this instanceof i))return new i(s,o);this.min=s,this.max=o,this.ss=new t([],(l,h)=>l.compare(h)),a("Create"),this.clear()}i.prototype.firstVacant=function(){return this.ss.size()===0?null:this.ss.front().low},i.prototype.alloc=function(){if(this.ss.size()===0)return a("alloc():empty"),null;let s=this.ss.begin(),o=s.pointer.low,l=s.pointer.high,h=o;return h+1<=l?this.ss.updateKeyByIterator(s,new n(o+1,l)):this.ss.eraseElementByPos(0),a("alloc():"+h),h},i.prototype.use=function(s){let o=new n(s,s),l=this.ss.lowerBound(o);if(!l.equals(this.ss.end())){let h=l.pointer.low,f=l.pointer.high;return l.pointer.equals(o)?(this.ss.eraseElementByIterator(l),a("use():"+s),!0):h>s?!1:h===s?(this.ss.updateKeyByIterator(l,new n(h+1,f)),a("use():"+s),!0):f===s?(this.ss.updateKeyByIterator(l,new n(h,f-1)),a("use():"+s),!0):(this.ss.updateKeyByIterator(l,new n(s+1,f)),this.ss.insert(new n(h,s-1)),a("use():"+s),!0)}return a("use():failed"),!1},i.prototype.free=function(s){if(s<this.min||s>this.max){u("free():"+s+" is out of range");return}let o=new n(s,s),l=this.ss.upperBound(o);if(l.equals(this.ss.end())){if(l.equals(this.ss.begin())){this.ss.insert(o);return}l.pre();let h=l.pointer.high;l.pointer.high+1===s?this.ss.updateKeyByIterator(l,new n(h,s)):this.ss.insert(o)}else if(l.equals(this.ss.begin()))if(s+1===l.pointer.low){let h=l.pointer.high;this.ss.updateKeyByIterator(l,new n(s,h))}else this.ss.insert(o);else{let h=l.pointer.low,f=l.pointer.high;l.pre();let d=l.pointer.low;l.pointer.high+1===s?s+1===h?(this.ss.eraseElementByIterator(l),this.ss.updateKeyByIterator(l,new n(d,f))):this.ss.updateKeyByIterator(l,new n(d,s)):s+1===h?(this.ss.eraseElementByIterator(l.next()),this.ss.insert(new n(s,f))):this.ss.insert(o)}a("free():"+s)},i.prototype.clear=function(){a("clear()"),this.ss.clear(),this.ss.insert(new n(this.min,this.max))},i.prototype.intervalCount=function(){return this.ss.size()},i.prototype.dump=function(){console.log("length:"+this.ss.size());for(let s of this.ss)console.log(s)},r.exports=i}),Ma=ve((e,r)=>{ce(),de(),fe();var t=Hu();r.exports.NumberAllocator=t}),Vu=ve(e=>{ce(),de(),fe(),Object.defineProperty(e,"__esModule",{value:!0});var r=Ru(),t=Ma(),a=class{constructor(u){u>0&&(this.aliasToTopic=new r.LRUCache({max:u}),this.topicToAlias={},this.numberAllocator=new t.NumberAllocator(1,u),this.max=u,this.length=0)}put(u,n){if(n===0||n>this.max)return!1;let i=this.aliasToTopic.get(n);return i&&delete this.topicToAlias[i],this.aliasToTopic.set(n,u),this.topicToAlias[u]=n,this.numberAllocator.use(n),this.length=this.aliasToTopic.size,!0}getTopicByAlias(u){return this.aliasToTopic.get(u)}getAliasByTopic(u){let n=this.topicToAlias[u];return typeof n<"u"&&this.aliasToTopic.get(n),n}clear(){this.aliasToTopic.clear(),this.topicToAlias={},this.numberAllocator.clear(),this.length=0}getLruAlias(){return this.numberAllocator.firstVacant()||[...this.aliasToTopic.keys()][this.aliasToTopic.size-1]}};e.default=a}),zu=ve(e=>{ce(),de(),fe();var r=e&&e.__importDefault||function(i){return i&&i.__esModule?i:{default:i}};Object.defineProperty(e,"__esModule",{value:!0});var t=_i(),a=r(Vu()),u=Pr(),n=(i,s)=>{i.log("_handleConnack");let{options:o}=i,l=o.protocolVersion===5?s.reasonCode:s.returnCode;if(clearTimeout(i.connackTimer),delete i.topicAliasSend,s.properties){if(s.properties.topicAliasMaximum){if(s.properties.topicAliasMaximum>65535){i.emit("error",new Error("topicAliasMaximum from broker is out of range"));return}s.properties.topicAliasMaximum>0&&(i.topicAliasSend=new a.default(s.properties.topicAliasMaximum))}s.properties.serverKeepAlive&&o.keepalive&&(o.keepalive=s.properties.serverKeepAlive),s.properties.maximumPacketSize&&(o.properties||(o.properties={}),o.properties.maximumPacketSize=s.properties.maximumPacketSize)}if(l===0)i.reconnecting=!1,i._onConnect(s);else if(l>0){let h=new u.ErrorWithReasonCode(`Connection refused: ${t.ReasonCodes[l]}`,l);i.emit("error",h),i.options.reconnectOnConnackError&&i._cleanUp(!0)}};e.default=n}),Ku=ve(e=>{ce(),de(),fe(),Object.defineProperty(e,"__esModule",{value:!0});var r=(t,a,u)=>{t.log("handling pubrel packet");let n=typeof u<"u"?u:t.noop,{messageId:i}=a,s={cmd:"pubcomp",messageId:i};t.incomingStore.get(a,(o,l)=>{o?t._sendPacket(s,n):(t.emit("message",l.topic,l.payload,l),t.handleMessage(l,h=>{if(h)return n(h);t.incomingStore.del(l,t.noop),t._sendPacket(s,n)}))})};e.default=r}),Yu=ve(e=>{ce(),de(),fe();var r=e&&e.__importDefault||function(o){return o&&o.__esModule?o:{default:o}};Object.defineProperty(e,"__esModule",{value:!0});var t=r(Tu()),a=r(Ou()),u=r(zu()),n=r(_i()),i=r(Ku()),s=(o,l,h)=>{let{options:f}=o;if(f.protocolVersion===5&&f.properties&&f.properties.maximumPacketSize&&f.properties.maximumPacketSize<l.length)return o.emit("error",new Error(`exceeding packets size ${l.cmd}`)),o.end({reasonCode:149,properties:{reasonString:"Maximum packet size was exceeded"}}),o;switch(o.log("_handlePacket :: emitting packetreceive"),o.emit("packetreceive",l),l.cmd){case"publish":(0,t.default)(o,l,h);break;case"puback":case"pubrec":case"pubcomp":case"suback":case"unsuback":o.reschedulePing(),(0,n.default)(o,l),h();break;case"pubrel":o.reschedulePing(),(0,i.default)(o,l,h);break;case"connack":(0,u.default)(o,l),h();break;case"auth":o.reschedulePing(),(0,a.default)(o,l),h();break;case"pingresp":o.log("_handlePacket :: received pingresp"),o.reschedulePing(!0),h();break;case"disconnect":o.emit("disconnect",l),h();break;default:o.log("_handlePacket :: unknown command"),h();break}};e.default=s}),Qu=ve(e=>{ce(),de(),fe();var r=e&&e.__importDefault||function(n){return n&&n.__esModule?n:{default:n}};Object.defineProperty(e,"__esModule",{value:!0}),e.TypedEventEmitter=void 0;var t=r((Rr(),Ke(_r))),a=Pr(),u=class{};e.TypedEventEmitter=u,(0,a.applyMixin)(u,t.default)}),Ei=ve(e=>{ce(),de(),fe(),Object.defineProperty(e,"__esModule",{value:!0}),e.isReactNativeBrowser=e.isWebWorker=void 0;var r=()=>{var n;return typeof window<"u"?typeof navigator<"u"&&((n=navigator.userAgent)===null||n===void 0?void 0:n.toLowerCase().indexOf(" electron/"))>-1&&De!=null&&De.versions?!Object.prototype.hasOwnProperty.call(De.versions,"electron"):typeof window.document<"u":!1},t=()=>{var n,i;return!!(typeof self=="object"&&!((i=(n=self==null?void 0:self.constructor)===null||n===void 0?void 0:n.name)===null||i===void 0)&&i.includes("WorkerGlobalScope"))},a=()=>typeof navigator<"u"&&navigator.product==="ReactNative",u=r()||t()||a();e.isWebWorker=t(),e.isReactNativeBrowser=a(),e.default=u}),Gu=ve((e,r)=>{ce(),de(),fe(),function(t,a){typeof e=="object"&&typeof r<"u"?a(e):typeof define=="function"&&define.amd?define(["exports"],a):(t=typeof globalThis<"u"?globalThis:t||self,a(t.fastUniqueNumbers={}))}(e,function(t){var a=function(m){return function(b){var y=m(b);return b.add(y),y}},u=function(m){return function(b,y){return m.set(b,y),y}},n=Number.MAX_SAFE_INTEGER===void 0?9007199254740991:Number.MAX_SAFE_INTEGER,i=536870912,s=i*2,o=function(m,b){return function(y){var A=b.get(y),M=A===void 0?y.size:A<s?A+1:0;if(!y.has(M))return m(y,M);if(y.size<i){for(;y.has(M);)M=Math.floor(Math.random()*s);return m(y,M)}if(y.size>n)throw new Error("Congratulations, you created a collection of unique numbers which uses all available integers!");for(;y.has(M);)M=Math.floor(Math.random()*n);return m(y,M)}},l=new WeakMap,h=u(l),f=o(h,l),d=a(f);t.addUniqueNumber=d,t.generateUniqueNumber=f})}),Ju=ve((e,r)=>{ce(),de(),fe(),function(t,a){typeof e=="object"&&typeof r<"u"?a(e,Gu()):typeof define=="function"&&define.amd?define(["exports","fast-unique-numbers"],a):(t=typeof globalThis<"u"?globalThis:t||self,a(t.workerTimersBroker={},t.fastUniqueNumbers))}(e,function(t,a){var u=function(s){return s.method!==void 0&&s.method==="call"},n=function(s){return s.error===null&&typeof s.id=="number"},i=function(s){var o=new Map([[0,function(){}]]),l=new Map([[0,function(){}]]),h=new Map,f=new Worker(s);f.addEventListener("message",function(A){var M=A.data;if(u(M)){var C=M.params,E=C.timerId,L=C.timerType;if(L==="interval"){var D=o.get(E);if(typeof D=="number"){var I=h.get(D);if(I===void 0||I.timerId!==E||I.timerType!==L)throw new Error("The timer is in an undefined state.")}else if(typeof D<"u")D();else throw new Error("The timer is in an undefined state.")}else if(L==="timeout"){var T=l.get(E);if(typeof T=="number"){var x=h.get(T);if(x===void 0||x.timerId!==E||x.timerType!==L)throw new Error("The timer is in an undefined state.")}else if(typeof T<"u")T(),l.delete(E);else throw new Error("The timer is in an undefined state.")}}else if(n(M)){var q=M.id,G=h.get(q);if(G===void 0)throw new Error("The timer is in an undefined state.");var te=G.timerId,v=G.timerType;h.delete(q),v==="interval"?o.delete(te):l.delete(te)}else{var V=M.error.message;throw new Error(V)}});var d=function(A){var M=a.generateUniqueNumber(h);h.set(M,{timerId:A,timerType:"interval"}),o.set(A,M),f.postMessage({id:M,method:"clear",params:{timerId:A,timerType:"interval"}})},m=function(A){var M=a.generateUniqueNumber(h);h.set(M,{timerId:A,timerType:"timeout"}),l.set(A,M),f.postMessage({id:M,method:"clear",params:{timerId:A,timerType:"timeout"}})},b=function(A){var M=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,C=a.generateUniqueNumber(o);return o.set(C,function(){A(),typeof o.get(C)=="function"&&f.postMessage({id:null,method:"set",params:{delay:M,now:performance.now(),timerId:C,timerType:"interval"}})}),f.postMessage({id:null,method:"set",params:{delay:M,now:performance.now(),timerId:C,timerType:"interval"}}),C},y=function(A){var M=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,C=a.generateUniqueNumber(l);return l.set(C,A),f.postMessage({id:null,method:"set",params:{delay:M,now:performance.now(),timerId:C,timerType:"timeout"}}),C};return{clearInterval:d,clearTimeout:m,setInterval:b,setTimeout:y}};t.load=i})}),$u=ve((e,r)=>{ce(),de(),fe(),function(t,a){typeof e=="object"&&typeof r<"u"?a(e,Ju()):typeof define=="function"&&define.amd?define(["exports","worker-timers-broker"],a):(t=typeof globalThis<"u"?globalThis:t||self,a(t.workerTimers={},t.workerTimersBroker))}(e,function(t,a){var u=function(f,d){var m=null;return function(){if(m!==null)return m;var b=new Blob([d],{type:"application/javascript; charset=utf-8"}),y=URL.createObjectURL(b);return m=f(y),setTimeout(function(){return URL.revokeObjectURL(y)}),m}},n=`(()=>{var e={472:(e,t,r)=>{var o,i;void 0===(i="function"==typeof(o=function(){"use strict";var e=new Map,t=new Map,r=function(t){var r=e.get(t);if(void 0===r)throw new Error('There is no interval scheduled with the given id "'.concat(t,'".'));clearTimeout(r),e.delete(t)},o=function(e){var r=t.get(e);if(void 0===r)throw new Error('There is no timeout scheduled with the given id "'.concat(e,'".'));clearTimeout(r),t.delete(e)},i=function(e,t){var r,o=performance.now();return{expected:o+(r=e-Math.max(0,o-t)),remainingDelay:r}},n=function e(t,r,o,i){var n=performance.now();n>o?postMessage({id:null,method:"call",params:{timerId:r,timerType:i}}):t.set(r,setTimeout(e,o-n,t,r,o,i))},a=function(t,r,o){var a=i(t,o),s=a.expected,d=a.remainingDelay;e.set(r,setTimeout(n,d,e,r,s,"interval"))},s=function(e,r,o){var a=i(e,o),s=a.expected,d=a.remainingDelay;t.set(r,setTimeout(n,d,t,r,s,"timeout"))};addEventListener("message",(function(e){var t=e.data;try{if("clear"===t.method){var i=t.id,n=t.params,d=n.timerId,c=n.timerType;if("interval"===c)r(d),postMessage({error:null,id:i});else{if("timeout"!==c)throw new Error('The given type "'.concat(c,'" is not supported'));o(d),postMessage({error:null,id:i})}}else{if("set"!==t.method)throw new Error('The given method "'.concat(t.method,'" is not supported'));var u=t.params,l=u.delay,p=u.now,m=u.timerId,v=u.timerType;if("interval"===v)a(l,m,p);else{if("timeout"!==v)throw new Error('The given type "'.concat(v,'" is not supported'));s(l,m,p)}}}catch(e){postMessage({error:{message:e.message},id:t.id,result:null})}}))})?o.call(t,r,t,e):o)||(e.exports=i)}},t={};function r(o){var i=t[o];if(void 0!==i)return i.exports;var n=t[o]={exports:{}};return e[o](n,n.exports,r),n.exports}r.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return r.d(t,{a:t}),t},r.d=(e,t)=>{for(var o in t)r.o(t,o)&&!r.o(e,o)&&Object.defineProperty(e,o,{enumerable:!0,get:t[o]})},r.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),(()=>{"use strict";r(472)})()})();`,i=u(a.load,n),s=function(f){return i().clearInterval(f)},o=function(f){return i().clearTimeout(f)},l=function(){var f;return(f=i()).setInterval.apply(f,arguments)},h=function(){var f;return(f=i()).setTimeout.apply(f,arguments)};t.clearInterval=s,t.clearTimeout=o,t.setInterval=l,t.setTimeout=h})}),Xu=ve(e=>{ce(),de(),fe();var r=e&&e.__createBinding||(Object.create?function(l,h,f,d){d===void 0&&(d=f);var m=Object.getOwnPropertyDescriptor(h,f);(!m||("get"in m?!h.__esModule:m.writable||m.configurable))&&(m={enumerable:!0,get:function(){return h[f]}}),Object.defineProperty(l,d,m)}:function(l,h,f,d){d===void 0&&(d=f),l[d]=h[f]}),t=e&&e.__setModuleDefault||(Object.create?function(l,h){Object.defineProperty(l,"default",{enumerable:!0,value:h})}:function(l,h){l.default=h}),a=e&&e.__importStar||function(l){if(l&&l.__esModule)return l;var h={};if(l!=null)for(var f in l)f!=="default"&&Object.prototype.hasOwnProperty.call(l,f)&&r(h,l,f);return t(h,l),h};Object.defineProperty(e,"__esModule",{value:!0});var u=a(Ei()),n=$u(),i={set:n.setInterval,clear:n.clearInterval},s={set:(l,h)=>setInterval(l,h),clear:l=>clearInterval(l)},o=l=>{switch(l){case"native":return s;case"worker":return i;case"auto":default:return u.default&&!u.isWebWorker&&!u.isReactNativeBrowser?i:s}};e.default=o}),xa=ve(e=>{ce(),de(),fe();var r=e&&e.__importDefault||function(u){return u&&u.__esModule?u:{default:u}};Object.defineProperty(e,"__esModule",{value:!0});var t=r(Xu()),a=class{get keepaliveTimeoutTimestamp(){return this._keepaliveTimeoutTimestamp}get intervalEvery(){return this._intervalEvery}get keepalive(){return this._keepalive}constructor(u,n){this.destroyed=!1,this.client=u,this.timer=typeof n=="object"&&"set"in n&&"clear"in n?n:(0,t.default)(n),this.setKeepalive(u.options.keepalive)}clear(){this.timerId&&(this.timer.clear(this.timerId),this.timerId=null)}setKeepalive(u){if(u*=1e3,isNaN(u)||u<=0||u>2147483647)throw new Error(`Keepalive value must be an integer between 0 and 2147483647. Provided value is ${u}`);this._keepalive=u,this.reschedule(),this.client.log(`KeepaliveManager: set keepalive to ${u}ms`)}destroy(){this.clear(),this.destroyed=!0}reschedule(){if(this.destroyed)return;this.clear(),this.counter=0;let u=Math.ceil(this._keepalive*1.5);this._keepaliveTimeoutTimestamp=Date.now()+u,this._intervalEvery=Math.ceil(this._keepalive/2),this.timerId=this.timer.set(()=>{this.destroyed||(this.counter+=1,this.counter===2?this.client.sendPing():this.counter>2&&this.client.onKeepaliveTimeout())},this._intervalEvery)}};e.default=a}),no=ve(e=>{ce(),de(),fe();var r=e&&e.__createBinding||(Object.create?function(D,I,T,x){x===void 0&&(x=T);var q=Object.getOwnPropertyDescriptor(I,T);(!q||("get"in q?!I.__esModule:q.writable||q.configurable))&&(q={enumerable:!0,get:function(){return I[T]}}),Object.defineProperty(D,x,q)}:function(D,I,T,x){x===void 0&&(x=T),D[x]=I[T]}),t=e&&e.__setModuleDefault||(Object.create?function(D,I){Object.defineProperty(D,"default",{enumerable:!0,value:I})}:function(D,I){D.default=I}),a=e&&e.__importStar||function(D){if(D&&D.__esModule)return D;var I={};if(D!=null)for(var T in D)T!=="default"&&Object.prototype.hasOwnProperty.call(D,T)&&r(I,D,T);return t(I,D),I},u=e&&e.__importDefault||function(D){return D&&D.__esModule?D:{default:D}};Object.defineProperty(e,"__esModule",{value:!0});var n=u(Wl()),i=u(Su()),s=u(ba()),o=Er(),l=u(Iu()),h=a(ku()),f=u(Kt()),d=u(ya()),m=u(Yu()),b=Pr(),y=Qu(),A=u(xa()),M=a(Ei()),C=globalThis.setImmediate||((...D)=>{let I=D.shift();(0,b.nextTick)(()=>{I(...D)})}),E={keepalive:60,reschedulePings:!0,protocolId:"MQTT",protocolVersion:4,reconnectPeriod:1e3,connectTimeout:30*1e3,clean:!0,resubscribe:!0,writeCache:!0,timerVariant:"auto"},L=class oo extends y.TypedEventEmitter{static defaultId(){return`mqttjs_${Math.random().toString(16).substr(2,8)}`}constructor(I,T){super(),this.options=T||{};for(let x in E)typeof this.options[x]>"u"?this.options[x]=E[x]:this.options[x]=T[x];this.log=this.options.log||(0,f.default)("mqttjs:client"),this.noop=this._noop.bind(this),this.log("MqttClient :: version:",oo.VERSION),M.isWebWorker?this.log("MqttClient :: environment","webworker"):this.log("MqttClient :: environment",M.default?"browser":"node"),this.log("MqttClient :: options.protocol",T.protocol),this.log("MqttClient :: options.protocolVersion",T.protocolVersion),this.log("MqttClient :: options.username",T.username),this.log("MqttClient :: options.keepalive",T.keepalive),this.log("MqttClient :: options.reconnectPeriod",T.reconnectPeriod),this.log("MqttClient :: options.rejectUnauthorized",T.rejectUnauthorized),this.log("MqttClient :: options.properties.topicAliasMaximum",T.properties?T.properties.topicAliasMaximum:void 0),this.options.clientId=typeof T.clientId=="string"?T.clientId:oo.defaultId(),this.log("MqttClient :: clientId",this.options.clientId),this.options.customHandleAcks=T.protocolVersion===5&&T.customHandleAcks?T.customHandleAcks:(...x)=>{x[3](null,0)},this.options.writeCache||(i.default.writeToStream.cacheNumbers=!1),this.streamBuilder=I,this.messageIdProvider=typeof this.options.messageIdProvider>"u"?new s.default:this.options.messageIdProvider,this.outgoingStore=T.outgoingStore||new d.default,this.incomingStore=T.incomingStore||new d.default,this.queueQoSZero=T.queueQoSZero===void 0?!0:T.queueQoSZero,this._resubscribeTopics={},this.messageIdToTopic={},this.keepaliveManager=null,this.connected=!1,this.disconnecting=!1,this.reconnecting=!1,this.queue=[],this.connackTimer=null,this.reconnectTimer=null,this._storeProcessing=!1,this._packetIdsDuringStoreProcessing={},this._storeProcessingQueue=[],this.outgoing={},this._firstConnection=!0,T.properties&&T.properties.topicAliasMaximum>0&&(T.properties.topicAliasMaximum>65535?this.log("MqttClient :: options.properties.topicAliasMaximum is out of range"):this.topicAliasRecv=new n.default(T.properties.topicAliasMaximum)),this.on("connect",()=>{let{queue:x}=this,q=()=>{let G=x.shift();this.log("deliver :: entry %o",G);let te=null;if(!G){this._resubscribe();return}te=G.packet,this.log("deliver :: call _sendPacket for %o",te);let v=!0;te.messageId&&te.messageId!==0&&(this.messageIdProvider.register(te.messageId)||(v=!1)),v?this._sendPacket(te,V=>{G.cb&&G.cb(V),q()}):(this.log("messageId: %d has already used. The message is skipped and removed.",te.messageId),q())};this.log("connect :: sending queued packets"),q()}),this.on("close",()=>{this.log("close :: connected set to `false`"),this.connected=!1,this.log("close :: clearing connackTimer"),clearTimeout(this.connackTimer),this._destroyKeepaliveManager(),this.topicAliasRecv&&this.topicAliasRecv.clear(),this.log("close :: calling _setupReconnect"),this._setupReconnect()}),this.options.manualConnect||(this.log("MqttClient :: setting up stream"),this.connect())}handleAuth(I,T){T()}handleMessage(I,T){T()}_nextId(){return this.messageIdProvider.allocate()}getLastMessageId(){return this.messageIdProvider.getLastAllocated()}connect(){var I;let T=new o.Writable,x=i.default.parser(this.options),q=null,G=[];this.log("connect :: calling method to clear reconnect"),this._clearReconnect(),this.disconnected&&!this.reconnecting&&(this.incomingStore=this.options.incomingStore||new d.default,this.outgoingStore=this.options.outgoingStore||new d.default,this.disconnecting=!1,this.disconnected=!1),this.log("connect :: using streamBuilder provided to client to create stream"),this.stream=this.streamBuilder(this),x.on("packet",K=>{this.log("parser :: on packet push to packets array."),G.push(K)});let te=()=>{this.log("work :: getting next packet in queue");let K=G.shift();if(K)this.log("work :: packet pulled from queue"),(0,m.default)(this,K,v);else{this.log("work :: no packets in queue");let me=q;q=null,this.log("work :: done flag is %s",!!me),me&&me()}},v=()=>{if(G.length)(0,b.nextTick)(te);else{let K=q;q=null,K()}};T._write=(K,me,oe)=>{q=oe,this.log("writable stream :: parsing buffer"),x.parse(K),te()};let V=K=>{this.log("streamErrorHandler :: error",K.message),K.code?(this.log("streamErrorHandler :: emitting error"),this.emit("error",K)):this.noop(K)};this.log("connect :: pipe stream to writable stream"),this.stream.pipe(T),this.stream.on("error",V),this.stream.on("close",()=>{this.log("(%s)stream :: on close",this.options.clientId),this._flushVolatile(),this.log("stream: emit close to MqttClient"),this.emit("close")}),this.log("connect: sending packet `connect`");let Z={cmd:"connect",protocolId:this.options.protocolId,protocolVersion:this.options.protocolVersion,clean:this.options.clean,clientId:this.options.clientId,keepalive:this.options.keepalive,username:this.options.username,password:this.options.password,properties:this.options.properties};if(this.options.will&&(Z.will=Object.assign(Object.assign({},this.options.will),{payload:(I=this.options.will)===null||I===void 0?void 0:I.payload})),this.topicAliasRecv&&(Z.properties||(Z.properties={}),this.topicAliasRecv&&(Z.properties.topicAliasMaximum=this.topicAliasRecv.max)),this._writePacket(Z),x.on("error",this.emit.bind(this,"error")),this.options.properties){if(!this.options.properties.authenticationMethod&&this.options.properties.authenticationData)return this.end(()=>this.emit("error",new Error("Packet has no Authentication Method"))),this;if(this.options.properties.authenticationMethod&&this.options.authPacket&&typeof this.options.authPacket=="object"){let K=Object.assign({cmd:"auth",reasonCode:0},this.options.authPacket);this._writePacket(K)}}return this.stream.setMaxListeners(1e3),clearTimeout(this.connackTimer),this.connackTimer=setTimeout(()=>{this.log("!!connectTimeout hit!! Calling _cleanUp with force `true`"),this.emit("error",new Error("connack timeout")),this._cleanUp(!0)},this.options.connectTimeout),this}publish(I,T,x,q){this.log("publish :: message `%s` to topic `%s`",T,I);let{options:G}=this;typeof x=="function"&&(q=x,x=null),x=x||{},x=Object.assign(Object.assign({},{qos:0,retain:!1,dup:!1}),x);let{qos:te,retain:v,dup:V,properties:Z,cbStorePut:K}=x;if(this._checkDisconnecting(q))return this;let me=()=>{let oe=0;if((te===1||te===2)&&(oe=this._nextId(),oe===null))return this.log("No messageId left"),!1;let H={cmd:"publish",topic:I,payload:T,qos:te,retain:v,messageId:oe,dup:V};switch(G.protocolVersion===5&&(H.properties=Z),this.log("publish :: qos",te),te){case 1:case 2:this.outgoing[H.messageId]={volatile:!1,cb:q||this.noop},this.log("MqttClient:publish: packet cmd: %s",H.cmd),this._sendPacket(H,void 0,K);break;default:this.log("MqttClient:publish: packet cmd: %s",H.cmd),this._sendPacket(H,q,K);break}return!0};return(this._storeProcessing||this._storeProcessingQueue.length>0||!me())&&this._storeProcessingQueue.push({invoke:me,cbStorePut:x.cbStorePut,callback:q}),this}publishAsync(I,T,x){return new Promise((q,G)=>{this.publish(I,T,x,(te,v)=>{te?G(te):q(v)})})}subscribe(I,T,x){let q=this.options.protocolVersion;typeof T=="function"&&(x=T),x=x||this.noop;let G=!1,te=[];typeof I=="string"?(I=[I],te=I):Array.isArray(I)?te=I:typeof I=="object"&&(G=I.resubscribe,delete I.resubscribe,te=Object.keys(I));let v=h.validateTopics(te);if(v!==null)return C(x,new Error(`Invalid topic ${v}`)),this;if(this._checkDisconnecting(x))return this.log("subscribe: discconecting true"),this;let V={qos:0};q===5&&(V.nl=!1,V.rap=!1,V.rh=0),T=Object.assign(Object.assign({},V),T);let Z=T.properties,K=[],me=(H,be)=>{if(be=be||T,!Object.prototype.hasOwnProperty.call(this._resubscribeTopics,H)||this._resubscribeTopics[H].qos<be.qos||G){let ie={topic:H,qos:be.qos};q===5&&(ie.nl=be.nl,ie.rap=be.rap,ie.rh=be.rh,ie.properties=Z),this.log("subscribe: pushing topic `%s` and qos `%s` to subs list",ie.topic,ie.qos),K.push(ie)}};if(Array.isArray(I)?I.forEach(H=>{this.log("subscribe: array topic %s",H),me(H)}):Object.keys(I).forEach(H=>{this.log("subscribe: object topic %s, %o",H,I[H]),me(H,I[H])}),!K.length)return x(null,[]),this;let oe=()=>{let H=this._nextId();if(H===null)return this.log("No messageId left"),!1;let be={cmd:"subscribe",subscriptions:K,messageId:H};if(Z&&(be.properties=Z),this.options.resubscribe){this.log("subscribe :: resubscribe true");let ie=[];K.forEach(_e=>{if(this.options.reconnectPeriod>0){let k={qos:_e.qos};q===5&&(k.nl=_e.nl||!1,k.rap=_e.rap||!1,k.rh=_e.rh||0,k.properties=_e.properties),this._resubscribeTopics[_e.topic]=k,ie.push(_e.topic)}}),this.messageIdToTopic[be.messageId]=ie}return this.outgoing[be.messageId]={volatile:!0,cb(ie,_e){if(!ie){let{granted:k}=_e;for(let Q=0;Q<k.length;Q+=1)K[Q].qos=k[Q]}x(ie,K,_e)}},this.log("subscribe :: call _sendPacket"),this._sendPacket(be),!0};return(this._storeProcessing||this._storeProcessingQueue.length>0||!oe())&&this._storeProcessingQueue.push({invoke:oe,callback:x}),this}subscribeAsync(I,T){return new Promise((x,q)=>{this.subscribe(I,T,(G,te)=>{G?q(G):x(te)})})}unsubscribe(I,T,x){typeof I=="string"&&(I=[I]),typeof T=="function"&&(x=T),x=x||this.noop;let q=h.validateTopics(I);if(q!==null)return C(x,new Error(`Invalid topic ${q}`)),this;if(this._checkDisconnecting(x))return this;let G=()=>{let te=this._nextId();if(te===null)return this.log("No messageId left"),!1;let v={cmd:"unsubscribe",messageId:te,unsubscriptions:[]};return typeof I=="string"?v.unsubscriptions=[I]:Array.isArray(I)&&(v.unsubscriptions=I),this.options.resubscribe&&v.unsubscriptions.forEach(V=>{delete this._resubscribeTopics[V]}),typeof T=="object"&&T.properties&&(v.properties=T.properties),this.outgoing[v.messageId]={volatile:!0,cb:x},this.log("unsubscribe: call _sendPacket"),this._sendPacket(v),!0};return(this._storeProcessing||this._storeProcessingQueue.length>0||!G())&&this._storeProcessingQueue.push({invoke:G,callback:x}),this}unsubscribeAsync(I,T){return new Promise((x,q)=>{this.unsubscribe(I,T,(G,te)=>{G?q(G):x(te)})})}end(I,T,x){this.log("end :: (%s)",this.options.clientId),(I==null||typeof I!="boolean")&&(x=x||T,T=I,I=!1),typeof T!="object"&&(x=x||T,T=null),this.log("end :: cb? %s",!!x),(!x||typeof x!="function")&&(x=this.noop);let q=()=>{this.log("end :: closeStores: closing incoming and outgoing stores"),this.disconnected=!0,this.incomingStore.close(te=>{this.outgoingStore.close(v=>{if(this.log("end :: closeStores: emitting end"),this.emit("end"),x){let V=te||v;this.log("end :: closeStores: invoking callback with args"),x(V)}})}),this._deferredReconnect?this._deferredReconnect():(this.options.reconnectPeriod===0||this.options.manualConnect)&&(this.disconnecting=!1)},G=()=>{this.log("end :: (%s) :: finish :: calling _cleanUp with force %s",this.options.clientId,I),this._cleanUp(I,()=>{this.log("end :: finish :: calling process.nextTick on closeStores"),(0,b.nextTick)(q)},T)};return this.disconnecting?(x(),this):(this._clearReconnect(),this.disconnecting=!0,!I&&Object.keys(this.outgoing).length>0?(this.log("end :: (%s) :: calling finish in 10ms once outgoing is empty",this.options.clientId),this.once("outgoingEmpty",setTimeout.bind(null,G,10))):(this.log("end :: (%s) :: immediately calling finish",this.options.clientId),G()),this)}endAsync(I,T){return new Promise((x,q)=>{this.end(I,T,G=>{G?q(G):x()})})}removeOutgoingMessage(I){if(this.outgoing[I]){let{cb:T}=this.outgoing[I];this._removeOutgoingAndStoreMessage(I,()=>{T(new Error("Message removed"))})}return this}reconnect(I){this.log("client reconnect");let T=()=>{I?(this.options.incomingStore=I.incomingStore,this.options.outgoingStore=I.outgoingStore):(this.options.incomingStore=null,this.options.outgoingStore=null),this.incomingStore=this.options.incomingStore||new d.default,this.outgoingStore=this.options.outgoingStore||new d.default,this.disconnecting=!1,this.disconnected=!1,this._deferredReconnect=null,this._reconnect()};return this.disconnecting&&!this.disconnected?this._deferredReconnect=T:T(),this}_flushVolatile(){this.outgoing&&(this.log("_flushVolatile :: deleting volatile messages from the queue and setting their callbacks as error function"),Object.keys(this.outgoing).forEach(I=>{this.outgoing[I].volatile&&typeof this.outgoing[I].cb=="function"&&(this.outgoing[I].cb(new Error("Connection closed")),delete this.outgoing[I])}))}_flush(){this.outgoing&&(this.log("_flush: queue exists? %b",!!this.outgoing),Object.keys(this.outgoing).forEach(I=>{typeof this.outgoing[I].cb=="function"&&(this.outgoing[I].cb(new Error("Connection closed")),delete this.outgoing[I])}))}_removeTopicAliasAndRecoverTopicName(I){let T;I.properties&&(T=I.properties.topicAlias);let x=I.topic.toString();if(this.log("_removeTopicAliasAndRecoverTopicName :: alias %d, topic %o",T,x),x.length===0){if(typeof T>"u")return new Error("Unregistered Topic Alias");if(x=this.topicAliasSend.getTopicByAlias(T),typeof x>"u")return new Error("Unregistered Topic Alias");I.topic=x}T&&delete I.properties.topicAlias}_checkDisconnecting(I){return this.disconnecting&&(I&&I!==this.noop?I(new Error("client disconnecting")):this.emit("error",new Error("client disconnecting"))),this.disconnecting}_reconnect(){this.log("_reconnect: emitting reconnect to client"),this.emit("reconnect"),this.connected?(this.end(()=>{this.connect()}),this.log("client already connected. disconnecting first.")):(this.log("_reconnect: calling connect"),this.connect())}_setupReconnect(){!this.disconnecting&&!this.reconnectTimer&&this.options.reconnectPeriod>0?(this.reconnecting||(this.log("_setupReconnect :: emit `offline` state"),this.emit("offline"),this.log("_setupReconnect :: set `reconnecting` to `true`"),this.reconnecting=!0),this.log("_setupReconnect :: setting reconnectTimer for %d ms",this.options.reconnectPeriod),this.reconnectTimer=setInterval(()=>{this.log("reconnectTimer :: reconnect triggered!"),this._reconnect()},this.options.reconnectPeriod)):this.log("_setupReconnect :: doing nothing...")}_clearReconnect(){this.log("_clearReconnect : clearing reconnect timer"),this.reconnectTimer&&(clearInterval(this.reconnectTimer),this.reconnectTimer=null)}_cleanUp(I,T,x={}){if(T&&(this.log("_cleanUp :: done callback provided for on stream close"),this.stream.on("close",T)),this.log("_cleanUp :: forced? %s",I),I)this.options.reconnectPeriod===0&&this.options.clean&&this._flush(),this.log("_cleanUp :: (%s) :: destroying stream",this.options.clientId),this.stream.destroy();else{let q=Object.assign({cmd:"disconnect"},x);this.log("_cleanUp :: (%s) :: call _sendPacket with disconnect packet",this.options.clientId),this._sendPacket(q,()=>{this.log("_cleanUp :: (%s) :: destroying stream",this.options.clientId),C(()=>{this.stream.end(()=>{this.log("_cleanUp :: (%s) :: stream destroyed",this.options.clientId)})})})}!this.disconnecting&&!this.reconnecting&&(this.log("_cleanUp :: client not disconnecting/reconnecting. Clearing and resetting reconnect."),this._clearReconnect(),this._setupReconnect()),this._destroyKeepaliveManager(),T&&!this.connected&&(this.log("_cleanUp :: (%s) :: removing stream `done` callback `close` listener",this.options.clientId),this.stream.removeListener("close",T),T())}_storeAndSend(I,T,x){this.log("storeAndSend :: store packet with cmd %s to outgoingStore",I.cmd);let q=I,G;if(q.cmd==="publish"&&(q=(0,l.default)(I),G=this._removeTopicAliasAndRecoverTopicName(q),G))return T&&T(G);this.outgoingStore.put(q,te=>{if(te)return T&&T(te);x(),this._writePacket(I,T)})}_applyTopicAlias(I){if(this.options.protocolVersion===5&&I.cmd==="publish"){let T;I.properties&&(T=I.properties.topicAlias);let x=I.topic.toString();if(this.topicAliasSend)if(T){if(x.length!==0&&(this.log("applyTopicAlias :: register topic: %s - alias: %d",x,T),!this.topicAliasSend.put(x,T)))return this.log("applyTopicAlias :: error out of range. topic: %s - alias: %d",x,T),new Error("Sending Topic Alias out of range")}else x.length!==0&&(this.options.autoAssignTopicAlias?(T=this.topicAliasSend.getAliasByTopic(x),T?(I.topic="",I.properties=Object.assign(Object.assign({},I.properties),{topicAlias:T}),this.log("applyTopicAlias :: auto assign(use) topic: %s - alias: %d",x,T)):(T=this.topicAliasSend.getLruAlias(),this.topicAliasSend.put(x,T),I.properties=Object.assign(Object.assign({},I.properties),{topicAlias:T}),this.log("applyTopicAlias :: auto assign topic: %s - alias: %d",x,T))):this.options.autoUseTopicAlias&&(T=this.topicAliasSend.getAliasByTopic(x),T&&(I.topic="",I.properties=Object.assign(Object.assign({},I.properties),{topicAlias:T}),this.log("applyTopicAlias :: auto use topic: %s - alias: %d",x,T))));else if(T)return this.log("applyTopicAlias :: error out of range. topic: %s - alias: %d",x,T),new Error("Sending Topic Alias out of range")}}_noop(I){this.log("noop ::",I)}_writePacket(I,T){this.log("_writePacket :: packet: %O",I),this.log("_writePacket :: emitting `packetsend`"),this.emit("packetsend",I),this.log("_writePacket :: writing to stream");let x=i.default.writeToStream(I,this.stream,this.options);this.log("_writePacket :: writeToStream result %s",x),!x&&T&&T!==this.noop?(this.log("_writePacket :: handle events on `drain` once through callback."),this.stream.once("drain",T)):T&&(this.log("_writePacket :: invoking cb"),T())}_sendPacket(I,T,x,q){this.log("_sendPacket :: (%s) ::  start",this.options.clientId),x=x||this.noop,T=T||this.noop;let G=this._applyTopicAlias(I);if(G){T(G);return}if(!this.connected){if(I.cmd==="auth"){this._writePacket(I,T);return}this.log("_sendPacket :: client not connected. Storing packet offline."),this._storePacket(I,T,x);return}if(q){this._writePacket(I,T);return}switch(I.cmd){case"publish":break;case"pubrel":this._storeAndSend(I,T,x);return;default:this._writePacket(I,T);return}switch(I.qos){case 2:case 1:this._storeAndSend(I,T,x);break;case 0:default:this._writePacket(I,T);break}this.log("_sendPacket :: (%s) ::  end",this.options.clientId)}_storePacket(I,T,x){this.log("_storePacket :: packet: %o",I),this.log("_storePacket :: cb? %s",!!T),x=x||this.noop;let q=I;if(q.cmd==="publish"){q=(0,l.default)(I);let te=this._removeTopicAliasAndRecoverTopicName(q);if(te)return T&&T(te)}let G=q.qos||0;G===0&&this.queueQoSZero||q.cmd!=="publish"?this.queue.push({packet:q,cb:T}):G>0?(T=this.outgoing[q.messageId]?this.outgoing[q.messageId].cb:null,this.outgoingStore.put(q,te=>{if(te)return T&&T(te);x()})):T&&T(new Error("No connection to broker"))}_setupKeepaliveManager(){this.log("_setupKeepaliveManager :: keepalive %d (seconds)",this.options.keepalive),!this.keepaliveManager&&this.options.keepalive&&(this.keepaliveManager=new A.default(this,this.options.timerVariant))}_destroyKeepaliveManager(){this.keepaliveManager&&(this.log("_destroyKeepaliveManager :: destroying keepalive manager"),this.keepaliveManager.destroy(),this.keepaliveManager=null)}reschedulePing(I=!1){this.keepaliveManager&&this.options.keepalive&&(I||this.options.reschedulePings)&&this._reschedulePing()}_reschedulePing(){this.log("_reschedulePing :: rescheduling ping"),this.keepaliveManager.reschedule()}sendPing(){this.log("_sendPing :: sending pingreq"),this._sendPacket({cmd:"pingreq"})}onKeepaliveTimeout(){this.emit("error",new Error("Keepalive timeout")),this.log("onKeepaliveTimeout :: calling _cleanUp with force true"),this._cleanUp(!0)}_resubscribe(){this.log("_resubscribe");let I=Object.keys(this._resubscribeTopics);if(!this._firstConnection&&(this.options.clean||this.options.protocolVersion>=4&&!this.connackPacket.sessionPresent)&&I.length>0)if(this.options.resubscribe)if(this.options.protocolVersion===5){this.log("_resubscribe: protocolVersion 5");for(let T=0;T<I.length;T++){let x={};x[I[T]]=this._resubscribeTopics[I[T]],x.resubscribe=!0,this.subscribe(x,{properties:x[I[T]].properties})}}else this._resubscribeTopics.resubscribe=!0,this.subscribe(this._resubscribeTopics);else this._resubscribeTopics={};this._firstConnection=!1}_onConnect(I){if(this.disconnected){this.emit("connect",I);return}this.connackPacket=I,this.messageIdProvider.clear(),this._setupKeepaliveManager(),this.connected=!0;let T=()=>{let x=this.outgoingStore.createStream(),q=()=>{x.destroy(),x=null,this._flushStoreProcessingQueue(),G()},G=()=>{this._storeProcessing=!1,this._packetIdsDuringStoreProcessing={}};this.once("close",q),x.on("error",v=>{G(),this._flushStoreProcessingQueue(),this.removeListener("close",q),this.emit("error",v)});let te=()=>{if(!x)return;let v=x.read(1),V;if(!v){x.once("readable",te);return}if(this._storeProcessing=!0,this._packetIdsDuringStoreProcessing[v.messageId]){te();return}!this.disconnecting&&!this.reconnectTimer?(V=this.outgoing[v.messageId]?this.outgoing[v.messageId].cb:null,this.outgoing[v.messageId]={volatile:!1,cb(Z,K){V&&V(Z,K),te()}},this._packetIdsDuringStoreProcessing[v.messageId]=!0,this.messageIdProvider.register(v.messageId)?this._sendPacket(v,void 0,void 0,!0):this.log("messageId: %d has already used.",v.messageId)):x.destroy&&x.destroy()};x.on("end",()=>{let v=!0;for(let V in this._packetIdsDuringStoreProcessing)if(!this._packetIdsDuringStoreProcessing[V]){v=!1;break}this.removeListener("close",q),v?(G(),this._invokeAllStoreProcessingQueue(),this.emit("connect",I)):T()}),te()};T()}_invokeStoreProcessingQueue(){if(!this._storeProcessing&&this._storeProcessingQueue.length>0){let I=this._storeProcessingQueue[0];if(I&&I.invoke())return this._storeProcessingQueue.shift(),!0}return!1}_invokeAllStoreProcessingQueue(){for(;this._invokeStoreProcessingQueue(););}_flushStoreProcessingQueue(){for(let I of this._storeProcessingQueue)I.cbStorePut&&I.cbStorePut(new Error("Connection closed")),I.callback&&I.callback(new Error("Connection closed"));this._storeProcessingQueue.splice(0)}_removeOutgoingAndStoreMessage(I,T){delete this.outgoing[I],this.outgoingStore.del({messageId:I},(x,q)=>{T(x,q),this.messageIdProvider.deallocate(I),this._invokeStoreProcessingQueue()})}};L.VERSION=b.MQTTJS_VERSION,e.default=L}),Zu=ve(e=>{ce(),de(),fe(),Object.defineProperty(e,"__esModule",{value:!0});var r=Ma(),t=class{constructor(){this.numberAllocator=new r.NumberAllocator(1,65535)}allocate(){return this.lastId=this.numberAllocator.alloc(),this.lastId}getLastAllocated(){return this.lastId}register(a){return this.numberAllocator.use(a)}deallocate(a){this.numberAllocator.free(a)}clear(){this.numberAllocator.clear()}};e.default=t});function lr(e){throw new RangeError(La[e])}function Xo(e,r){let t=e.split("@"),a="";t.length>1&&(a=t[0]+"@",e=t[1]);let u=function(n,i){let s=[],o=n.length;for(;o--;)s[o]=i(n[o]);return s}((e=e.replace(Ua,".")).split("."),r).join(".");return a+u}function Zo(e){let r=[],t=0,a=e.length;for(;t<a;){let u=e.charCodeAt(t++);if(u>=55296&&u<=56319&&t<a){let n=e.charCodeAt(t++);(64512&n)==56320?r.push(((1023&u)<<10)+(1023&n)+65536):(r.push(u),t--)}else r.push(u)}return r}var es,ts,Ua,La,At,Vr,Mi,xi,Ui,Li,er,eh=ht(()=>{ce(),de(),fe(),es=/^xn--/,ts=/[^\0-\x7E]/,Ua=/[\x2E\u3002\uFF0E\uFF61]/g,La={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},At=Math.floor,Vr=String.fromCharCode,Mi=function(e,r){return e+22+75*(e<26)-((r!=0)<<5)},xi=function(e,r,t){let a=0;for(e=t?At(e/700):e>>1,e+=At(e/r);e>455;a+=36)e=At(e/35);return At(a+36*e/(e+38))},Ui=function(e){let r=[],t=e.length,a=0,u=128,n=72,i=e.lastIndexOf("-");i<0&&(i=0);for(let o=0;o<i;++o)e.charCodeAt(o)>=128&&lr("not-basic"),r.push(e.charCodeAt(o));for(let o=i>0?i+1:0;o<t;){let l=a;for(let f=1,d=36;;d+=36){o>=t&&lr("invalid-input");let m=(s=e.charCodeAt(o++))-48<10?s-22:s-65<26?s-65:s-97<26?s-97:36;(m>=36||m>At((2147483647-a)/f))&&lr("overflow"),a+=m*f;let b=d<=n?1:d>=n+26?26:d-n;if(m<b)break;let y=36-b;f>At(2147483647/y)&&lr("overflow"),f*=y}let h=r.length+1;n=xi(a-l,h,l==0),At(a/h)>2147483647-u&&lr("overflow"),u+=At(a/h),a%=h,r.splice(a++,0,u)}var s;return String.fromCodePoint(...r)},Li=function(e){let r=[],t=(e=Zo(e)).length,a=128,u=0,n=72;for(let o of e)o<128&&r.push(Vr(o));let i=r.length,s=i;for(i&&r.push("-");s<t;){let o=2147483647;for(let h of e)h>=a&&h<o&&(o=h);let l=s+1;o-a>At((2147483647-u)/l)&&lr("overflow"),u+=(o-a)*l,a=o;for(let h of e)if(h<a&&++u>2147483647&&lr("overflow"),h==a){let f=u;for(let d=36;;d+=36){let m=d<=n?1:d>=n+26?26:d-n;if(f<m)break;let b=f-m,y=36-m;r.push(Vr(Mi(m+b%y,0))),f=At(b/y)}r.push(Vr(Mi(f,0))),n=xi(u,l,s==i),u=0,++s}++u,++a}return r.join("")},er={version:"2.1.0",ucs2:{decode:Zo,encode:e=>String.fromCodePoint(...e)},decode:Ui,encode:Li,toASCII:function(e){return Xo(e,function(r){return ts.test(r)?"xn--"+Li(r):r})},toUnicode:function(e){return Xo(e,function(r){return es.test(r)?Ui(r.slice(4).toLowerCase()):r})}},er.decode,er.encode,er.toASCII,er.toUnicode,er.ucs2,er.version});function th(e,r){return Object.prototype.hasOwnProperty.call(e,r)}var rs,Sr,is,Ot,rh=ht(()=>{ce(),de(),fe(),rs=function(e,r,t,a){r=r||"&",t=t||"=";var u={};if(typeof e!="string"||e.length===0)return u;var n=/\+/g;e=e.split(r);var i=1e3;a&&typeof a.maxKeys=="number"&&(i=a.maxKeys);var s=e.length;i>0&&s>i&&(s=i);for(var o=0;o<s;++o){var l,h,f,d,m=e[o].replace(n,"%20"),b=m.indexOf(t);b>=0?(l=m.substr(0,b),h=m.substr(b+1)):(l=m,h=""),f=decodeURIComponent(l),d=decodeURIComponent(h),th(u,f)?Array.isArray(u[f])?u[f].push(d):u[f]=[u[f],d]:u[f]=d}return u},Sr=function(e){switch(typeof e){case"string":return e;case"boolean":return e?"true":"false";case"number":return isFinite(e)?e:"";default:return""}},is=function(e,r,t,a){return r=r||"&",t=t||"=",e===null&&(e=void 0),typeof e=="object"?Object.keys(e).map(function(u){var n=encodeURIComponent(Sr(u))+t;return Array.isArray(e[u])?e[u].map(function(i){return n+encodeURIComponent(Sr(i))}).join(r):n+encodeURIComponent(Sr(e[u]))}).join(r):a?encodeURIComponent(Sr(a))+t+encodeURIComponent(Sr(e)):""},Ot={},Ot.decode=Ot.parse=rs,Ot.encode=Ot.stringify=is,Ot.decode,Ot.encode,Ot.parse,Ot.stringify});function so(){throw new Error("setTimeout has not been defined")}function ao(){throw new Error("clearTimeout has not been defined")}function Na(e){if(jt===setTimeout)return setTimeout(e,0);if((jt===so||!jt)&&setTimeout)return jt=setTimeout,setTimeout(e,0);try{return jt(e,0)}catch{try{return jt.call(null,e,0)}catch{return jt.call(this||br,e,0)}}}function ih(){yr&&dr&&(yr=!1,dr.length?Pt=dr.concat(Pt):Fr=-1,Pt.length&&ja())}function ja(){if(!yr){var e=Na(ih);yr=!0;for(var r=Pt.length;r;){for(dr=Pt,Pt=[];++Fr<r;)dr&&dr[Fr].run();Fr=-1,r=Pt.length}dr=null,yr=!1,function(t){if(Dt===clearTimeout)return clearTimeout(t);if((Dt===ao||!Dt)&&clearTimeout)return Dt=clearTimeout,clearTimeout(t);try{Dt(t)}catch{try{return Dt.call(null,t)}catch{return Dt.call(this||br,t)}}}(e)}}function ns(e,r){(this||br).fun=e,(this||br).array=r}function Ut(){}var os,jt,Dt,br,rt,dr,Pt,yr,Fr,et,nh=ht(()=>{ce(),de(),fe(),br=typeof globalThis<"u"?globalThis:typeof self<"u"?self:global,rt=os={},function(){try{jt=typeof setTimeout=="function"?setTimeout:so}catch{jt=so}try{Dt=typeof clearTimeout=="function"?clearTimeout:ao}catch{Dt=ao}}(),Pt=[],yr=!1,Fr=-1,rt.nextTick=function(e){var r=new Array(arguments.length-1);if(arguments.length>1)for(var t=1;t<arguments.length;t++)r[t-1]=arguments[t];Pt.push(new ns(e,r)),Pt.length!==1||yr||Na(ja)},ns.prototype.run=function(){(this||br).fun.apply(null,(this||br).array)},rt.title="browser",rt.browser=!0,rt.env={},rt.argv=[],rt.version="",rt.versions={},rt.on=Ut,rt.addListener=Ut,rt.once=Ut,rt.off=Ut,rt.removeListener=Ut,rt.removeAllListeners=Ut,rt.emit=Ut,rt.prependListener=Ut,rt.prependOnceListener=Ut,rt.listeners=function(e){return[]},rt.binding=function(e){throw new Error("process.binding is not supported")},rt.cwd=function(){return"/"},rt.chdir=function(e){throw new Error("process.chdir is not supported")},rt.umask=function(){return 0},et=os,et.addListener,et.argv,et.binding,et.browser,et.chdir,et.cwd,et.emit,et.env,et.listeners,et.nextTick,et.off,et.on,et.once,et.prependListener,et.prependOnceListener,et.removeAllListeners,et.removeListener,et.title,et.umask,et.version,et.versions});function oh(){if(lo)return ti;lo=!0;var e=ti={},r,t;function a(){throw new Error("setTimeout has not been defined")}function u(){throw new Error("clearTimeout has not been defined")}(function(){try{typeof setTimeout=="function"?r=setTimeout:r=a}catch{r=a}try{typeof clearTimeout=="function"?t=clearTimeout:t=u}catch{t=u}})();function n(y){if(r===setTimeout)return setTimeout(y,0);if((r===a||!r)&&setTimeout)return r=setTimeout,setTimeout(y,0);try{return r(y,0)}catch{try{return r.call(null,y,0)}catch{return r.call(this||hr,y,0)}}}function i(y){if(t===clearTimeout)return clearTimeout(y);if((t===u||!t)&&clearTimeout)return t=clearTimeout,clearTimeout(y);try{return t(y)}catch{try{return t.call(null,y)}catch{return t.call(this||hr,y)}}}var s=[],o=!1,l,h=-1;function f(){!o||!l||(o=!1,l.length?s=l.concat(s):h=-1,s.length&&d())}function d(){if(!o){var y=n(f);o=!0;for(var A=s.length;A;){for(l=s,s=[];++h<A;)l&&l[h].run();h=-1,A=s.length}l=null,o=!1,i(y)}}e.nextTick=function(y){var A=new Array(arguments.length-1);if(arguments.length>1)for(var M=1;M<arguments.length;M++)A[M-1]=arguments[M];s.push(new m(y,A)),s.length===1&&!o&&n(d)};function m(y,A){(this||hr).fun=y,(this||hr).array=A}m.prototype.run=function(){(this||hr).fun.apply(null,(this||hr).array)},e.title="browser",e.browser=!0,e.env={},e.argv=[],e.version="",e.versions={};function b(){}return e.on=b,e.addListener=b,e.once=b,e.off=b,e.removeListener=b,e.removeAllListeners=b,e.emit=b,e.prependListener=b,e.prependOnceListener=b,e.listeners=function(y){return[]},e.binding=function(y){throw new Error("process.binding is not supported")},e.cwd=function(){return"/"},e.chdir=function(y){throw new Error("process.chdir is not supported")},e.umask=function(){return 0},ti}var ti,lo,hr,Je,Da=ht(()=>{ce(),de(),fe(),ti={},lo=!1,hr=typeof globalThis<"u"?globalThis:typeof self<"u"?self:global,Je=oh(),Je.platform="browser",Je.addListener,Je.argv,Je.binding,Je.browser,Je.chdir,Je.cwd,Je.emit,Je.env,Je.listeners,Je.nextTick,Je.off,Je.on,Je.once,Je.prependListener,Je.prependOnceListener,Je.removeAllListeners,Je.removeListener,Je.title,Je.umask,Je.version,Je.versions});function sh(){if(uo)return ri;uo=!0;var e=Je;function r(n){if(typeof n!="string")throw new TypeError("Path must be a string. Received "+JSON.stringify(n))}function t(n,i){for(var s="",o=0,l=-1,h=0,f,d=0;d<=n.length;++d){if(d<n.length)f=n.charCodeAt(d);else{if(f===47)break;f=47}if(f===47){if(!(l===d-1||h===1))if(l!==d-1&&h===2){if(s.length<2||o!==2||s.charCodeAt(s.length-1)!==46||s.charCodeAt(s.length-2)!==46){if(s.length>2){var m=s.lastIndexOf("/");if(m!==s.length-1){m===-1?(s="",o=0):(s=s.slice(0,m),o=s.length-1-s.lastIndexOf("/")),l=d,h=0;continue}}else if(s.length===2||s.length===1){s="",o=0,l=d,h=0;continue}}i&&(s.length>0?s+="/..":s="..",o=2)}else s.length>0?s+="/"+n.slice(l+1,d):s=n.slice(l+1,d),o=d-l-1;l=d,h=0}else f===46&&h!==-1?++h:h=-1}return s}function a(n,i){var s=i.dir||i.root,o=i.base||(i.name||"")+(i.ext||"");return s?s===i.root?s+o:s+n+o:o}var u={resolve:function(){for(var n="",i=!1,s,o=arguments.length-1;o>=-1&&!i;o--){var l;o>=0?l=arguments[o]:(s===void 0&&(s=e.cwd()),l=s),r(l),l.length!==0&&(n=l+"/"+n,i=l.charCodeAt(0)===47)}return n=t(n,!i),i?n.length>0?"/"+n:"/":n.length>0?n:"."},normalize:function(n){if(r(n),n.length===0)return".";var i=n.charCodeAt(0)===47,s=n.charCodeAt(n.length-1)===47;return n=t(n,!i),n.length===0&&!i&&(n="."),n.length>0&&s&&(n+="/"),i?"/"+n:n},isAbsolute:function(n){return r(n),n.length>0&&n.charCodeAt(0)===47},join:function(){if(arguments.length===0)return".";for(var n,i=0;i<arguments.length;++i){var s=arguments[i];r(s),s.length>0&&(n===void 0?n=s:n+="/"+s)}return n===void 0?".":u.normalize(n)},relative:function(n,i){if(r(n),r(i),n===i||(n=u.resolve(n),i=u.resolve(i),n===i))return"";for(var s=1;s<n.length&&n.charCodeAt(s)===47;++s);for(var o=n.length,l=o-s,h=1;h<i.length&&i.charCodeAt(h)===47;++h);for(var f=i.length,d=f-h,m=l<d?l:d,b=-1,y=0;y<=m;++y){if(y===m){if(d>m){if(i.charCodeAt(h+y)===47)return i.slice(h+y+1);if(y===0)return i.slice(h+y)}else l>m&&(n.charCodeAt(s+y)===47?b=y:y===0&&(b=0));break}var A=n.charCodeAt(s+y),M=i.charCodeAt(h+y);if(A!==M)break;A===47&&(b=y)}var C="";for(y=s+b+1;y<=o;++y)(y===o||n.charCodeAt(y)===47)&&(C.length===0?C+="..":C+="/..");return C.length>0?C+i.slice(h+b):(h+=b,i.charCodeAt(h)===47&&++h,i.slice(h))},_makeLong:function(n){return n},dirname:function(n){if(r(n),n.length===0)return".";for(var i=n.charCodeAt(0),s=i===47,o=-1,l=!0,h=n.length-1;h>=1;--h)if(i=n.charCodeAt(h),i===47){if(!l){o=h;break}}else l=!1;return o===-1?s?"/":".":s&&o===1?"//":n.slice(0,o)},basename:function(n,i){if(i!==void 0&&typeof i!="string")throw new TypeError('"ext" argument must be a string');r(n);var s=0,o=-1,l=!0,h;if(i!==void 0&&i.length>0&&i.length<=n.length){if(i.length===n.length&&i===n)return"";var f=i.length-1,d=-1;for(h=n.length-1;h>=0;--h){var m=n.charCodeAt(h);if(m===47){if(!l){s=h+1;break}}else d===-1&&(l=!1,d=h+1),f>=0&&(m===i.charCodeAt(f)?--f===-1&&(o=h):(f=-1,o=d))}return s===o?o=d:o===-1&&(o=n.length),n.slice(s,o)}else{for(h=n.length-1;h>=0;--h)if(n.charCodeAt(h)===47){if(!l){s=h+1;break}}else o===-1&&(l=!1,o=h+1);return o===-1?"":n.slice(s,o)}},extname:function(n){r(n);for(var i=-1,s=0,o=-1,l=!0,h=0,f=n.length-1;f>=0;--f){var d=n.charCodeAt(f);if(d===47){if(!l){s=f+1;break}continue}o===-1&&(l=!1,o=f+1),d===46?i===-1?i=f:h!==1&&(h=1):i!==-1&&(h=-1)}return i===-1||o===-1||h===0||h===1&&i===o-1&&i===s+1?"":n.slice(i,o)},format:function(n){if(n===null||typeof n!="object")throw new TypeError('The "pathObject" argument must be of type Object. Received type '+typeof n);return a("/",n)},parse:function(n){r(n);var i={root:"",dir:"",base:"",ext:"",name:""};if(n.length===0)return i;var s=n.charCodeAt(0),o=s===47,l;o?(i.root="/",l=1):l=0;for(var h=-1,f=0,d=-1,m=!0,b=n.length-1,y=0;b>=l;--b){if(s=n.charCodeAt(b),s===47){if(!m){f=b+1;break}continue}d===-1&&(m=!1,d=b+1),s===46?h===-1?h=b:y!==1&&(y=1):h!==-1&&(y=-1)}return h===-1||d===-1||y===0||y===1&&h===d-1&&h===f+1?d!==-1&&(f===0&&o?i.base=i.name=n.slice(1,d):i.base=i.name=n.slice(f,d)):(f===0&&o?(i.name=n.slice(1,h),i.base=n.slice(1,d)):(i.name=n.slice(f,h),i.base=n.slice(f,d)),i.ext=n.slice(h,d)),f>0?i.dir=n.slice(0,f-1):o&&(i.dir="/"),i},sep:"/",delimiter:":",win32:null,posix:null};return u.posix=u,ri=u,ri}var ri,uo,ho,ah=ht(()=>{ce(),de(),fe(),Da(),ri={},uo=!1,ho=sh()}),Fa={};wr(Fa,{URL:()=>nl,Url:()=>Za,default:()=>We,fileURLToPath:()=>Wa,format:()=>el,parse:()=>il,pathToFileURL:()=>qa,resolve:()=>tl,resolveObject:()=>rl});function Et(){this.protocol=null,this.slashes=null,this.auth=null,this.host=null,this.port=null,this.hostname=null,this.hash=null,this.search=null,this.query=null,this.pathname=null,this.path=null,this.href=null}function Ur(e,r,t){if(e&&kt.isObject(e)&&e instanceof Et)return e;var a=new Et;return a.parse(e,r,t),a}function lh(){if(co)return ii;co=!0;var e=et;function r(n){if(typeof n!="string")throw new TypeError("Path must be a string. Received "+JSON.stringify(n))}function t(n,i){for(var s="",o=0,l=-1,h=0,f,d=0;d<=n.length;++d){if(d<n.length)f=n.charCodeAt(d);else{if(f===47)break;f=47}if(f===47){if(!(l===d-1||h===1))if(l!==d-1&&h===2){if(s.length<2||o!==2||s.charCodeAt(s.length-1)!==46||s.charCodeAt(s.length-2)!==46){if(s.length>2){var m=s.lastIndexOf("/");if(m!==s.length-1){m===-1?(s="",o=0):(s=s.slice(0,m),o=s.length-1-s.lastIndexOf("/")),l=d,h=0;continue}}else if(s.length===2||s.length===1){s="",o=0,l=d,h=0;continue}}i&&(s.length>0?s+="/..":s="..",o=2)}else s.length>0?s+="/"+n.slice(l+1,d):s=n.slice(l+1,d),o=d-l-1;l=d,h=0}else f===46&&h!==-1?++h:h=-1}return s}function a(n,i){var s=i.dir||i.root,o=i.base||(i.name||"")+(i.ext||"");return s?s===i.root?s+o:s+n+o:o}var u={resolve:function(){for(var n="",i=!1,s,o=arguments.length-1;o>=-1&&!i;o--){var l;o>=0?l=arguments[o]:(s===void 0&&(s=e.cwd()),l=s),r(l),l.length!==0&&(n=l+"/"+n,i=l.charCodeAt(0)===47)}return n=t(n,!i),i?n.length>0?"/"+n:"/":n.length>0?n:"."},normalize:function(n){if(r(n),n.length===0)return".";var i=n.charCodeAt(0)===47,s=n.charCodeAt(n.length-1)===47;return n=t(n,!i),n.length===0&&!i&&(n="."),n.length>0&&s&&(n+="/"),i?"/"+n:n},isAbsolute:function(n){return r(n),n.length>0&&n.charCodeAt(0)===47},join:function(){if(arguments.length===0)return".";for(var n,i=0;i<arguments.length;++i){var s=arguments[i];r(s),s.length>0&&(n===void 0?n=s:n+="/"+s)}return n===void 0?".":u.normalize(n)},relative:function(n,i){if(r(n),r(i),n===i||(n=u.resolve(n),i=u.resolve(i),n===i))return"";for(var s=1;s<n.length&&n.charCodeAt(s)===47;++s);for(var o=n.length,l=o-s,h=1;h<i.length&&i.charCodeAt(h)===47;++h);for(var f=i.length,d=f-h,m=l<d?l:d,b=-1,y=0;y<=m;++y){if(y===m){if(d>m){if(i.charCodeAt(h+y)===47)return i.slice(h+y+1);if(y===0)return i.slice(h+y)}else l>m&&(n.charCodeAt(s+y)===47?b=y:y===0&&(b=0));break}var A=n.charCodeAt(s+y),M=i.charCodeAt(h+y);if(A!==M)break;A===47&&(b=y)}var C="";for(y=s+b+1;y<=o;++y)(y===o||n.charCodeAt(y)===47)&&(C.length===0?C+="..":C+="/..");return C.length>0?C+i.slice(h+b):(h+=b,i.charCodeAt(h)===47&&++h,i.slice(h))},_makeLong:function(n){return n},dirname:function(n){if(r(n),n.length===0)return".";for(var i=n.charCodeAt(0),s=i===47,o=-1,l=!0,h=n.length-1;h>=1;--h)if(i=n.charCodeAt(h),i===47){if(!l){o=h;break}}else l=!1;return o===-1?s?"/":".":s&&o===1?"//":n.slice(0,o)},basename:function(n,i){if(i!==void 0&&typeof i!="string")throw new TypeError('"ext" argument must be a string');r(n);var s=0,o=-1,l=!0,h;if(i!==void 0&&i.length>0&&i.length<=n.length){if(i.length===n.length&&i===n)return"";var f=i.length-1,d=-1;for(h=n.length-1;h>=0;--h){var m=n.charCodeAt(h);if(m===47){if(!l){s=h+1;break}}else d===-1&&(l=!1,d=h+1),f>=0&&(m===i.charCodeAt(f)?--f===-1&&(o=h):(f=-1,o=d))}return s===o?o=d:o===-1&&(o=n.length),n.slice(s,o)}else{for(h=n.length-1;h>=0;--h)if(n.charCodeAt(h)===47){if(!l){s=h+1;break}}else o===-1&&(l=!1,o=h+1);return o===-1?"":n.slice(s,o)}},extname:function(n){r(n);for(var i=-1,s=0,o=-1,l=!0,h=0,f=n.length-1;f>=0;--f){var d=n.charCodeAt(f);if(d===47){if(!l){s=f+1;break}continue}o===-1&&(l=!1,o=f+1),d===46?i===-1?i=f:h!==1&&(h=1):i!==-1&&(h=-1)}return i===-1||o===-1||h===0||h===1&&i===o-1&&i===s+1?"":n.slice(i,o)},format:function(n){if(n===null||typeof n!="object")throw new TypeError('The "pathObject" argument must be of type Object. Received type '+typeof n);return a("/",n)},parse:function(n){r(n);var i={root:"",dir:"",base:"",ext:"",name:""};if(n.length===0)return i;var s=n.charCodeAt(0),o=s===47,l;o?(i.root="/",l=1):l=0;for(var h=-1,f=0,d=-1,m=!0,b=n.length-1,y=0;b>=l;--b){if(s=n.charCodeAt(b),s===47){if(!m){f=b+1;break}continue}d===-1&&(m=!1,d=b+1),s===46?h===-1?h=b:y!==1&&(y=1):h!==-1&&(y=-1)}return h===-1||d===-1||y===0||y===1&&h===d-1&&h===f+1?d!==-1&&(f===0&&o?i.base=i.name=n.slice(1,d):i.base=i.name=n.slice(f,d)):(f===0&&o?(i.name=n.slice(1,h),i.base=n.slice(1,d)):(i.name=n.slice(f,h),i.base=n.slice(f,d)),i.ext=n.slice(h,d)),f>0?i.dir=n.slice(0,f-1):o&&(i.dir="/"),i},sep:"/",delimiter:":",win32:null,posix:null};return u.posix=u,ii=u,ii}function uh(e){if(typeof e=="string")e=new URL(e);else if(!(e instanceof URL))throw new Deno.errors.InvalidData("invalid argument path , must be a string or URL");if(e.protocol!=="file:")throw new Deno.errors.InvalidData("invalid url scheme");return di?hh(e):ch(e)}function hh(e){let r=e.hostname,t=e.pathname;for(let a=0;a<t.length;a++)if(t[a]==="%"){let u=t.codePointAt(a+2)||32;if(t[a+1]==="2"&&u===102||t[a+1]==="5"&&u===99)throw new Deno.errors.InvalidData("must not include encoded \\ or / characters")}if(t=t.replace(Ya,"\\"),t=decodeURIComponent(t),r!=="")return`\\\\${r}${t}`;{let a=t.codePointAt(1)|32,u=t[2];if(a<za||a>Ka||u!==":")throw new Deno.errors.InvalidData("file url path must be absolute");return t.slice(1)}}function ch(e){if(e.hostname!=="")throw new Deno.errors.InvalidData("invalid file url hostname");let r=e.pathname;for(let t=0;t<r.length;t++)if(r[t]==="%"){let a=r.codePointAt(t+2)||32;if(r[t+1]==="2"&&a===102)throw new Deno.errors.InvalidData("must not include encoded / characters")}return decodeURIComponent(r)}function fh(e){let r=fo.resolve(e),t=e.charCodeAt(e.length-1);(t===Va||di&&t===Ha)&&r[r.length-1]!==fo.sep&&(r+="/");let a=new URL("file://");return r.includes("%")&&(r=r.replace(Qa,"%25")),!di&&r.includes("\\")&&(r=r.replace(Ga,"%5C")),r.includes(`
`)&&(r=r.replace(Ja,"%0A")),r.includes("\r")&&(r=r.replace($a,"%0D")),r.includes("	")&&(r=r.replace(Xa,"%09")),a.pathname=r,a}function Wa(e){if(typeof e=="string")e=new URL(e);else if(!(e instanceof URL))throw new Deno.errors.InvalidData("invalid argument path , must be a string or URL");if(e.protocol!=="file:")throw new Deno.errors.InvalidData("invalid url scheme");return pi?dh(e):ph(e)}function dh(e){let r=e.hostname,t=e.pathname;for(let a=0;a<t.length;a++)if(t[a]==="%"){let u=t.codePointAt(a+2)||32;if(t[a+1]==="2"&&u===102||t[a+1]==="5"&&u===99)throw new Deno.errors.InvalidData("must not include encoded \\ or / characters")}if(t=t.replace(ul,"\\"),t=decodeURIComponent(t),r!=="")return`\\\\${r}${t}`;{let a=t.codePointAt(1)|32,u=t[2];if(a<al||a>ll||u!==":")throw new Deno.errors.InvalidData("file url path must be absolute");return t.slice(1)}}function ph(e){if(e.hostname!=="")throw new Deno.errors.InvalidData("invalid file url hostname");let r=e.pathname;for(let t=0;t<r.length;t++)if(r[t]==="%"){let a=r.codePointAt(t+2)||32;if(r[t+1]==="2"&&a===102)throw new Deno.errors.InvalidData("must not include encoded / characters")}return decodeURIComponent(r)}function qa(e){let r=ho.resolve(e),t=e.charCodeAt(e.length-1);(t===sl||pi&&t===ol)&&r[r.length-1]!==ho.sep&&(r+="/");let a=new URL("file://");return r.includes("%")&&(r=r.replace(hl,"%25")),!pi&&r.includes("\\")&&(r=r.replace(cl,"%5C")),r.includes(`
`)&&(r=r.replace(fl,"%0A")),r.includes("\r")&&(r=r.replace(dl,"%0D")),r.includes("	")&&(r=r.replace(pl,"%09")),a.pathname=r,a}var We,ss,kt,as,ls,us,hs,zr,Ni,ji,Di,cs,fs,Kr,ur,Yr,ii,co,fo,ds,Ha,Va,za,Ka,di,Ya,Qa,Ga,Ja,$a,Xa,ps,Za,el,tl,rl,il,nl,ol,sl,al,ll,pi,ul,hl,cl,fl,dl,pl,gh=ht(()=>{ce(),de(),fe(),eh(),rh(),nh(),ah(),Da(),We={},ss=er,kt={isString:function(e){return typeof e=="string"},isObject:function(e){return typeof e=="object"&&e!==null},isNull:function(e){return e===null},isNullOrUndefined:function(e){return e==null}},We.parse=Ur,We.resolve=function(e,r){return Ur(e,!1,!0).resolve(r)},We.resolveObject=function(e,r){return e?Ur(e,!1,!0).resolveObject(r):r},We.format=function(e){return kt.isString(e)&&(e=Ur(e)),e instanceof Et?e.format():Et.prototype.format.call(e)},We.Url=Et,as=/^([a-z0-9.+-]+:)/i,ls=/:[0-9]*$/,us=/^(\/\/?(?!\/)[^\?\s]*)(\?[^\s]*)?$/,hs=["{","}","|","\\","^","`"].concat(["<",">",'"',"`"," ","\r",`
`,"	"]),zr=["'"].concat(hs),Ni=["%","/","?",";","#"].concat(zr),ji=["/","?","#"],Di=/^[+a-z0-9A-Z_-]{0,63}$/,cs=/^([+a-z0-9A-Z_-]{0,63})(.*)$/,fs={javascript:!0,"javascript:":!0},Kr={javascript:!0,"javascript:":!0},ur={http:!0,https:!0,ftp:!0,gopher:!0,file:!0,"http:":!0,"https:":!0,"ftp:":!0,"gopher:":!0,"file:":!0},Yr=Ot,Et.prototype.parse=function(e,r,t){if(!kt.isString(e))throw new TypeError("Parameter 'url' must be a string, not "+typeof e);var a=e.indexOf("?"),u=a!==-1&&a<e.indexOf("#")?"?":"#",n=e.split(u);n[0]=n[0].replace(/\\/g,"/");var i=e=n.join(u);if(i=i.trim(),!t&&e.split("#").length===1){var s=us.exec(i);if(s)return this.path=i,this.href=i,this.pathname=s[1],s[2]?(this.search=s[2],this.query=r?Yr.parse(this.search.substr(1)):this.search.substr(1)):r&&(this.search="",this.query={}),this}var o=as.exec(i);if(o){var l=(o=o[0]).toLowerCase();this.protocol=l,i=i.substr(o.length)}if(t||o||i.match(/^\/\/[^@\/]+@[^@\/]+/)){var h=i.substr(0,2)==="//";!h||o&&Kr[o]||(i=i.substr(2),this.slashes=!0)}if(!Kr[o]&&(h||o&&!ur[o])){for(var f,d,m=-1,b=0;b<ji.length;b++)(y=i.indexOf(ji[b]))!==-1&&(m===-1||y<m)&&(m=y);for((d=m===-1?i.lastIndexOf("@"):i.lastIndexOf("@",m))!==-1&&(f=i.slice(0,d),i=i.slice(d+1),this.auth=decodeURIComponent(f)),m=-1,b=0;b<Ni.length;b++){var y;(y=i.indexOf(Ni[b]))!==-1&&(m===-1||y<m)&&(m=y)}m===-1&&(m=i.length),this.host=i.slice(0,m),i=i.slice(m),this.parseHost(),this.hostname=this.hostname||"";var A=this.hostname[0]==="["&&this.hostname[this.hostname.length-1]==="]";if(!A)for(var M=this.hostname.split(/\./),C=(b=0,M.length);b<C;b++){var E=M[b];if(E&&!E.match(Di)){for(var L="",D=0,I=E.length;D<I;D++)E.charCodeAt(D)>127?L+="x":L+=E[D];if(!L.match(Di)){var T=M.slice(0,b),x=M.slice(b+1),q=E.match(cs);q&&(T.push(q[1]),x.unshift(q[2])),x.length&&(i="/"+x.join(".")+i),this.hostname=T.join(".");break}}}this.hostname.length>255?this.hostname="":this.hostname=this.hostname.toLowerCase(),A||(this.hostname=ss.toASCII(this.hostname));var G=this.port?":"+this.port:"",te=this.hostname||"";this.host=te+G,this.href+=this.host,A&&(this.hostname=this.hostname.substr(1,this.hostname.length-2),i[0]!=="/"&&(i="/"+i))}if(!fs[l])for(b=0,C=zr.length;b<C;b++){var v=zr[b];if(i.indexOf(v)!==-1){var V=encodeURIComponent(v);V===v&&(V=escape(v)),i=i.split(v).join(V)}}var Z=i.indexOf("#");Z!==-1&&(this.hash=i.substr(Z),i=i.slice(0,Z));var K=i.indexOf("?");if(K!==-1?(this.search=i.substr(K),this.query=i.substr(K+1),r&&(this.query=Yr.parse(this.query)),i=i.slice(0,K)):r&&(this.search="",this.query={}),i&&(this.pathname=i),ur[l]&&this.hostname&&!this.pathname&&(this.pathname="/"),this.pathname||this.search){G=this.pathname||"";var me=this.search||"";this.path=G+me}return this.href=this.format(),this},Et.prototype.format=function(){var e=this.auth||"";e&&(e=(e=encodeURIComponent(e)).replace(/%3A/i,":"),e+="@");var r=this.protocol||"",t=this.pathname||"",a=this.hash||"",u=!1,n="";this.host?u=e+this.host:this.hostname&&(u=e+(this.hostname.indexOf(":")===-1?this.hostname:"["+this.hostname+"]"),this.port&&(u+=":"+this.port)),this.query&&kt.isObject(this.query)&&Object.keys(this.query).length&&(n=Yr.stringify(this.query));var i=this.search||n&&"?"+n||"";return r&&r.substr(-1)!==":"&&(r+=":"),this.slashes||(!r||ur[r])&&u!==!1?(u="//"+(u||""),t&&t.charAt(0)!=="/"&&(t="/"+t)):u||(u=""),a&&a.charAt(0)!=="#"&&(a="#"+a),i&&i.charAt(0)!=="?"&&(i="?"+i),r+u+(t=t.replace(/[?#]/g,function(s){return encodeURIComponent(s)}))+(i=i.replace("#","%23"))+a},Et.prototype.resolve=function(e){return this.resolveObject(Ur(e,!1,!0)).format()},Et.prototype.resolveObject=function(e){if(kt.isString(e)){var r=new Et;r.parse(e,!1,!0),e=r}for(var t=new Et,a=Object.keys(this),u=0;u<a.length;u++){var n=a[u];t[n]=this[n]}if(t.hash=e.hash,e.href==="")return t.href=t.format(),t;if(e.slashes&&!e.protocol){for(var i=Object.keys(e),s=0;s<i.length;s++){var o=i[s];o!=="protocol"&&(t[o]=e[o])}return ur[t.protocol]&&t.hostname&&!t.pathname&&(t.path=t.pathname="/"),t.href=t.format(),t}if(e.protocol&&e.protocol!==t.protocol){if(!ur[e.protocol]){for(var l=Object.keys(e),h=0;h<l.length;h++){var f=l[h];t[f]=e[f]}return t.href=t.format(),t}if(t.protocol=e.protocol,e.host||Kr[e.protocol])t.pathname=e.pathname;else{for(var d=(e.pathname||"").split("/");d.length&&!(e.host=d.shift()););e.host||(e.host=""),e.hostname||(e.hostname=""),d[0]!==""&&d.unshift(""),d.length<2&&d.unshift(""),t.pathname=d.join("/")}if(t.search=e.search,t.query=e.query,t.host=e.host||"",t.auth=e.auth,t.hostname=e.hostname||e.host,t.port=e.port,t.pathname||t.search){var m=t.pathname||"",b=t.search||"";t.path=m+b}return t.slashes=t.slashes||e.slashes,t.href=t.format(),t}var y=t.pathname&&t.pathname.charAt(0)==="/",A=e.host||e.pathname&&e.pathname.charAt(0)==="/",M=A||y||t.host&&e.pathname,C=M,E=t.pathname&&t.pathname.split("/")||[],L=(d=e.pathname&&e.pathname.split("/")||[],t.protocol&&!ur[t.protocol]);if(L&&(t.hostname="",t.port=null,t.host&&(E[0]===""?E[0]=t.host:E.unshift(t.host)),t.host="",e.protocol&&(e.hostname=null,e.port=null,e.host&&(d[0]===""?d[0]=e.host:d.unshift(e.host)),e.host=null),M=M&&(d[0]===""||E[0]==="")),A)t.host=e.host||e.host===""?e.host:t.host,t.hostname=e.hostname||e.hostname===""?e.hostname:t.hostname,t.search=e.search,t.query=e.query,E=d;else if(d.length)E||(E=[]),E.pop(),E=E.concat(d),t.search=e.search,t.query=e.query;else if(!kt.isNullOrUndefined(e.search))return L&&(t.hostname=t.host=E.shift(),(q=!!(t.host&&t.host.indexOf("@")>0)&&t.host.split("@"))&&(t.auth=q.shift(),t.host=t.hostname=q.shift())),t.search=e.search,t.query=e.query,kt.isNull(t.pathname)&&kt.isNull(t.search)||(t.path=(t.pathname?t.pathname:"")+(t.search?t.search:"")),t.href=t.format(),t;if(!E.length)return t.pathname=null,t.search?t.path="/"+t.search:t.path=null,t.href=t.format(),t;for(var D=E.slice(-1)[0],I=(t.host||e.host||E.length>1)&&(D==="."||D==="..")||D==="",T=0,x=E.length;x>=0;x--)(D=E[x])==="."?E.splice(x,1):D===".."?(E.splice(x,1),T++):T&&(E.splice(x,1),T--);if(!M&&!C)for(;T--;T)E.unshift("..");!M||E[0]===""||E[0]&&E[0].charAt(0)==="/"||E.unshift(""),I&&E.join("/").substr(-1)!=="/"&&E.push("");var q,G=E[0]===""||E[0]&&E[0].charAt(0)==="/";return L&&(t.hostname=t.host=G?"":E.length?E.shift():"",(q=!!(t.host&&t.host.indexOf("@")>0)&&t.host.split("@"))&&(t.auth=q.shift(),t.host=t.hostname=q.shift())),(M=M||t.host&&E.length)&&!G&&E.unshift(""),E.length?t.pathname=E.join("/"):(t.pathname=null,t.path=null),kt.isNull(t.pathname)&&kt.isNull(t.search)||(t.path=(t.pathname?t.pathname:"")+(t.search?t.search:"")),t.auth=e.auth||t.auth,t.slashes=t.slashes||e.slashes,t.href=t.format(),t},Et.prototype.parseHost=function(){var e=this.host,r=ls.exec(e);r&&((r=r[0])!==":"&&(this.port=r.substr(1)),e=e.substr(0,e.length-r.length)),e&&(this.hostname=e)},We.Url,We.format,We.resolve,We.resolveObject,ii={},co=!1,fo=lh(),ds=typeof Deno<"u"?Deno.build.os==="windows"?"win32":Deno.build.os:void 0,We.URL=typeof URL<"u"?URL:null,We.pathToFileURL=fh,We.fileURLToPath=uh,We.Url,We.format,We.resolve,We.resolveObject,We.URL,Ha=92,Va=47,za=97,Ka=122,di=ds==="win32",Ya=/\//g,Qa=/%/g,Ga=/\\/g,Ja=/\n/g,$a=/\r/g,Xa=/\t/g,ps=typeof Deno<"u"?Deno.build.os==="windows"?"win32":Deno.build.os:void 0,We.URL=typeof URL<"u"?URL:null,We.pathToFileURL=qa,We.fileURLToPath=Wa,Za=We.Url,el=We.format,tl=We.resolve,rl=We.resolveObject,il=We.parse,nl=We.URL,ol=92,sl=47,al=97,ll=122,pi=ps==="win32",ul=/\//g,hl=/%/g,cl=/\\/g,fl=/\n/g,dl=/\r/g,pl=/\t/g}),mh=ve((e,r)=>{ce(),de(),fe(),r.exports=function(){throw new Error("ws does not work in the browser. Browser clients must use the native WebSocket object")}}),Io=ve(e=>{ce(),de(),fe(),Object.defineProperty(e,"__esModule",{value:!0}),e.BufferedDuplex=e.writev=void 0;var r=Er(),t=(ft(),Ke(ct));function a(n,i){let s=new Array(n.length);for(let o=0;o<n.length;o++)typeof n[o].chunk=="string"?s[o]=t.Buffer.from(n[o].chunk,"utf8"):s[o]=n[o].chunk;this._write(t.Buffer.concat(s),"binary",i)}e.writev=a;var u=class extends r.Duplex{constructor(n,i,s){super({objectMode:!0}),this.proxy=i,this.socket=s,this.writeQueue=[],n.objectMode||(this._writev=a.bind(this)),this.isSocketOpen=!1,this.proxy.on("data",o=>{this.destroyed||this.push(o)})}_read(n){this.proxy.read(n)}_write(n,i,s){this.isSocketOpen?this.writeToProxy(n,i,s):this.writeQueue.push({chunk:n,encoding:i,cb:s})}_final(n){this.writeQueue=[],this.proxy.end(n)}_destroy(n,i){this.writeQueue=[],this.proxy.destroy(),i(n)}socketReady(){this.emit("connect"),this.isSocketOpen=!0,this.processWriteQueue()}writeToProxy(n,i,s){this.proxy.write(n,i)===!1?this.proxy.once("drain",s):s()}processWriteQueue(){for(;this.writeQueue.length>0;){let{chunk:n,encoding:i,cb:s}=this.writeQueue.shift();this.writeToProxy(n,i,s)}}};e.BufferedDuplex=u}),Qr=ve(e=>{ce(),de(),fe();var r=e&&e.__importDefault||function(M){return M&&M.__esModule?M:{default:M}};Object.defineProperty(e,"__esModule",{value:!0}),e.streamBuilder=e.browserStreamBuilder=void 0;var t=(ft(),Ke(ct)),a=r(mh()),u=r(Kt()),n=Er(),i=r(Ei()),s=Io(),o=(0,u.default)("mqttjs:ws"),l=["rejectUnauthorized","ca","cert","key","pfx","passphrase"];function h(M,C){let E=`${M.protocol}://${M.hostname}:${M.port}${M.path}`;return typeof M.transformWsUrl=="function"&&(E=M.transformWsUrl(E,M,C)),E}function f(M){let C=M;return M.port||(M.protocol==="wss"?C.port=443:C.port=80),M.path||(C.path="/"),M.wsOptions||(C.wsOptions={}),!i.default&&!M.forceNativeWebSocket&&M.protocol==="wss"&&l.forEach(E=>{Object.prototype.hasOwnProperty.call(M,E)&&!Object.prototype.hasOwnProperty.call(M.wsOptions,E)&&(C.wsOptions[E]=M[E])}),C}function d(M){let C=f(M);if(C.hostname||(C.hostname=C.host),!C.hostname){if(typeof document>"u")throw new Error("Could not determine host. Specify host manually.");let E=new URL(document.URL);C.hostname=E.hostname,C.port||(C.port=Number(E.port))}return C.objectMode===void 0&&(C.objectMode=!(C.binary===!0||C.binary===void 0)),C}function m(M,C,E){o("createWebSocket"),o(`protocol: ${E.protocolId} ${E.protocolVersion}`);let L=E.protocolId==="MQIsdp"&&E.protocolVersion===3?"mqttv3.1":"mqtt";o(`creating new Websocket for url: ${C} and protocol: ${L}`);let D;return E.createWebsocket?D=E.createWebsocket(C,[L],E):D=new a.default(C,[L],E.wsOptions),D}function b(M,C){let E=C.protocolId==="MQIsdp"&&C.protocolVersion===3?"mqttv3.1":"mqtt",L=h(C,M),D;return C.createWebsocket?D=C.createWebsocket(L,[E],C):D=new WebSocket(L,[E]),D.binaryType="arraybuffer",D}var y=(M,C)=>{o("streamBuilder");let E=f(C);E.hostname=E.hostname||E.host||"localhost";let L=h(E,M),D=m(M,L,E),I=a.default.createWebSocketStream(D,E.wsOptions);return I.url=L,D.on("close",()=>{I.destroy()}),I};e.streamBuilder=y;var A=(M,C)=>{o("browserStreamBuilder");let E,L=d(C).browserBufferSize||1024*512,D=C.browserBufferTimeout||1e3,I=!C.objectMode,T=b(M,C),x=G(C,K,me);C.objectMode||(x._writev=s.writev.bind(x)),x.on("close",()=>{T.close()});let q=typeof T.addEventListener<"u";T.readyState===T.OPEN?(E=x,E.socket=T):(E=new s.BufferedDuplex(C,x,T),q?T.addEventListener("open",te):T.onopen=te),q?(T.addEventListener("close",v),T.addEventListener("error",V),T.addEventListener("message",Z)):(T.onclose=v,T.onerror=V,T.onmessage=Z);function G(oe,H,be){let ie=new n.Transform({objectMode:oe.objectMode});return ie._write=H,ie._flush=be,ie}function te(){o("WebSocket onOpen"),E instanceof s.BufferedDuplex&&E.socketReady()}function v(oe){o("WebSocket onClose",oe),E.end(),E.destroy()}function V(oe){o("WebSocket onError",oe);let H=new Error("WebSocket error");H.event=oe,E.destroy(H)}async function Z(oe){let{data:H}=oe;H instanceof ArrayBuffer?H=t.Buffer.from(H):H instanceof Blob?H=t.Buffer.from(await new Response(H).arrayBuffer()):H=t.Buffer.from(H,"utf8"),x&&!x.destroyed&&x.push(H)}function K(oe,H,be){if(T.bufferedAmount>L){setTimeout(K,D,oe,H,be);return}I&&typeof oe=="string"&&(oe=t.Buffer.from(oe,"utf8"));try{T.send(oe)}catch(ie){return be(ie)}be()}function me(oe){T.close(),oe()}return E};e.browserStreamBuilder=A}),ko={};wr(ko,{Server:()=>$e,Socket:()=>$e,Stream:()=>$e,_createServerHandle:()=>$e,_normalizeArgs:()=>$e,_setSimultaneousAccepts:()=>$e,connect:()=>$e,createConnection:()=>$e,createServer:()=>$e,default:()=>gl,isIP:()=>$e,isIPv4:()=>$e,isIPv6:()=>$e});function $e(){throw new Error("Node.js net module is not supported by JSPM core outside of Node.js")}var gl,ml=ht(()=>{ce(),de(),fe(),gl={_createServerHandle:$e,_normalizeArgs:$e,_setSimultaneousAccepts:$e,connect:$e,createConnection:$e,createServer:$e,isIP:$e,isIPv4:$e,isIPv6:$e,Server:$e,Socket:$e,Stream:$e}}),gs=ve(e=>{ce(),de(),fe();var r=e&&e.__importDefault||function(i){return i&&i.__esModule?i:{default:i}};Object.defineProperty(e,"__esModule",{value:!0});var t=r((ml(),Ke(ko))),a=r(Kt()),u=(0,a.default)("mqttjs:tcp"),n=(i,s)=>{s.port=s.port||1883,s.hostname=s.hostname||s.host||"localhost";let{port:o,path:l}=s,h=s.hostname;return u("port %d and host %s",o,h),t.default.createConnection({port:o,host:h,path:l})};e.default=n}),bl={};wr(bl,{default:()=>yl});var yl,bh=ht(()=>{ce(),de(),fe(),yl={}}),ms=ve(e=>{ce(),de(),fe();var r=e&&e.__importDefault||function(s){return s&&s.__esModule?s:{default:s}};Object.defineProperty(e,"__esModule",{value:!0});var t=r((bh(),Ke(bl))),a=r((ml(),Ke(ko))),u=r(Kt()),n=(0,u.default)("mqttjs:tls"),i=(s,o)=>{o.port=o.port||8883,o.host=o.hostname||o.host||"localhost",a.default.isIP(o.host)===0&&(o.servername=o.host),o.rejectUnauthorized=o.rejectUnauthorized!==!1,delete o.path,n("port %d host %s rejectUnauthorized %b",o.port,o.host,o.rejectUnauthorized);let l=t.default.connect(o);l.on("secureConnect",()=>{o.rejectUnauthorized&&!l.authorized?l.emit("error",new Error("TLS not authorized")):l.removeListener("error",h)});function h(f){o.rejectUnauthorized&&s.emit("error",f),l.end()}return l.on("error",h),l};e.default=i}),bs=ve(e=>{ce(),de(),fe(),Object.defineProperty(e,"__esModule",{value:!0});var r=(ft(),Ke(ct)),t=Er(),a=Io(),u,n,i;function s(){let d=new t.Transform;return d._write=(m,b,y)=>{u.send({data:m.buffer,success(){y()},fail(A){y(new Error(A))}})},d._flush=m=>{u.close({success(){m()}})},d}function o(d){d.hostname||(d.hostname="localhost"),d.path||(d.path="/"),d.wsOptions||(d.wsOptions={})}function l(d,m){let b=d.protocol==="wxs"?"wss":"ws",y=`${b}://${d.hostname}${d.path}`;return d.port&&d.port!==80&&d.port!==443&&(y=`${b}://${d.hostname}:${d.port}${d.path}`),typeof d.transformWsUrl=="function"&&(y=d.transformWsUrl(y,d,m)),y}function h(){u.onOpen(()=>{i.socketReady()}),u.onMessage(d=>{let{data:m}=d;m instanceof ArrayBuffer?m=r.Buffer.from(m):m=r.Buffer.from(m,"utf8"),n.push(m)}),u.onClose(()=>{i.emit("close"),i.end(),i.destroy()}),u.onError(d=>{let m=new Error(d.errMsg);i.destroy(m)})}var f=(d,m)=>{if(m.hostname=m.hostname||m.host,!m.hostname)throw new Error("Could not determine host. Specify host manually.");let b=m.protocolId==="MQIsdp"&&m.protocolVersion===3?"mqttv3.1":"mqtt";o(m);let y=l(m,d);u=wx.connectSocket({url:y,protocols:[b]}),n=s(),i=new a.BufferedDuplex(m,n,u),i._destroy=(M,C)=>{u.close({success(){C&&C(M)}})};let A=i.destroy;return i.destroy=(M,C)=>(i.destroy=A,setTimeout(()=>{u.close({fail(){i._destroy(M,C)}})},0),i),h(),i};e.default=f}),ys=ve(e=>{ce(),de(),fe(),Object.defineProperty(e,"__esModule",{value:!0});var r=(ft(),Ke(ct)),t=Er(),a=Io(),u,n,i,s=!1;function o(){let m=new t.Transform;return m._write=(b,y,A)=>{u.sendSocketMessage({data:b.buffer,success(){A()},fail(){A(new Error)}})},m._flush=b=>{u.closeSocket({success(){b()}})},m}function l(m){m.hostname||(m.hostname="localhost"),m.path||(m.path="/"),m.wsOptions||(m.wsOptions={})}function h(m,b){let y=m.protocol==="alis"?"wss":"ws",A=`${y}://${m.hostname}${m.path}`;return m.port&&m.port!==80&&m.port!==443&&(A=`${y}://${m.hostname}:${m.port}${m.path}`),typeof m.transformWsUrl=="function"&&(A=m.transformWsUrl(A,m,b)),A}function f(){s||(s=!0,u.onSocketOpen(()=>{i.socketReady()}),u.onSocketMessage(m=>{if(typeof m.data=="string"){let b=r.Buffer.from(m.data,"base64");n.push(b)}else{let b=new FileReader;b.addEventListener("load",()=>{let y=b.result;y instanceof ArrayBuffer?y=r.Buffer.from(y):y=r.Buffer.from(y,"utf8"),n.push(y)}),b.readAsArrayBuffer(m.data)}}),u.onSocketClose(()=>{i.end(),i.destroy()}),u.onSocketError(m=>{i.destroy(m)}))}var d=(m,b)=>{if(b.hostname=b.hostname||b.host,!b.hostname)throw new Error("Could not determine host. Specify host manually.");let y=b.protocolId==="MQIsdp"&&b.protocolVersion===3?"mqttv3.1":"mqtt";l(b);let A=h(b,m);return u=b.my,u.connectSocket({url:A,protocols:y}),n=o(),i=new a.BufferedDuplex(b,n,u),f(),i};e.default=d}),yh=ve(e=>{ce(),de(),fe();var r=e&&e.__importDefault||function(f){return f&&f.__esModule?f:{default:f}};Object.defineProperty(e,"__esModule",{value:!0}),e.connectAsync=void 0;var t=r(Kt()),a=r((gh(),Ke(Fa))),u=r(no()),n=r(Ei());typeof(De==null?void 0:De.nextTick)!="function"&&(De.nextTick=setImmediate);var i=(0,t.default)("mqttjs"),s=null;function o(f){let d;f.auth&&(d=f.auth.match(/^(.+):(.+)$/),d?(f.username=d[1],f.password=d[2]):f.username=f.auth)}function l(f,d){var m,b,y,A;if(i("connecting to an MQTT broker..."),typeof f=="object"&&!d&&(d=f,f=""),d=d||{},f&&typeof f=="string"){let E=a.default.parse(f,!0),L={};if(E.port!=null&&(L.port=Number(E.port)),L.host=E.hostname,L.query=E.query,L.auth=E.auth,L.protocol=E.protocol,L.path=E.path,L.protocol=(m=L.protocol)===null||m===void 0?void 0:m.replace(/:$/,""),d=Object.assign(Object.assign({},L),d),!d.protocol)throw new Error("Missing protocol")}if(d.unixSocket=d.unixSocket||((b=d.protocol)===null||b===void 0?void 0:b.includes("+unix")),d.unixSocket?d.protocol=d.protocol.replace("+unix",""):!(!((y=d.protocol)===null||y===void 0)&&y.startsWith("ws"))&&!(!((A=d.protocol)===null||A===void 0)&&A.startsWith("wx"))&&delete d.path,o(d),d.query&&typeof d.query.clientId=="string"&&(d.clientId=d.query.clientId),d.cert&&d.key)if(d.protocol){if(["mqtts","wss","wxs","alis"].indexOf(d.protocol)===-1)switch(d.protocol){case"mqtt":d.protocol="mqtts";break;case"ws":d.protocol="wss";break;case"wx":d.protocol="wxs";break;case"ali":d.protocol="alis";break;default:throw new Error(`Unknown protocol for secure connection: "${d.protocol}"!`)}}else throw new Error("Missing secure protocol key");if(s||(s={},!n.default&&!d.forceNativeWebSocket?(s.ws=Qr().streamBuilder,s.wss=Qr().streamBuilder,s.mqtt=gs().default,s.tcp=gs().default,s.ssl=ms().default,s.tls=s.ssl,s.mqtts=ms().default):(s.ws=Qr().browserStreamBuilder,s.wss=Qr().browserStreamBuilder,s.wx=bs().default,s.wxs=bs().default,s.ali=ys().default,s.alis=ys().default)),!s[d.protocol]){let E=["mqtts","wss"].indexOf(d.protocol)!==-1;d.protocol=["mqtt","mqtts","ws","wss","wx","wxs","ali","alis"].filter((L,D)=>E&&D%2===0?!1:typeof s[L]=="function")[0]}if(d.clean===!1&&!d.clientId)throw new Error("Missing clientId for unclean clients");d.protocol&&(d.defaultProtocol=d.protocol);function M(E){return d.servers&&((!E._reconnectCount||E._reconnectCount===d.servers.length)&&(E._reconnectCount=0),d.host=d.servers[E._reconnectCount].host,d.port=d.servers[E._reconnectCount].port,d.protocol=d.servers[E._reconnectCount].protocol?d.servers[E._reconnectCount].protocol:d.defaultProtocol,d.hostname=d.host,E._reconnectCount++),i("calling streambuilder for",d.protocol),s[d.protocol](E,d)}let C=new u.default(M,d);return C.on("error",()=>{}),C}function h(f,d,m=!0){return new Promise((b,y)=>{let A=l(f,d),M={connect:E=>{C(),b(A)},end:()=>{C(),b(A)},error:E=>{C(),A.end(),y(E)}};m===!1&&(M.close=()=>{M.error(new Error("Couldn't connect to server"))});function C(){Object.keys(M).forEach(E=>{A.off(E,M[E])})}Object.keys(M).forEach(E=>{A.on(E,M[E])})})}e.connectAsync=h,e.default=l}),ws=ve(e=>{ce(),de(),fe();var r=e&&e.__createBinding||(Object.create?function(m,b,y,A){A===void 0&&(A=y);var M=Object.getOwnPropertyDescriptor(b,y);(!M||("get"in M?!b.__esModule:M.writable||M.configurable))&&(M={enumerable:!0,get:function(){return b[y]}}),Object.defineProperty(m,A,M)}:function(m,b,y,A){A===void 0&&(A=y),m[A]=b[y]}),t=e&&e.__setModuleDefault||(Object.create?function(m,b){Object.defineProperty(m,"default",{enumerable:!0,value:b})}:function(m,b){m.default=b}),a=e&&e.__importStar||function(m){if(m&&m.__esModule)return m;var b={};if(m!=null)for(var y in m)y!=="default"&&Object.prototype.hasOwnProperty.call(m,y)&&r(b,m,y);return t(b,m),b},u=e&&e.__exportStar||function(m,b){for(var y in m)y!=="default"&&!Object.prototype.hasOwnProperty.call(b,y)&&r(b,m,y)},n=e&&e.__importDefault||function(m){return m&&m.__esModule?m:{default:m}};Object.defineProperty(e,"__esModule",{value:!0}),e.ReasonCodes=e.KeepaliveManager=e.UniqueMessageIdProvider=e.DefaultMessageIdProvider=e.Store=e.MqttClient=e.connectAsync=e.connect=e.Client=void 0;var i=n(no());e.MqttClient=i.default;var s=n(ba());e.DefaultMessageIdProvider=s.default;var o=n(Zu());e.UniqueMessageIdProvider=o.default;var l=n(ya());e.Store=l.default;var h=a(yh());e.connect=h.default,Object.defineProperty(e,"connectAsync",{enumerable:!0,get:function(){return h.connectAsync}});var f=n(xa());e.KeepaliveManager=f.default,e.Client=i.default,u(no(),e),u(Pr(),e);var d=_i();Object.defineProperty(e,"ReasonCodes",{enumerable:!0,get:function(){return d.ReasonCodes}})}),wh=ve(e=>{ce(),de(),fe();var r=e&&e.__createBinding||(Object.create?function(i,s,o,l){l===void 0&&(l=o);var h=Object.getOwnPropertyDescriptor(s,o);(!h||("get"in h?!s.__esModule:h.writable||h.configurable))&&(h={enumerable:!0,get:function(){return s[o]}}),Object.defineProperty(i,l,h)}:function(i,s,o,l){l===void 0&&(l=o),i[l]=s[o]}),t=e&&e.__setModuleDefault||(Object.create?function(i,s){Object.defineProperty(i,"default",{enumerable:!0,value:s})}:function(i,s){i.default=s}),a=e&&e.__importStar||function(i){if(i&&i.__esModule)return i;var s={};if(i!=null)for(var o in i)o!=="default"&&Object.prototype.hasOwnProperty.call(i,o)&&r(s,i,o);return t(s,i),s},u=e&&e.__exportStar||function(i,s){for(var o in i)o!=="default"&&!Object.prototype.hasOwnProperty.call(s,o)&&r(s,i,o)};Object.defineProperty(e,"__esModule",{value:!0});var n=a(ws());e.default=n,u(ws(),e)});const vh=wh();/*! Bundled license information:

@jspm/core/nodelibs/browser/buffer.js:
  (*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> *)
*/let gt,po=Il(!1);async function _h(){let e=(await Cs()).accessToken,r=await Os(e);try{gt=vh.connect("wss://mqtt.melo.se:2096/mqtt",{username:r.sub,password:e})}catch(t){console.log("catch!"),po.set(t.toString()),console.error(t)}gt.on("connect",()=>{gt.subscribe("heatpump/received"),gt.subscribe("heatpump/temperature/concat")}),gt.on("message",()=>{}),gt.on("error",t=>{po.set(t.toString()),console.error(t)})}const ni=new Map;function Eh(e,r){if(!gt||!gt.connected)throw new Error("MQTT client is not connected");gt.publish(e,r,t=>{t&&console.error(`Error publishing to topic ${e}:`,t)})}function Sh(e,r){if(!gt||!gt.connected)throw new Error("MQTT client is not connected");gt.subscribe(e,t=>{t&&console.error(`Error subscribing to topic ${e}:`,t)}),ni.has(e)||ni.set(e,[]),ni.get(e).push(r),gt.on("message",(t,a)=>{t===e&&r(a.toString())})}function Ah(e,r){if(!gt||!gt.connected)throw new Error("MQTT client is not connected");const t=ni.get(e);if(t){const a=t.indexOf(r);a!==-1&&(t.splice(a,1),t.length===0&&gt.unsubscribe(e,u=>{u&&console.error(`Error unsubscribing from topic ${e}:`,u)}))}}function vs(e){let r,t,a,u,n,i,s,o=e[0].power?"PÃ¥":"Av",l,h,f,d,m,b,y,A="High <br/>Power",M,C,E,L,D="10Â° <br/>LÃ¤ge",I,T,x,q,G,te,v="FlÃ¤kt",V,Z,K,me,oe,H="<span>|</span> <span>|</span> <span>|</span> <span>|</span>",be,ie,_e="<span>Auto</span> <span>LÃ¥g</span> <span>Med</span> <span>HÃ¶g</span>",k,Q,se,Ae,he="LÃ¤ge",B,S,z,ae,ee,X="<span>|</span> <span>|</span> <span>|</span> <span>|</span>",ue,le,P="<span>Auto</span> <span>VÃ¤rme</span> <span>Kylning</span> <span>Avfukt</span>",W,F,re,J,j="Skicka till vÃ¤rmepumpen",Y,ye,Ee,ke,Le,p;function c(N){e[7](N)}function g(N){e[8](N)}function _(N){e[9](N)}let O={updateSetting:Ar};e[0].temp!==void 0&&(O.temp=e[0].temp),e[1].temp!==void 0&&(O.disabled=e[1].temp),e[0].mode!==void 0&&(O.mode=e[0].mode),t=new Pl({props:O}),Gr.push(()=>Ii(t,"temp",c)),Gr.push(()=>Ii(t,"disabled",g)),Gr.push(()=>Ii(t,"mode",_));let w=(e[2]||e[3])&&_s(e),R=e[4]&&Es(e);return{c(){r=Ce("div"),Fi(t.$$.fragment),i=Ve(),s=Ce("button"),l=Mt(o),f=Ve(),d=Ce("div"),m=Ce("div"),b=Ce("button"),y=Ce("span"),y.innerHTML=A,C=Ve(),E=Ce("button"),L=Ce("span"),L.innerHTML=D,T=Ve(),x=Ce("div"),q=Ce("div"),G=Ce("div"),te=Ce("span"),te.textContent=v,V=Ve(),Z=Ce("div"),K=Ce("input"),me=Ve(),oe=Ce("div"),oe.innerHTML=H,be=Ve(),ie=Ce("div"),ie.innerHTML=_e,Q=Ve(),se=Ce("div"),Ae=Ce("span"),Ae.textContent=he,B=Ve(),S=Ce("div"),z=Ce("input"),ae=Ve(),ee=Ce("div"),ee.innerHTML=X,ue=Ve(),le=Ce("div"),le.innerHTML=P,F=Ve(),re=Ce("div"),J=Ce("button"),J.textContent=j,Y=Ve(),w&&w.c(),ye=Ve(),R&&R.c(),Ee=Cr(),this.h()},l(N){r=Oe(N,"DIV",{class:!0});var $=Ne(r);Wi(t.$$.fragment,$),$.forEach(Se),i=ze(N),s=Oe(N,"BUTTON",{class:!0});var ne=Ne(s);l=xt(ne,o),ne.forEach(Se),f=ze(N),d=Oe(N,"DIV",{class:!0});var we=Ne(d);m=Oe(we,"DIV",{class:!0});var Ie=Ne(m);b=Oe(Ie,"BUTTON",{class:!0});var Pe=Ne(b);y=Oe(Pe,"SPAN",{class:!0,"data-svelte-h":!0}),Xe(y)!=="svelte-13r8rb7"&&(y.innerHTML=A),Pe.forEach(Se),C=ze(Ie),E=Oe(Ie,"BUTTON",{class:!0});var Qe=Ne(E);L=Oe(Qe,"SPAN",{class:!0,"data-svelte-h":!0}),Xe(L)!=="svelte-2l1hj3"&&(L.innerHTML=D),Qe.forEach(Se),Ie.forEach(Se),we.forEach(Se),T=ze(N),x=Oe(N,"DIV",{class:!0});var at=Ne(x);q=Oe(at,"DIV",{class:!0});var je=Ne(q);G=Oe(je,"DIV",{class:!0});var it=Ne(G);te=Oe(it,"SPAN",{class:!0,"data-svelte-h":!0}),Xe(te)!=="svelte-fgsbr8"&&(te.textContent=v),V=ze(it),Z=Oe(it,"DIV",{class:!0});var He=Ne(Z);K=Oe(He,"INPUT",{class:!0,type:!0,min:!0,max:!0,step:!0}),me=ze(He),oe=Oe(He,"DIV",{class:!0,"data-svelte-h":!0}),Xe(oe)!=="svelte-522o26"&&(oe.innerHTML=H),be=ze(He),ie=Oe(He,"DIV",{class:!0,"data-svelte-h":!0}),Xe(ie)!=="svelte-1pm26hw"&&(ie.innerHTML=_e),He.forEach(Se),it.forEach(Se),Q=ze(je),se=Oe(je,"DIV",{class:!0});var Ye=Ne(se);Ae=Oe(Ye,"SPAN",{class:!0,"data-svelte-h":!0}),Xe(Ae)!=="svelte-1ymgcin"&&(Ae.textContent=he),B=ze(Ye),S=Oe(Ye,"DIV",{class:!0});var Fe=Ne(S);z=Oe(Fe,"INPUT",{class:!0,type:!0,min:!0,max:!0,step:!0}),ae=ze(Fe),ee=Oe(Fe,"DIV",{class:!0,"data-svelte-h":!0}),Xe(ee)!=="svelte-522o26"&&(ee.innerHTML=X),ue=ze(Fe),le=Oe(Fe,"DIV",{class:!0,"data-svelte-h":!0}),Xe(le)!=="svelte-nb2cha"&&(le.innerHTML=P),Fe.forEach(Se),Ye.forEach(Se),je.forEach(Se),at.forEach(Se),F=ze(N),re=Oe(N,"DIV",{class:!0});var nt=Ne(re);J=Oe(nt,"BUTTON",{class:!0,"data-svelte-h":!0}),Xe(J)!=="svelte-1cq2vu0"&&(J.textContent=j),nt.forEach(Se),Y=ze(N),w&&w.l(N),ye=ze(N),R&&R.l(N),Ee=Cr(),this.h()},h(){pe(r,"class","mt-10"),pe(s,"class",h="btn "+(e[0].power?"btn-success":"btn-error")+" mt-10 w-8/12 rounded"),pe(y,"class","p-4"),pe(b,"class",M="btn btn-primary h-full rounded "+(e[1].highPower?"opacity-20 pointer-events-none":"")),pe(L,"class","p-4"),pe(E,"class",I="btn btn-primary h-full rounded "+(e[1].tenDegreeMode?"opacity-20 pointer-events-none":"")),pe(m,"class","w-full grid grid-flow-col grid-cols-2 justify-between drop-shadow-sm gap-4"),pe(d,"class","mt-4 w-8/12 flex"),pe(te,"class","mb-2 w-full text-center"),pe(K,"class","range range-sm"),pe(K,"type","range"),pe(K,"min","0"),pe(K,"max","3"),pe(K,"step","1"),pe(oe,"class","w-full flex justify-between text-xs px-2"),pe(ie,"class","w-full flex justify-between text-xs px-2"),pe(Z,"class","mx-3"),pe(G,"class",k="w-9/12 flex flex-col "+(e[1].fan?"opacity-20 pointer-events-none":"")),pe(Ae,"class","mb-2 w-full text-center"),pe(z,"class","range range-sm"),pe(z,"type","range"),pe(z,"min","0"),pe(z,"max","3"),pe(z,"step","1"),pe(ee,"class","w-full flex justify-between text-xs px-2"),pe(le,"class","w-full flex justify-between text-xs px-2"),pe(S,"class","mx-3"),pe(se,"class",W="mt-6 w-9/12 flex flex-col "+(e[1].mode?"opacity-20 pointer-events-none":"")),pe(q,"class","flex flex-col w-full items-center"),pe(x,"class","mt-6 w-full"),pe(J,"class","btn btn-primary mt-3 mb-8 w-full rounded"),pe(re,"class","w-8/12 mt-6")},m(N,$){Me(N,r,$),qi(t,r,null),Me(N,i,$),Me(N,s,$),Re(s,l),Me(N,f,$),Me(N,d,$),Re(d,m),Re(m,b),Re(b,y),Re(m,C),Re(m,E),Re(E,L),Me(N,T,$),Me(N,x,$),Re(x,q),Re(q,G),Re(G,te),Re(G,V),Re(G,Z),Re(Z,K),qr(K,e[0].fan),Re(Z,me),Re(Z,oe),Re(Z,be),Re(Z,ie),Re(q,Q),Re(q,se),Re(se,Ae),Re(se,B),Re(se,S),Re(S,z),qr(z,e[0].mode),Re(S,ae),Re(S,ee),Re(S,ue),Re(S,le),Me(N,F,$),Me(N,re,$),Re(re,J),Me(N,Y,$),w&&w.m(N,$),Me(N,ye,$),R&&R.m(N,$),Me(N,Ee,$),ke=!0,Le||(p=[ut(s,"click",e[10]),ut(b,"click",e[11]),ut(E,"click",e[12]),ut(K,"change",e[13]),ut(K,"change",e[14]),ut(K,"input",e[14]),ut(z,"change",e[15]),ut(z,"change",e[16]),ut(z,"input",e[16]),ut(J,"click",e[5])],Le=!0)},p(N,$){const ne={};!a&&$&1&&(a=!0,ne.temp=N[0].temp,Ai(()=>a=!1)),!u&&$&2&&(u=!0,ne.disabled=N[1].temp,Ai(()=>u=!1)),!n&&$&1&&(n=!0,ne.mode=N[0].mode,Ai(()=>n=!1)),t.$set(ne),(!ke||$&1)&&o!==(o=N[0].power?"PÃ¥":"Av")&&tr(l,o),(!ke||$&1&&h!==(h="btn "+(N[0].power?"btn-success":"btn-error")+" mt-10 w-8/12 rounded"))&&pe(s,"class",h),(!ke||$&2&&M!==(M="btn btn-primary h-full rounded "+(N[1].highPower?"opacity-20 pointer-events-none":"")))&&pe(b,"class",M),(!ke||$&2&&I!==(I="btn btn-primary h-full rounded "+(N[1].tenDegreeMode?"opacity-20 pointer-events-none":"")))&&pe(E,"class",I),$&1&&qr(K,N[0].fan),(!ke||$&2&&k!==(k="w-9/12 flex flex-col "+(N[1].fan?"opacity-20 pointer-events-none":"")))&&pe(G,"class",k),$&1&&qr(z,N[0].mode),(!ke||$&2&&W!==(W="mt-6 w-9/12 flex flex-col "+(N[1].mode?"opacity-20 pointer-events-none":"")))&&pe(se,"class",W),N[2]||N[3]?w?w.p(N,$):(w=_s(N),w.c(),w.m(ye.parentNode,ye)):w&&(w.d(1),w=null),N[4]?R?R.p(N,$):(R=Es(N),R.c(),R.m(Ee.parentNode,Ee)):R&&(R.d(1),R=null)},i(N){ke||(Bt(t.$$.fragment,N),ke=!0)},o(N){Ht(t.$$.fragment,N),ke=!1},d(N){N&&(Se(r),Se(i),Se(s),Se(f),Se(d),Se(T),Se(x),Se(F),Se(re),Se(Y),Se(ye),Se(Ee)),Hi(t),w&&w.d(N),R&&R.d(N),Le=!1,Is(p)}}}function _s(e){let r,t,a,u='<div class="loading h-8 w-8"></div>',n,i;function s(h,f){return h[3]?kh:Ih}let o=s(e),l=o(e);return{c(){r=Ce("div"),t=Ce("div"),a=Ce("div"),a.innerHTML=u,n=Ve(),i=Ce("div"),l.c(),this.h()},l(h){r=Oe(h,"DIV",{class:!0});var f=Ne(r);t=Oe(f,"DIV",{class:!0});var d=Ne(t);a=Oe(d,"DIV",{class:!0,"data-svelte-h":!0}),Xe(a)!=="svelte-gaidlx"&&(a.innerHTML=u),n=ze(d),i=Oe(d,"DIV",{class:!0});var m=Ne(i);l.l(m),m.forEach(Se),d.forEach(Se),f.forEach(Se),this.h()},h(){pe(a,"class","flex justify-center mb-4"),pe(i,"class","text-center"),pe(t,"class","bg-white p-6 rounded-lg shadow-lg w-8/12"),pe(r,"class","fixed inset-0 bg-gray-500 bg-opacity-50 flex justify-center items-center")},m(h,f){Me(h,r,f),Re(r,t),Re(t,a),Re(t,n),Re(t,i),l.m(i,null)},p(h,f){o===(o=s(h))&&l?l.p(h,f):(l.d(1),l=o(h),l&&(l.c(),l.m(i,null)))},d(h){h&&Se(r),l.d()}}}function Ih(e){let r,t="VÃ¤ntar pÃ¥ bekrÃ¤ftelse frÃ¥n vÃ¤rmepumpen...";return{c(){r=Ce("p"),r.textContent=t},l(a){r=Oe(a,"P",{"data-svelte-h":!0}),Xe(r)!=="svelte-82w1zj"&&(r.textContent=t)},m(a,u){Me(a,r,u)},p:mt,d(a){a&&Se(r)}}}function kh(e){let r,t,a,u,n="Ok",i,s;return{c(){r=Ce("p"),t=Mt(e[3]),a=Ve(),u=Ce("button"),u.textContent=n,this.h()},l(o){r=Oe(o,"P",{class:!0});var l=Ne(r);t=xt(l,e[3]),l.forEach(Se),a=ze(o),u=Oe(o,"BUTTON",{class:!0,"data-svelte-h":!0}),Xe(u)!=="svelte-13hnb89"&&(u.textContent=n),this.h()},h(){pe(r,"class","text-red-500 mt-4"),pe(u,"class","mt-8 btn btn-primary rounded w-full")},m(o,l){Me(o,r,l),Re(r,t),Me(o,a,l),Me(o,u,l),i||(s=ut(u,"click",e[17]),i=!0)},p(o,l){l&8&&tr(t,o[3])},d(o){o&&(Se(r),Se(a),Se(u)),i=!1,s()}}}function Es(e){let r,t,a,u,n="Datan Ã¤r skickad till vÃ¤rmepumpen!",i,s,o="Ok",l,h;return{c(){r=Ce("div"),t=Ce("div"),a=Ce("div"),u=Ce("p"),u.textContent=n,i=Ve(),s=Ce("button"),s.textContent=o,this.h()},l(f){r=Oe(f,"DIV",{class:!0});var d=Ne(r);t=Oe(d,"DIV",{class:!0});var m=Ne(t);a=Oe(m,"DIV",{class:!0});var b=Ne(a);u=Oe(b,"P",{class:!0,"data-svelte-h":!0}),Xe(u)!=="svelte-10jrpo0"&&(u.textContent=n),i=ze(b),s=Oe(b,"BUTTON",{class:!0,"data-svelte-h":!0}),Xe(s)!=="svelte-1uhfzt3"&&(s.textContent=o),b.forEach(Se),m.forEach(Se),d.forEach(Se),this.h()},h(){pe(u,"class","text-green-500 font-bold"),pe(s,"class","mt-8 btn btn-primary rounded w-full"),pe(a,"class","text-center"),pe(t,"class","bg-white p-6 rounded-lg shadow-lg"),pe(r,"class","fixed inset-0 bg-gray-500 bg-opacity-50 flex justify-center items-center")},m(f,d){Me(f,r,d),Re(r,t),Re(t,a),Re(a,u),Re(a,i),Re(a,s),l||(h=ut(s,"click",e[18]),l=!0)},p:mt,d(f){f&&Se(r),l=!1,h()}}}function Th(e){let r,t,a=e[0]&&vs(e);return{c(){a&&a.c(),r=Cr()},l(u){a&&a.l(u),r=Cr()},m(u,n){a&&a.m(u,n),Me(u,r,n),t=!0},p(u,[n]){u[0]?a?(a.p(u,n),n&1&&Bt(a,1)):(a=vs(u),a.c(),Bt(a,1),a.m(r.parentNode,r)):a&&(oi(),Ht(a,1,1,()=>{a=null}),si())},i(u){t||(Bt(a),t=!0)},o(u){Ht(a),t=!1},d(u){u&&Se(r),a&&a.d(u)}}}function Ch(e,r,t){let a;Ts(e,Al,I=>t(6,a=I));let u,n,i=!1,s="",o=!1;async function l(){let I={temp:u.temp,mode:u.mode,fan:u.fan,power:u.power,highPower:u.highPower,tenDegreeMode:u.tenDegreeMode,id:Math.floor(Math.random()*99999)};try{t(2,i=!0),t(3,s=""),t(4,o=!1),console.log("Sending data to heatpump"),Eh("heatpump/data",JSON.stringify(I));let T;console.log("Waiting to hear back from heatpump");let x=q=>{q==I.id&&(clearTimeout(T),console.log("Received back the right id!"),t(2,i=!1),t(4,o=!0))};Sh("heatpump/received",x),T=setTimeout(()=>{Ah("heatpump/received",x),console.error("Error waiting for heatpump/received"),t(2,i=!1),t(3,s="Timeout: No response from heatpump")},60*1e3)}catch(T){console.error("Error whilst sending to heatpump",T),t(2,i=!1),t(3,s="Error while sending data to heatpump")}}function h(I){e.$$.not_equal(u.temp,I)&&(u.temp=I,t(0,u),t(6,a))}function f(I){e.$$.not_equal(n.temp,I)&&(n.temp=I,t(1,n),t(6,a))}function d(I){e.$$.not_equal(u.mode,I)&&(u.mode=I,t(0,u),t(6,a))}const m=()=>{Ar("power",!u.power)},b=()=>{Ar("highPower",!u.highPower)},y=()=>{Ar("tenDegreeMode",!u.tenDegreeMode)},A=I=>Ar("fan",parseInt(I.target.value));function M(){u.fan=Oo(this.value),t(0,u),t(6,a)}const C=I=>Ar("mode",parseInt(I.target.value));function E(){u.mode=Oo(this.value),t(0,u),t(6,a)}const L=()=>{t(2,i=!1),t(3,s="")},D=()=>{t(4,o=!1)};return e.$$.update=()=>{e.$$.dirty&64&&(t(0,u=a),t(1,n=a.disabledSettings))},[u,n,i,s,o,l,a,h,f,d,m,b,y,A,M,C,E,L,D]}class Oh extends gi{constructor(r){super(),mi(this,r,Ch,Th,Tr,{})}}function Rh(e,r){r&&r!=="lg"&&r!=="sm"&&r!=="xs"?e.style.fontSize=r.replace("x","em"):e.style.fontSize=""}function Ph(e,r,t,a,u,n=1,i="",s=""){let o=1,l=1;u&&(u=="horizontal"?o=-1:u=="vertical"?l=-1:o=l=-1),typeof e=="string"&&(e=parseFloat(e)),typeof r=="string"&&(r=parseFloat(r)),typeof t=="string"&&(t=parseFloat(t));const h=`${r*n}${i}`,f=`${t*n}${i}`;let d=`translate(${h},${f}) scale(${o*e},${l*e})`;return a&&(d+=` rotate(${a}${s})`),d}function Ss(e){let r,t,a,u,n,i,s,o=e[3]&&As(e);function l(d,m){return typeof d[17][4]=="string"?Mh:Bh}let h=l(e),f=h(e);return{c(){r=pr("svg"),o&&o.c(),t=pr("g"),a=pr("g"),f.c(),this.h()},l(d){r=gr(d,"svg",{id:!0,class:!0,style:!0,viewBox:!0,"aria-hidden":!0,role:!0,xmlns:!0});var m=Ne(r);o&&o.l(m),t=gr(m,"g",{transform:!0,"transform-origin":!0});var b=Ne(t);a=gr(b,"g",{transform:!0});var y=Ne(a);f.l(y),y.forEach(Se),b.forEach(Se),m.forEach(Se),this.h()},h(){pe(a,"transform",e[16]),pe(t,"transform",u="translate("+e[17][0]/2+" "+e[17][1]/2+")"),pe(t,"transform-origin",n=e[17][0]/4+" 0"),pe(r,"id",e[1]),pe(r,"class",i="svelte-fa svelte-fa-base "+e[0]+" svelte-bvo74f"),pe(r,"style",e[2]),pe(r,"viewBox",s="0 0 "+e[17][0]+" "+e[17][1]),pe(r,"aria-hidden","true"),pe(r,"role","img"),pe(r,"xmlns","http://www.w3.org/2000/svg"),dt(r,"pulse",e[9]),dt(r,"svelte-fa-size-lg",e[4]==="lg"),dt(r,"svelte-fa-size-sm",e[4]==="sm"),dt(r,"svelte-fa-size-xs",e[4]==="xs"),dt(r,"svelte-fa-fw",e[6]),dt(r,"svelte-fa-pull-left",e[7]==="left"),dt(r,"svelte-fa-pull-right",e[7]==="right"),dt(r,"spin",e[8])},m(d,m){Me(d,r,m),o&&o.m(r,null),Re(r,t),Re(t,a),f.m(a,null),e[24](r)},p(d,m){d[3]?o?o.p(d,m):(o=As(d),o.c(),o.m(r,t)):o&&(o.d(1),o=null),h===(h=l(d))&&f?f.p(d,m):(f.d(1),f=h(d),f&&(f.c(),f.m(a,null))),m&65536&&pe(a,"transform",d[16]),m&131072&&u!==(u="translate("+d[17][0]/2+" "+d[17][1]/2+")")&&pe(t,"transform",u),m&131072&&n!==(n=d[17][0]/4+" 0")&&pe(t,"transform-origin",n),m&2&&pe(r,"id",d[1]),m&1&&i!==(i="svelte-fa svelte-fa-base "+d[0]+" svelte-bvo74f")&&pe(r,"class",i),m&4&&pe(r,"style",d[2]),m&131072&&s!==(s="0 0 "+d[17][0]+" "+d[17][1])&&pe(r,"viewBox",s),m&513&&dt(r,"pulse",d[9]),m&17&&dt(r,"svelte-fa-size-lg",d[4]==="lg"),m&17&&dt(r,"svelte-fa-size-sm",d[4]==="sm"),m&17&&dt(r,"svelte-fa-size-xs",d[4]==="xs"),m&65&&dt(r,"svelte-fa-fw",d[6]),m&129&&dt(r,"svelte-fa-pull-left",d[7]==="left"),m&129&&dt(r,"svelte-fa-pull-right",d[7]==="right"),m&257&&dt(r,"spin",d[8])},d(d){d&&Se(r),o&&o.d(),f.d(),e[24](null)}}}function As(e){let r,t;return{c(){r=pr("title"),t=Mt(e[3])},l(a){r=gr(a,"title",{});var u=Ne(r);t=xt(u,e[3]),u.forEach(Se)},m(a,u){Me(a,r,u),Re(r,t)},p(a,u){u&8&&tr(t,a[3])},d(a){a&&Se(r)}}}function Bh(e){let r,t,a,u,n,i,s,o,l,h;return{c(){r=pr("path"),i=pr("path"),this.h()},l(f){r=gr(f,"path",{d:!0,fill:!0,"fill-opacity":!0,transform:!0}),Ne(r).forEach(Se),i=gr(f,"path",{d:!0,fill:!0,"fill-opacity":!0,transform:!0}),Ne(i).forEach(Se),this.h()},h(){pe(r,"d",t=e[17][4][0]),pe(r,"fill",a=e[11]||e[5]||"currentColor"),pe(r,"fill-opacity",u=e[14]!=!1?e[12]:e[13]),pe(r,"transform",n="translate("+e[17][0]/-2+" "+e[17][1]/-2+")"),pe(i,"d",s=e[17][4][1]),pe(i,"fill",o=e[10]||e[5]||"currentColor"),pe(i,"fill-opacity",l=e[14]!=!1?e[13]:e[12]),pe(i,"transform",h="translate("+e[17][0]/-2+" "+e[17][1]/-2+")")},m(f,d){Me(f,r,d),Me(f,i,d)},p(f,d){d&131072&&t!==(t=f[17][4][0])&&pe(r,"d",t),d&2080&&a!==(a=f[11]||f[5]||"currentColor")&&pe(r,"fill",a),d&28672&&u!==(u=f[14]!=!1?f[12]:f[13])&&pe(r,"fill-opacity",u),d&131072&&n!==(n="translate("+f[17][0]/-2+" "+f[17][1]/-2+")")&&pe(r,"transform",n),d&131072&&s!==(s=f[17][4][1])&&pe(i,"d",s),d&1056&&o!==(o=f[10]||f[5]||"currentColor")&&pe(i,"fill",o),d&28672&&l!==(l=f[14]!=!1?f[13]:f[12])&&pe(i,"fill-opacity",l),d&131072&&h!==(h="translate("+f[17][0]/-2+" "+f[17][1]/-2+")")&&pe(i,"transform",h)},d(f){f&&(Se(r),Se(i))}}}function Mh(e){let r,t,a,u;return{c(){r=pr("path"),this.h()},l(n){r=gr(n,"path",{d:!0,fill:!0,transform:!0}),Ne(r).forEach(Se),this.h()},h(){pe(r,"d",t=e[17][4]),pe(r,"fill",a=e[5]||e[10]||"currentColor"),pe(r,"transform",u="translate("+e[17][0]/-2+" "+e[17][1]/-2+")")},m(n,i){Me(n,r,i)},p(n,i){i&131072&&t!==(t=n[17][4])&&pe(r,"d",t),i&1056&&a!==(a=n[5]||n[10]||"currentColor")&&pe(r,"fill",a),i&131072&&u!==(u="translate("+n[17][0]/-2+" "+n[17][1]/-2+")")&&pe(r,"transform",u)},d(n){n&&Se(r)}}}function xh(e){let r,t=e[17][4]&&Ss(e);return{c(){t&&t.c(),r=Cr()},l(a){t&&t.l(a),r=Cr()},m(a,u){t&&t.m(a,u),Me(a,r,u)},p(a,[u]){a[17][4]?t?t.p(a,u):(t=Ss(a),t.c(),t.m(r.parentNode,r)):t&&(t.d(1),t=null)},i:mt,o:mt,d(a){a&&Se(r),t&&t.d(a)}}}function Uh(e,r,t){let a,u,{class:n=void 0}=r,{id:i=void 0}=r,{style:s=void 0}=r,{icon:o}=r,{title:l=void 0}=r,{size:h=void 0}=r,{color:f=void 0}=r,{fw:d=!1}=r,{pull:m=void 0}=r,{scale:b=1}=r,{translateX:y=0}=r,{translateY:A=0}=r,{rotate:M=void 0}=r,{flip:C=void 0}=r,{spin:E=!1}=r,{pulse:L=!1}=r,{primaryColor:D=""}=r,{secondaryColor:I=""}=r,{primaryOpacity:T=1}=r,{secondaryOpacity:x=.4}=r,{swapOpacity:q=!1}=r,G;function te(v){Gr[v?"unshift":"push"](()=>{G=v,t(15,G)})}return e.$$set=v=>{"class"in v&&t(0,n=v.class),"id"in v&&t(1,i=v.id),"style"in v&&t(2,s=v.style),"icon"in v&&t(18,o=v.icon),"title"in v&&t(3,l=v.title),"size"in v&&t(4,h=v.size),"color"in v&&t(5,f=v.color),"fw"in v&&t(6,d=v.fw),"pull"in v&&t(7,m=v.pull),"scale"in v&&t(19,b=v.scale),"translateX"in v&&t(20,y=v.translateX),"translateY"in v&&t(21,A=v.translateY),"rotate"in v&&t(22,M=v.rotate),"flip"in v&&t(23,C=v.flip),"spin"in v&&t(8,E=v.spin),"pulse"in v&&t(9,L=v.pulse),"primaryColor"in v&&t(10,D=v.primaryColor),"secondaryColor"in v&&t(11,I=v.secondaryColor),"primaryOpacity"in v&&t(12,T=v.primaryOpacity),"secondaryOpacity"in v&&t(13,x=v.secondaryOpacity),"swapOpacity"in v&&t(14,q=v.swapOpacity)},e.$$.update=()=>{e.$$.dirty&32784&&G&&h&&Rh(G,h),e.$$.dirty&262144&&t(17,a=o&&o.icon||[0,0,"",[],""]),e.$$.dirty&16252928&&t(16,u=Ph(b,y,A,M,C,512))},[n,i,s,l,h,f,d,m,E,L,D,I,T,x,q,G,u,a,o,b,y,A,M,C,te]}class Lh extends gi{constructor(r){super(),mi(this,r,Uh,xh,Tr,{class:0,id:1,style:2,icon:18,title:3,size:4,color:5,fw:6,pull:7,scale:19,translateX:20,translateY:21,rotate:22,flip:23,spin:8,pulse:9,primaryColor:10,secondaryColor:11,primaryOpacity:12,secondaryOpacity:13,swapOpacity:14})}}/*!
 * Font Awesome Free 6.7.1 by @fontawesome - https://fontawesome.com
 * License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License)
 * Copyright 2024 Fonticons, Inc.
 */const Nh={prefix:"fas",iconName:"arrow-right-from-bracket",icon:[512,512,["sign-out"],"f08b","M502.6 278.6c12.5-12.5 12.5-32.8 0-45.3l-128-128c-12.5-12.5-32.8-12.5-45.3 0s-12.5 32.8 0 45.3L402.7 224 192 224c-17.7 0-32 14.3-32 32s14.3 32 32 32l210.7 0-73.4 73.4c-12.5 12.5-12.5 32.8 0 45.3s32.8 12.5 45.3 0l128-128zM160 96c17.7 0 32-14.3 32-32s-14.3-32-32-32L96 32C43 32 0 75 0 128L0 384c0 53 43 96 96 96l64 0c17.7 0 32-14.3 32-32s-14.3-32-32-32l-64 0c-17.7 0-32-14.3-32-32l0-256c0-17.7 14.3-32 32-32l64 0z"]},jh=Nh;function Dh(e){let r,t,a=e[0].name.split(" ")[0]+"",u,n,i,s,o,l,h,f;return i=new Lh({props:{class:"mt-1",icon:jh}}),o=new Oh({}),{c(){r=Ce("button"),t=Mt("Hej "),u=Mt(a),n=Mt(`! Klicka hÃ¤r fÃ¶r att logga ut
        `),Fi(i.$$.fragment),s=Ve(),Fi(o.$$.fragment),this.h()},l(d){r=Oe(d,"BUTTON",{class:!0});var m=Ne(r);t=xt(m,"Hej "),u=xt(m,a),n=xt(m,`! Klicka hÃ¤r fÃ¶r att logga ut
        `),Wi(i.$$.fragment,m),m.forEach(Se),s=ze(d),Wi(o.$$.fragment,d),this.h()},h(){pe(r,"class","flex items-center gap-3 mt-2")},m(d,m){Me(d,r,m),Re(r,t),Re(r,u),Re(r,n),qi(i,r,null),Me(d,s,m),qi(o,d,m),l=!0,h||(f=ut(r,"click",e[5]),h=!0)},p(d,m){(!l||m&1)&&a!==(a=d[0].name.split(" ")[0]+"")&&tr(u,a)},i(d){l||(Bt(i.$$.fragment,d),Bt(o.$$.fragment,d),l=!0)},o(d){Ht(i.$$.fragment,d),Ht(o.$$.fragment,d),l=!1},d(d){d&&(Se(r),Se(s)),Hi(i),Hi(o,d),h=!1,f()}}}function Fh(e){let r,t="MQTT connection failed.",a,u,n="Try Logging In Again",i,s,o,l,h;return{c(){r=Ce("h1"),r.textContent=t,a=Ve(),u=Ce("button"),u.textContent=n,i=Ve(),s=Ce("p"),o=Mt(e[3]),this.h()},l(f){r=Oe(f,"H1",{class:!0,"data-svelte-h":!0}),Xe(r)!=="svelte-49pb01"&&(r.textContent=t),a=ze(f),u=Oe(f,"BUTTON",{class:!0,"data-svelte-h":!0}),Xe(u)!=="svelte-5g466t"&&(u.textContent=n),i=ze(f),s=Oe(f,"P",{class:!0});var d=Ne(s);o=xt(d,e[3]),d.forEach(Se),this.h()},h(){pe(r,"class","mt-10"),pe(u,"class","btn btn-secondary rounded-sm mt-5"),pe(s,"class","mt-10 text-red-500")},m(f,d){Me(f,r,d),Me(f,a,d),Me(f,u,d),Me(f,i,d),Me(f,s,d),Re(s,o),l||(h=ut(u,"click",e[4]),l=!0)},p(f,d){d&8&&tr(o,f[3])},i:mt,o:mt,d(f){f&&(Se(r),Se(a),Se(u),Se(i),Se(s)),l=!1,h()}}}function Wh(e){let r,t="Login failed. Please try again.",a,u,n="Try Logging In Again",i,s,o,l,h;return{c(){r=Ce("h1"),r.textContent=t,a=Ve(),u=Ce("button"),u.textContent=n,i=Ve(),s=Ce("p"),o=Mt(e[2]),this.h()},l(f){r=Oe(f,"H1",{class:!0,"data-svelte-h":!0}),Xe(r)!=="svelte-2famt1"&&(r.textContent=t),a=ze(f),u=Oe(f,"BUTTON",{class:!0,"data-svelte-h":!0}),Xe(u)!=="svelte-5g466t"&&(u.textContent=n),i=ze(f),s=Oe(f,"P",{class:!0});var d=Ne(s);o=xt(d,e[2]),d.forEach(Se),this.h()},h(){pe(r,"class","mt-10"),pe(u,"class","btn btn-secondary rounded-sm mt-5"),pe(s,"class","mt-10 text-red-500")},m(f,d){Me(f,r,d),Me(f,a,d),Me(f,u,d),Me(f,i,d),Me(f,s,d),Re(s,o),l||(h=ut(u,"click",e[4]),l=!0)},p(f,d){d&4&&tr(o,f[2])},i:mt,o:mt,d(f){f&&(Se(r),Se(a),Se(u),Se(i),Se(s)),l=!1,h()}}}function qh(e){let r,t="Loading...";return{c(){r=Ce("div"),r.textContent=t,this.h()},l(a){r=Oe(a,"DIV",{class:!0,"data-svelte-h":!0}),Xe(r)!=="svelte-1ng9eg1"&&(r.textContent=t),this.h()},h(){pe(r,"class","loading mt-24")},m(a,u){Me(a,r,u)},p:mt,i:mt,o:mt,d(a){a&&Se(r)}}}function Hh(e){let r,t,a,u,n;const i=[qh,Wh,Fh,Dh],s=[];function o(l,h){return l[1]?0:l[2]?1:l[3]?2:l[0]?3:-1}return~(a=o(e))&&(u=s[a]=i[a](e)),{c(){r=Ce("div"),t=Ce("div"),u&&u.c(),this.h()},l(l){r=Oe(l,"DIV",{class:!0});var h=Ne(r);t=Oe(h,"DIV",{class:!0});var f=Ne(t);u&&u.l(f),f.forEach(Se),h.forEach(Se),this.h()},h(){pe(t,"class","w-screen md:w-7/12 lg:w-5/12 sm flex flex-col items-center"),pe(r,"class","w-screen min-h-screen bg-base-200 select-none flex justify-center")},m(l,h){Me(l,r,h),Re(r,t),~a&&s[a].m(t,null),n=!0},p(l,[h]){let f=a;a=o(l),a===f?~a&&s[a].p(l,h):(u&&(oi(),Ht(s[f],1,1,()=>{s[f]=null}),si()),~a?(u=s[a],u?u.p(l,h):(u=s[a]=i[a](l),u.c()),Bt(u,1),u.m(t,null)):u=null)},i(l){n||(Bt(u),n=!0)},o(l){Ht(u),n=!1},d(l){l&&Se(r),~a&&s[a].d()}}}function Vh(e,r,t){let a;Ts(e,po,h=>t(3,a=h));let u=null,n=!0,i=!1;async function s(){try{const{accessToken:h,loading:f,loginError:d}=await Cs();if(f){t(1,n=!0);return}if(d){t(2,i=d),t(1,n=!1);return}if(h)t(0,u=await Os(h)),await _h();else throw new Error("No valid access token.")}catch(h){console.error("Error initializing page:",h),t(2,i=h),t(1,n=!1)}finally{t(1,n=!1)}}_l(()=>{s()});function o(){El()}return[u,n,i,a,o,()=>Sl()]}class Xh extends gi{constructor(r){super(),mi(this,r,Vh,Hh,Tr,{})}}export{Xh as component};
