var s0=Object.defineProperty;var o0=(e,t,i)=>t in e?s0(e,t,{enumerable:!0,configurable:!0,writable:!0,value:i}):e[t]=i;var yt=(e,t,i)=>(o0(e,typeof t!="symbol"?t+"":t,i),i),ka=(e,t,i)=>{if(!t.has(e))throw TypeError("Cannot "+i)};var F=(e,t,i)=>(ka(e,t,"read from private field"),i?i.call(e):t.get(e)),Wt=(e,t,i)=>{if(t.has(e))throw TypeError("Cannot add the same private member more than once");t instanceof WeakSet?t.add(e):t.set(e,i)},Ft=(e,t,i,n)=>(ka(e,t,"write to private field"),n?n.call(e,i):t.set(e,i),i);var Ns=(e,t,i,n)=>({set _(r){Ft(e,t,r,i)},get _(){return F(e,t,n)}}),Rt=(e,t,i)=>(ka(e,t,"access private method"),i);import{s as lr,n as Re,r as Sd,f as xd,e as Xh,b as as,h as Ea,o as kd}from"../chunks/scheduler.f9c04a13.js";import{S as Ts,i as Os,g as Ct,s as ne,h as It,j as Vt,y as we,c as re,f as kt,k as mt,a as Nt,x as Lt,z as Ue,p as Ro,t as Ci,b as Do,d as yi,m as Ii,n as Ri,o as Cn,A as Lo,e as Pr,B as Ma,r as ao,u as lo,v as ho,C as Fs,w as co,D as Xc,E as tr,F as er,G as ze}from"../chunks/index.f73c5084.js";import{g as rl,f as sl,s as a0,l as l0}from"../chunks/AuthManager.65695570.js";import{u as vr}from"../chunks/controller.e93c50b6.js";import{s as h0}from"../chunks/store.66e1840b.js";import{w as Ed}from"../chunks/index.58c9df35.js";function c0(e){const t=e-1;return t*t*t+1}function Bo(e){return--e*e*e*e*e+1}function No(e,{delay:t=0,duration:i=400,easing:n=c0,axis:r="y"}={}){const s=getComputedStyle(e),o=+s.opacity,a=r==="y"?"height":"width",l=parseFloat(s[a]),h=r==="y"?["top","bottom"]:["left","right"],c=h.map(w=>`${w[0].toUpperCase()}${w.slice(1)}`),u=parseFloat(s[`padding${c[0]}`]),f=parseFloat(s[`padding${c[1]}`]),d=parseFloat(s[`margin${c[0]}`]),g=parseFloat(s[`margin${c[1]}`]),y=parseFloat(s[`border${c[0]}Width`]),_=parseFloat(s[`border${c[1]}Width`]);return{delay:t,duration:i,easing:n,css:w=>`overflow: hidden;opacity: ${Math.min(w*20,1)*o};${a}: ${w*l}px;padding-${h[0]}: ${w*u}px;padding-${h[1]}: ${w*f}px;margin-${h[0]}: ${w*d}px;margin-${h[1]}: ${w*g}px;border-${h[0]}-width: ${w*y}px;border-${h[1]}-width: ${w*_}px;`}}function u0(e){let t,i="-";return{c(){t=Ct("span"),t.textContent=i,this.h()},l(n){t=It(n,"SPAN",{class:!0,"data-svelte-h":!0}),we(t)!=="svelte-1seu71o"&&(t.textContent=i),this.h()},h(){mt(t,"class","text-8xl text-center absolute pointer-events-none")},m(n,r){Nt(n,t,r)},p:Re,d(n){n&&kt(t)}}}function f0(e){let t=[0,3].includes(e[0]),i,n=e[3],r,s=e[4],o,a,l="Â°",h=t&&Zc(),c=Jc(e),u=tu(e);return{c(){h&&h.c(),i=ne(),c.c(),r=ne(),u.c(),o=ne(),a=Ct("span"),a.textContent=l,this.h()},l(f){h&&h.l(f),i=re(f),c.l(f),r=re(f),u.l(f),o=re(f),a=It(f,"SPAN",{class:!0,"data-svelte-h":!0}),we(a)!=="svelte-umdtd2"&&(a.textContent=l),this.h()},h(){mt(a,"class","text-7xl absolute ml-[7.7rem] -top-2 pointer-events-none")},m(f,d){h&&h.m(f,d),Nt(f,i,d),c.m(f,d),Nt(f,r,d),u.m(f,d),Nt(f,o,d),Nt(f,a,d)},p(f,d){d&1&&(t=[0,3].includes(f[0])),t?h||(h=Zc(),h.c(),h.m(i.parentNode,i)):h&&(h.d(1),h=null),d&8&&lr(n,n=f[3])?(Ro(),Ci(c,1,1,Re),Do(),c=Jc(f),c.c(),yi(c,1),c.m(r.parentNode,r)):c.p(f,d),d&16&&lr(s,s=f[4])?(Ro(),Ci(u,1,1,Re),Do(),u=tu(f),u.c(),yi(u,1),u.m(o.parentNode,o)):u.p(f,d)},d(f){f&&(kt(i),kt(r),kt(o),kt(a)),h&&h.d(f),c.d(f),u.d(f)}}}function Zc(e){let t,i="Relativ temperatur";return{c(){t=Ct("span"),t.textContent=i,this.h()},l(n){t=It(n,"SPAN",{class:!0,"data-svelte-h":!0}),we(t)!=="svelte-1lr22o5"&&(t.textContent=i),this.h()},h(){mt(t,"class","absolute font-light text-sm -bottom-8")},m(n,r){Nt(n,t,r)},d(n){n&&kt(t)}}}function Jc(e){let t,i,n,r,s;return{c(){t=Ct("span"),i=Ii(e[3]),this.h()},l(o){t=It(o,"SPAN",{class:!0});var a=Vt(t);i=Ri(a,e[3]),a.forEach(kt),this.h()},h(){mt(t,"class",n="text-8xl text-center absolute pointer-events-none "+(e[4]==""?"":"mr-[2.5rem]"))},m(o,a){Nt(o,t,a),Lt(t,i),s=!0},p(o,a){(!s||a&8)&&Cn(i,o[3]),(!s||a&16&&n!==(n="text-8xl text-center absolute pointer-events-none "+(o[4]==""?"":"mr-[2.5rem]")))&&mt(t,"class",n)},i(o){s||(o&&xd(()=>{s&&(r||(r=Lo(t,No,{delay:0,duration:300,easing:Bo,axis:"y"},!0)),r.run(1))}),s=!0)},o(o){o&&(r||(r=Lo(t,No,{delay:0,duration:300,easing:Bo,axis:"y"},!1)),r.run(0)),s=!1},d(o){o&&kt(t),o&&r&&r.end()}}}function tu(e){let t,i,n,r;return{c(){t=Ct("span"),i=Ii(e[4]),this.h()},l(s){t=It(s,"SPAN",{class:!0});var o=Vt(t);i=Ri(o,e[4]),o.forEach(kt),this.h()},h(){mt(t,"class","text-8xl text-center absolute pointer-events-none ml-[2.5rem]")},m(s,o){Nt(s,t,o),Lt(t,i),r=!0},p(s,o){(!r||o&16)&&Cn(i,s[4])},i(s){r||(s&&xd(()=>{r&&(n||(n=Lo(t,No,{delay:0,duration:300,easing:Bo,axis:"y"},!0)),n.run(1))}),r=!0)},o(s){s&&(n||(n=Lo(t,No,{delay:0,duration:300,easing:Bo,axis:"y"},!1)),n.run(0)),r=!1},d(s){s&&kt(t),s&&n&&n.end()}}}function d0(e){let t,i,n='<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1" stroke="currentColor" class="w-14 h-full mr-14"><path stroke-linecap="round" stroke-linejoin="round" d="M15.75 19.5L8.25 12l7.5-7.5"></path></svg>',r,s,o,a,l='<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1" stroke="currentColor" class="w-14 h-full ml-14"><path stroke-linecap="round" stroke-linejoin="round" d="M8.25 4.5l7.5 7.5-7.5 7.5"></path></svg>',h,c,u;function f(y,_){return _&2&&(s=null),s==null&&(s=!isNaN(y[1])&&y[1]!==null),s?f0:u0}let d=f(e,-1),g=d(e);return{c(){t=Ct("div"),i=Ct("button"),i.innerHTML=n,r=ne(),g.c(),o=ne(),a=Ct("button"),a.innerHTML=l,this.h()},l(y){t=It(y,"DIV",{class:!0});var _=Vt(t);i=It(_,"BUTTON",{class:!0,"data-svelte-h":!0}),we(i)!=="svelte-c194v9"&&(i.innerHTML=n),r=re(_),g.l(_),o=re(_),a=It(_,"BUTTON",{class:!0,"data-svelte-h":!0}),we(a)!=="svelte-9lnhab"&&(a.innerHTML=l),_.forEach(kt),this.h()},h(){mt(i,"class","h-18 mt-6 mr-5 w-1/2 flex justify-end active:-translate-x-2 transition-transform duration-200"),mt(a,"class","h-18 mt-6 ml-5 w-1/2 active:translate-x-2 transition-transform duration-200"),mt(t,"class",h="w-full flex flex-row justify-center items-center drop-shadow-xl "+(e[2]?"opacity-20 pointer-events-none":""))},m(y,_){Nt(y,t,_),Lt(t,i),Lt(t,r),g.m(t,null),Lt(t,o),Lt(t,a),c||(u=[Ue(i,"click",e[7]),Ue(a,"click",e[8])],c=!0)},p(y,[_]){d===(d=f(y,_))&&g?g.p(y,_):(g.d(1),g=d(y),g&&(g.c(),g.m(t,o))),_&4&&h!==(h="w-full flex flex-row justify-center items-center drop-shadow-xl "+(y[2]?"opacity-20 pointer-events-none":""))&&mt(t,"class",h)},i:Re,o:Re,d(y){y&&kt(t),g.d(),c=!1,Sd(u)}}}function p0(e,t,i){let{updateSetting:n}=t,{mode:r}=t,{temp:s}=t,o,a,{disabled:l}=t,h=f=>{n("temp",s+f)};const c=()=>{h(-1)},u=()=>{h(1)};return e.$$set=f=>{"updateSetting"in f&&i(6,n=f.updateSetting),"mode"in f&&i(0,r=f.mode),"temp"in f&&i(1,s=f.temp),"disabled"in f&&i(2,l=f.disabled)},e.$$.update=()=>{e.$$.dirty&2&&s!==null&&i(3,o=s.toString().charAt(0)),e.$$.dirty&2&&s!==null&&i(4,a=s.toString().charAt(1))},[r,s,l,o,a,h,n,c,u]}class g0 extends Ts{constructor(t){super(),Os(this,t,p0,d0,lr,{updateSetting:6,mode:0,temp:1,disabled:2})}}var Zh=Object.defineProperty,m0=Object.getOwnPropertyDescriptor,b0=Object.getOwnPropertyNames,y0=Object.prototype.hasOwnProperty,je=(e,t)=>()=>(e&&(t=e(e=0)),t),vt=(e,t)=>()=>(t||e((t={exports:{}}).exports,t),t.exports),ur=(e,t)=>{for(var i in t)Zh(e,i,{get:t[i],enumerable:!0})},_0=(e,t,i,n)=>{if(t&&typeof t=="object"||typeof t=="function")for(let r of b0(t))!y0.call(e,r)&&r!==i&&Zh(e,r,{get:()=>t[r],enumerable:!(n=m0(t,r))||n.enumerable});return e},ae=e=>_0(Zh({},"__esModule",{value:!0}),e),dt=je(()=>{}),Zt={};ur(Zt,{_debugEnd:()=>Fl,_debugProcess:()=>Nl,_events:()=>Jl,_eventsCount:()=>th,_exiting:()=>xl,_fatalExceptions:()=>Dl,_getActiveHandles:()=>Id,_getActiveRequests:()=>Cd,_kill:()=>Ml,_linkedBinding:()=>Od,_maxListeners:()=>Zl,_preload_modules:()=>Ql,_rawDebug:()=>wl,_startProfilerIdleNotifier:()=>Ul,_stopProfilerIdleNotifier:()=>jl,_tickCallback:()=>Bl,abort:()=>Vl,addListener:()=>eh,allowedNodeEnvironmentFlags:()=>Il,arch:()=>al,argv:()=>cl,argv0:()=>Kl,assert:()=>Rd,binding:()=>gl,chdir:()=>yl,config:()=>kl,cpuUsage:()=>Xr,cwd:()=>bl,debugPort:()=>Gl,default:()=>tc,dlopen:()=>Pd,domain:()=>Sl,emit:()=>oh,emitWarning:()=>pl,env:()=>hl,execArgv:()=>ul,execPath:()=>$l,exit:()=>Pl,features:()=>Rl,hasUncaughtExceptionCaptureCallback:()=>Dd,hrtime:()=>uo,kill:()=>Ol,listeners:()=>Bd,memoryUsage:()=>Tl,moduleLoadList:()=>vl,nextTick:()=>Ad,off:()=>nh,on:()=>Wi,once:()=>ih,openStdin:()=>Cl,pid:()=>Hl,platform:()=>ll,ppid:()=>ql,prependListener:()=>ah,prependOnceListener:()=>lh,reallyExit:()=>El,release:()=>_l,removeAllListeners:()=>sh,removeListener:()=>rh,resourceUsage:()=>Al,setSourceMapsEnabled:()=>Xl,setUncaughtExceptionCaptureCallback:()=>Ll,stderr:()=>Yl,stdin:()=>zl,stdout:()=>Wl,title:()=>ol,umask:()=>ml,uptime:()=>Ld,version:()=>fl,versions:()=>dl});function Jh(e){throw new Error("Node.js process "+e+" is not supported by JSPM core outside of Node.js")}function w0(){!ir||!Qn||(ir=!1,Qn.length?Oi=Qn.concat(Oi):ls=-1,Oi.length&&Md())}function Md(){if(!ir){var e=setTimeout(w0,0);ir=!0;for(var t=Oi.length;t;){for(Qn=Oi,Oi=[];++ls<t;)Qn&&Qn[ls].run();ls=-1,t=Oi.length}Qn=null,ir=!1,clearTimeout(e)}}function Ad(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var i=1;i<arguments.length;i++)t[i-1]=arguments[i];Oi.push(new Td(e,t)),Oi.length===1&&!ir&&setTimeout(Md,0)}function Td(e,t){this.fun=e,this.array=t}function Ve(){}function Od(e){Jh("_linkedBinding")}function Pd(e){Jh("dlopen")}function Cd(){return[]}function Id(){return[]}function Rd(e,t){if(!e)throw new Error(t||"assertion error")}function Dd(){return!1}function Ld(){return Gi.now()/1e3}function uo(e){var t=Math.floor((Date.now()-Gi.now())*.001),i=Gi.now()*.001,n=Math.floor(i)+t,r=Math.floor(i%1*1e9);return e&&(n=n-e[0],r=r-e[1],r<0&&(n--,r+=fo)),[n,r]}function Wi(){return tc}function Bd(e){return[]}var Oi,ir,Qn,ls,ol,al,ll,hl,cl,ul,fl,dl,pl,gl,ml,bl,yl,_l,wl,vl,Sl,xl,kl,El,Ml,Xr,Al,Tl,Ol,Pl,Cl,Il,Rl,Dl,Ll,Bl,Nl,Fl,Ul,jl,Wl,Yl,zl,Vl,Hl,ql,$l,Gl,Kl,Ql,Xl,Gi,Aa,fo,Zl,Jl,th,eh,ih,nh,rh,sh,oh,ah,lh,tc,v0=je(()=>{dt(),gt(),pt(),Oi=[],ir=!1,ls=-1,Td.prototype.run=function(){this.fun.apply(null,this.array)},ol="browser",al="x64",ll="browser",hl={PATH:"/usr/bin",LANG:navigator.language+".UTF-8",PWD:"/",HOME:"/home",TMP:"/tmp"},cl=["/usr/bin/node"],ul=[],fl="v16.8.0",dl={},pl=function(e,t){console.warn((t?t+": ":"")+e)},gl=function(e){Jh("binding")},ml=function(e){return 0},bl=function(){return"/"},yl=function(e){},_l={name:"node",sourceUrl:"",headersUrl:"",libUrl:""},wl=Ve,vl=[],Sl={},xl=!1,kl={},El=Ve,Ml=Ve,Xr=function(){return{}},Al=Xr,Tl=Xr,Ol=Ve,Pl=Ve,Cl=Ve,Il={},Rl={inspector:!1,debug:!1,uv:!1,ipv6:!1,tls_alpn:!1,tls_sni:!1,tls_ocsp:!1,tls:!1,cached_builtins:!0},Dl=Ve,Ll=Ve,Bl=Ve,Nl=Ve,Fl=Ve,Ul=Ve,jl=Ve,Wl=void 0,Yl=void 0,zl=void 0,Vl=Ve,Hl=2,ql=1,$l="/bin/usr/node",Gl=9229,Kl="node",Ql=[],Xl=Ve,Gi={now:typeof performance<"u"?performance.now.bind(performance):void 0,timing:typeof performance<"u"?performance.timing:void 0},Gi.now===void 0&&(Aa=Date.now(),Gi.timing&&Gi.timing.navigationStart&&(Aa=Gi.timing.navigationStart),Gi.now=()=>Date.now()-Aa),fo=1e9,uo.bigint=function(e){var t=uo(e);return typeof BigInt>"u"?t[0]*fo+t[1]:BigInt(t[0]*fo)+BigInt(t[1])},Zl=10,Jl={},th=0,eh=Wi,ih=Wi,nh=Wi,rh=Wi,sh=Wi,oh=Ve,ah=Wi,lh=Wi,tc={version:fl,versions:dl,arch:al,platform:ll,release:_l,_rawDebug:wl,moduleLoadList:vl,binding:gl,_linkedBinding:Od,_events:Jl,_eventsCount:th,_maxListeners:Zl,on:Wi,addListener:eh,once:ih,off:nh,removeListener:rh,removeAllListeners:sh,emit:oh,prependListener:ah,prependOnceListener:lh,listeners:Bd,domain:Sl,_exiting:xl,config:kl,dlopen:Pd,uptime:Ld,_getActiveRequests:Cd,_getActiveHandles:Id,reallyExit:El,_kill:Ml,cpuUsage:Xr,resourceUsage:Al,memoryUsage:Tl,kill:Ol,exit:Pl,openStdin:Cl,allowedNodeEnvironmentFlags:Il,assert:Rd,features:Rl,_fatalExceptions:Dl,setUncaughtExceptionCaptureCallback:Ll,hasUncaughtExceptionCaptureCallback:Dd,emitWarning:pl,nextTick:Ad,_tickCallback:Bl,_debugProcess:Nl,_debugEnd:Fl,_startProfilerIdleNotifier:Ul,_stopProfilerIdleNotifier:jl,stdout:Wl,stdin:zl,stderr:Yl,abort:Vl,umask:ml,chdir:yl,cwd:bl,env:hl,title:ol,argv:cl,execArgv:ul,pid:Hl,ppid:ql,execPath:$l,debugPort:Gl,hrtime:uo,argv0:Kl,_preload_modules:Ql,setSourceMapsEnabled:Xl}}),pt=je(()=>{v0()}),We={};ur(We,{Buffer:()=>Fo,INSPECT_MAX_BYTES:()=>Nd,default:()=>Yi,kMaxLength:()=>Fd});function S0(){if(hh)return Sr;hh=!0,Sr.byteLength=a,Sr.toByteArray=h,Sr.fromByteArray=f;for(var e=[],t=[],i=typeof Uint8Array<"u"?Uint8Array:Array,n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",r=0,s=n.length;r<s;++r)e[r]=n[r],t[n.charCodeAt(r)]=r;t["-".charCodeAt(0)]=62,t["_".charCodeAt(0)]=63;function o(d){var g=d.length;if(g%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var y=d.indexOf("=");y===-1&&(y=g);var _=y===g?0:4-y%4;return[y,_]}function a(d){var g=o(d),y=g[0],_=g[1];return(y+_)*3/4-_}function l(d,g,y){return(g+y)*3/4-y}function h(d){var g,y=o(d),_=y[0],w=y[1],v=new i(l(d,_,w)),S=0,T=w>0?_-4:_,O;for(O=0;O<T;O+=4)g=t[d.charCodeAt(O)]<<18|t[d.charCodeAt(O+1)]<<12|t[d.charCodeAt(O+2)]<<6|t[d.charCodeAt(O+3)],v[S++]=g>>16&255,v[S++]=g>>8&255,v[S++]=g&255;return w===2&&(g=t[d.charCodeAt(O)]<<2|t[d.charCodeAt(O+1)]>>4,v[S++]=g&255),w===1&&(g=t[d.charCodeAt(O)]<<10|t[d.charCodeAt(O+1)]<<4|t[d.charCodeAt(O+2)]>>2,v[S++]=g>>8&255,v[S++]=g&255),v}function c(d){return e[d>>18&63]+e[d>>12&63]+e[d>>6&63]+e[d&63]}function u(d,g,y){for(var _,w=[],v=g;v<y;v+=3)_=(d[v]<<16&16711680)+(d[v+1]<<8&65280)+(d[v+2]&255),w.push(c(_));return w.join("")}function f(d){for(var g,y=d.length,_=y%3,w=[],v=16383,S=0,T=y-_;S<T;S+=v)w.push(u(d,S,S+v>T?T:S+v));return _===1?(g=d[y-1],w.push(e[g>>2]+e[g<<4&63]+"==")):_===2&&(g=(d[y-2]<<8)+d[y-1],w.push(e[g>>10]+e[g>>4&63]+e[g<<2&63]+"=")),w.join("")}return Sr}function x0(){return ch?Zr:(ch=!0,Zr.read=function(e,t,i,n,r){var s,o,a=r*8-n-1,l=(1<<a)-1,h=l>>1,c=-7,u=i?r-1:0,f=i?-1:1,d=e[t+u];for(u+=f,s=d&(1<<-c)-1,d>>=-c,c+=a;c>0;s=s*256+e[t+u],u+=f,c-=8);for(o=s&(1<<-c)-1,s>>=-c,c+=n;c>0;o=o*256+e[t+u],u+=f,c-=8);if(s===0)s=1-h;else{if(s===l)return o?NaN:(d?-1:1)*(1/0);o=o+Math.pow(2,n),s=s-h}return(d?-1:1)*o*Math.pow(2,s-n)},Zr.write=function(e,t,i,n,r,s){var o,a,l,h=s*8-r-1,c=(1<<h)-1,u=c>>1,f=r===23?Math.pow(2,-24)-Math.pow(2,-77):0,d=n?0:s-1,g=n?1:-1,y=t<0||t===0&&1/t<0?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(a=isNaN(t)?1:0,o=c):(o=Math.floor(Math.log(t)/Math.LN2),t*(l=Math.pow(2,-o))<1&&(o--,l*=2),o+u>=1?t+=f/l:t+=f*Math.pow(2,1-u),t*l>=2&&(o++,l/=2),o+u>=c?(a=0,o=c):o+u>=1?(a=(t*l-1)*Math.pow(2,r),o=o+u):(a=t*Math.pow(2,u-1)*Math.pow(2,r),o=0));r>=8;e[i+d]=a&255,d+=g,a/=256,r-=8);for(o=o<<r|a,h+=r;h>0;e[i+d]=o&255,d+=g,o/=256,h-=8);e[i+d-g]|=y*128},Zr)}function k0(){if(uh)return bn;uh=!0;let e=S0(),t=x0(),i=typeof Symbol=="function"&&typeof Symbol.for=="function"?Symbol.for("nodejs.util.inspect.custom"):null;bn.Buffer=o,bn.SlowBuffer=w,bn.INSPECT_MAX_BYTES=50;let n=2147483647;bn.kMaxLength=n,o.TYPED_ARRAY_SUPPORT=r(),!o.TYPED_ARRAY_SUPPORT&&typeof console<"u"&&typeof console.error=="function"&&console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support.");function r(){try{let m=new Uint8Array(1),p={foo:function(){return 42}};return Object.setPrototypeOf(p,Uint8Array.prototype),Object.setPrototypeOf(m,p),m.foo()===42}catch{return!1}}Object.defineProperty(o.prototype,"parent",{enumerable:!0,get:function(){if(o.isBuffer(this))return this.buffer}}),Object.defineProperty(o.prototype,"offset",{enumerable:!0,get:function(){if(o.isBuffer(this))return this.byteOffset}});function s(m){if(m>n)throw new RangeError('The value "'+m+'" is invalid for option "size"');let p=new Uint8Array(m);return Object.setPrototypeOf(p,o.prototype),p}function o(m,p,b){if(typeof m=="number"){if(typeof p=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return c(m)}return a(m,p,b)}o.poolSize=8192;function a(m,p,b){if(typeof m=="string")return u(m,p);if(ArrayBuffer.isView(m))return d(m);if(m==null)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof m);if(Q(m,ArrayBuffer)||m&&Q(m.buffer,ArrayBuffer)||typeof SharedArrayBuffer<"u"&&(Q(m,SharedArrayBuffer)||m&&Q(m.buffer,SharedArrayBuffer)))return g(m,p,b);if(typeof m=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');let P=m.valueOf&&m.valueOf();if(P!=null&&P!==m)return o.from(P,p,b);let R=y(m);if(R)return R;if(typeof Symbol<"u"&&Symbol.toPrimitive!=null&&typeof m[Symbol.toPrimitive]=="function")return o.from(m[Symbol.toPrimitive]("string"),p,b);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof m)}o.from=function(m,p,b){return a(m,p,b)},Object.setPrototypeOf(o.prototype,Uint8Array.prototype),Object.setPrototypeOf(o,Uint8Array);function l(m){if(typeof m!="number")throw new TypeError('"size" argument must be of type number');if(m<0)throw new RangeError('The value "'+m+'" is invalid for option "size"')}function h(m,p,b){return l(m),m<=0?s(m):p!==void 0?typeof b=="string"?s(m).fill(p,b):s(m).fill(p):s(m)}o.alloc=function(m,p,b){return h(m,p,b)};function c(m){return l(m),s(m<0?0:_(m)|0)}o.allocUnsafe=function(m){return c(m)},o.allocUnsafeSlow=function(m){return c(m)};function u(m,p){if((typeof p!="string"||p==="")&&(p="utf8"),!o.isEncoding(p))throw new TypeError("Unknown encoding: "+p);let b=v(m,p)|0,P=s(b),R=P.write(m,p);return R!==b&&(P=P.slice(0,R)),P}function f(m){let p=m.length<0?0:_(m.length)|0,b=s(p);for(let P=0;P<p;P+=1)b[P]=m[P]&255;return b}function d(m){if(Q(m,Uint8Array)){let p=new Uint8Array(m);return g(p.buffer,p.byteOffset,p.byteLength)}return f(m)}function g(m,p,b){if(p<0||m.byteLength<p)throw new RangeError('"offset" is outside of buffer bounds');if(m.byteLength<p+(b||0))throw new RangeError('"length" is outside of buffer bounds');let P;return p===void 0&&b===void 0?P=new Uint8Array(m):b===void 0?P=new Uint8Array(m,p):P=new Uint8Array(m,p,b),Object.setPrototypeOf(P,o.prototype),P}function y(m){if(o.isBuffer(m)){let p=_(m.length)|0,b=s(p);return b.length===0||m.copy(b,0,0,p),b}if(m.length!==void 0)return typeof m.length!="number"||_t(m.length)?s(0):f(m);if(m.type==="Buffer"&&Array.isArray(m.data))return f(m.data)}function _(m){if(m>=n)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+n.toString(16)+" bytes");return m|0}function w(m){return+m!=m&&(m=0),o.alloc(+m)}o.isBuffer=function(m){return m!=null&&m._isBuffer===!0&&m!==o.prototype},o.compare=function(m,p){if(Q(m,Uint8Array)&&(m=o.from(m,m.offset,m.byteLength)),Q(p,Uint8Array)&&(p=o.from(p,p.offset,p.byteLength)),!o.isBuffer(m)||!o.isBuffer(p))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(m===p)return 0;let b=m.length,P=p.length;for(let R=0,E=Math.min(b,P);R<E;++R)if(m[R]!==p[R]){b=m[R],P=p[R];break}return b<P?-1:P<b?1:0},o.isEncoding=function(m){switch(String(m).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},o.concat=function(m,p){if(!Array.isArray(m))throw new TypeError('"list" argument must be an Array of Buffers');if(m.length===0)return o.alloc(0);let b;if(p===void 0)for(p=0,b=0;b<m.length;++b)p+=m[b].length;let P=o.allocUnsafe(p),R=0;for(b=0;b<m.length;++b){let E=m[b];if(Q(E,Uint8Array))R+E.length>P.length?(o.isBuffer(E)||(E=o.from(E)),E.copy(P,R)):Uint8Array.prototype.set.call(P,E,R);else if(o.isBuffer(E))E.copy(P,R);else throw new TypeError('"list" argument must be an Array of Buffers');R+=E.length}return P};function v(m,p){if(o.isBuffer(m))return m.length;if(ArrayBuffer.isView(m)||Q(m,ArrayBuffer))return m.byteLength;if(typeof m!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof m);let b=m.length,P=arguments.length>2&&arguments[2]===!0;if(!P&&b===0)return 0;let R=!1;for(;;)switch(p){case"ascii":case"latin1":case"binary":return b;case"utf8":case"utf-8":return Y(m).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return b*2;case"hex":return b>>>1;case"base64":return Z(m).length;default:if(R)return P?-1:Y(m).length;p=(""+p).toLowerCase(),R=!0}}o.byteLength=v;function S(m,p,b){let P=!1;if((p===void 0||p<0)&&(p=0),p>this.length||((b===void 0||b>this.length)&&(b=this.length),b<=0)||(b>>>=0,p>>>=0,b<=p))return"";for(m||(m="utf8");;)switch(m){case"hex":return H(this,p,b);case"utf8":case"utf-8":return z(this,p,b);case"ascii":return rt(this,p,b);case"latin1":case"binary":return J(this,p,b);case"base64":return x(this,p,b);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return ht(this,p,b);default:if(P)throw new TypeError("Unknown encoding: "+m);m=(m+"").toLowerCase(),P=!0}}o.prototype._isBuffer=!0;function T(m,p,b){let P=m[p];m[p]=m[b],m[b]=P}o.prototype.swap16=function(){let m=this.length;if(m%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(let p=0;p<m;p+=2)T(this,p,p+1);return this},o.prototype.swap32=function(){let m=this.length;if(m%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(let p=0;p<m;p+=4)T(this,p,p+3),T(this,p+1,p+2);return this},o.prototype.swap64=function(){let m=this.length;if(m%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(let p=0;p<m;p+=8)T(this,p,p+7),T(this,p+1,p+6),T(this,p+2,p+5),T(this,p+3,p+4);return this},o.prototype.toString=function(){let m=this.length;return m===0?"":arguments.length===0?z(this,0,m):S.apply(this,arguments)},o.prototype.toLocaleString=o.prototype.toString,o.prototype.equals=function(m){if(!o.isBuffer(m))throw new TypeError("Argument must be a Buffer");return this===m?!0:o.compare(this,m)===0},o.prototype.inspect=function(){let m="",p=bn.INSPECT_MAX_BYTES;return m=this.toString("hex",0,p).replace(/(.{2})/g,"$1 ").trim(),this.length>p&&(m+=" ... "),"<Buffer "+m+">"},i&&(o.prototype[i]=o.prototype.inspect),o.prototype.compare=function(m,p,b,P,R){if(Q(m,Uint8Array)&&(m=o.from(m,m.offset,m.byteLength)),!o.isBuffer(m))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof m);if(p===void 0&&(p=0),b===void 0&&(b=m?m.length:0),P===void 0&&(P=0),R===void 0&&(R=this.length),p<0||b>m.length||P<0||R>this.length)throw new RangeError("out of range index");if(P>=R&&p>=b)return 0;if(P>=R)return-1;if(p>=b)return 1;if(p>>>=0,b>>>=0,P>>>=0,R>>>=0,this===m)return 0;let E=R-P,D=b-p,U=Math.min(E,D),tt=this.slice(P,R),at=m.slice(p,b);for(let wt=0;wt<U;++wt)if(tt[wt]!==at[wt]){E=tt[wt],D=at[wt];break}return E<D?-1:D<E?1:0};function O(m,p,b,P,R){if(m.length===0)return-1;if(typeof b=="string"?(P=b,b=0):b>2147483647?b=2147483647:b<-2147483648&&(b=-2147483648),b=+b,_t(b)&&(b=R?0:m.length-1),b<0&&(b=m.length+b),b>=m.length){if(R)return-1;b=m.length-1}else if(b<0)if(R)b=0;else return-1;if(typeof p=="string"&&(p=o.from(p,P)),o.isBuffer(p))return p.length===0?-1:k(m,p,b,P,R);if(typeof p=="number")return p=p&255,typeof Uint8Array.prototype.indexOf=="function"?R?Uint8Array.prototype.indexOf.call(m,p,b):Uint8Array.prototype.lastIndexOf.call(m,p,b):k(m,[p],b,P,R);throw new TypeError("val must be string, number or Buffer")}function k(m,p,b,P,R){let E=1,D=m.length,U=p.length;if(P!==void 0&&(P=String(P).toLowerCase(),P==="ucs2"||P==="ucs-2"||P==="utf16le"||P==="utf-16le")){if(m.length<2||p.length<2)return-1;E=2,D/=2,U/=2,b/=2}function tt(wt,Tt){return E===1?wt[Tt]:wt.readUInt16BE(Tt*E)}let at;if(R){let wt=-1;for(at=b;at<D;at++)if(tt(m,at)===tt(p,wt===-1?0:at-wt)){if(wt===-1&&(wt=at),at-wt+1===U)return wt*E}else wt!==-1&&(at-=at-wt),wt=-1}else for(b+U>D&&(b=D-U),at=b;at>=0;at--){let wt=!0;for(let Tt=0;Tt<U;Tt++)if(tt(m,at+Tt)!==tt(p,Tt)){wt=!1;break}if(wt)return at}return-1}o.prototype.includes=function(m,p,b){return this.indexOf(m,p,b)!==-1},o.prototype.indexOf=function(m,p,b){return O(this,m,p,b,!0)},o.prototype.lastIndexOf=function(m,p,b){return O(this,m,p,b,!1)};function M(m,p,b,P){b=Number(b)||0;let R=m.length-b;P?(P=Number(P),P>R&&(P=R)):P=R;let E=p.length;P>E/2&&(P=E/2);let D;for(D=0;D<P;++D){let U=parseInt(p.substr(D*2,2),16);if(_t(U))return D;m[b+D]=U}return D}function A(m,p,b,P){return j(Y(p,m.length-b),m,b,P)}function B(m,p,b,P){return j(W(p),m,b,P)}function q(m,p,b,P){return j(Z(p),m,b,P)}function $(m,p,b,P){return j(ot(p,m.length-b),m,b,P)}o.prototype.write=function(m,p,b,P){if(p===void 0)P="utf8",b=this.length,p=0;else if(b===void 0&&typeof p=="string")P=p,b=this.length,p=0;else if(isFinite(p))p=p>>>0,isFinite(b)?(b=b>>>0,P===void 0&&(P="utf8")):(P=b,b=void 0);else throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");let R=this.length-p;if((b===void 0||b>R)&&(b=R),m.length>0&&(b<0||p<0)||p>this.length)throw new RangeError("Attempt to write outside buffer bounds");P||(P="utf8");let E=!1;for(;;)switch(P){case"hex":return M(this,m,p,b);case"utf8":case"utf-8":return A(this,m,p,b);case"ascii":case"latin1":case"binary":return B(this,m,p,b);case"base64":return q(this,m,p,b);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return $(this,m,p,b);default:if(E)throw new TypeError("Unknown encoding: "+P);P=(""+P).toLowerCase(),E=!0}},o.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function x(m,p,b){return p===0&&b===m.length?e.fromByteArray(m):e.fromByteArray(m.slice(p,b))}function z(m,p,b){b=Math.min(m.length,b);let P=[],R=p;for(;R<b;){let E=m[R],D=null,U=E>239?4:E>223?3:E>191?2:1;if(R+U<=b){let tt,at,wt,Tt;switch(U){case 1:E<128&&(D=E);break;case 2:tt=m[R+1],(tt&192)===128&&(Tt=(E&31)<<6|tt&63,Tt>127&&(D=Tt));break;case 3:tt=m[R+1],at=m[R+2],(tt&192)===128&&(at&192)===128&&(Tt=(E&15)<<12|(tt&63)<<6|at&63,Tt>2047&&(Tt<55296||Tt>57343)&&(D=Tt));break;case 4:tt=m[R+1],at=m[R+2],wt=m[R+3],(tt&192)===128&&(at&192)===128&&(wt&192)===128&&(Tt=(E&15)<<18|(tt&63)<<12|(at&63)<<6|wt&63,Tt>65535&&Tt<1114112&&(D=Tt))}}D===null?(D=65533,U=1):D>65535&&(D-=65536,P.push(D>>>10&1023|55296),D=56320|D&1023),P.push(D),R+=U}return V(P)}let X=4096;function V(m){let p=m.length;if(p<=X)return String.fromCharCode.apply(String,m);let b="",P=0;for(;P<p;)b+=String.fromCharCode.apply(String,m.slice(P,P+=X));return b}function rt(m,p,b){let P="";b=Math.min(m.length,b);for(let R=p;R<b;++R)P+=String.fromCharCode(m[R]&127);return P}function J(m,p,b){let P="";b=Math.min(m.length,b);for(let R=p;R<b;++R)P+=String.fromCharCode(m[R]);return P}function H(m,p,b){let P=m.length;(!p||p<0)&&(p=0),(!b||b<0||b>P)&&(b=P);let R="";for(let E=p;E<b;++E)R+=Mt[m[E]];return R}function ht(m,p,b){let P=m.slice(p,b),R="";for(let E=0;E<P.length-1;E+=2)R+=String.fromCharCode(P[E]+P[E+1]*256);return R}o.prototype.slice=function(m,p){let b=this.length;m=~~m,p=p===void 0?b:~~p,m<0?(m+=b,m<0&&(m=0)):m>b&&(m=b),p<0?(p+=b,p<0&&(p=0)):p>b&&(p=b),p<m&&(p=m);let P=this.subarray(m,p);return Object.setPrototypeOf(P,o.prototype),P};function nt(m,p,b){if(m%1!==0||m<0)throw new RangeError("offset is not uint");if(m+p>b)throw new RangeError("Trying to access beyond buffer length")}o.prototype.readUintLE=o.prototype.readUIntLE=function(m,p,b){m=m>>>0,p=p>>>0,b||nt(m,p,this.length);let P=this[m],R=1,E=0;for(;++E<p&&(R*=256);)P+=this[m+E]*R;return P},o.prototype.readUintBE=o.prototype.readUIntBE=function(m,p,b){m=m>>>0,p=p>>>0,b||nt(m,p,this.length);let P=this[m+--p],R=1;for(;p>0&&(R*=256);)P+=this[m+--p]*R;return P},o.prototype.readUint8=o.prototype.readUInt8=function(m,p){return m=m>>>0,p||nt(m,1,this.length),this[m]},o.prototype.readUint16LE=o.prototype.readUInt16LE=function(m,p){return m=m>>>0,p||nt(m,2,this.length),this[m]|this[m+1]<<8},o.prototype.readUint16BE=o.prototype.readUInt16BE=function(m,p){return m=m>>>0,p||nt(m,2,this.length),this[m]<<8|this[m+1]},o.prototype.readUint32LE=o.prototype.readUInt32LE=function(m,p){return m=m>>>0,p||nt(m,4,this.length),(this[m]|this[m+1]<<8|this[m+2]<<16)+this[m+3]*16777216},o.prototype.readUint32BE=o.prototype.readUInt32BE=function(m,p){return m=m>>>0,p||nt(m,4,this.length),this[m]*16777216+(this[m+1]<<16|this[m+2]<<8|this[m+3])},o.prototype.readBigUInt64LE=Ot(function(m){m=m>>>0,et(m,"offset");let p=this[m],b=this[m+7];(p===void 0||b===void 0)&&ft(m,this.length-8);let P=p+this[++m]*2**8+this[++m]*2**16+this[++m]*2**24,R=this[++m]+this[++m]*2**8+this[++m]*2**16+b*2**24;return BigInt(P)+(BigInt(R)<<BigInt(32))}),o.prototype.readBigUInt64BE=Ot(function(m){m=m>>>0,et(m,"offset");let p=this[m],b=this[m+7];(p===void 0||b===void 0)&&ft(m,this.length-8);let P=p*2**24+this[++m]*2**16+this[++m]*2**8+this[++m],R=this[++m]*2**24+this[++m]*2**16+this[++m]*2**8+b;return(BigInt(P)<<BigInt(32))+BigInt(R)}),o.prototype.readIntLE=function(m,p,b){m=m>>>0,p=p>>>0,b||nt(m,p,this.length);let P=this[m],R=1,E=0;for(;++E<p&&(R*=256);)P+=this[m+E]*R;return R*=128,P>=R&&(P-=Math.pow(2,8*p)),P},o.prototype.readIntBE=function(m,p,b){m=m>>>0,p=p>>>0,b||nt(m,p,this.length);let P=p,R=1,E=this[m+--P];for(;P>0&&(R*=256);)E+=this[m+--P]*R;return R*=128,E>=R&&(E-=Math.pow(2,8*p)),E},o.prototype.readInt8=function(m,p){return m=m>>>0,p||nt(m,1,this.length),this[m]&128?(255-this[m]+1)*-1:this[m]},o.prototype.readInt16LE=function(m,p){m=m>>>0,p||nt(m,2,this.length);let b=this[m]|this[m+1]<<8;return b&32768?b|4294901760:b},o.prototype.readInt16BE=function(m,p){m=m>>>0,p||nt(m,2,this.length);let b=this[m+1]|this[m]<<8;return b&32768?b|4294901760:b},o.prototype.readInt32LE=function(m,p){return m=m>>>0,p||nt(m,4,this.length),this[m]|this[m+1]<<8|this[m+2]<<16|this[m+3]<<24},o.prototype.readInt32BE=function(m,p){return m=m>>>0,p||nt(m,4,this.length),this[m]<<24|this[m+1]<<16|this[m+2]<<8|this[m+3]},o.prototype.readBigInt64LE=Ot(function(m){m=m>>>0,et(m,"offset");let p=this[m],b=this[m+7];(p===void 0||b===void 0)&&ft(m,this.length-8);let P=this[m+4]+this[m+5]*2**8+this[m+6]*2**16+(b<<24);return(BigInt(P)<<BigInt(32))+BigInt(p+this[++m]*2**8+this[++m]*2**16+this[++m]*2**24)}),o.prototype.readBigInt64BE=Ot(function(m){m=m>>>0,et(m,"offset");let p=this[m],b=this[m+7];(p===void 0||b===void 0)&&ft(m,this.length-8);let P=(p<<24)+this[++m]*2**16+this[++m]*2**8+this[++m];return(BigInt(P)<<BigInt(32))+BigInt(this[++m]*2**24+this[++m]*2**16+this[++m]*2**8+b)}),o.prototype.readFloatLE=function(m,p){return m=m>>>0,p||nt(m,4,this.length),t.read(this,m,!0,23,4)},o.prototype.readFloatBE=function(m,p){return m=m>>>0,p||nt(m,4,this.length),t.read(this,m,!1,23,4)},o.prototype.readDoubleLE=function(m,p){return m=m>>>0,p||nt(m,8,this.length),t.read(this,m,!0,52,8)},o.prototype.readDoubleBE=function(m,p){return m=m>>>0,p||nt(m,8,this.length),t.read(this,m,!1,52,8)};function xt(m,p,b,P,R,E){if(!o.isBuffer(m))throw new TypeError('"buffer" argument must be a Buffer instance');if(p>R||p<E)throw new RangeError('"value" argument is out of bounds');if(b+P>m.length)throw new RangeError("Index out of range")}o.prototype.writeUintLE=o.prototype.writeUIntLE=function(m,p,b,P){if(m=+m,p=p>>>0,b=b>>>0,!P){let D=Math.pow(2,8*b)-1;xt(this,m,p,b,D,0)}let R=1,E=0;for(this[p]=m&255;++E<b&&(R*=256);)this[p+E]=m/R&255;return p+b},o.prototype.writeUintBE=o.prototype.writeUIntBE=function(m,p,b,P){if(m=+m,p=p>>>0,b=b>>>0,!P){let D=Math.pow(2,8*b)-1;xt(this,m,p,b,D,0)}let R=b-1,E=1;for(this[p+R]=m&255;--R>=0&&(E*=256);)this[p+R]=m/E&255;return p+b},o.prototype.writeUint8=o.prototype.writeUInt8=function(m,p,b){return m=+m,p=p>>>0,b||xt(this,m,p,1,255,0),this[p]=m&255,p+1},o.prototype.writeUint16LE=o.prototype.writeUInt16LE=function(m,p,b){return m=+m,p=p>>>0,b||xt(this,m,p,2,65535,0),this[p]=m&255,this[p+1]=m>>>8,p+2},o.prototype.writeUint16BE=o.prototype.writeUInt16BE=function(m,p,b){return m=+m,p=p>>>0,b||xt(this,m,p,2,65535,0),this[p]=m>>>8,this[p+1]=m&255,p+2},o.prototype.writeUint32LE=o.prototype.writeUInt32LE=function(m,p,b){return m=+m,p=p>>>0,b||xt(this,m,p,4,4294967295,0),this[p+3]=m>>>24,this[p+2]=m>>>16,this[p+1]=m>>>8,this[p]=m&255,p+4},o.prototype.writeUint32BE=o.prototype.writeUInt32BE=function(m,p,b){return m=+m,p=p>>>0,b||xt(this,m,p,4,4294967295,0),this[p]=m>>>24,this[p+1]=m>>>16,this[p+2]=m>>>8,this[p+3]=m&255,p+4};function I(m,p,b,P,R){it(p,P,R,m,b,7);let E=Number(p&BigInt(4294967295));m[b++]=E,E=E>>8,m[b++]=E,E=E>>8,m[b++]=E,E=E>>8,m[b++]=E;let D=Number(p>>BigInt(32)&BigInt(4294967295));return m[b++]=D,D=D>>8,m[b++]=D,D=D>>8,m[b++]=D,D=D>>8,m[b++]=D,b}function K(m,p,b,P,R){it(p,P,R,m,b,7);let E=Number(p&BigInt(4294967295));m[b+7]=E,E=E>>8,m[b+6]=E,E=E>>8,m[b+5]=E,E=E>>8,m[b+4]=E;let D=Number(p>>BigInt(32)&BigInt(4294967295));return m[b+3]=D,D=D>>8,m[b+2]=D,D=D>>8,m[b+1]=D,D=D>>8,m[b]=D,b+8}o.prototype.writeBigUInt64LE=Ot(function(m,p=0){return I(this,m,p,BigInt(0),BigInt("0xffffffffffffffff"))}),o.prototype.writeBigUInt64BE=Ot(function(m,p=0){return K(this,m,p,BigInt(0),BigInt("0xffffffffffffffff"))}),o.prototype.writeIntLE=function(m,p,b,P){if(m=+m,p=p>>>0,!P){let U=Math.pow(2,8*b-1);xt(this,m,p,b,U-1,-U)}let R=0,E=1,D=0;for(this[p]=m&255;++R<b&&(E*=256);)m<0&&D===0&&this[p+R-1]!==0&&(D=1),this[p+R]=(m/E>>0)-D&255;return p+b},o.prototype.writeIntBE=function(m,p,b,P){if(m=+m,p=p>>>0,!P){let U=Math.pow(2,8*b-1);xt(this,m,p,b,U-1,-U)}let R=b-1,E=1,D=0;for(this[p+R]=m&255;--R>=0&&(E*=256);)m<0&&D===0&&this[p+R+1]!==0&&(D=1),this[p+R]=(m/E>>0)-D&255;return p+b},o.prototype.writeInt8=function(m,p,b){return m=+m,p=p>>>0,b||xt(this,m,p,1,127,-128),m<0&&(m=255+m+1),this[p]=m&255,p+1},o.prototype.writeInt16LE=function(m,p,b){return m=+m,p=p>>>0,b||xt(this,m,p,2,32767,-32768),this[p]=m&255,this[p+1]=m>>>8,p+2},o.prototype.writeInt16BE=function(m,p,b){return m=+m,p=p>>>0,b||xt(this,m,p,2,32767,-32768),this[p]=m>>>8,this[p+1]=m&255,p+2},o.prototype.writeInt32LE=function(m,p,b){return m=+m,p=p>>>0,b||xt(this,m,p,4,2147483647,-2147483648),this[p]=m&255,this[p+1]=m>>>8,this[p+2]=m>>>16,this[p+3]=m>>>24,p+4},o.prototype.writeInt32BE=function(m,p,b){return m=+m,p=p>>>0,b||xt(this,m,p,4,2147483647,-2147483648),m<0&&(m=4294967295+m+1),this[p]=m>>>24,this[p+1]=m>>>16,this[p+2]=m>>>8,this[p+3]=m&255,p+4},o.prototype.writeBigInt64LE=Ot(function(m,p=0){return I(this,m,p,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))}),o.prototype.writeBigInt64BE=Ot(function(m,p=0){return K(this,m,p,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))});function st(m,p,b,P,R,E){if(b+P>m.length)throw new RangeError("Index out of range");if(b<0)throw new RangeError("Index out of range")}function Et(m,p,b,P,R){return p=+p,b=b>>>0,R||st(m,p,b,4),t.write(m,p,b,P,23,4),b+4}o.prototype.writeFloatLE=function(m,p,b){return Et(this,m,p,!0,b)},o.prototype.writeFloatBE=function(m,p,b){return Et(this,m,p,!1,b)};function lt(m,p,b,P,R){return p=+p,b=b>>>0,R||st(m,p,b,8),t.write(m,p,b,P,52,8),b+8}o.prototype.writeDoubleLE=function(m,p,b){return lt(this,m,p,!0,b)},o.prototype.writeDoubleBE=function(m,p,b){return lt(this,m,p,!1,b)},o.prototype.copy=function(m,p,b,P){if(!o.isBuffer(m))throw new TypeError("argument should be a Buffer");if(b||(b=0),!P&&P!==0&&(P=this.length),p>=m.length&&(p=m.length),p||(p=0),P>0&&P<b&&(P=b),P===b||m.length===0||this.length===0)return 0;if(p<0)throw new RangeError("targetStart out of bounds");if(b<0||b>=this.length)throw new RangeError("Index out of range");if(P<0)throw new RangeError("sourceEnd out of bounds");P>this.length&&(P=this.length),m.length-p<P-b&&(P=m.length-p+b);let R=P-b;return this===m&&typeof Uint8Array.prototype.copyWithin=="function"?this.copyWithin(p,b,P):Uint8Array.prototype.set.call(m,this.subarray(b,P),p),R},o.prototype.fill=function(m,p,b,P){if(typeof m=="string"){if(typeof p=="string"?(P=p,p=0,b=this.length):typeof b=="string"&&(P=b,b=this.length),P!==void 0&&typeof P!="string")throw new TypeError("encoding must be a string");if(typeof P=="string"&&!o.isEncoding(P))throw new TypeError("Unknown encoding: "+P);if(m.length===1){let E=m.charCodeAt(0);(P==="utf8"&&E<128||P==="latin1")&&(m=E)}}else typeof m=="number"?m=m&255:typeof m=="boolean"&&(m=Number(m));if(p<0||this.length<p||this.length<b)throw new RangeError("Out of range index");if(b<=p)return this;p=p>>>0,b=b===void 0?this.length:b>>>0,m||(m=0);let R;if(typeof m=="number")for(R=p;R<b;++R)this[R]=m;else{let E=o.isBuffer(m)?m:o.from(m,P),D=E.length;if(D===0)throw new TypeError('The value "'+m+'" is invalid for argument "value"');for(R=0;R<b-p;++R)this[R+p]=E[R%D]}return this};let N={};function C(m,p,b){N[m]=class extends b{constructor(){super(),Object.defineProperty(this,"message",{value:p.apply(this,arguments),writable:!0,configurable:!0}),this.name=`${this.name} [${m}]`,this.stack,delete this.name}get code(){return m}set code(P){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:P,writable:!0})}toString(){return`${this.name} [${m}]: ${this.message}`}}}C("ERR_BUFFER_OUT_OF_BOUNDS",function(m){return m?`${m} is outside of buffer bounds`:"Attempt to access memory outside buffer bounds"},RangeError),C("ERR_INVALID_ARG_TYPE",function(m,p){return`The "${m}" argument must be of type number. Received type ${typeof p}`},TypeError),C("ERR_OUT_OF_RANGE",function(m,p,b){let P=`The value of "${m}" is out of range.`,R=b;return Number.isInteger(b)&&Math.abs(b)>2**32?R=G(String(b)):typeof b=="bigint"&&(R=String(b),(b>BigInt(2)**BigInt(32)||b<-(BigInt(2)**BigInt(32)))&&(R=G(R)),R+="n"),P+=` It must be ${p}. Received ${R}`,P},RangeError);function G(m){let p="",b=m.length,P=m[0]==="-"?1:0;for(;b>=P+4;b-=3)p=`_${m.slice(b-3,b)}${p}`;return`${m.slice(0,b)}${p}`}function ct(m,p,b){et(p,"offset"),(m[p]===void 0||m[p+b]===void 0)&&ft(p,m.length-(b+1))}function it(m,p,b,P,R,E){if(m>b||m<p){let D=typeof p=="bigint"?"n":"",U;throw E>3?p===0||p===BigInt(0)?U=`>= 0${D} and < 2${D} ** ${(E+1)*8}${D}`:U=`>= -(2${D} ** ${(E+1)*8-1}${D}) and < 2 ** ${(E+1)*8-1}${D}`:U=`>= ${p}${D} and <= ${b}${D}`,new N.ERR_OUT_OF_RANGE("value",U,m)}ct(P,R,E)}function et(m,p){if(typeof m!="number")throw new N.ERR_INVALID_ARG_TYPE(p,"number",m)}function ft(m,p,b){throw Math.floor(m)!==m?(et(m,b),new N.ERR_OUT_OF_RANGE(b||"offset","an integer",m)):p<0?new N.ERR_BUFFER_OUT_OF_BOUNDS:new N.ERR_OUT_OF_RANGE(b||"offset",`>= ${b?1:0} and <= ${p}`,m)}let ut=/[^+/0-9A-Za-z-_]/g;function L(m){if(m=m.split("=")[0],m=m.trim().replace(ut,""),m.length<2)return"";for(;m.length%4!==0;)m=m+"=";return m}function Y(m,p){p=p||1/0;let b,P=m.length,R=null,E=[];for(let D=0;D<P;++D){if(b=m.charCodeAt(D),b>55295&&b<57344){if(!R){if(b>56319){(p-=3)>-1&&E.push(239,191,189);continue}else if(D+1===P){(p-=3)>-1&&E.push(239,191,189);continue}R=b;continue}if(b<56320){(p-=3)>-1&&E.push(239,191,189),R=b;continue}b=(R-55296<<10|b-56320)+65536}else R&&(p-=3)>-1&&E.push(239,191,189);if(R=null,b<128){if((p-=1)<0)break;E.push(b)}else if(b<2048){if((p-=2)<0)break;E.push(b>>6|192,b&63|128)}else if(b<65536){if((p-=3)<0)break;E.push(b>>12|224,b>>6&63|128,b&63|128)}else if(b<1114112){if((p-=4)<0)break;E.push(b>>18|240,b>>12&63|128,b>>6&63|128,b&63|128)}else throw new Error("Invalid code point")}return E}function W(m){let p=[];for(let b=0;b<m.length;++b)p.push(m.charCodeAt(b)&255);return p}function ot(m,p){let b,P,R,E=[];for(let D=0;D<m.length&&!((p-=2)<0);++D)b=m.charCodeAt(D),P=b>>8,R=b%256,E.push(R),E.push(P);return E}function Z(m){return e.toByteArray(L(m))}function j(m,p,b,P){let R;for(R=0;R<P&&!(R+b>=p.length||R>=m.length);++R)p[R+b]=m[R];return R}function Q(m,p){return m instanceof p||m!=null&&m.constructor!=null&&m.constructor.name!=null&&m.constructor.name===p.name}function _t(m){return m!==m}let Mt=function(){let m="0123456789abcdef",p=new Array(256);for(let b=0;b<16;++b){let P=b*16;for(let R=0;R<16;++R)p[P+R]=m[b]+m[R]}return p}();function Ot(m){return typeof BigInt>"u"?zt:m}function zt(){throw new Error("BigInt not supported")}return bn}var Sr,hh,Zr,ch,bn,uh,Yi,Fo,Nd,Fd,Ye=je(()=>{dt(),gt(),pt(),Sr={},hh=!1,Zr={},ch=!1,bn={},uh=!1,Yi=k0(),Yi.Buffer,Yi.SlowBuffer,Yi.INSPECT_MAX_BYTES,Yi.kMaxLength,Fo=Yi.Buffer,Nd=Yi.INSPECT_MAX_BYTES,Fd=Yi.kMaxLength}),gt=je(()=>{Ye()}),E0=vt(e=>{dt(),gt(),pt(),Object.defineProperty(e,"__esModule",{value:!0});var t=class{constructor(i){this.aliasToTopic={},this.max=i}put(i,n){return n===0||n>this.max?!1:(this.aliasToTopic[n]=i,this.length=Object.keys(this.aliasToTopic).length,!0)}getTopicByAlias(i){return this.aliasToTopic[i]}clear(){this.aliasToTopic={}}};e.default=t}),De=vt((e,t)=>{dt(),gt(),pt(),t.exports={ArrayIsArray(i){return Array.isArray(i)},ArrayPrototypeIncludes(i,n){return i.includes(n)},ArrayPrototypeIndexOf(i,n){return i.indexOf(n)},ArrayPrototypeJoin(i,n){return i.join(n)},ArrayPrototypeMap(i,n){return i.map(n)},ArrayPrototypePop(i,n){return i.pop(n)},ArrayPrototypePush(i,n){return i.push(n)},ArrayPrototypeSlice(i,n,r){return i.slice(n,r)},Error,FunctionPrototypeCall(i,n,...r){return i.call(n,...r)},FunctionPrototypeSymbolHasInstance(i,n){return Function.prototype[Symbol.hasInstance].call(i,n)},MathFloor:Math.floor,Number,NumberIsInteger:Number.isInteger,NumberIsNaN:Number.isNaN,NumberMAX_SAFE_INTEGER:Number.MAX_SAFE_INTEGER,NumberMIN_SAFE_INTEGER:Number.MIN_SAFE_INTEGER,NumberParseInt:Number.parseInt,ObjectDefineProperties(i,n){return Object.defineProperties(i,n)},ObjectDefineProperty(i,n,r){return Object.defineProperty(i,n,r)},ObjectGetOwnPropertyDescriptor(i,n){return Object.getOwnPropertyDescriptor(i,n)},ObjectKeys(i){return Object.keys(i)},ObjectSetPrototypeOf(i,n){return Object.setPrototypeOf(i,n)},Promise,PromisePrototypeCatch(i,n){return i.catch(n)},PromisePrototypeThen(i,n,r){return i.then(n,r)},PromiseReject(i){return Promise.reject(i)},ReflectApply:Reflect.apply,RegExpPrototypeTest(i,n){return i.test(n)},SafeSet:Set,String,StringPrototypeSlice(i,n,r){return i.slice(n,r)},StringPrototypeToLowerCase(i){return i.toLowerCase()},StringPrototypeToUpperCase(i){return i.toUpperCase()},StringPrototypeTrim(i){return i.trim()},Symbol,SymbolFor:Symbol.for,SymbolAsyncIterator:Symbol.asyncIterator,SymbolHasInstance:Symbol.hasInstance,SymbolIterator:Symbol.iterator,TypedArrayPrototypeSet(i,n,r){return i.set(n,r)},Uint8Array}}),an=vt((e,t)=>{dt(),gt(),pt();var i=(Ye(),ae(We)),n=Object.getPrototypeOf(async function(){}).constructor,r=globalThis.Blob||i.Blob,s=typeof r<"u"?function(a){return a instanceof r}:function(a){return!1},o=class extends Error{constructor(a){if(!Array.isArray(a))throw new TypeError(`Expected input to be an Array, got ${typeof a}`);let l="";for(let h=0;h<a.length;h++)l+=`    ${a[h].stack}
`;super(l),this.name="AggregateError",this.errors=a}};t.exports={AggregateError:o,kEmptyObject:Object.freeze({}),once(a){let l=!1;return function(...h){l||(l=!0,a.apply(this,h))}},createDeferredPromise:function(){let a,l;return{promise:new Promise((h,c)=>{a=h,l=c}),resolve:a,reject:l}},promisify(a){return new Promise((l,h)=>{a((c,...u)=>c?h(c):l(...u))})},debuglog(){return function(){}},format(a,...l){return a.replace(/%([sdifj])/g,function(...[h,c]){let u=l.shift();return c==="f"?u.toFixed(6):c==="j"?JSON.stringify(u):c==="s"&&typeof u=="object"?`${u.constructor!==Object?u.constructor.name:""} {}`.trim():u.toString()})},inspect(a){switch(typeof a){case"string":if(a.includes("'"))if(a.includes('"')){if(!a.includes("`")&&!a.includes("${"))return`\`${a}\``}else return`"${a}"`;return`'${a}'`;case"number":return isNaN(a)?"NaN":Object.is(a,-0)?String(a):a;case"bigint":return`${String(a)}n`;case"boolean":case"undefined":return String(a);case"object":return"{}"}},types:{isAsyncFunction(a){return a instanceof n},isArrayBufferView(a){return ArrayBuffer.isView(a)}},isBlob:s},t.exports.promisify.custom=Symbol.for("nodejs.util.promisify.custom")}),ec=vt((e,t)=>{dt(),gt(),pt();var{AbortController:i,AbortSignal:n}=typeof self<"u"?self:typeof window<"u"?window:void 0;t.exports=i,t.exports.AbortSignal=n,t.exports.default=i}),ti=vt((e,t)=>{dt(),gt(),pt();var{format:i,inspect:n,AggregateError:r}=an(),s=globalThis.AggregateError||r,o=Symbol("kIsNodeError"),a=["string","function","number","object","Function","Object","boolean","bigint","symbol"],l=/^([A-Z][a-z0-9]*)+$/,h="__node_internal_",c={};function u(v,S){if(!v)throw new c.ERR_INTERNAL_ASSERTION(S)}function f(v){let S="",T=v.length,O=v[0]==="-"?1:0;for(;T>=O+4;T-=3)S=`_${v.slice(T-3,T)}${S}`;return`${v.slice(0,T)}${S}`}function d(v,S,T){if(typeof S=="function")return u(S.length<=T.length,`Code: ${v}; The provided arguments length (${T.length}) does not match the required ones (${S.length}).`),S(...T);let O=(S.match(/%[dfijoOs]/g)||[]).length;return u(O===T.length,`Code: ${v}; The provided arguments length (${T.length}) does not match the required ones (${O}).`),T.length===0?S:i(S,...T)}function g(v,S,T){T||(T=Error);class O extends T{constructor(...M){super(d(v,S,M))}toString(){return`${this.name} [${v}]: ${this.message}`}}Object.defineProperties(O.prototype,{name:{value:T.name,writable:!0,enumerable:!1,configurable:!0},toString:{value(){return`${this.name} [${v}]: ${this.message}`},writable:!0,enumerable:!1,configurable:!0}}),O.prototype.code=v,O.prototype[o]=!0,c[v]=O}function y(v){let S=h+v.name;return Object.defineProperty(v,"name",{value:S}),v}function _(v,S){if(v&&S&&v!==S){if(Array.isArray(S.errors))return S.errors.push(v),S;let T=new s([S,v],S.message);return T.code=S.code,T}return v||S}var w=class extends Error{constructor(v="The operation was aborted",S=void 0){if(S!==void 0&&typeof S!="object")throw new c.ERR_INVALID_ARG_TYPE("options","Object",S);super(v,S),this.code="ABORT_ERR",this.name="AbortError"}};g("ERR_ASSERTION","%s",Error),g("ERR_INVALID_ARG_TYPE",(v,S,T)=>{u(typeof v=="string","'name' must be a string"),Array.isArray(S)||(S=[S]);let O="The ";v.endsWith(" argument")?O+=`${v} `:O+=`"${v}" ${v.includes(".")?"property":"argument"} `,O+="must be ";let k=[],M=[],A=[];for(let q of S)u(typeof q=="string","All expected entries have to be of type string"),a.includes(q)?k.push(q.toLowerCase()):l.test(q)?M.push(q):(u(q!=="object",'The value "object" should be written as "Object"'),A.push(q));if(M.length>0){let q=k.indexOf("object");q!==-1&&(k.splice(k,q,1),M.push("Object"))}if(k.length>0){switch(k.length){case 1:O+=`of type ${k[0]}`;break;case 2:O+=`one of type ${k[0]} or ${k[1]}`;break;default:{let q=k.pop();O+=`one of type ${k.join(", ")}, or ${q}`}}(M.length>0||A.length>0)&&(O+=" or ")}if(M.length>0){switch(M.length){case 1:O+=`an instance of ${M[0]}`;break;case 2:O+=`an instance of ${M[0]} or ${M[1]}`;break;default:{let q=M.pop();O+=`an instance of ${M.join(", ")}, or ${q}`}}A.length>0&&(O+=" or ")}switch(A.length){case 0:break;case 1:A[0].toLowerCase()!==A[0]&&(O+="an "),O+=`${A[0]}`;break;case 2:O+=`one of ${A[0]} or ${A[1]}`;break;default:{let q=A.pop();O+=`one of ${A.join(", ")}, or ${q}`}}if(T==null)O+=`. Received ${T}`;else if(typeof T=="function"&&T.name)O+=`. Received function ${T.name}`;else if(typeof T=="object"){var B;if((B=T.constructor)!==null&&B!==void 0&&B.name)O+=`. Received an instance of ${T.constructor.name}`;else{let q=n(T,{depth:-1});O+=`. Received ${q}`}}else{let q=n(T,{colors:!1});q.length>25&&(q=`${q.slice(0,25)}...`),O+=`. Received type ${typeof T} (${q})`}return O},TypeError),g("ERR_INVALID_ARG_VALUE",(v,S,T="is invalid")=>{let O=n(S);return O.length>128&&(O=O.slice(0,128)+"..."),`The ${v.includes(".")?"property":"argument"} '${v}' ${T}. Received ${O}`},TypeError),g("ERR_INVALID_RETURN_VALUE",(v,S,T)=>{var O;let k=T!=null&&(O=T.constructor)!==null&&O!==void 0&&O.name?`instance of ${T.constructor.name}`:`type ${typeof T}`;return`Expected ${v} to be returned from the "${S}" function but got ${k}.`},TypeError),g("ERR_MISSING_ARGS",(...v)=>{u(v.length>0,"At least one arg needs to be specified");let S,T=v.length;switch(v=(Array.isArray(v)?v:[v]).map(O=>`"${O}"`).join(" or "),T){case 1:S+=`The ${v[0]} argument`;break;case 2:S+=`The ${v[0]} and ${v[1]} arguments`;break;default:{let O=v.pop();S+=`The ${v.join(", ")}, and ${O} arguments`}break}return`${S} must be specified`},TypeError),g("ERR_OUT_OF_RANGE",(v,S,T)=>{u(S,'Missing "range" argument');let O;return Number.isInteger(T)&&Math.abs(T)>2**32?O=f(String(T)):typeof T=="bigint"?(O=String(T),(T>2n**32n||T<-(2n**32n))&&(O=f(O)),O+="n"):O=n(T),`The value of "${v}" is out of range. It must be ${S}. Received ${O}`},RangeError),g("ERR_MULTIPLE_CALLBACK","Callback called multiple times",Error),g("ERR_METHOD_NOT_IMPLEMENTED","The %s method is not implemented",Error),g("ERR_STREAM_ALREADY_FINISHED","Cannot call %s after a stream was finished",Error),g("ERR_STREAM_CANNOT_PIPE","Cannot pipe, not readable",Error),g("ERR_STREAM_DESTROYED","Cannot call %s after a stream was destroyed",Error),g("ERR_STREAM_NULL_VALUES","May not write null values to stream",TypeError),g("ERR_STREAM_PREMATURE_CLOSE","Premature close",Error),g("ERR_STREAM_PUSH_AFTER_EOF","stream.push() after EOF",Error),g("ERR_STREAM_UNSHIFT_AFTER_END_EVENT","stream.unshift() after end event",Error),g("ERR_STREAM_WRITE_AFTER_END","write after end",Error),g("ERR_UNKNOWN_ENCODING","Unknown encoding: %s",TypeError),t.exports={AbortError:w,aggregateTwoErrors:y(_),hideStackFrames:y,codes:c}}),ia=vt((e,t)=>{dt(),gt(),pt();var{ArrayIsArray:i,ArrayPrototypeIncludes:n,ArrayPrototypeJoin:r,ArrayPrototypeMap:s,NumberIsInteger:o,NumberIsNaN:a,NumberMAX_SAFE_INTEGER:l,NumberMIN_SAFE_INTEGER:h,NumberParseInt:c,ObjectPrototypeHasOwnProperty:u,RegExpPrototypeExec:f,String:d,StringPrototypeToUpperCase:g,StringPrototypeTrim:y}=De(),{hideStackFrames:_,codes:{ERR_SOCKET_BAD_PORT:w,ERR_INVALID_ARG_TYPE:v,ERR_INVALID_ARG_VALUE:S,ERR_OUT_OF_RANGE:T,ERR_UNKNOWN_SIGNAL:O}}=ti(),{normalizeEncoding:k}=an(),{isAsyncFunction:M,isArrayBufferView:A}=an().types,B={};function q(j){return j===(j|0)}function $(j){return j===j>>>0}var x=/^[0-7]+$/,z="must be a 32-bit unsigned integer or an octal string";function X(j,Q,_t){if(typeof j>"u"&&(j=_t),typeof j=="string"){if(f(x,j)===null)throw new S(Q,j,z);j=c(j,8)}return J(j,Q),j}var V=_((j,Q,_t=h,Mt=l)=>{if(typeof j!="number")throw new v(Q,"number",j);if(!o(j))throw new T(Q,"an integer",j);if(j<_t||j>Mt)throw new T(Q,`>= ${_t} && <= ${Mt}`,j)}),rt=_((j,Q,_t=-2147483648,Mt=2147483647)=>{if(typeof j!="number")throw new v(Q,"number",j);if(!o(j))throw new T(Q,"an integer",j);if(j<_t||j>Mt)throw new T(Q,`>= ${_t} && <= ${Mt}`,j)}),J=_((j,Q,_t=!1)=>{if(typeof j!="number")throw new v(Q,"number",j);if(!o(j))throw new T(Q,"an integer",j);let Mt=_t?1:0,Ot=4294967295;if(j<Mt||j>Ot)throw new T(Q,`>= ${Mt} && <= ${Ot}`,j)});function H(j,Q){if(typeof j!="string")throw new v(Q,"string",j)}function ht(j,Q,_t=void 0,Mt){if(typeof j!="number")throw new v(Q,"number",j);if(_t!=null&&j<_t||Mt!=null&&j>Mt||(_t!=null||Mt!=null)&&a(j))throw new T(Q,`${_t!=null?`>= ${_t}`:""}${_t!=null&&Mt!=null?" && ":""}${Mt!=null?`<= ${Mt}`:""}`,j)}var nt=_((j,Q,_t)=>{if(!n(_t,j)){let Mt="must be one of: "+r(s(_t,Ot=>typeof Ot=="string"?`'${Ot}'`:d(Ot)),", ");throw new S(Q,j,Mt)}});function xt(j,Q){if(typeof j!="boolean")throw new v(Q,"boolean",j)}function I(j,Q,_t){return j==null||!u(j,Q)?_t:j[Q]}var K=_((j,Q,_t=null)=>{let Mt=I(_t,"allowArray",!1),Ot=I(_t,"allowFunction",!1);if(!I(_t,"nullable",!1)&&j===null||!Mt&&i(j)||typeof j!="object"&&(!Ot||typeof j!="function"))throw new v(Q,"Object",j)}),st=_((j,Q)=>{if(j!=null&&typeof j!="object"&&typeof j!="function")throw new v(Q,"a dictionary",j)}),Et=_((j,Q,_t=0)=>{if(!i(j))throw new v(Q,"Array",j);if(j.length<_t){let Mt=`must be longer than ${_t}`;throw new S(Q,j,Mt)}});function lt(j,Q){Et(j,Q);for(let _t=0;_t<j.length;_t++)H(j[_t],`${Q}[${_t}]`)}function N(j,Q){Et(j,Q);for(let _t=0;_t<j.length;_t++)xt(j[_t],`${Q}[${_t}]`)}function C(j,Q="signal"){if(H(j,Q),B[j]===void 0)throw B[g(j)]!==void 0?new O(j+" (signals must use all capital letters)"):new O(j)}var G=_((j,Q="buffer")=>{if(!A(j))throw new v(Q,["Buffer","TypedArray","DataView"],j)});function ct(j,Q){let _t=k(Q),Mt=j.length;if(_t==="hex"&&Mt%2!==0)throw new S("encoding",Q,`is invalid for data of length ${Mt}`)}function it(j,Q="Port",_t=!0){if(typeof j!="number"&&typeof j!="string"||typeof j=="string"&&y(j).length===0||+j!==+j>>>0||j>65535||j===0&&!_t)throw new w(Q,j,_t);return j|0}var et=_((j,Q)=>{if(j!==void 0&&(j===null||typeof j!="object"||!("aborted"in j)))throw new v(Q,"AbortSignal",j)}),ft=_((j,Q)=>{if(typeof j!="function")throw new v(Q,"Function",j)}),ut=_((j,Q)=>{if(typeof j!="function"||M(j))throw new v(Q,"Function",j)}),L=_((j,Q)=>{if(j!==void 0)throw new v(Q,"undefined",j)});function Y(j,Q,_t){if(!n(_t,j))throw new v(Q,`('${r(_t,"|")}')`,j)}var W=/^(?:<[^>]*>)(?:\s*;\s*[^;"\s]+(?:=(")?[^;"\s]*\1)?)*$/;function ot(j,Q){if(typeof j>"u"||!f(W,j))throw new S(Q,j,'must be an array or string of format "</styles.css>; rel=preload; as=style"')}function Z(j){if(typeof j=="string")return ot(j,"hints"),j;if(i(j)){let Q=j.length,_t="";if(Q===0)return _t;for(let Mt=0;Mt<Q;Mt++){let Ot=j[Mt];ot(Ot,"hints"),_t+=Ot,Mt!==Q-1&&(_t+=", ")}return _t}throw new S("hints",j,'must be an array or string of format "</styles.css>; rel=preload; as=style"')}t.exports={isInt32:q,isUint32:$,parseFileMode:X,validateArray:Et,validateStringArray:lt,validateBooleanArray:N,validateBoolean:xt,validateBuffer:G,validateDictionary:st,validateEncoding:ct,validateFunction:ft,validateInt32:rt,validateInteger:V,validateNumber:ht,validateObject:K,validateOneOf:nt,validatePlainFunction:ut,validatePort:it,validateSignalName:C,validateString:H,validateUint32:J,validateUndefined:L,validateUnion:Y,validateAbortSignal:et,validateLinkHeaderValue:Z}}),fr=vt((e,t)=>{dt(),gt(),pt();var i=t.exports={},n,r;function s(){throw new Error("setTimeout has not been defined")}function o(){throw new Error("clearTimeout has not been defined")}(function(){try{typeof setTimeout=="function"?n=setTimeout:n=s}catch{n=s}try{typeof clearTimeout=="function"?r=clearTimeout:r=o}catch{r=o}})();function a(w){if(n===setTimeout)return setTimeout(w,0);if((n===s||!n)&&setTimeout)return n=setTimeout,setTimeout(w,0);try{return n(w,0)}catch{try{return n.call(null,w,0)}catch{return n.call(this,w,0)}}}function l(w){if(r===clearTimeout)return clearTimeout(w);if((r===o||!r)&&clearTimeout)return r=clearTimeout,clearTimeout(w);try{return r(w)}catch{try{return r.call(null,w)}catch{return r.call(this,w)}}}var h=[],c=!1,u,f=-1;function d(){!c||!u||(c=!1,u.length?h=u.concat(h):f=-1,h.length&&g())}function g(){if(!c){var w=a(d);c=!0;for(var v=h.length;v;){for(u=h,h=[];++f<v;)u&&u[f].run();f=-1,v=h.length}u=null,c=!1,l(w)}}i.nextTick=function(w){var v=new Array(arguments.length-1);if(arguments.length>1)for(var S=1;S<arguments.length;S++)v[S-1]=arguments[S];h.push(new y(w,v)),h.length===1&&!c&&a(g)};function y(w,v){this.fun=w,this.array=v}y.prototype.run=function(){this.fun.apply(null,this.array)},i.title="browser",i.browser=!0,i.env={},i.argv=[],i.version="",i.versions={};function _(){}i.on=_,i.addListener=_,i.once=_,i.off=_,i.removeListener=_,i.removeAllListeners=_,i.emit=_,i.prependListener=_,i.prependOnceListener=_,i.listeners=function(w){return[]},i.binding=function(w){throw new Error("process.binding is not supported")},i.cwd=function(){return"/"},i.chdir=function(w){throw new Error("process.chdir is not supported")},i.umask=function(){return 0}}),un=vt((e,t)=>{dt(),gt(),pt();var{Symbol:i,SymbolAsyncIterator:n,SymbolIterator:r,SymbolFor:s}=De(),o=i("kDestroyed"),a=i("kIsErrored"),l=i("kIsReadable"),h=i("kIsDisturbed"),c=s("nodejs.webstream.isClosedPromise"),u=s("nodejs.webstream.controllerErrorFunction");function f(I,K=!1){var st;return!!(I&&typeof I.pipe=="function"&&typeof I.on=="function"&&(!K||typeof I.pause=="function"&&typeof I.resume=="function")&&(!I._writableState||((st=I._readableState)===null||st===void 0?void 0:st.readable)!==!1)&&(!I._writableState||I._readableState))}function d(I){var K;return!!(I&&typeof I.write=="function"&&typeof I.on=="function"&&(!I._readableState||((K=I._writableState)===null||K===void 0?void 0:K.writable)!==!1))}function g(I){return!!(I&&typeof I.pipe=="function"&&I._readableState&&typeof I.on=="function"&&typeof I.write=="function")}function y(I){return I&&(I._readableState||I._writableState||typeof I.write=="function"&&typeof I.on=="function"||typeof I.pipe=="function"&&typeof I.on=="function")}function _(I){return!!(I&&!y(I)&&typeof I.pipeThrough=="function"&&typeof I.getReader=="function"&&typeof I.cancel=="function")}function w(I){return!!(I&&!y(I)&&typeof I.getWriter=="function"&&typeof I.abort=="function")}function v(I){return!!(I&&!y(I)&&typeof I.readable=="object"&&typeof I.writable=="object")}function S(I){return _(I)||w(I)||v(I)}function T(I,K){return I==null?!1:K===!0?typeof I[n]=="function":K===!1?typeof I[r]=="function":typeof I[n]=="function"||typeof I[r]=="function"}function O(I){if(!y(I))return null;let K=I._writableState,st=I._readableState,Et=K||st;return!!(I.destroyed||I[o]||Et!=null&&Et.destroyed)}function k(I){if(!d(I))return null;if(I.writableEnded===!0)return!0;let K=I._writableState;return K!=null&&K.errored?!1:typeof(K==null?void 0:K.ended)!="boolean"?null:K.ended}function M(I,K){if(!d(I))return null;if(I.writableFinished===!0)return!0;let st=I._writableState;return st!=null&&st.errored?!1:typeof(st==null?void 0:st.finished)!="boolean"?null:!!(st.finished||K===!1&&st.ended===!0&&st.length===0)}function A(I){if(!f(I))return null;if(I.readableEnded===!0)return!0;let K=I._readableState;return!K||K.errored?!1:typeof(K==null?void 0:K.ended)!="boolean"?null:K.ended}function B(I,K){if(!f(I))return null;let st=I._readableState;return st!=null&&st.errored?!1:typeof(st==null?void 0:st.endEmitted)!="boolean"?null:!!(st.endEmitted||K===!1&&st.ended===!0&&st.length===0)}function q(I){return I&&I[l]!=null?I[l]:typeof(I==null?void 0:I.readable)!="boolean"?null:O(I)?!1:f(I)&&I.readable&&!B(I)}function $(I){return typeof(I==null?void 0:I.writable)!="boolean"?null:O(I)?!1:d(I)&&I.writable&&!k(I)}function x(I,K){return y(I)?O(I)?!0:!((K==null?void 0:K.readable)!==!1&&q(I)||(K==null?void 0:K.writable)!==!1&&$(I)):null}function z(I){var K,st;return y(I)?I.writableErrored?I.writableErrored:(K=(st=I._writableState)===null||st===void 0?void 0:st.errored)!==null&&K!==void 0?K:null:null}function X(I){var K,st;return y(I)?I.readableErrored?I.readableErrored:(K=(st=I._readableState)===null||st===void 0?void 0:st.errored)!==null&&K!==void 0?K:null:null}function V(I){if(!y(I))return null;if(typeof I.closed=="boolean")return I.closed;let K=I._writableState,st=I._readableState;return typeof(K==null?void 0:K.closed)=="boolean"||typeof(st==null?void 0:st.closed)=="boolean"?(K==null?void 0:K.closed)||(st==null?void 0:st.closed):typeof I._closed=="boolean"&&rt(I)?I._closed:null}function rt(I){return typeof I._closed=="boolean"&&typeof I._defaultKeepAlive=="boolean"&&typeof I._removedConnection=="boolean"&&typeof I._removedContLen=="boolean"}function J(I){return typeof I._sent100=="boolean"&&rt(I)}function H(I){var K;return typeof I._consuming=="boolean"&&typeof I._dumped=="boolean"&&((K=I.req)===null||K===void 0?void 0:K.upgradeOrConnect)===void 0}function ht(I){if(!y(I))return null;let K=I._writableState,st=I._readableState,Et=K||st;return!Et&&J(I)||!!(Et&&Et.autoDestroy&&Et.emitClose&&Et.closed===!1)}function nt(I){var K;return!!(I&&((K=I[h])!==null&&K!==void 0?K:I.readableDidRead||I.readableAborted))}function xt(I){var K,st,Et,lt,N,C,G,ct,it,et;return!!(I&&((K=(st=(Et=(lt=(N=(C=I[a])!==null&&C!==void 0?C:I.readableErrored)!==null&&N!==void 0?N:I.writableErrored)!==null&&lt!==void 0?lt:(G=I._readableState)===null||G===void 0?void 0:G.errorEmitted)!==null&&Et!==void 0?Et:(ct=I._writableState)===null||ct===void 0?void 0:ct.errorEmitted)!==null&&st!==void 0?st:(it=I._readableState)===null||it===void 0?void 0:it.errored)!==null&&K!==void 0?K:!((et=I._writableState)===null||et===void 0)&&et.errored))}t.exports={kDestroyed:o,isDisturbed:nt,kIsDisturbed:h,isErrored:xt,kIsErrored:a,isReadable:q,kIsReadable:l,kIsClosedPromise:c,kControllerErrorFunction:u,isClosed:V,isDestroyed:O,isDuplexNodeStream:g,isFinished:x,isIterable:T,isReadableNodeStream:f,isReadableStream:_,isReadableEnded:A,isReadableFinished:B,isReadableErrored:X,isNodeStream:y,isWebStream:S,isWritable:$,isWritableNodeStream:d,isWritableStream:w,isWritableEnded:k,isWritableFinished:M,isWritableErrored:z,isServerRequest:H,isServerResponse:J,willEmitClose:ht,isTransformStream:v}}),In=vt((e,t)=>{dt(),gt(),pt();var i=fr(),{AbortError:n,codes:r}=ti(),{ERR_INVALID_ARG_TYPE:s,ERR_STREAM_PREMATURE_CLOSE:o}=r,{kEmptyObject:a,once:l}=an(),{validateAbortSignal:h,validateFunction:c,validateObject:u,validateBoolean:f}=ia(),{Promise:d,PromisePrototypeThen:g}=De(),{isClosed:y,isReadable:_,isReadableNodeStream:w,isReadableStream:v,isReadableFinished:S,isReadableErrored:T,isWritable:O,isWritableNodeStream:k,isWritableStream:M,isWritableFinished:A,isWritableErrored:B,isNodeStream:q,willEmitClose:$,kIsClosedPromise:x}=un();function z(H){return H.setHeader&&typeof H.abort=="function"}var X=()=>{};function V(H,ht,nt){var xt,I;if(arguments.length===2?(nt=ht,ht=a):ht==null?ht=a:u(ht,"options"),c(nt,"callback"),h(ht.signal,"options.signal"),nt=l(nt),v(H)||M(H))return rt(H,ht,nt);if(!q(H))throw new s("stream",["ReadableStream","WritableStream","Stream"],H);let K=(xt=ht.readable)!==null&&xt!==void 0?xt:w(H),st=(I=ht.writable)!==null&&I!==void 0?I:k(H),Et=H._writableState,lt=H._readableState,N=()=>{H.writable||ct()},C=$(H)&&w(H)===K&&k(H)===st,G=A(H,!1),ct=()=>{G=!0,H.destroyed&&(C=!1),!(C&&(!H.readable||K))&&(!K||it)&&nt.call(H)},it=S(H,!1),et=()=>{it=!0,H.destroyed&&(C=!1),!(C&&(!H.writable||st))&&(!st||G)&&nt.call(H)},ft=Z=>{nt.call(H,Z)},ut=y(H),L=()=>{ut=!0;let Z=B(H)||T(H);if(Z&&typeof Z!="boolean")return nt.call(H,Z);if(K&&!it&&w(H,!0)&&!S(H,!1))return nt.call(H,new o);if(st&&!G&&!A(H,!1))return nt.call(H,new o);nt.call(H)},Y=()=>{ut=!0;let Z=B(H)||T(H);if(Z&&typeof Z!="boolean")return nt.call(H,Z);nt.call(H)},W=()=>{H.req.on("finish",ct)};z(H)?(H.on("complete",ct),C||H.on("abort",L),H.req?W():H.on("request",W)):st&&!Et&&(H.on("end",N),H.on("close",N)),!C&&typeof H.aborted=="boolean"&&H.on("aborted",L),H.on("end",et),H.on("finish",ct),ht.error!==!1&&H.on("error",ft),H.on("close",L),ut?i.nextTick(L):Et!=null&&Et.errorEmitted||lt!=null&&lt.errorEmitted?C||i.nextTick(Y):(!K&&(!C||_(H))&&(G||O(H)===!1)||!st&&(!C||O(H))&&(it||_(H)===!1)||lt&&H.req&&H.aborted)&&i.nextTick(Y);let ot=()=>{nt=X,H.removeListener("aborted",L),H.removeListener("complete",ct),H.removeListener("abort",L),H.removeListener("request",W),H.req&&H.req.removeListener("finish",ct),H.removeListener("end",N),H.removeListener("close",N),H.removeListener("finish",ct),H.removeListener("end",et),H.removeListener("error",ft),H.removeListener("close",L)};if(ht.signal&&!ut){let Z=()=>{let j=nt;ot(),j.call(H,new n(void 0,{cause:ht.signal.reason}))};if(ht.signal.aborted)i.nextTick(Z);else{let j=nt;nt=l((...Q)=>{ht.signal.removeEventListener("abort",Z),j.apply(H,Q)}),ht.signal.addEventListener("abort",Z)}}return ot}function rt(H,ht,nt){let xt=!1,I=X;if(ht.signal)if(I=()=>{xt=!0,nt.call(H,new n(void 0,{cause:ht.signal.reason}))},ht.signal.aborted)i.nextTick(I);else{let st=nt;nt=l((...Et)=>{ht.signal.removeEventListener("abort",I),st.apply(H,Et)}),ht.signal.addEventListener("abort",I)}let K=(...st)=>{xt||i.nextTick(()=>nt.apply(H,st))};return g(H[x].promise,K,K),X}function J(H,ht){var nt;let xt=!1;return ht===null&&(ht=a),(nt=ht)!==null&&nt!==void 0&&nt.cleanup&&(f(ht.cleanup,"cleanup"),xt=ht.cleanup),new d((I,K)=>{let st=V(H,ht,Et=>{xt&&st(),Et?K(Et):I()})})}t.exports=V,t.exports.finished=J}),Dr=vt((e,t)=>{dt(),gt(),pt();var i=fr(),{aggregateTwoErrors:n,codes:{ERR_MULTIPLE_CALLBACK:r},AbortError:s}=ti(),{Symbol:o}=De(),{kDestroyed:a,isDestroyed:l,isFinished:h,isServerRequest:c}=un(),u=o("kDestroy"),f=o("kConstruct");function d(x,z,X){x&&(x.stack,z&&!z.errored&&(z.errored=x),X&&!X.errored&&(X.errored=x))}function g(x,z){let X=this._readableState,V=this._writableState,rt=V||X;return V!=null&&V.destroyed||X!=null&&X.destroyed?(typeof z=="function"&&z(),this):(d(x,V,X),V&&(V.destroyed=!0),X&&(X.destroyed=!0),rt.constructed?y(this,x,z):this.once(u,function(J){y(this,n(J,x),z)}),this)}function y(x,z,X){let V=!1;function rt(J){if(V)return;V=!0;let H=x._readableState,ht=x._writableState;d(J,ht,H),ht&&(ht.closed=!0),H&&(H.closed=!0),typeof X=="function"&&X(J),J?i.nextTick(_,x,J):i.nextTick(w,x)}try{x._destroy(z||null,rt)}catch(J){rt(J)}}function _(x,z){v(x,z),w(x)}function w(x){let z=x._readableState,X=x._writableState;X&&(X.closeEmitted=!0),z&&(z.closeEmitted=!0),(X!=null&&X.emitClose||z!=null&&z.emitClose)&&x.emit("close")}function v(x,z){let X=x._readableState,V=x._writableState;V!=null&&V.errorEmitted||X!=null&&X.errorEmitted||(V&&(V.errorEmitted=!0),X&&(X.errorEmitted=!0),x.emit("error",z))}function S(){let x=this._readableState,z=this._writableState;x&&(x.constructed=!0,x.closed=!1,x.closeEmitted=!1,x.destroyed=!1,x.errored=null,x.errorEmitted=!1,x.reading=!1,x.ended=x.readable===!1,x.endEmitted=x.readable===!1),z&&(z.constructed=!0,z.destroyed=!1,z.closed=!1,z.closeEmitted=!1,z.errored=null,z.errorEmitted=!1,z.finalCalled=!1,z.prefinished=!1,z.ended=z.writable===!1,z.ending=z.writable===!1,z.finished=z.writable===!1)}function T(x,z,X){let V=x._readableState,rt=x._writableState;if(rt!=null&&rt.destroyed||V!=null&&V.destroyed)return this;V!=null&&V.autoDestroy||rt!=null&&rt.autoDestroy?x.destroy(z):z&&(z.stack,rt&&!rt.errored&&(rt.errored=z),V&&!V.errored&&(V.errored=z),X?i.nextTick(v,x,z):v(x,z))}function O(x,z){if(typeof x._construct!="function")return;let X=x._readableState,V=x._writableState;X&&(X.constructed=!1),V&&(V.constructed=!1),x.once(f,z),!(x.listenerCount(f)>1)&&i.nextTick(k,x)}function k(x){let z=!1;function X(V){if(z){T(x,V??new r);return}z=!0;let rt=x._readableState,J=x._writableState,H=J||rt;rt&&(rt.constructed=!0),J&&(J.constructed=!0),H.destroyed?x.emit(u,V):V?T(x,V,!0):i.nextTick(M,x)}try{x._construct(V=>{i.nextTick(X,V)})}catch(V){i.nextTick(X,V)}}function M(x){x.emit(f)}function A(x){return(x==null?void 0:x.setHeader)&&typeof x.abort=="function"}function B(x){x.emit("close")}function q(x,z){x.emit("error",z),i.nextTick(B,x)}function $(x,z){!x||l(x)||(!z&&!h(x)&&(z=new s),c(x)?(x.socket=null,x.destroy(z)):A(x)?x.abort():A(x.req)?x.req.abort():typeof x.destroy=="function"?x.destroy(z):typeof x.close=="function"?x.close():z?i.nextTick(q,x,z):i.nextTick(B,x),x.destroyed||(x[a]=!0))}t.exports={construct:O,destroyer:$,destroy:g,undestroy:S,errorOrDestroy:T}});function ie(){ie.init.call(this)}function po(e){if(typeof e!="function")throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof e)}function Ud(e){return e._maxListeners===void 0?ie.defaultMaxListeners:e._maxListeners}function eu(e,t,i,n){var r,s,o,a;if(po(i),(s=e._events)===void 0?(s=e._events=Object.create(null),e._eventsCount=0):(s.newListener!==void 0&&(e.emit("newListener",t,i.listener?i.listener:i),s=e._events),o=s[t]),o===void 0)o=s[t]=i,++e._eventsCount;else if(typeof o=="function"?o=s[t]=n?[i,o]:[o,i]:n?o.unshift(i):o.push(i),(r=Ud(e))>0&&o.length>r&&!o.warned){o.warned=!0;var l=new Error("Possible EventEmitter memory leak detected. "+o.length+" "+String(t)+" listeners added. Use emitter.setMaxListeners() to increase limit");l.name="MaxListenersExceededWarning",l.emitter=e,l.type=t,l.count=o.length,a=l,console&&console.warn&&console.warn(a)}return e}function M0(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length===0?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function iu(e,t,i){var n={fired:!1,wrapFn:void 0,target:e,type:t,listener:i},r=M0.bind(n);return r.listener=i,n.wrapFn=r,r}function nu(e,t,i){var n=e._events;if(n===void 0)return[];var r=n[t];return r===void 0?[]:typeof r=="function"?i?[r.listener||r]:[r]:i?function(s){for(var o=new Array(s.length),a=0;a<o.length;++a)o[a]=s[a].listener||s[a];return o}(r):jd(r,r.length)}function ru(e){var t=this._events;if(t!==void 0){var i=t[e];if(typeof i=="function")return 1;if(i!==void 0)return i.length}return 0}function jd(e,t){for(var i=new Array(t),n=0;n<t;++n)i[n]=e[n];return i}var su,ou,Ln,Ta,Oa,Pa,ni,au=je(()=>{dt(),gt(),pt(),Ln=typeof Reflect=="object"?Reflect:null,Ta=Ln&&typeof Ln.apply=="function"?Ln.apply:function(e,t,i){return Function.prototype.apply.call(e,t,i)},ou=Ln&&typeof Ln.ownKeys=="function"?Ln.ownKeys:Object.getOwnPropertySymbols?function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:function(e){return Object.getOwnPropertyNames(e)},Oa=Number.isNaN||function(e){return e!=e},su=ie,ie.EventEmitter=ie,ie.prototype._events=void 0,ie.prototype._eventsCount=0,ie.prototype._maxListeners=void 0,Pa=10,Object.defineProperty(ie,"defaultMaxListeners",{enumerable:!0,get:function(){return Pa},set:function(e){if(typeof e!="number"||e<0||Oa(e))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+e+".");Pa=e}}),ie.init=function(){this._events!==void 0&&this._events!==Object.getPrototypeOf(this)._events||(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},ie.prototype.setMaxListeners=function(e){if(typeof e!="number"||e<0||Oa(e))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+e+".");return this._maxListeners=e,this},ie.prototype.getMaxListeners=function(){return Ud(this)},ie.prototype.emit=function(e){for(var t=[],i=1;i<arguments.length;i++)t.push(arguments[i]);var n=e==="error",r=this._events;if(r!==void 0)n=n&&r.error===void 0;else if(!n)return!1;if(n){var s;if(t.length>0&&(s=t[0]),s instanceof Error)throw s;var o=new Error("Unhandled error."+(s?" ("+s.message+")":""));throw o.context=s,o}var a=r[e];if(a===void 0)return!1;if(typeof a=="function")Ta(a,this,t);else{var l=a.length,h=jd(a,l);for(i=0;i<l;++i)Ta(h[i],this,t)}return!0},ie.prototype.addListener=function(e,t){return eu(this,e,t,!1)},ie.prototype.on=ie.prototype.addListener,ie.prototype.prependListener=function(e,t){return eu(this,e,t,!0)},ie.prototype.once=function(e,t){return po(t),this.on(e,iu(this,e,t)),this},ie.prototype.prependOnceListener=function(e,t){return po(t),this.prependListener(e,iu(this,e,t)),this},ie.prototype.removeListener=function(e,t){var i,n,r,s,o;if(po(t),(n=this._events)===void 0)return this;if((i=n[e])===void 0)return this;if(i===t||i.listener===t)--this._eventsCount==0?this._events=Object.create(null):(delete n[e],n.removeListener&&this.emit("removeListener",e,i.listener||t));else if(typeof i!="function"){for(r=-1,s=i.length-1;s>=0;s--)if(i[s]===t||i[s].listener===t){o=i[s].listener,r=s;break}if(r<0)return this;r===0?i.shift():function(a,l){for(;l+1<a.length;l++)a[l]=a[l+1];a.pop()}(i,r),i.length===1&&(n[e]=i[0]),n.removeListener!==void 0&&this.emit("removeListener",e,o||t)}return this},ie.prototype.off=ie.prototype.removeListener,ie.prototype.removeAllListeners=function(e){var t,i,n;if((i=this._events)===void 0)return this;if(i.removeListener===void 0)return arguments.length===0?(this._events=Object.create(null),this._eventsCount=0):i[e]!==void 0&&(--this._eventsCount==0?this._events=Object.create(null):delete i[e]),this;if(arguments.length===0){var r,s=Object.keys(i);for(n=0;n<s.length;++n)(r=s[n])!=="removeListener"&&this.removeAllListeners(r);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if(typeof(t=i[e])=="function")this.removeListener(e,t);else if(t!==void 0)for(n=t.length-1;n>=0;n--)this.removeListener(e,t[n]);return this},ie.prototype.listeners=function(e){return nu(this,e,!0)},ie.prototype.rawListeners=function(e){return nu(this,e,!1)},ie.listenerCount=function(e,t){return typeof e.listenerCount=="function"?e.listenerCount(t):ru.call(e,t)},ie.prototype.listenerCount=ru,ie.prototype.eventNames=function(){return this._eventsCount>0?ou(this._events):[]},ni=su,ni.EventEmitter,ni.defaultMaxListeners,ni.init,ni.listenerCount,ni.EventEmitter,ni.defaultMaxListeners,ni.init,ni.listenerCount}),dr={};ur(dr,{EventEmitter:()=>Wd,default:()=>ni,defaultMaxListeners:()=>Yd,init:()=>zd,listenerCount:()=>Vd,on:()=>Hd,once:()=>qd});var Wd,Yd,zd,Vd,Hd,qd,Lr=je(()=>{dt(),gt(),pt(),au(),au(),ni.once=function(e,t){return new Promise((i,n)=>{function r(...o){s!==void 0&&e.removeListener("error",s),i(o)}let s;t!=="error"&&(s=o=>{e.removeListener(name,r),n(o)},e.once("error",s)),e.once(t,r)})},ni.on=function(e,t){let i=[],n=[],r=null,s=!1,o={async next(){let h=i.shift();if(h)return createIterResult(h,!1);if(r){let c=Promise.reject(r);return r=null,c}return s?createIterResult(void 0,!0):new Promise((c,u)=>n.push({resolve:c,reject:u}))},async return(){e.removeListener(t,a),e.removeListener("error",l),s=!0;for(let h of n)h.resolve(createIterResult(void 0,!0));return createIterResult(void 0,!0)},throw(h){r=h,e.removeListener(t,a),e.removeListener("error",l)},[Symbol.asyncIterator](){return this}};return e.on(t,a),e.on("error",l),o;function a(...h){let c=n.shift();c?c.resolve(createIterResult(h,!1)):i.push(h)}function l(h){s=!0;let c=n.shift();c?c.reject(h):r=h,o.return()}},{EventEmitter:Wd,defaultMaxListeners:Yd,init:zd,listenerCount:Vd,on:Hd,once:qd}=ni}),ic=vt((e,t)=>{dt(),gt(),pt();var{ArrayIsArray:i,ObjectSetPrototypeOf:n}=De(),{EventEmitter:r}=(Lr(),ae(dr));function s(a){r.call(this,a)}n(s.prototype,r.prototype),n(s,r),s.prototype.pipe=function(a,l){let h=this;function c(w){a.writable&&a.write(w)===!1&&h.pause&&h.pause()}h.on("data",c);function u(){h.readable&&h.resume&&h.resume()}a.on("drain",u),!a._isStdio&&(!l||l.end!==!1)&&(h.on("end",d),h.on("close",g));let f=!1;function d(){f||(f=!0,a.end())}function g(){f||(f=!0,typeof a.destroy=="function"&&a.destroy())}function y(w){_(),r.listenerCount(this,"error")===0&&this.emit("error",w)}o(h,"error",y),o(a,"error",y);function _(){h.removeListener("data",c),a.removeListener("drain",u),h.removeListener("end",d),h.removeListener("close",g),h.removeListener("error",y),a.removeListener("error",y),h.removeListener("end",_),h.removeListener("close",_),a.removeListener("close",_)}return h.on("end",_),h.on("close",_),a.on("close",_),a.emit("pipe",h),a};function o(a,l,h){if(typeof a.prependListener=="function")return a.prependListener(l,h);!a._events||!a._events[l]?a.on(l,h):i(a._events[l])?a._events[l].unshift(h):a._events[l]=[h,a._events[l]]}t.exports={Stream:s,prependListener:o}}),na=vt((e,t)=>{dt(),gt(),pt();var{AbortError:i,codes:n}=ti(),{isNodeStream:r,isWebStream:s,kControllerErrorFunction:o}=un(),a=In(),{ERR_INVALID_ARG_TYPE:l}=n,h=(c,u)=>{if(typeof c!="object"||!("aborted"in c))throw new l(u,"AbortSignal",c)};t.exports.addAbortSignal=function(c,u){if(h(c,"signal"),!r(u)&&!s(u))throw new l("stream",["ReadableStream","WritableStream","Stream"],u);return t.exports.addAbortSignalNoValidate(c,u)},t.exports.addAbortSignalNoValidate=function(c,u){if(typeof c!="object"||!("aborted"in c))return u;let f=r(u)?()=>{u.destroy(new i(void 0,{cause:c.reason}))}:()=>{u[o](new i(void 0,{cause:c.reason}))};return c.aborted?f():(c.addEventListener("abort",f),a(u,()=>c.removeEventListener("abort",f))),u}}),A0=vt((e,t)=>{dt(),gt(),pt();var{StringPrototypeSlice:i,SymbolIterator:n,TypedArrayPrototypeSet:r,Uint8Array:s}=De(),{Buffer:o}=(Ye(),ae(We)),{inspect:a}=an();t.exports=class{constructor(){this.head=null,this.tail=null,this.length=0}push(l){let h={data:l,next:null};this.length>0?this.tail.next=h:this.head=h,this.tail=h,++this.length}unshift(l){let h={data:l,next:this.head};this.length===0&&(this.tail=h),this.head=h,++this.length}shift(){if(this.length===0)return;let l=this.head.data;return this.length===1?this.head=this.tail=null:this.head=this.head.next,--this.length,l}clear(){this.head=this.tail=null,this.length=0}join(l){if(this.length===0)return"";let h=this.head,c=""+h.data;for(;(h=h.next)!==null;)c+=l+h.data;return c}concat(l){if(this.length===0)return o.alloc(0);let h=o.allocUnsafe(l>>>0),c=this.head,u=0;for(;c;)r(h,c.data,u),u+=c.data.length,c=c.next;return h}consume(l,h){let c=this.head.data;if(l<c.length){let u=c.slice(0,l);return this.head.data=c.slice(l),u}return l===c.length?this.shift():h?this._getString(l):this._getBuffer(l)}first(){return this.head.data}*[n](){for(let l=this.head;l;l=l.next)yield l.data}_getString(l){let h="",c=this.head,u=0;do{let f=c.data;if(l>f.length)h+=f,l-=f.length;else{l===f.length?(h+=f,++u,c.next?this.head=c.next:this.head=this.tail=null):(h+=i(f,0,l),this.head=c,c.data=i(f,l));break}++u}while((c=c.next)!==null);return this.length-=u,h}_getBuffer(l){let h=o.allocUnsafe(l),c=l,u=this.head,f=0;do{let d=u.data;if(l>d.length)r(h,d,c-l),l-=d.length;else{l===d.length?(r(h,d,c-l),++f,u.next?this.head=u.next:this.head=this.tail=null):(r(h,new s(d.buffer,d.byteOffset,l),c-l),this.head=u,u.data=d.slice(l));break}++f}while((u=u.next)!==null);return this.length-=f,h}[Symbol.for("nodejs.util.inspect.custom")](l,h){return a(this,{...h,depth:0,customInspect:!1})}}}),nc=vt((e,t)=>{dt(),gt(),pt();var{MathFloor:i,NumberIsInteger:n}=De(),{ERR_INVALID_ARG_VALUE:r}=ti().codes;function s(l,h,c){return l.highWaterMark!=null?l.highWaterMark:h?l[c]:null}function o(l){return l?16:16*1024}function a(l,h,c,u){let f=s(h,u,c);if(f!=null){if(!n(f)||f<0){let d=u?`options.${c}`:"options.highWaterMark";throw new r(d,f)}return i(f)}return o(l.objectMode)}t.exports={getHighWaterMark:a,getDefaultHighWaterMark:o}});function lu(e){var t=e.length;if(t%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var i=e.indexOf("=");return i===-1&&(i=t),[i,i===t?0:4-i%4]}function T0(e,t,i){for(var n,r,s=[],o=t;o<i;o+=3)n=(e[o]<<16&16711680)+(e[o+1]<<8&65280)+(255&e[o+2]),s.push(gi[(r=n)>>18&63]+gi[r>>12&63]+gi[r>>6&63]+gi[63&r]);return s.join("")}function Xi(e){if(e>2147483647)throw new RangeError('The value "'+e+'" is invalid for option "size"');var t=new Uint8Array(e);return Object.setPrototypeOf(t,bt.prototype),t}function bt(e,t,i){if(typeof e=="number"){if(typeof t=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return fh(e)}return $d(e,t,i)}function $d(e,t,i){if(typeof e=="string")return function(s,o){if(typeof o=="string"&&o!==""||(o="utf8"),!bt.isEncoding(o))throw new TypeError("Unknown encoding: "+o);var a=0|Kd(s,o),l=Xi(a),h=l.write(s,o);return h!==a&&(l=l.slice(0,h)),l}(e,t);if(ArrayBuffer.isView(e))return Ca(e);if(e==null)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof e);if(Zi(e,ArrayBuffer)||e&&Zi(e.buffer,ArrayBuffer)||typeof SharedArrayBuffer<"u"&&(Zi(e,SharedArrayBuffer)||e&&Zi(e.buffer,SharedArrayBuffer)))return O0(e,t,i);if(typeof e=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');var n=e.valueOf&&e.valueOf();if(n!=null&&n!==e)return bt.from(n,t,i);var r=function(s){if(bt.isBuffer(s)){var o=0|rc(s.length),a=Xi(o);return a.length===0||s.copy(a,0,0,o),a}if(s.length!==void 0)return typeof s.length!="number"||sc(s.length)?Xi(0):Ca(s);if(s.type==="Buffer"&&Array.isArray(s.data))return Ca(s.data)}(e);if(r)return r;if(typeof Symbol<"u"&&Symbol.toPrimitive!=null&&typeof e[Symbol.toPrimitive]=="function")return bt.from(e[Symbol.toPrimitive]("string"),t,i);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof e)}function Gd(e){if(typeof e!="number")throw new TypeError('"size" argument must be of type number');if(e<0)throw new RangeError('The value "'+e+'" is invalid for option "size"')}function fh(e){return Gd(e),Xi(e<0?0:0|rc(e))}function Ca(e){for(var t=e.length<0?0:0|rc(e.length),i=Xi(t),n=0;n<t;n+=1)i[n]=255&e[n];return i}function O0(e,t,i){if(t<0||e.byteLength<t)throw new RangeError('"offset" is outside of buffer bounds');if(e.byteLength<t+(i||0))throw new RangeError('"length" is outside of buffer bounds');var n;return n=t===void 0&&i===void 0?new Uint8Array(e):i===void 0?new Uint8Array(e,t):new Uint8Array(e,t,i),Object.setPrototypeOf(n,bt.prototype),n}function rc(e){if(e>=2147483647)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+2147483647 .toString(16)+" bytes");return 0|e}function Kd(e,t){if(bt.isBuffer(e))return e.length;if(ArrayBuffer.isView(e)||Zi(e,ArrayBuffer))return e.byteLength;if(typeof e!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof e);var i=e.length,n=arguments.length>2&&arguments[2]===!0;if(!n&&i===0)return 0;for(var r=!1;;)switch(t){case"ascii":case"latin1":case"binary":return i;case"utf8":case"utf-8":return dh(e).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*i;case"hex":return i>>>1;case"base64":return Jd(e).length;default:if(r)return n?-1:dh(e).length;t=(""+t).toLowerCase(),r=!0}}function P0(e,t,i){var n=!1;if((t===void 0||t<0)&&(t=0),t>this.length||((i===void 0||i>this.length)&&(i=this.length),i<=0)||(i>>>=0)<=(t>>>=0))return"";for(e||(e="utf8");;)switch(e){case"hex":return U0(this,t,i);case"utf8":case"utf-8":return Xd(this,t,i);case"ascii":return N0(this,t,i);case"latin1":case"binary":return F0(this,t,i);case"base64":return B0(this,t,i);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return j0(this,t,i);default:if(n)throw new TypeError("Unknown encoding: "+e);e=(e+"").toLowerCase(),n=!0}}function Bn(e,t,i){var n=e[t];e[t]=e[i],e[i]=n}function hu(e,t,i,n,r){if(e.length===0)return-1;if(typeof i=="string"?(n=i,i=0):i>2147483647?i=2147483647:i<-2147483648&&(i=-2147483648),sc(i=+i)&&(i=r?0:e.length-1),i<0&&(i=e.length+i),i>=e.length){if(r)return-1;i=e.length-1}else if(i<0){if(!r)return-1;i=0}if(typeof t=="string"&&(t=bt.from(t,n)),bt.isBuffer(t))return t.length===0?-1:cu(e,t,i,n,r);if(typeof t=="number")return t&=255,typeof Uint8Array.prototype.indexOf=="function"?r?Uint8Array.prototype.indexOf.call(e,t,i):Uint8Array.prototype.lastIndexOf.call(e,t,i):cu(e,[t],i,n,r);throw new TypeError("val must be string, number or Buffer")}function cu(e,t,i,n,r){var s,o=1,a=e.length,l=t.length;if(n!==void 0&&((n=String(n).toLowerCase())==="ucs2"||n==="ucs-2"||n==="utf16le"||n==="utf-16le")){if(e.length<2||t.length<2)return-1;o=2,a/=2,l/=2,i/=2}function h(d,g){return o===1?d[g]:d.readUInt16BE(g*o)}if(r){var c=-1;for(s=i;s<a;s++)if(h(e,s)===h(t,c===-1?0:s-c)){if(c===-1&&(c=s),s-c+1===l)return c*o}else c!==-1&&(s-=s-c),c=-1}else for(i+l>a&&(i=a-l),s=i;s>=0;s--){for(var u=!0,f=0;f<l;f++)if(h(e,s+f)!==h(t,f)){u=!1;break}if(u)return s}return-1}function C0(e,t,i,n){i=Number(i)||0;var r=e.length-i;n?(n=Number(n))>r&&(n=r):n=r;var s=t.length;n>s/2&&(n=s/2);for(var o=0;o<n;++o){var a=parseInt(t.substr(2*o,2),16);if(sc(a))return o;e[i+o]=a}return o}function I0(e,t,i,n){return ra(dh(t,e.length-i),e,i,n)}function Qd(e,t,i,n){return ra(function(r){for(var s=[],o=0;o<r.length;++o)s.push(255&r.charCodeAt(o));return s}(t),e,i,n)}function R0(e,t,i,n){return Qd(e,t,i,n)}function D0(e,t,i,n){return ra(Jd(t),e,i,n)}function L0(e,t,i,n){return ra(function(r,s){for(var o,a,l,h=[],c=0;c<r.length&&!((s-=2)<0);++c)o=r.charCodeAt(c),a=o>>8,l=o%256,h.push(l),h.push(a);return h}(t,e.length-i),e,i,n)}function B0(e,t,i){return t===0&&i===e.length?Uo.fromByteArray(e):Uo.fromByteArray(e.slice(t,i))}function Xd(e,t,i){i=Math.min(e.length,i);for(var n=[],r=t;r<i;){var s,o,a,l,h=e[r],c=null,u=h>239?4:h>223?3:h>191?2:1;if(r+u<=i)switch(u){case 1:h<128&&(c=h);break;case 2:(192&(s=e[r+1]))==128&&(l=(31&h)<<6|63&s)>127&&(c=l);break;case 3:s=e[r+1],o=e[r+2],(192&s)==128&&(192&o)==128&&(l=(15&h)<<12|(63&s)<<6|63&o)>2047&&(l<55296||l>57343)&&(c=l);break;case 4:s=e[r+1],o=e[r+2],a=e[r+3],(192&s)==128&&(192&o)==128&&(192&a)==128&&(l=(15&h)<<18|(63&s)<<12|(63&o)<<6|63&a)>65535&&l<1114112&&(c=l)}c===null?(c=65533,u=1):c>65535&&(c-=65536,n.push(c>>>10&1023|55296),c=56320|1023&c),n.push(c),r+=u}return function(f){var d=f.length;if(d<=4096)return String.fromCharCode.apply(String,f);for(var g="",y=0;y<d;)g+=String.fromCharCode.apply(String,f.slice(y,y+=4096));return g}(n)}function N0(e,t,i){var n="";i=Math.min(e.length,i);for(var r=t;r<i;++r)n+=String.fromCharCode(127&e[r]);return n}function F0(e,t,i){var n="";i=Math.min(e.length,i);for(var r=t;r<i;++r)n+=String.fromCharCode(e[r]);return n}function U0(e,t,i){var n=e.length;(!t||t<0)&&(t=0),(!i||i<0||i>n)&&(i=n);for(var r="",s=t;s<i;++s)r+=ep[e[s]];return r}function j0(e,t,i){for(var n=e.slice(t,i),r="",s=0;s<n.length;s+=2)r+=String.fromCharCode(n[s]+256*n[s+1]);return r}function Le(e,t,i){if(e%1!=0||e<0)throw new RangeError("offset is not uint");if(e+t>i)throw new RangeError("Trying to access beyond buffer length")}function Qe(e,t,i,n,r,s){if(!bt.isBuffer(e))throw new TypeError('"buffer" argument must be a Buffer instance');if(t>r||t<s)throw new RangeError('"value" argument is out of bounds');if(i+n>e.length)throw new RangeError("Index out of range")}function Zd(e,t,i,n,r,s){if(i+n>e.length)throw new RangeError("Index out of range");if(i<0)throw new RangeError("Index out of range")}function uu(e,t,i,n,r){return t=+t,i>>>=0,r||Zd(e,0,i,4),Kn.write(e,t,i,n,23,4),i+4}function fu(e,t,i,n,r){return t=+t,i>>>=0,r||Zd(e,0,i,8),Kn.write(e,t,i,n,52,8),i+8}function dh(e,t){var i;t=t||1/0;for(var n=e.length,r=null,s=[],o=0;o<n;++o){if((i=e.charCodeAt(o))>55295&&i<57344){if(!r){if(i>56319){(t-=3)>-1&&s.push(239,191,189);continue}if(o+1===n){(t-=3)>-1&&s.push(239,191,189);continue}r=i;continue}if(i<56320){(t-=3)>-1&&s.push(239,191,189),r=i;continue}i=65536+(r-55296<<10|i-56320)}else r&&(t-=3)>-1&&s.push(239,191,189);if(r=null,i<128){if((t-=1)<0)break;s.push(i)}else if(i<2048){if((t-=2)<0)break;s.push(i>>6|192,63&i|128)}else if(i<65536){if((t-=3)<0)break;s.push(i>>12|224,i>>6&63|128,63&i|128)}else{if(!(i<1114112))throw new Error("Invalid code point");if((t-=4)<0)break;s.push(i>>18|240,i>>12&63|128,i>>6&63|128,63&i|128)}}return s}function Jd(e){return Uo.toByteArray(function(t){if((t=(t=t.split("=")[0]).trim().replace(tp,"")).length<2)return"";for(;t.length%4!=0;)t+="=";return t}(e))}function ra(e,t,i,n){for(var r=0;r<n&&!(r+i>=t.length||r>=e.length);++r)t[r+i]=e[r];return r}function Zi(e,t){return e instanceof t||e!=null&&e.constructor!=null&&e.constructor.name!=null&&e.constructor.name===t.name}function sc(e){return e!=e}function du(e,t){for(var i in e)t[i]=e[i]}function Nn(e,t,i){return di(e,t,i)}function jr(e){var t;switch(this.encoding=function(i){var n=function(r){if(!r)return"utf8";for(var s;;)switch(r){case"utf8":case"utf-8":return"utf8";case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return"utf16le";case"latin1":case"binary":return"latin1";case"base64":case"ascii":case"hex":return r;default:if(s)return;r=(""+r).toLowerCase(),s=!0}}(i);if(typeof n!="string"&&(jo.isEncoding===ph||!ph(i)))throw new Error("Unknown encoding: "+i);return n||i}(e),this.encoding){case"utf16le":this.text=Y0,this.end=z0,t=4;break;case"utf8":this.fillLast=W0,t=4;break;case"base64":this.text=V0,this.end=H0,t=3;break;default:return this.write=q0,this.end=$0,void 0}this.lastNeed=0,this.lastTotal=0,this.lastChar=jo.allocUnsafe(t)}function Ia(e){return e<=127?0:e>>5==6?2:e>>4==14?3:e>>3==30?4:e>>6==2?-1:-2}function W0(e){var t=this.lastTotal-this.lastNeed,i=function(n,r,s){if((192&r[0])!=128)return n.lastNeed=0,"ï¿½";if(n.lastNeed>1&&r.length>1){if((192&r[1])!=128)return n.lastNeed=1,"ï¿½";if(n.lastNeed>2&&r.length>2&&(192&r[2])!=128)return n.lastNeed=2,"ï¿½"}}(this,e);return i!==void 0?i:this.lastNeed<=e.length?(e.copy(this.lastChar,t,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal)):(e.copy(this.lastChar,t,0,e.length),this.lastNeed-=e.length,void 0)}function Y0(e,t){if((e.length-t)%2==0){var i=e.toString("utf16le",t);if(i){var n=i.charCodeAt(i.length-1);if(n>=55296&&n<=56319)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=e[e.length-2],this.lastChar[1]=e[e.length-1],i.slice(0,-1)}return i}return this.lastNeed=1,this.lastTotal=2,this.lastChar[0]=e[e.length-1],e.toString("utf16le",t,e.length-1)}function z0(e){var t=e&&e.length?this.write(e):"";if(this.lastNeed){var i=this.lastTotal-this.lastNeed;return t+this.lastChar.toString("utf16le",0,i)}return t}function V0(e,t){var i=(e.length-t)%3;return i===0?e.toString("base64",t):(this.lastNeed=3-i,this.lastTotal=3,i===1?this.lastChar[0]=e[e.length-1]:(this.lastChar[0]=e[e.length-2],this.lastChar[1]=e[e.length-1]),e.toString("base64",t,e.length-i))}function H0(e){var t=e&&e.length?this.write(e):"";return this.lastNeed?t+this.lastChar.toString("base64",0,3-this.lastNeed):t}function q0(e){return e.toString(this.encoding)}function $0(e){return e&&e.length?this.write(e):""}var pu,gi,ei,gu,Us,Fn,mu,bu,ki,Uo,Kn,Ra,tp,ep,Wr,Yr,di,yu,kr,jo,ph,_u=je(()=>{for(dt(),gt(),pt(),pu={byteLength:function(e){var t=lu(e),i=t[0],n=t[1];return 3*(i+n)/4-n},toByteArray:function(e){var t,i,n=lu(e),r=n[0],s=n[1],o=new gu(function(h,c,u){return 3*(c+u)/4-u}(0,r,s)),a=0,l=s>0?r-4:r;for(i=0;i<l;i+=4)t=ei[e.charCodeAt(i)]<<18|ei[e.charCodeAt(i+1)]<<12|ei[e.charCodeAt(i+2)]<<6|ei[e.charCodeAt(i+3)],o[a++]=t>>16&255,o[a++]=t>>8&255,o[a++]=255&t;return s===2&&(t=ei[e.charCodeAt(i)]<<2|ei[e.charCodeAt(i+1)]>>4,o[a++]=255&t),s===1&&(t=ei[e.charCodeAt(i)]<<10|ei[e.charCodeAt(i+1)]<<4|ei[e.charCodeAt(i+2)]>>2,o[a++]=t>>8&255,o[a++]=255&t),o},fromByteArray:function(e){for(var t,i=e.length,n=i%3,r=[],s=0,o=i-n;s<o;s+=16383)r.push(T0(e,s,s+16383>o?o:s+16383));return n===1?(t=e[i-1],r.push(gi[t>>2]+gi[t<<4&63]+"==")):n===2&&(t=(e[i-2]<<8)+e[i-1],r.push(gi[t>>10]+gi[t>>4&63]+gi[t<<2&63]+"=")),r.join("")}},gi=[],ei=[],gu=typeof Uint8Array<"u"?Uint8Array:Array,Us="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",Fn=0,mu=Us.length;Fn<mu;++Fn)gi[Fn]=Us[Fn],ei[Us.charCodeAt(Fn)]=Fn;ei["-".charCodeAt(0)]=62,ei["_".charCodeAt(0)]=63,bu={read:function(e,t,i,n,r){var s,o,a=8*r-n-1,l=(1<<a)-1,h=l>>1,c=-7,u=i?r-1:0,f=i?-1:1,d=e[t+u];for(u+=f,s=d&(1<<-c)-1,d>>=-c,c+=a;c>0;s=256*s+e[t+u],u+=f,c-=8);for(o=s&(1<<-c)-1,s>>=-c,c+=n;c>0;o=256*o+e[t+u],u+=f,c-=8);if(s===0)s=1-h;else{if(s===l)return o?NaN:1/0*(d?-1:1);o+=Math.pow(2,n),s-=h}return(d?-1:1)*o*Math.pow(2,s-n)},write:function(e,t,i,n,r,s){var o,a,l,h=8*s-r-1,c=(1<<h)-1,u=c>>1,f=r===23?Math.pow(2,-24)-Math.pow(2,-77):0,d=n?0:s-1,g=n?1:-1,y=t<0||t===0&&1/t<0?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(a=isNaN(t)?1:0,o=c):(o=Math.floor(Math.log(t)/Math.LN2),t*(l=Math.pow(2,-o))<1&&(o--,l*=2),(t+=o+u>=1?f/l:f*Math.pow(2,1-u))*l>=2&&(o++,l/=2),o+u>=c?(a=0,o=c):o+u>=1?(a=(t*l-1)*Math.pow(2,r),o+=u):(a=t*Math.pow(2,u-1)*Math.pow(2,r),o=0));r>=8;e[i+d]=255&a,d+=g,a/=256,r-=8);for(o=o<<r|a,h+=r;h>0;e[i+d]=255&o,d+=g,o/=256,h-=8);e[i+d-g]|=128*y}},ki={},Uo=pu,Kn=bu,Ra=typeof Symbol=="function"&&typeof Symbol.for=="function"?Symbol.for("nodejs.util.inspect.custom"):null,ki.Buffer=bt,ki.SlowBuffer=function(e){return+e!=e&&(e=0),bt.alloc(+e)},ki.INSPECT_MAX_BYTES=50,ki.kMaxLength=2147483647,bt.TYPED_ARRAY_SUPPORT=function(){try{var e=new Uint8Array(1),t={foo:function(){return 42}};return Object.setPrototypeOf(t,Uint8Array.prototype),Object.setPrototypeOf(e,t),e.foo()===42}catch{return!1}}(),bt.TYPED_ARRAY_SUPPORT||typeof console>"u"||typeof console.error!="function"||console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support."),Object.defineProperty(bt.prototype,"parent",{enumerable:!0,get:function(){if(bt.isBuffer(this))return this.buffer}}),Object.defineProperty(bt.prototype,"offset",{enumerable:!0,get:function(){if(bt.isBuffer(this))return this.byteOffset}}),bt.poolSize=8192,bt.from=function(e,t,i){return $d(e,t,i)},Object.setPrototypeOf(bt.prototype,Uint8Array.prototype),Object.setPrototypeOf(bt,Uint8Array),bt.alloc=function(e,t,i){return function(n,r,s){return Gd(n),n<=0?Xi(n):r!==void 0?typeof s=="string"?Xi(n).fill(r,s):Xi(n).fill(r):Xi(n)}(e,t,i)},bt.allocUnsafe=function(e){return fh(e)},bt.allocUnsafeSlow=function(e){return fh(e)},bt.isBuffer=function(e){return e!=null&&e._isBuffer===!0&&e!==bt.prototype},bt.compare=function(e,t){if(Zi(e,Uint8Array)&&(e=bt.from(e,e.offset,e.byteLength)),Zi(t,Uint8Array)&&(t=bt.from(t,t.offset,t.byteLength)),!bt.isBuffer(e)||!bt.isBuffer(t))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(e===t)return 0;for(var i=e.length,n=t.length,r=0,s=Math.min(i,n);r<s;++r)if(e[r]!==t[r]){i=e[r],n=t[r];break}return i<n?-1:n<i?1:0},bt.isEncoding=function(e){switch(String(e).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},bt.concat=function(e,t){if(!Array.isArray(e))throw new TypeError('"list" argument must be an Array of Buffers');if(e.length===0)return bt.alloc(0);var i;if(t===void 0)for(t=0,i=0;i<e.length;++i)t+=e[i].length;var n=bt.allocUnsafe(t),r=0;for(i=0;i<e.length;++i){var s=e[i];if(Zi(s,Uint8Array)&&(s=bt.from(s)),!bt.isBuffer(s))throw new TypeError('"list" argument must be an Array of Buffers');s.copy(n,r),r+=s.length}return n},bt.byteLength=Kd,bt.prototype._isBuffer=!0,bt.prototype.swap16=function(){var e=this.length;if(e%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var t=0;t<e;t+=2)Bn(this,t,t+1);return this},bt.prototype.swap32=function(){var e=this.length;if(e%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var t=0;t<e;t+=4)Bn(this,t,t+3),Bn(this,t+1,t+2);return this},bt.prototype.swap64=function(){var e=this.length;if(e%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var t=0;t<e;t+=8)Bn(this,t,t+7),Bn(this,t+1,t+6),Bn(this,t+2,t+5),Bn(this,t+3,t+4);return this},bt.prototype.toString=function(){var e=this.length;return e===0?"":arguments.length===0?Xd(this,0,e):P0.apply(this,arguments)},bt.prototype.toLocaleString=bt.prototype.toString,bt.prototype.equals=function(e){if(!bt.isBuffer(e))throw new TypeError("Argument must be a Buffer");return this===e||bt.compare(this,e)===0},bt.prototype.inspect=function(){var e="",t=ki.INSPECT_MAX_BYTES;return e=this.toString("hex",0,t).replace(/(.{2})/g,"$1 ").trim(),this.length>t&&(e+=" ... "),"<Buffer "+e+">"},Ra&&(bt.prototype[Ra]=bt.prototype.inspect),bt.prototype.compare=function(e,t,i,n,r){if(Zi(e,Uint8Array)&&(e=bt.from(e,e.offset,e.byteLength)),!bt.isBuffer(e))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof e);if(t===void 0&&(t=0),i===void 0&&(i=e?e.length:0),n===void 0&&(n=0),r===void 0&&(r=this.length),t<0||i>e.length||n<0||r>this.length)throw new RangeError("out of range index");if(n>=r&&t>=i)return 0;if(n>=r)return-1;if(t>=i)return 1;if(this===e)return 0;for(var s=(r>>>=0)-(n>>>=0),o=(i>>>=0)-(t>>>=0),a=Math.min(s,o),l=this.slice(n,r),h=e.slice(t,i),c=0;c<a;++c)if(l[c]!==h[c]){s=l[c],o=h[c];break}return s<o?-1:o<s?1:0},bt.prototype.includes=function(e,t,i){return this.indexOf(e,t,i)!==-1},bt.prototype.indexOf=function(e,t,i){return hu(this,e,t,i,!0)},bt.prototype.lastIndexOf=function(e,t,i){return hu(this,e,t,i,!1)},bt.prototype.write=function(e,t,i,n){if(t===void 0)n="utf8",i=this.length,t=0;else if(i===void 0&&typeof t=="string")n=t,i=this.length,t=0;else{if(!isFinite(t))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");t>>>=0,isFinite(i)?(i>>>=0,n===void 0&&(n="utf8")):(n=i,i=void 0)}var r=this.length-t;if((i===void 0||i>r)&&(i=r),e.length>0&&(i<0||t<0)||t>this.length)throw new RangeError("Attempt to write outside buffer bounds");n||(n="utf8");for(var s=!1;;)switch(n){case"hex":return C0(this,e,t,i);case"utf8":case"utf-8":return I0(this,e,t,i);case"ascii":return Qd(this,e,t,i);case"latin1":case"binary":return R0(this,e,t,i);case"base64":return D0(this,e,t,i);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return L0(this,e,t,i);default:if(s)throw new TypeError("Unknown encoding: "+n);n=(""+n).toLowerCase(),s=!0}},bt.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}},bt.prototype.slice=function(e,t){var i=this.length;(e=~~e)<0?(e+=i)<0&&(e=0):e>i&&(e=i),(t=t===void 0?i:~~t)<0?(t+=i)<0&&(t=0):t>i&&(t=i),t<e&&(t=e);var n=this.subarray(e,t);return Object.setPrototypeOf(n,bt.prototype),n},bt.prototype.readUIntLE=function(e,t,i){e>>>=0,t>>>=0,i||Le(e,t,this.length);for(var n=this[e],r=1,s=0;++s<t&&(r*=256);)n+=this[e+s]*r;return n},bt.prototype.readUIntBE=function(e,t,i){e>>>=0,t>>>=0,i||Le(e,t,this.length);for(var n=this[e+--t],r=1;t>0&&(r*=256);)n+=this[e+--t]*r;return n},bt.prototype.readUInt8=function(e,t){return e>>>=0,t||Le(e,1,this.length),this[e]},bt.prototype.readUInt16LE=function(e,t){return e>>>=0,t||Le(e,2,this.length),this[e]|this[e+1]<<8},bt.prototype.readUInt16BE=function(e,t){return e>>>=0,t||Le(e,2,this.length),this[e]<<8|this[e+1]},bt.prototype.readUInt32LE=function(e,t){return e>>>=0,t||Le(e,4,this.length),(this[e]|this[e+1]<<8|this[e+2]<<16)+16777216*this[e+3]},bt.prototype.readUInt32BE=function(e,t){return e>>>=0,t||Le(e,4,this.length),16777216*this[e]+(this[e+1]<<16|this[e+2]<<8|this[e+3])},bt.prototype.readIntLE=function(e,t,i){e>>>=0,t>>>=0,i||Le(e,t,this.length);for(var n=this[e],r=1,s=0;++s<t&&(r*=256);)n+=this[e+s]*r;return n>=(r*=128)&&(n-=Math.pow(2,8*t)),n},bt.prototype.readIntBE=function(e,t,i){e>>>=0,t>>>=0,i||Le(e,t,this.length);for(var n=t,r=1,s=this[e+--n];n>0&&(r*=256);)s+=this[e+--n]*r;return s>=(r*=128)&&(s-=Math.pow(2,8*t)),s},bt.prototype.readInt8=function(e,t){return e>>>=0,t||Le(e,1,this.length),128&this[e]?-1*(255-this[e]+1):this[e]},bt.prototype.readInt16LE=function(e,t){e>>>=0,t||Le(e,2,this.length);var i=this[e]|this[e+1]<<8;return 32768&i?4294901760|i:i},bt.prototype.readInt16BE=function(e,t){e>>>=0,t||Le(e,2,this.length);var i=this[e+1]|this[e]<<8;return 32768&i?4294901760|i:i},bt.prototype.readInt32LE=function(e,t){return e>>>=0,t||Le(e,4,this.length),this[e]|this[e+1]<<8|this[e+2]<<16|this[e+3]<<24},bt.prototype.readInt32BE=function(e,t){return e>>>=0,t||Le(e,4,this.length),this[e]<<24|this[e+1]<<16|this[e+2]<<8|this[e+3]},bt.prototype.readFloatLE=function(e,t){return e>>>=0,t||Le(e,4,this.length),Kn.read(this,e,!0,23,4)},bt.prototype.readFloatBE=function(e,t){return e>>>=0,t||Le(e,4,this.length),Kn.read(this,e,!1,23,4)},bt.prototype.readDoubleLE=function(e,t){return e>>>=0,t||Le(e,8,this.length),Kn.read(this,e,!0,52,8)},bt.prototype.readDoubleBE=function(e,t){return e>>>=0,t||Le(e,8,this.length),Kn.read(this,e,!1,52,8)},bt.prototype.writeUIntLE=function(e,t,i,n){e=+e,t>>>=0,i>>>=0,n||Qe(this,e,t,i,Math.pow(2,8*i)-1,0);var r=1,s=0;for(this[t]=255&e;++s<i&&(r*=256);)this[t+s]=e/r&255;return t+i},bt.prototype.writeUIntBE=function(e,t,i,n){e=+e,t>>>=0,i>>>=0,n||Qe(this,e,t,i,Math.pow(2,8*i)-1,0);var r=i-1,s=1;for(this[t+r]=255&e;--r>=0&&(s*=256);)this[t+r]=e/s&255;return t+i},bt.prototype.writeUInt8=function(e,t,i){return e=+e,t>>>=0,i||Qe(this,e,t,1,255,0),this[t]=255&e,t+1},bt.prototype.writeUInt16LE=function(e,t,i){return e=+e,t>>>=0,i||Qe(this,e,t,2,65535,0),this[t]=255&e,this[t+1]=e>>>8,t+2},bt.prototype.writeUInt16BE=function(e,t,i){return e=+e,t>>>=0,i||Qe(this,e,t,2,65535,0),this[t]=e>>>8,this[t+1]=255&e,t+2},bt.prototype.writeUInt32LE=function(e,t,i){return e=+e,t>>>=0,i||Qe(this,e,t,4,4294967295,0),this[t+3]=e>>>24,this[t+2]=e>>>16,this[t+1]=e>>>8,this[t]=255&e,t+4},bt.prototype.writeUInt32BE=function(e,t,i){return e=+e,t>>>=0,i||Qe(this,e,t,4,4294967295,0),this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e,t+4},bt.prototype.writeIntLE=function(e,t,i,n){if(e=+e,t>>>=0,!n){var r=Math.pow(2,8*i-1);Qe(this,e,t,i,r-1,-r)}var s=0,o=1,a=0;for(this[t]=255&e;++s<i&&(o*=256);)e<0&&a===0&&this[t+s-1]!==0&&(a=1),this[t+s]=(e/o>>0)-a&255;return t+i},bt.prototype.writeIntBE=function(e,t,i,n){if(e=+e,t>>>=0,!n){var r=Math.pow(2,8*i-1);Qe(this,e,t,i,r-1,-r)}var s=i-1,o=1,a=0;for(this[t+s]=255&e;--s>=0&&(o*=256);)e<0&&a===0&&this[t+s+1]!==0&&(a=1),this[t+s]=(e/o>>0)-a&255;return t+i},bt.prototype.writeInt8=function(e,t,i){return e=+e,t>>>=0,i||Qe(this,e,t,1,127,-128),e<0&&(e=255+e+1),this[t]=255&e,t+1},bt.prototype.writeInt16LE=function(e,t,i){return e=+e,t>>>=0,i||Qe(this,e,t,2,32767,-32768),this[t]=255&e,this[t+1]=e>>>8,t+2},bt.prototype.writeInt16BE=function(e,t,i){return e=+e,t>>>=0,i||Qe(this,e,t,2,32767,-32768),this[t]=e>>>8,this[t+1]=255&e,t+2},bt.prototype.writeInt32LE=function(e,t,i){return e=+e,t>>>=0,i||Qe(this,e,t,4,2147483647,-2147483648),this[t]=255&e,this[t+1]=e>>>8,this[t+2]=e>>>16,this[t+3]=e>>>24,t+4},bt.prototype.writeInt32BE=function(e,t,i){return e=+e,t>>>=0,i||Qe(this,e,t,4,2147483647,-2147483648),e<0&&(e=4294967295+e+1),this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e,t+4},bt.prototype.writeFloatLE=function(e,t,i){return uu(this,e,t,!0,i)},bt.prototype.writeFloatBE=function(e,t,i){return uu(this,e,t,!1,i)},bt.prototype.writeDoubleLE=function(e,t,i){return fu(this,e,t,!0,i)},bt.prototype.writeDoubleBE=function(e,t,i){return fu(this,e,t,!1,i)},bt.prototype.copy=function(e,t,i,n){if(!bt.isBuffer(e))throw new TypeError("argument should be a Buffer");if(i||(i=0),n||n===0||(n=this.length),t>=e.length&&(t=e.length),t||(t=0),n>0&&n<i&&(n=i),n===i||e.length===0||this.length===0)return 0;if(t<0)throw new RangeError("targetStart out of bounds");if(i<0||i>=this.length)throw new RangeError("Index out of range");if(n<0)throw new RangeError("sourceEnd out of bounds");n>this.length&&(n=this.length),e.length-t<n-i&&(n=e.length-t+i);var r=n-i;if(this===e&&typeof Uint8Array.prototype.copyWithin=="function")this.copyWithin(t,i,n);else if(this===e&&i<t&&t<n)for(var s=r-1;s>=0;--s)e[s+t]=this[s+i];else Uint8Array.prototype.set.call(e,this.subarray(i,n),t);return r},bt.prototype.fill=function(e,t,i,n){if(typeof e=="string"){if(typeof t=="string"?(n=t,t=0,i=this.length):typeof i=="string"&&(n=i,i=this.length),n!==void 0&&typeof n!="string")throw new TypeError("encoding must be a string");if(typeof n=="string"&&!bt.isEncoding(n))throw new TypeError("Unknown encoding: "+n);if(e.length===1){var r=e.charCodeAt(0);(n==="utf8"&&r<128||n==="latin1")&&(e=r)}}else typeof e=="number"?e&=255:typeof e=="boolean"&&(e=Number(e));if(t<0||this.length<t||this.length<i)throw new RangeError("Out of range index");if(i<=t)return this;var s;if(t>>>=0,i=i===void 0?this.length:i>>>0,e||(e=0),typeof e=="number")for(s=t;s<i;++s)this[s]=e;else{var o=bt.isBuffer(e)?e:bt.from(e,n),a=o.length;if(a===0)throw new TypeError('The value "'+e+'" is invalid for argument "value"');for(s=0;s<i-t;++s)this[s+t]=o[s%a]}return this},tp=/[^+/0-9A-Za-z-_]/g,ep=function(){for(var e=new Array(256),t=0;t<16;++t)for(var i=16*t,n=0;n<16;++n)e[i+n]="0123456789abcdef"[t]+"0123456789abcdef"[n];return e}(),ki.Buffer,ki.INSPECT_MAX_BYTES,ki.kMaxLength,Wr={},Yr=ki,di=Yr.Buffer,di.from&&di.alloc&&di.allocUnsafe&&di.allocUnsafeSlow?Wr=Yr:(du(Yr,Wr),Wr.Buffer=Nn),Nn.prototype=Object.create(di.prototype),du(di,Nn),Nn.from=function(e,t,i){if(typeof e=="number")throw new TypeError("Argument must not be a number");return di(e,t,i)},Nn.alloc=function(e,t,i){if(typeof e!="number")throw new TypeError("Argument must be a number");var n=di(e);return t!==void 0?typeof i=="string"?n.fill(t,i):n.fill(t):n.fill(0),n},Nn.allocUnsafe=function(e){if(typeof e!="number")throw new TypeError("Argument must be a number");return di(e)},Nn.allocUnsafeSlow=function(e){if(typeof e!="number")throw new TypeError("Argument must be a number");return Yr.SlowBuffer(e)},yu=Wr,kr={},jo=yu.Buffer,ph=jo.isEncoding||function(e){switch((e=""+e)&&e.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}},kr.StringDecoder=jr,jr.prototype.write=function(e){if(e.length===0)return"";var t,i;if(this.lastNeed){if((t=this.fillLast(e))===void 0)return"";i=this.lastNeed,this.lastNeed=0}else i=0;return i<e.length?t?t+this.text(e,i):this.text(e,i):t||""},jr.prototype.end=function(e){var t=e&&e.length?this.write(e):"";return this.lastNeed?t+"ï¿½":t},jr.prototype.text=function(e,t){var i=function(r,s,o){var a=s.length-1;if(a<o)return 0;var l=Ia(s[a]);return l>=0?(l>0&&(r.lastNeed=l-1),l):--a<o||l===-2?0:(l=Ia(s[a]))>=0?(l>0&&(r.lastNeed=l-2),l):--a<o||l===-2?0:(l=Ia(s[a]))>=0?(l>0&&(l===2?l=0:r.lastNeed=l-3),l):0}(this,e,t);if(!this.lastNeed)return e.toString("utf8",t);this.lastTotal=i;var n=e.length-(i-this.lastNeed);return e.copy(this.lastChar,0,n),e.toString("utf8",t,n)},jr.prototype.fillLast=function(e){if(this.lastNeed<=e.length)return e.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);e.copy(this.lastChar,this.lastTotal-this.lastNeed,0,e.length),this.lastNeed-=e.length},kr.StringDecoder,kr.StringDecoder}),ip={};ur(ip,{StringDecoder:()=>np,default:()=>kr});var np,G0=je(()=>{dt(),gt(),pt(),_u(),_u(),np=kr.StringDecoder}),rp=vt((e,t)=>{dt(),gt(),pt();var i=fr(),{PromisePrototypeThen:n,SymbolAsyncIterator:r,SymbolIterator:s}=De(),{Buffer:o}=(Ye(),ae(We)),{ERR_INVALID_ARG_TYPE:a,ERR_STREAM_NULL_VALUES:l}=ti().codes;function h(c,u,f){let d;if(typeof u=="string"||u instanceof o)return new c({objectMode:!0,...f,read(){this.push(u),this.push(null)}});let g;if(u&&u[r])g=!0,d=u[r]();else if(u&&u[s])g=!1,d=u[s]();else throw new a("iterable",["Iterable"],u);let y=new c({objectMode:!0,highWaterMark:1,...f}),_=!1;y._read=function(){_||(_=!0,v())},y._destroy=function(S,T){n(w(S),()=>i.nextTick(T,S),O=>i.nextTick(T,O||S))};async function w(S){let T=S!=null,O=typeof d.throw=="function";if(T&&O){let{value:k,done:M}=await d.throw(S);if(await k,M)return}if(typeof d.return=="function"){let{value:k}=await d.return();await k}}async function v(){for(;;){try{let{value:S,done:T}=g?await d.next():d.next();if(T)y.push(null);else{let O=S&&typeof S.then=="function"?await S:S;if(O===null)throw _=!1,new l;if(y.push(O))continue;_=!1}}catch(S){y.destroy(S)}break}}return y}t.exports=h}),sa=vt((e,t)=>{dt(),gt(),pt();var i=fr(),{ArrayPrototypeIndexOf:n,NumberIsInteger:r,NumberIsNaN:s,NumberParseInt:o,ObjectDefineProperties:a,ObjectKeys:l,ObjectSetPrototypeOf:h,Promise:c,SafeSet:u,SymbolAsyncIterator:f,Symbol:d}=De();t.exports=I,I.ReadableState=xt;var{EventEmitter:g}=(Lr(),ae(dr)),{Stream:y,prependListener:_}=ic(),{Buffer:w}=(Ye(),ae(We)),{addAbortSignal:v}=na(),S=In(),T=an().debuglog("stream",p=>{T=p}),O=A0(),k=Dr(),{getHighWaterMark:M,getDefaultHighWaterMark:A}=nc(),{aggregateTwoErrors:B,codes:{ERR_INVALID_ARG_TYPE:q,ERR_METHOD_NOT_IMPLEMENTED:$,ERR_OUT_OF_RANGE:x,ERR_STREAM_PUSH_AFTER_EOF:z,ERR_STREAM_UNSHIFT_AFTER_END_EVENT:X}}=ti(),{validateObject:V}=ia(),rt=d("kPaused"),{StringDecoder:J}=(G0(),ae(ip)),H=rp();h(I.prototype,y.prototype),h(I,y);var ht=()=>{},{errorOrDestroy:nt}=k;function xt(p,b,P){typeof P!="boolean"&&(P=b instanceof ln()),this.objectMode=!!(p&&p.objectMode),P&&(this.objectMode=this.objectMode||!!(p&&p.readableObjectMode)),this.highWaterMark=p?M(this,p,"readableHighWaterMark",P):A(!1),this.buffer=new O,this.length=0,this.pipes=[],this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.constructed=!0,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this[rt]=null,this.errorEmitted=!1,this.emitClose=!p||p.emitClose!==!1,this.autoDestroy=!p||p.autoDestroy!==!1,this.destroyed=!1,this.errored=null,this.closed=!1,this.closeEmitted=!1,this.defaultEncoding=p&&p.defaultEncoding||"utf8",this.awaitDrainWriters=null,this.multiAwaitDrain=!1,this.readingMore=!1,this.dataEmitted=!1,this.decoder=null,this.encoding=null,p&&p.encoding&&(this.decoder=new J(p.encoding),this.encoding=p.encoding)}function I(p){if(!(this instanceof I))return new I(p);let b=this instanceof ln();this._readableState=new xt(p,this,b),p&&(typeof p.read=="function"&&(this._read=p.read),typeof p.destroy=="function"&&(this._destroy=p.destroy),typeof p.construct=="function"&&(this._construct=p.construct),p.signal&&!b&&v(p.signal,this)),y.call(this,p),k.construct(this,()=>{this._readableState.needReadable&&it(this,this._readableState)})}I.prototype.destroy=k.destroy,I.prototype._undestroy=k.undestroy,I.prototype._destroy=function(p,b){b(p)},I.prototype[g.captureRejectionSymbol]=function(p){this.destroy(p)},I.prototype.push=function(p,b){return K(this,p,b,!1)},I.prototype.unshift=function(p,b){return K(this,p,b,!0)};function K(p,b,P,R){T("readableAddChunk",b);let E=p._readableState,D;if(E.objectMode||(typeof b=="string"?(P=P||E.defaultEncoding,E.encoding!==P&&(R&&E.encoding?b=w.from(b,P).toString(E.encoding):(b=w.from(b,P),P=""))):b instanceof w?P="":y._isUint8Array(b)?(b=y._uint8ArrayToBuffer(b),P=""):b!=null&&(D=new q("chunk",["string","Buffer","Uint8Array"],b))),D)nt(p,D);else if(b===null)E.reading=!1,C(p,E);else if(E.objectMode||b&&b.length>0)if(R)if(E.endEmitted)nt(p,new X);else{if(E.destroyed||E.errored)return!1;st(p,E,b,!0)}else if(E.ended)nt(p,new z);else{if(E.destroyed||E.errored)return!1;E.reading=!1,E.decoder&&!P?(b=E.decoder.write(b),E.objectMode||b.length!==0?st(p,E,b,!1):it(p,E)):st(p,E,b,!1)}else R||(E.reading=!1,it(p,E));return!E.ended&&(E.length<E.highWaterMark||E.length===0)}function st(p,b,P,R){b.flowing&&b.length===0&&!b.sync&&p.listenerCount("data")>0?(b.multiAwaitDrain?b.awaitDrainWriters.clear():b.awaitDrainWriters=null,b.dataEmitted=!0,p.emit("data",P)):(b.length+=b.objectMode?1:P.length,R?b.buffer.unshift(P):b.buffer.push(P),b.needReadable&&G(p)),it(p,b)}I.prototype.isPaused=function(){let p=this._readableState;return p[rt]===!0||p.flowing===!1},I.prototype.setEncoding=function(p){let b=new J(p);this._readableState.decoder=b,this._readableState.encoding=this._readableState.decoder.encoding;let P=this._readableState.buffer,R="";for(let E of P)R+=b.write(E);return P.clear(),R!==""&&P.push(R),this._readableState.length=R.length,this};var Et=1073741824;function lt(p){if(p>Et)throw new x("size","<= 1GiB",p);return p--,p|=p>>>1,p|=p>>>2,p|=p>>>4,p|=p>>>8,p|=p>>>16,p++,p}function N(p,b){return p<=0||b.length===0&&b.ended?0:b.objectMode?1:s(p)?b.flowing&&b.length?b.buffer.first().length:b.length:p<=b.length?p:b.ended?b.length:0}I.prototype.read=function(p){T("read",p),p===void 0?p=NaN:r(p)||(p=o(p,10));let b=this._readableState,P=p;if(p>b.highWaterMark&&(b.highWaterMark=lt(p)),p!==0&&(b.emittedReadable=!1),p===0&&b.needReadable&&((b.highWaterMark!==0?b.length>=b.highWaterMark:b.length>0)||b.ended))return T("read: emitReadable",b.length,b.ended),b.length===0&&b.ended?_t(this):G(this),null;if(p=N(p,b),p===0&&b.ended)return b.length===0&&_t(this),null;let R=b.needReadable;if(T("need readable",R),(b.length===0||b.length-p<b.highWaterMark)&&(R=!0,T("length less than watermark",R)),b.ended||b.reading||b.destroyed||b.errored||!b.constructed)R=!1,T("reading, ended or constructing",R);else if(R){T("do read"),b.reading=!0,b.sync=!0,b.length===0&&(b.needReadable=!0);try{this._read(b.highWaterMark)}catch(D){nt(this,D)}b.sync=!1,b.reading||(p=N(P,b))}let E;return p>0?E=Q(p,b):E=null,E===null?(b.needReadable=b.length<=b.highWaterMark,p=0):(b.length-=p,b.multiAwaitDrain?b.awaitDrainWriters.clear():b.awaitDrainWriters=null),b.length===0&&(b.ended||(b.needReadable=!0),P!==p&&b.ended&&_t(this)),E!==null&&!b.errorEmitted&&!b.closeEmitted&&(b.dataEmitted=!0,this.emit("data",E)),E};function C(p,b){if(T("onEofChunk"),!b.ended){if(b.decoder){let P=b.decoder.end();P&&P.length&&(b.buffer.push(P),b.length+=b.objectMode?1:P.length)}b.ended=!0,b.sync?G(p):(b.needReadable=!1,b.emittedReadable=!0,ct(p))}}function G(p){let b=p._readableState;T("emitReadable",b.needReadable,b.emittedReadable),b.needReadable=!1,b.emittedReadable||(T("emitReadable",b.flowing),b.emittedReadable=!0,i.nextTick(ct,p))}function ct(p){let b=p._readableState;T("emitReadable_",b.destroyed,b.length,b.ended),!b.destroyed&&!b.errored&&(b.length||b.ended)&&(p.emit("readable"),b.emittedReadable=!1),b.needReadable=!b.flowing&&!b.ended&&b.length<=b.highWaterMark,ot(p)}function it(p,b){!b.readingMore&&b.constructed&&(b.readingMore=!0,i.nextTick(et,p,b))}function et(p,b){for(;!b.reading&&!b.ended&&(b.length<b.highWaterMark||b.flowing&&b.length===0);){let P=b.length;if(T("maybeReadMore read 0"),p.read(0),P===b.length)break}b.readingMore=!1}I.prototype._read=function(p){throw new $("_read()")},I.prototype.pipe=function(p,b){let P=this,R=this._readableState;R.pipes.length===1&&(R.multiAwaitDrain||(R.multiAwaitDrain=!0,R.awaitDrainWriters=new u(R.awaitDrainWriters?[R.awaitDrainWriters]:[]))),R.pipes.push(p),T("pipe count=%d opts=%j",R.pipes.length,b);let E=(!b||b.end!==!1)&&p!==i.stdout&&p!==i.stderr?U:Te;R.endEmitted?i.nextTick(E):P.once("end",E),p.on("unpipe",D);function D(oe,he){T("onunpipe"),oe===P&&he&&he.hasUnpiped===!1&&(he.hasUnpiped=!0,wt())}function U(){T("onend"),p.end()}let tt,at=!1;function wt(){T("cleanup"),p.removeListener("close",Ne),p.removeListener("finish",Kt),tt&&p.removeListener("drain",tt),p.removeListener("error",ge),p.removeListener("unpipe",D),P.removeListener("end",U),P.removeListener("end",Te),P.removeListener("data",Bt),at=!0,tt&&R.awaitDrainWriters&&(!p._writableState||p._writableState.needDrain)&&tt()}function Tt(){at||(R.pipes.length===1&&R.pipes[0]===p?(T("false write response, pause",0),R.awaitDrainWriters=p,R.multiAwaitDrain=!1):R.pipes.length>1&&R.pipes.includes(p)&&(T("false write response, pause",R.awaitDrainWriters.size),R.awaitDrainWriters.add(p)),P.pause()),tt||(tt=ft(P,p),p.on("drain",tt))}P.on("data",Bt);function Bt(oe){T("ondata");let he=p.write(oe);T("dest.write",he),he===!1&&Tt()}function ge(oe){if(T("onerror",oe),Te(),p.removeListener("error",ge),p.listenerCount("error")===0){let he=p._writableState||p._readableState;he&&!he.errorEmitted?nt(p,oe):p.emit("error",oe)}}_(p,"error",ge);function Ne(){p.removeListener("finish",Kt),Te()}p.once("close",Ne);function Kt(){T("onfinish"),p.removeListener("close",Ne),Te()}p.once("finish",Kt);function Te(){T("unpipe"),P.unpipe(p)}return p.emit("pipe",P),p.writableNeedDrain===!0?R.flowing&&Tt():R.flowing||(T("pipe resume"),P.resume()),p};function ft(p,b){return function(){let P=p._readableState;P.awaitDrainWriters===b?(T("pipeOnDrain",1),P.awaitDrainWriters=null):P.multiAwaitDrain&&(T("pipeOnDrain",P.awaitDrainWriters.size),P.awaitDrainWriters.delete(b)),(!P.awaitDrainWriters||P.awaitDrainWriters.size===0)&&p.listenerCount("data")&&p.resume()}}I.prototype.unpipe=function(p){let b=this._readableState,P={hasUnpiped:!1};if(b.pipes.length===0)return this;if(!p){let E=b.pipes;b.pipes=[],this.pause();for(let D=0;D<E.length;D++)E[D].emit("unpipe",this,{hasUnpiped:!1});return this}let R=n(b.pipes,p);return R===-1?this:(b.pipes.splice(R,1),b.pipes.length===0&&this.pause(),p.emit("unpipe",this,P),this)},I.prototype.on=function(p,b){let P=y.prototype.on.call(this,p,b),R=this._readableState;return p==="data"?(R.readableListening=this.listenerCount("readable")>0,R.flowing!==!1&&this.resume()):p==="readable"&&!R.endEmitted&&!R.readableListening&&(R.readableListening=R.needReadable=!0,R.flowing=!1,R.emittedReadable=!1,T("on readable",R.length,R.reading),R.length?G(this):R.reading||i.nextTick(L,this)),P},I.prototype.addListener=I.prototype.on,I.prototype.removeListener=function(p,b){let P=y.prototype.removeListener.call(this,p,b);return p==="readable"&&i.nextTick(ut,this),P},I.prototype.off=I.prototype.removeListener,I.prototype.removeAllListeners=function(p){let b=y.prototype.removeAllListeners.apply(this,arguments);return(p==="readable"||p===void 0)&&i.nextTick(ut,this),b};function ut(p){let b=p._readableState;b.readableListening=p.listenerCount("readable")>0,b.resumeScheduled&&b[rt]===!1?b.flowing=!0:p.listenerCount("data")>0?p.resume():b.readableListening||(b.flowing=null)}function L(p){T("readable nexttick read 0"),p.read(0)}I.prototype.resume=function(){let p=this._readableState;return p.flowing||(T("resume"),p.flowing=!p.readableListening,Y(this,p)),p[rt]=!1,this};function Y(p,b){b.resumeScheduled||(b.resumeScheduled=!0,i.nextTick(W,p,b))}function W(p,b){T("resume",b.reading),b.reading||p.read(0),b.resumeScheduled=!1,p.emit("resume"),ot(p),b.flowing&&!b.reading&&p.read(0)}I.prototype.pause=function(){return T("call pause flowing=%j",this._readableState.flowing),this._readableState.flowing!==!1&&(T("pause"),this._readableState.flowing=!1,this.emit("pause")),this._readableState[rt]=!0,this};function ot(p){let b=p._readableState;for(T("flow",b.flowing);b.flowing&&p.read()!==null;);}I.prototype.wrap=function(p){let b=!1;p.on("data",R=>{!this.push(R)&&p.pause&&(b=!0,p.pause())}),p.on("end",()=>{this.push(null)}),p.on("error",R=>{nt(this,R)}),p.on("close",()=>{this.destroy()}),p.on("destroy",()=>{this.destroy()}),this._read=()=>{b&&p.resume&&(b=!1,p.resume())};let P=l(p);for(let R=1;R<P.length;R++){let E=P[R];this[E]===void 0&&typeof p[E]=="function"&&(this[E]=p[E].bind(p))}return this},I.prototype[f]=function(){return Z(this)},I.prototype.iterator=function(p){return p!==void 0&&V(p,"options"),Z(this,p)};function Z(p,b){typeof p.read!="function"&&(p=I.wrap(p,{objectMode:!0}));let P=j(p,b);return P.stream=p,P}async function*j(p,b){let P=ht;function R(U){this===p?(P(),P=ht):P=U}p.on("readable",R);let E,D=S(p,{writable:!1},U=>{E=U?B(E,U):null,P(),P=ht});try{for(;;){let U=p.destroyed?null:p.read();if(U!==null)yield U;else{if(E)throw E;if(E===null)return;await new c(R)}}}catch(U){throw E=B(E,U),E}finally{(E||(b==null?void 0:b.destroyOnReturn)!==!1)&&(E===void 0||p._readableState.autoDestroy)?k.destroyer(p,null):(p.off("readable",R),D())}}a(I.prototype,{readable:{__proto__:null,get(){let p=this._readableState;return!!p&&p.readable!==!1&&!p.destroyed&&!p.errorEmitted&&!p.endEmitted},set(p){this._readableState&&(this._readableState.readable=!!p)}},readableDidRead:{__proto__:null,enumerable:!1,get:function(){return this._readableState.dataEmitted}},readableAborted:{__proto__:null,enumerable:!1,get:function(){return!!(this._readableState.readable!==!1&&(this._readableState.destroyed||this._readableState.errored)&&!this._readableState.endEmitted)}},readableHighWaterMark:{__proto__:null,enumerable:!1,get:function(){return this._readableState.highWaterMark}},readableBuffer:{__proto__:null,enumerable:!1,get:function(){return this._readableState&&this._readableState.buffer}},readableFlowing:{__proto__:null,enumerable:!1,get:function(){return this._readableState.flowing},set:function(p){this._readableState&&(this._readableState.flowing=p)}},readableLength:{__proto__:null,enumerable:!1,get(){return this._readableState.length}},readableObjectMode:{__proto__:null,enumerable:!1,get(){return this._readableState?this._readableState.objectMode:!1}},readableEncoding:{__proto__:null,enumerable:!1,get(){return this._readableState?this._readableState.encoding:null}},errored:{__proto__:null,enumerable:!1,get(){return this._readableState?this._readableState.errored:null}},closed:{__proto__:null,get(){return this._readableState?this._readableState.closed:!1}},destroyed:{__proto__:null,enumerable:!1,get(){return this._readableState?this._readableState.destroyed:!1},set(p){this._readableState&&(this._readableState.destroyed=p)}},readableEnded:{__proto__:null,enumerable:!1,get(){return this._readableState?this._readableState.endEmitted:!1}}}),a(xt.prototype,{pipesCount:{__proto__:null,get(){return this.pipes.length}},paused:{__proto__:null,get(){return this[rt]!==!1},set(p){this[rt]=!!p}}}),I._fromList=Q;function Q(p,b){if(b.length===0)return null;let P;return b.objectMode?P=b.buffer.shift():!p||p>=b.length?(b.decoder?P=b.buffer.join(""):b.buffer.length===1?P=b.buffer.first():P=b.buffer.concat(b.length),b.buffer.clear()):P=b.buffer.consume(p,b.decoder),P}function _t(p){let b=p._readableState;T("endReadable",b.endEmitted),b.endEmitted||(b.ended=!0,i.nextTick(Mt,b,p))}function Mt(p,b){if(T("endReadableNT",p.endEmitted,p.length),!p.errored&&!p.closeEmitted&&!p.endEmitted&&p.length===0){if(p.endEmitted=!0,b.emit("end"),b.writable&&b.allowHalfOpen===!1)i.nextTick(Ot,b);else if(p.autoDestroy){let P=b._writableState;(!P||P.autoDestroy&&(P.finished||P.writable===!1))&&b.destroy()}}}function Ot(p){p.writable&&!p.writableEnded&&!p.destroyed&&p.end()}I.from=function(p,b){return H(I,p,b)};var zt;function m(){return zt===void 0&&(zt={}),zt}I.fromWeb=function(p,b){return m().newStreamReadableFromReadableStream(p,b)},I.toWeb=function(p,b){return m().newReadableStreamFromStreamReadable(p,b)},I.wrap=function(p,b){var P,R;return new I({objectMode:(P=(R=p.readableObjectMode)!==null&&R!==void 0?R:p.objectMode)!==null&&P!==void 0?P:!0,...b,destroy(E,D){k.destroyer(p,E),D(E)}}).wrap(p)}}),sp=vt((e,t)=>{dt(),gt(),pt();var i=fr(),{ArrayPrototypeSlice:n,Error:r,FunctionPrototypeSymbolHasInstance:s,ObjectDefineProperty:o,ObjectDefineProperties:a,ObjectSetPrototypeOf:l,StringPrototypeToLowerCase:h,Symbol:c,SymbolHasInstance:u}=De();t.exports=J,J.WritableState=V;var{EventEmitter:f}=(Lr(),ae(dr)),d=ic().Stream,{Buffer:g}=(Ye(),ae(We)),y=Dr(),{addAbortSignal:_}=na(),{getHighWaterMark:w,getDefaultHighWaterMark:v}=nc(),{ERR_INVALID_ARG_TYPE:S,ERR_METHOD_NOT_IMPLEMENTED:T,ERR_MULTIPLE_CALLBACK:O,ERR_STREAM_CANNOT_PIPE:k,ERR_STREAM_DESTROYED:M,ERR_STREAM_ALREADY_FINISHED:A,ERR_STREAM_NULL_VALUES:B,ERR_STREAM_WRITE_AFTER_END:q,ERR_UNKNOWN_ENCODING:$}=ti().codes,{errorOrDestroy:x}=y;l(J.prototype,d.prototype),l(J,d);function z(){}var X=c("kOnFinished");function V(L,Y,W){typeof W!="boolean"&&(W=Y instanceof ln()),this.objectMode=!!(L&&L.objectMode),W&&(this.objectMode=this.objectMode||!!(L&&L.writableObjectMode)),this.highWaterMark=L?w(this,L,"writableHighWaterMark",W):v(!1),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1;let ot=!!(L&&L.decodeStrings===!1);this.decodeStrings=!ot,this.defaultEncoding=L&&L.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=I.bind(void 0,Y),this.writecb=null,this.writelen=0,this.afterWriteTickInfo=null,rt(this),this.pendingcb=0,this.constructed=!0,this.prefinished=!1,this.errorEmitted=!1,this.emitClose=!L||L.emitClose!==!1,this.autoDestroy=!L||L.autoDestroy!==!1,this.errored=null,this.closed=!1,this.closeEmitted=!1,this[X]=[]}function rt(L){L.buffered=[],L.bufferedIndex=0,L.allBuffers=!0,L.allNoop=!0}V.prototype.getBuffer=function(){return n(this.buffered,this.bufferedIndex)},o(V.prototype,"bufferedRequestCount",{__proto__:null,get(){return this.buffered.length-this.bufferedIndex}});function J(L){let Y=this instanceof ln();if(!Y&&!s(J,this))return new J(L);this._writableState=new V(L,this,Y),L&&(typeof L.write=="function"&&(this._write=L.write),typeof L.writev=="function"&&(this._writev=L.writev),typeof L.destroy=="function"&&(this._destroy=L.destroy),typeof L.final=="function"&&(this._final=L.final),typeof L.construct=="function"&&(this._construct=L.construct),L.signal&&_(L.signal,this)),d.call(this,L),y.construct(this,()=>{let W=this._writableState;W.writing||lt(this,W),ct(this,W)})}o(J,u,{__proto__:null,value:function(L){return s(this,L)?!0:this!==J?!1:L&&L._writableState instanceof V}}),J.prototype.pipe=function(){x(this,new k)};function H(L,Y,W,ot){let Z=L._writableState;if(typeof W=="function")ot=W,W=Z.defaultEncoding;else{if(!W)W=Z.defaultEncoding;else if(W!=="buffer"&&!g.isEncoding(W))throw new $(W);typeof ot!="function"&&(ot=z)}if(Y===null)throw new B;if(!Z.objectMode)if(typeof Y=="string")Z.decodeStrings!==!1&&(Y=g.from(Y,W),W="buffer");else if(Y instanceof g)W="buffer";else if(d._isUint8Array(Y))Y=d._uint8ArrayToBuffer(Y),W="buffer";else throw new S("chunk",["string","Buffer","Uint8Array"],Y);let j;return Z.ending?j=new q:Z.destroyed&&(j=new M("write")),j?(i.nextTick(ot,j),x(L,j,!0),j):(Z.pendingcb++,ht(L,Z,Y,W,ot))}J.prototype.write=function(L,Y,W){return H(this,L,Y,W)===!0},J.prototype.cork=function(){this._writableState.corked++},J.prototype.uncork=function(){let L=this._writableState;L.corked&&(L.corked--,L.writing||lt(this,L))},J.prototype.setDefaultEncoding=function(L){if(typeof L=="string"&&(L=h(L)),!g.isEncoding(L))throw new $(L);return this._writableState.defaultEncoding=L,this};function ht(L,Y,W,ot,Z){let j=Y.objectMode?1:W.length;Y.length+=j;let Q=Y.length<Y.highWaterMark;return Q||(Y.needDrain=!0),Y.writing||Y.corked||Y.errored||!Y.constructed?(Y.buffered.push({chunk:W,encoding:ot,callback:Z}),Y.allBuffers&&ot!=="buffer"&&(Y.allBuffers=!1),Y.allNoop&&Z!==z&&(Y.allNoop=!1)):(Y.writelen=j,Y.writecb=Z,Y.writing=!0,Y.sync=!0,L._write(W,ot,Y.onwrite),Y.sync=!1),Q&&!Y.errored&&!Y.destroyed}function nt(L,Y,W,ot,Z,j,Q){Y.writelen=ot,Y.writecb=Q,Y.writing=!0,Y.sync=!0,Y.destroyed?Y.onwrite(new M("write")):W?L._writev(Z,Y.onwrite):L._write(Z,j,Y.onwrite),Y.sync=!1}function xt(L,Y,W,ot){--Y.pendingcb,ot(W),Et(Y),x(L,W)}function I(L,Y){let W=L._writableState,ot=W.sync,Z=W.writecb;if(typeof Z!="function"){x(L,new O);return}W.writing=!1,W.writecb=null,W.length-=W.writelen,W.writelen=0,Y?(Y.stack,W.errored||(W.errored=Y),L._readableState&&!L._readableState.errored&&(L._readableState.errored=Y),ot?i.nextTick(xt,L,W,Y,Z):xt(L,W,Y,Z)):(W.buffered.length>W.bufferedIndex&&lt(L,W),ot?W.afterWriteTickInfo!==null&&W.afterWriteTickInfo.cb===Z?W.afterWriteTickInfo.count++:(W.afterWriteTickInfo={count:1,cb:Z,stream:L,state:W},i.nextTick(K,W.afterWriteTickInfo)):st(L,W,1,Z))}function K({stream:L,state:Y,count:W,cb:ot}){return Y.afterWriteTickInfo=null,st(L,Y,W,ot)}function st(L,Y,W,ot){for(!Y.ending&&!L.destroyed&&Y.length===0&&Y.needDrain&&(Y.needDrain=!1,L.emit("drain"));W-- >0;)Y.pendingcb--,ot();Y.destroyed&&Et(Y),ct(L,Y)}function Et(L){if(L.writing)return;for(let Z=L.bufferedIndex;Z<L.buffered.length;++Z){var Y;let{chunk:j,callback:Q}=L.buffered[Z],_t=L.objectMode?1:j.length;L.length-=_t,Q((Y=L.errored)!==null&&Y!==void 0?Y:new M("write"))}let W=L[X].splice(0);for(let Z=0;Z<W.length;Z++){var ot;W[Z]((ot=L.errored)!==null&&ot!==void 0?ot:new M("end"))}rt(L)}function lt(L,Y){if(Y.corked||Y.bufferProcessing||Y.destroyed||!Y.constructed)return;let{buffered:W,bufferedIndex:ot,objectMode:Z}=Y,j=W.length-ot;if(!j)return;let Q=ot;if(Y.bufferProcessing=!0,j>1&&L._writev){Y.pendingcb-=j-1;let _t=Y.allNoop?z:Ot=>{for(let zt=Q;zt<W.length;++zt)W[zt].callback(Ot)},Mt=Y.allNoop&&Q===0?W:n(W,Q);Mt.allBuffers=Y.allBuffers,nt(L,Y,!0,Y.length,Mt,"",_t),rt(Y)}else{do{let{chunk:_t,encoding:Mt,callback:Ot}=W[Q];W[Q++]=null;let zt=Z?1:_t.length;nt(L,Y,!1,zt,_t,Mt,Ot)}while(Q<W.length&&!Y.writing);Q===W.length?rt(Y):Q>256?(W.splice(0,Q),Y.bufferedIndex=0):Y.bufferedIndex=Q}Y.bufferProcessing=!1}J.prototype._write=function(L,Y,W){if(this._writev)this._writev([{chunk:L,encoding:Y}],W);else throw new T("_write()")},J.prototype._writev=null,J.prototype.end=function(L,Y,W){let ot=this._writableState;typeof L=="function"?(W=L,L=null,Y=null):typeof Y=="function"&&(W=Y,Y=null);let Z;if(L!=null){let j=H(this,L,Y);j instanceof r&&(Z=j)}return ot.corked&&(ot.corked=1,this.uncork()),Z||(!ot.errored&&!ot.ending?(ot.ending=!0,ct(this,ot,!0),ot.ended=!0):ot.finished?Z=new A("end"):ot.destroyed&&(Z=new M("end"))),typeof W=="function"&&(Z||ot.finished?i.nextTick(W,Z):ot[X].push(W)),this};function N(L){return L.ending&&!L.destroyed&&L.constructed&&L.length===0&&!L.errored&&L.buffered.length===0&&!L.finished&&!L.writing&&!L.errorEmitted&&!L.closeEmitted}function C(L,Y){let W=!1;function ot(Z){if(W){x(L,Z??O());return}if(W=!0,Y.pendingcb--,Z){let j=Y[X].splice(0);for(let Q=0;Q<j.length;Q++)j[Q](Z);x(L,Z,Y.sync)}else N(Y)&&(Y.prefinished=!0,L.emit("prefinish"),Y.pendingcb++,i.nextTick(it,L,Y))}Y.sync=!0,Y.pendingcb++;try{L._final(ot)}catch(Z){ot(Z)}Y.sync=!1}function G(L,Y){!Y.prefinished&&!Y.finalCalled&&(typeof L._final=="function"&&!Y.destroyed?(Y.finalCalled=!0,C(L,Y)):(Y.prefinished=!0,L.emit("prefinish")))}function ct(L,Y,W){N(Y)&&(G(L,Y),Y.pendingcb===0&&(W?(Y.pendingcb++,i.nextTick((ot,Z)=>{N(Z)?it(ot,Z):Z.pendingcb--},L,Y)):N(Y)&&(Y.pendingcb++,it(L,Y))))}function it(L,Y){Y.pendingcb--,Y.finished=!0;let W=Y[X].splice(0);for(let ot=0;ot<W.length;ot++)W[ot]();if(L.emit("finish"),Y.autoDestroy){let ot=L._readableState;(!ot||ot.autoDestroy&&(ot.endEmitted||ot.readable===!1))&&L.destroy()}}a(J.prototype,{closed:{__proto__:null,get(){return this._writableState?this._writableState.closed:!1}},destroyed:{__proto__:null,get(){return this._writableState?this._writableState.destroyed:!1},set(L){this._writableState&&(this._writableState.destroyed=L)}},writable:{__proto__:null,get(){let L=this._writableState;return!!L&&L.writable!==!1&&!L.destroyed&&!L.errored&&!L.ending&&!L.ended},set(L){this._writableState&&(this._writableState.writable=!!L)}},writableFinished:{__proto__:null,get(){return this._writableState?this._writableState.finished:!1}},writableObjectMode:{__proto__:null,get(){return this._writableState?this._writableState.objectMode:!1}},writableBuffer:{__proto__:null,get(){return this._writableState&&this._writableState.getBuffer()}},writableEnded:{__proto__:null,get(){return this._writableState?this._writableState.ending:!1}},writableNeedDrain:{__proto__:null,get(){let L=this._writableState;return L?!L.destroyed&&!L.ending&&L.needDrain:!1}},writableHighWaterMark:{__proto__:null,get(){return this._writableState&&this._writableState.highWaterMark}},writableCorked:{__proto__:null,get(){return this._writableState?this._writableState.corked:0}},writableLength:{__proto__:null,get(){return this._writableState&&this._writableState.length}},errored:{__proto__:null,enumerable:!1,get(){return this._writableState?this._writableState.errored:null}},writableAborted:{__proto__:null,enumerable:!1,get:function(){return!!(this._writableState.writable!==!1&&(this._writableState.destroyed||this._writableState.errored)&&!this._writableState.finished)}}});var et=y.destroy;J.prototype.destroy=function(L,Y){let W=this._writableState;return!W.destroyed&&(W.bufferedIndex<W.buffered.length||W[X].length)&&i.nextTick(Et,W),et.call(this,L,Y),this},J.prototype._undestroy=y.undestroy,J.prototype._destroy=function(L,Y){Y(L)},J.prototype[f.captureRejectionSymbol]=function(L){this.destroy(L)};var ft;function ut(){return ft===void 0&&(ft={}),ft}J.fromWeb=function(L,Y){return ut().newStreamWritableFromWritableStream(L,Y)},J.toWeb=function(L){return ut().newWritableStreamFromStreamWritable(L)}}),K0=vt((e,t)=>{dt(),gt(),pt();var i=fr(),n=(Ye(),ae(We)),{isReadable:r,isWritable:s,isIterable:o,isNodeStream:a,isReadableNodeStream:l,isWritableNodeStream:h,isDuplexNodeStream:c}=un(),u=In(),{AbortError:f,codes:{ERR_INVALID_ARG_TYPE:d,ERR_INVALID_RETURN_VALUE:g}}=ti(),{destroyer:y}=Dr(),_=ln(),w=sa(),{createDeferredPromise:v}=an(),S=rp(),T=globalThis.Blob||n.Blob,O=typeof T<"u"?function($){return $ instanceof T}:function($){return!1},k=globalThis.AbortController||ec().AbortController,{FunctionPrototypeCall:M}=De(),A=class extends _{constructor($){super($),($==null?void 0:$.readable)===!1&&(this._readableState.readable=!1,this._readableState.ended=!0,this._readableState.endEmitted=!0),($==null?void 0:$.writable)===!1&&(this._writableState.writable=!1,this._writableState.ending=!0,this._writableState.ended=!0,this._writableState.finished=!0)}};t.exports=function $(x,z){if(c(x))return x;if(l(x))return q({readable:x});if(h(x))return q({writable:x});if(a(x))return q({writable:!1,readable:!1});if(typeof x=="function"){let{value:V,write:rt,final:J,destroy:H}=B(x);if(o(V))return S(A,V,{objectMode:!0,write:rt,final:J,destroy:H});let ht=V==null?void 0:V.then;if(typeof ht=="function"){let nt,xt=M(ht,V,I=>{if(I!=null)throw new g("nully","body",I)},I=>{y(nt,I)});return nt=new A({objectMode:!0,readable:!1,write:rt,final(I){J(async()=>{try{await xt,i.nextTick(I,null)}catch(K){i.nextTick(I,K)}})},destroy:H})}throw new g("Iterable, AsyncIterable or AsyncFunction",z,V)}if(O(x))return $(x.arrayBuffer());if(o(x))return S(A,x,{objectMode:!0,writable:!1});if(typeof(x==null?void 0:x.writable)=="object"||typeof(x==null?void 0:x.readable)=="object"){let V=x!=null&&x.readable?l(x==null?void 0:x.readable)?x==null?void 0:x.readable:$(x.readable):void 0,rt=x!=null&&x.writable?h(x==null?void 0:x.writable)?x==null?void 0:x.writable:$(x.writable):void 0;return q({readable:V,writable:rt})}let X=x==null?void 0:x.then;if(typeof X=="function"){let V;return M(X,x,rt=>{rt!=null&&V.push(rt),V.push(null)},rt=>{y(V,rt)}),V=new A({objectMode:!0,writable:!1,read(){}})}throw new d(z,["Blob","ReadableStream","WritableStream","Stream","Iterable","AsyncIterable","Function","{ readable, writable } pair","Promise"],x)};function B($){let{promise:x,resolve:z}=v(),X=new k,V=X.signal;return{value:$(async function*(){for(;;){let rt=x;x=null;let{chunk:J,done:H,cb:ht}=await rt;if(i.nextTick(ht),H)return;if(V.aborted)throw new f(void 0,{cause:V.reason});({promise:x,resolve:z}=v()),yield J}}(),{signal:V}),write(rt,J,H){let ht=z;z=null,ht({chunk:rt,done:!1,cb:H})},final(rt){let J=z;z=null,J({done:!0,cb:rt})},destroy(rt,J){X.abort(),J(rt)}}}function q($){let x=$.readable&&typeof $.readable.read!="function"?w.wrap($.readable):$.readable,z=$.writable,X=!!r(x),V=!!s(z),rt,J,H,ht,nt;function xt(I){let K=ht;ht=null,K?K(I):I&&nt.destroy(I)}return nt=new A({readableObjectMode:!!(x!=null&&x.readableObjectMode),writableObjectMode:!!(z!=null&&z.writableObjectMode),readable:X,writable:V}),V&&(u(z,I=>{V=!1,I&&y(x,I),xt(I)}),nt._write=function(I,K,st){z.write(I,K)?st():rt=st},nt._final=function(I){z.end(),J=I},z.on("drain",function(){if(rt){let I=rt;rt=null,I()}}),z.on("finish",function(){if(J){let I=J;J=null,I()}})),X&&(u(x,I=>{X=!1,I&&y(x,I),xt(I)}),x.on("readable",function(){if(H){let I=H;H=null,I()}}),x.on("end",function(){nt.push(null)}),nt._read=function(){for(;;){let I=x.read();if(I===null){H=nt._read;return}if(!nt.push(I))return}}),nt._destroy=function(I,K){!I&&ht!==null&&(I=new f),H=null,rt=null,J=null,ht===null?K(I):(ht=K,y(z,I),y(x,I))},nt}}),ln=vt((e,t)=>{dt(),gt(),pt();var{ObjectDefineProperties:i,ObjectGetOwnPropertyDescriptor:n,ObjectKeys:r,ObjectSetPrototypeOf:s}=De();t.exports=l;var o=sa(),a=sp();s(l.prototype,o.prototype),s(l,o);{let f=r(a.prototype);for(let d=0;d<f.length;d++){let g=f[d];l.prototype[g]||(l.prototype[g]=a.prototype[g])}}function l(f){if(!(this instanceof l))return new l(f);o.call(this,f),a.call(this,f),f?(this.allowHalfOpen=f.allowHalfOpen!==!1,f.readable===!1&&(this._readableState.readable=!1,this._readableState.ended=!0,this._readableState.endEmitted=!0),f.writable===!1&&(this._writableState.writable=!1,this._writableState.ending=!0,this._writableState.ended=!0,this._writableState.finished=!0)):this.allowHalfOpen=!0}i(l.prototype,{writable:{__proto__:null,...n(a.prototype,"writable")},writableHighWaterMark:{__proto__:null,...n(a.prototype,"writableHighWaterMark")},writableObjectMode:{__proto__:null,...n(a.prototype,"writableObjectMode")},writableBuffer:{__proto__:null,...n(a.prototype,"writableBuffer")},writableLength:{__proto__:null,...n(a.prototype,"writableLength")},writableFinished:{__proto__:null,...n(a.prototype,"writableFinished")},writableCorked:{__proto__:null,...n(a.prototype,"writableCorked")},writableEnded:{__proto__:null,...n(a.prototype,"writableEnded")},writableNeedDrain:{__proto__:null,...n(a.prototype,"writableNeedDrain")},destroyed:{__proto__:null,get(){return this._readableState===void 0||this._writableState===void 0?!1:this._readableState.destroyed&&this._writableState.destroyed},set(f){this._readableState&&this._writableState&&(this._readableState.destroyed=f,this._writableState.destroyed=f)}}});var h;function c(){return h===void 0&&(h={}),h}l.fromWeb=function(f,d){return c().newStreamDuplexFromReadableWritablePair(f,d)},l.toWeb=function(f){return c().newReadableWritablePairFromDuplex(f)};var u;l.from=function(f){return u||(u=K0()),u(f,"body")}}),op=vt((e,t)=>{dt(),gt(),pt();var{ObjectSetPrototypeOf:i,Symbol:n}=De();t.exports=l;var{ERR_METHOD_NOT_IMPLEMENTED:r}=ti().codes,s=ln(),{getHighWaterMark:o}=nc();i(l.prototype,s.prototype),i(l,s);var a=n("kCallback");function l(u){if(!(this instanceof l))return new l(u);let f=u?o(this,u,"readableHighWaterMark",!0):null;f===0&&(u={...u,highWaterMark:null,readableHighWaterMark:f,writableHighWaterMark:u.writableHighWaterMark||0}),s.call(this,u),this._readableState.sync=!1,this[a]=null,u&&(typeof u.transform=="function"&&(this._transform=u.transform),typeof u.flush=="function"&&(this._flush=u.flush)),this.on("prefinish",c)}function h(u){typeof this._flush=="function"&&!this.destroyed?this._flush((f,d)=>{if(f){u?u(f):this.destroy(f);return}d!=null&&this.push(d),this.push(null),u&&u()}):(this.push(null),u&&u())}function c(){this._final!==h&&h.call(this)}l.prototype._final=h,l.prototype._transform=function(u,f,d){throw new r("_transform()")},l.prototype._write=function(u,f,d){let g=this._readableState,y=this._writableState,_=g.length;this._transform(u,f,(w,v)=>{if(w){d(w);return}v!=null&&this.push(v),y.ended||_===g.length||g.length<g.highWaterMark?d():this[a]=d})},l.prototype._read=function(){if(this[a]){let u=this[a];this[a]=null,u()}}}),ap=vt((e,t)=>{dt(),gt(),pt();var{ObjectSetPrototypeOf:i}=De();t.exports=r;var n=op();i(r.prototype,n.prototype),i(r,n);function r(s){if(!(this instanceof r))return new r(s);n.call(this,s)}r.prototype._transform=function(s,o,a){a(null,s)}}),oc=vt((e,t)=>{dt(),gt(),pt();var i=fr(),{ArrayIsArray:n,Promise:r,SymbolAsyncIterator:s}=De(),o=In(),{once:a}=an(),l=Dr(),h=ln(),{aggregateTwoErrors:c,codes:{ERR_INVALID_ARG_TYPE:u,ERR_INVALID_RETURN_VALUE:f,ERR_MISSING_ARGS:d,ERR_STREAM_DESTROYED:g,ERR_STREAM_PREMATURE_CLOSE:y},AbortError:_}=ti(),{validateFunction:w,validateAbortSignal:v}=ia(),{isIterable:S,isReadable:T,isReadableNodeStream:O,isNodeStream:k,isTransformStream:M,isWebStream:A,isReadableStream:B,isReadableEnded:q}=un(),$=globalThis.AbortController||ec().AbortController,x,z;function X(K,st,Et){let lt=!1;K.on("close",()=>{lt=!0});let N=o(K,{readable:st,writable:Et},C=>{lt=!C});return{destroy:C=>{lt||(lt=!0,l.destroyer(K,C||new g("pipe")))},cleanup:N}}function V(K){return w(K[K.length-1],"streams[stream.length - 1]"),K.pop()}function rt(K){if(S(K))return K;if(O(K))return J(K);throw new u("val",["Readable","Iterable","AsyncIterable"],K)}async function*J(K){z||(z=sa()),yield*z.prototype[s].call(K)}async function H(K,st,Et,{end:lt}){let N,C=null,G=et=>{if(et&&(N=et),C){let ft=C;C=null,ft()}},ct=()=>new r((et,ft)=>{N?ft(N):C=()=>{N?ft(N):et()}});st.on("drain",G);let it=o(st,{readable:!1},G);try{st.writableNeedDrain&&await ct();for await(let et of K)st.write(et)||await ct();lt&&st.end(),await ct(),Et()}catch(et){Et(N!==et?c(N,et):et)}finally{it(),st.off("drain",G)}}async function ht(K,st,Et,{end:lt}){M(st)&&(st=st.writable);let N=st.getWriter();try{for await(let C of K)await N.ready,N.write(C).catch(()=>{});await N.ready,lt&&await N.close(),Et()}catch(C){try{await N.abort(C),Et(C)}catch(G){Et(G)}}}function nt(...K){return xt(K,a(V(K)))}function xt(K,st,Et){if(K.length===1&&n(K[0])&&(K=K[0]),K.length<2)throw new d("streams");let lt=new $,N=lt.signal,C=Et==null?void 0:Et.signal,G=[];v(C,"options.signal");function ct(){Y(new _)}C==null||C.addEventListener("abort",ct);let it,et,ft=[],ut=0;function L(j){Y(j,--ut===0)}function Y(j,Q){if(j&&(!it||it.code==="ERR_STREAM_PREMATURE_CLOSE")&&(it=j),!(!it&&!Q)){for(;ft.length;)ft.shift()(it);C==null||C.removeEventListener("abort",ct),lt.abort(),Q&&(it||G.forEach(_t=>_t()),i.nextTick(st,it,et))}}let W;for(let j=0;j<K.length;j++){let Q=K[j],_t=j<K.length-1,Mt=j>0,Ot=_t||(Et==null?void 0:Et.end)!==!1,zt=j===K.length-1;if(k(Q)){let m=function(p){p&&p.name!=="AbortError"&&p.code!=="ERR_STREAM_PREMATURE_CLOSE"&&L(p)};if(Ot){let{destroy:p,cleanup:b}=X(Q,_t,Mt);ft.push(p),T(Q)&&zt&&G.push(b)}Q.on("error",m),T(Q)&&zt&&G.push(()=>{Q.removeListener("error",m)})}if(j===0)if(typeof Q=="function"){if(W=Q({signal:N}),!S(W))throw new f("Iterable, AsyncIterable or Stream","source",W)}else S(Q)||O(Q)||M(Q)?W=Q:W=h.from(Q);else if(typeof Q=="function"){if(M(W)){var ot;W=rt((ot=W)===null||ot===void 0?void 0:ot.readable)}else W=rt(W);if(W=Q(W,{signal:N}),_t){if(!S(W,!0))throw new f("AsyncIterable",`transform[${j-1}]`,W)}else{var Z;x||(x=ap());let m=new x({objectMode:!0}),p=(Z=W)===null||Z===void 0?void 0:Z.then;if(typeof p=="function")ut++,p.call(W,R=>{et=R,R!=null&&m.write(R),Ot&&m.end(),i.nextTick(L)},R=>{m.destroy(R),i.nextTick(L,R)});else if(S(W,!0))ut++,H(W,m,L,{end:Ot});else if(B(W)||M(W)){let R=W.readable||W;ut++,H(R,m,L,{end:Ot})}else throw new f("AsyncIterable or Promise","destination",W);W=m;let{destroy:b,cleanup:P}=X(W,!1,!0);ft.push(b),zt&&G.push(P)}}else if(k(Q)){if(O(W)){ut+=2;let m=I(W,Q,L,{end:Ot});T(Q)&&zt&&G.push(m)}else if(M(W)||B(W)){let m=W.readable||W;ut++,H(m,Q,L,{end:Ot})}else if(S(W))ut++,H(W,Q,L,{end:Ot});else throw new u("val",["Readable","Iterable","AsyncIterable","ReadableStream","TransformStream"],W);W=Q}else if(A(Q)){if(O(W))ut++,ht(rt(W),Q,L,{end:Ot});else if(B(W)||S(W))ut++,ht(W,Q,L,{end:Ot});else if(M(W))ut++,ht(W.readable,Q,L,{end:Ot});else throw new u("val",["Readable","Iterable","AsyncIterable","ReadableStream","TransformStream"],W);W=Q}else W=h.from(Q)}return(N!=null&&N.aborted||C!=null&&C.aborted)&&i.nextTick(ct),W}function I(K,st,Et,{end:lt}){let N=!1;if(st.on("close",()=>{N||Et(new y)}),K.pipe(st,{end:!1}),lt){let C=function(){N=!0,st.end()};q(K)?i.nextTick(C):K.once("end",C)}else Et();return o(K,{readable:!0,writable:!1},C=>{let G=K._readableState;C&&C.code==="ERR_STREAM_PREMATURE_CLOSE"&&G&&G.ended&&!G.errored&&!G.errorEmitted?K.once("end",Et).once("error",Et):Et(C)}),o(st,{readable:!1,writable:!0},Et)}t.exports={pipelineImpl:xt,pipeline:nt}}),lp=vt((e,t)=>{dt(),gt(),pt();var{pipeline:i}=oc(),n=ln(),{destroyer:r}=Dr(),{isNodeStream:s,isReadable:o,isWritable:a,isWebStream:l,isTransformStream:h,isWritableStream:c,isReadableStream:u}=un(),{AbortError:f,codes:{ERR_INVALID_ARG_VALUE:d,ERR_MISSING_ARGS:g}}=ti(),y=In();t.exports=function(..._){if(_.length===0)throw new g("streams");if(_.length===1)return n.from(_[0]);let w=[..._];if(typeof _[0]=="function"&&(_[0]=n.from(_[0])),typeof _[_.length-1]=="function"){let x=_.length-1;_[x]=n.from(_[x])}for(let x=0;x<_.length;++x)if(!(!s(_[x])&&!l(_[x]))){if(x<_.length-1&&!(o(_[x])||u(_[x])||h(_[x])))throw new d(`streams[${x}]`,w[x],"must be readable");if(x>0&&!(a(_[x])||c(_[x])||h(_[x])))throw new d(`streams[${x}]`,w[x],"must be writable")}let v,S,T,O,k;function M(x){let z=O;O=null,z?z(x):x?k.destroy(x):!$&&!q&&k.destroy()}let A=_[0],B=i(_,M),q=!!(a(A)||c(A)||h(A)),$=!!(o(B)||u(B)||h(B));if(k=new n({writableObjectMode:!!(A!=null&&A.writableObjectMode),readableObjectMode:!!(B!=null&&B.writableObjectMode),writable:q,readable:$}),q){if(s(A))k._write=function(z,X,V){A.write(z,X)?V():v=V},k._final=function(z){A.end(),S=z},A.on("drain",function(){if(v){let z=v;v=null,z()}});else if(l(A)){let z=(h(A)?A.writable:A).getWriter();k._write=async function(X,V,rt){try{await z.ready,z.write(X).catch(()=>{}),rt()}catch(J){rt(J)}},k._final=async function(X){try{await z.ready,z.close().catch(()=>{}),S=X}catch(V){X(V)}}}let x=h(B)?B.readable:B;y(x,()=>{if(S){let z=S;S=null,z()}})}if($){if(s(B))B.on("readable",function(){if(T){let x=T;T=null,x()}}),B.on("end",function(){k.push(null)}),k._read=function(){for(;;){let x=B.read();if(x===null){T=k._read;return}if(!k.push(x))return}};else if(l(B)){let x=(h(B)?B.readable:B).getReader();k._read=async function(){for(;;)try{let{value:z,done:X}=await x.read();if(!k.push(z))return;if(X){k.push(null);return}}catch{return}}}}return k._destroy=function(x,z){!x&&O!==null&&(x=new f),T=null,v=null,S=null,O===null?z(x):(O=z,s(B)&&r(B,x))},k}}),Q0=vt((e,t)=>{dt(),gt(),pt();var i=globalThis.AbortController||ec().AbortController,{codes:{ERR_INVALID_ARG_VALUE:n,ERR_INVALID_ARG_TYPE:r,ERR_MISSING_ARGS:s,ERR_OUT_OF_RANGE:o},AbortError:a}=ti(),{validateAbortSignal:l,validateInteger:h,validateObject:c}=ia(),u=De().Symbol("kWeak"),{finished:f}=In(),d=lp(),{addAbortSignalNoValidate:g}=na(),{isWritable:y,isNodeStream:_}=un(),{ArrayPrototypePush:w,MathFloor:v,Number:S,NumberIsNaN:T,Promise:O,PromiseReject:k,PromisePrototypeThen:M,Symbol:A}=De(),B=A("kEmpty"),q=A("kEof");function $(lt,N){if(N!=null&&c(N,"options"),(N==null?void 0:N.signal)!=null&&l(N.signal,"options.signal"),_(lt)&&!y(lt))throw new n("stream",lt,"must be writable");let C=d(this,lt);return N!=null&&N.signal&&g(N.signal,C),C}function x(lt,N){if(typeof lt!="function")throw new r("fn",["Function","AsyncFunction"],lt);N!=null&&c(N,"options"),(N==null?void 0:N.signal)!=null&&l(N.signal,"options.signal");let C=1;return(N==null?void 0:N.concurrency)!=null&&(C=v(N.concurrency)),h(C,"concurrency",1),(async function*(){var G,ct;let it=new i,et=this,ft=[],ut=it.signal,L={signal:ut},Y=()=>it.abort();N!=null&&(G=N.signal)!==null&&G!==void 0&&G.aborted&&Y(),N==null||(ct=N.signal)===null||ct===void 0||ct.addEventListener("abort",Y);let W,ot,Z=!1;function j(){Z=!0}async function Q(){try{for await(let Ot of et){var _t;if(Z)return;if(ut.aborted)throw new a;try{Ot=lt(Ot,L)}catch(zt){Ot=k(zt)}Ot!==B&&(typeof((_t=Ot)===null||_t===void 0?void 0:_t.catch)=="function"&&Ot.catch(j),ft.push(Ot),W&&(W(),W=null),!Z&&ft.length&&ft.length>=C&&await new O(zt=>{ot=zt}))}ft.push(q)}catch(Ot){let zt=k(Ot);M(zt,void 0,j),ft.push(zt)}finally{var Mt;Z=!0,W&&(W(),W=null),N==null||(Mt=N.signal)===null||Mt===void 0||Mt.removeEventListener("abort",Y)}}Q();try{for(;;){for(;ft.length>0;){let _t=await ft[0];if(_t===q)return;if(ut.aborted)throw new a;_t!==B&&(yield _t),ft.shift(),ot&&(ot(),ot=null)}await new O(_t=>{W=_t})}}finally{it.abort(),Z=!0,ot&&(ot(),ot=null)}}).call(this)}function z(lt=void 0){return lt!=null&&c(lt,"options"),(lt==null?void 0:lt.signal)!=null&&l(lt.signal,"options.signal"),(async function*(){let N=0;for await(let G of this){var C;if(lt!=null&&(C=lt.signal)!==null&&C!==void 0&&C.aborted)throw new a({cause:lt.signal.reason});yield[N++,G]}}).call(this)}async function X(lt,N=void 0){for await(let C of H.call(this,lt,N))return!0;return!1}async function V(lt,N=void 0){if(typeof lt!="function")throw new r("fn",["Function","AsyncFunction"],lt);return!await X.call(this,async(...C)=>!await lt(...C),N)}async function rt(lt,N){for await(let C of H.call(this,lt,N))return C}async function J(lt,N){if(typeof lt!="function")throw new r("fn",["Function","AsyncFunction"],lt);async function C(G,ct){return await lt(G,ct),B}for await(let G of x.call(this,C,N));}function H(lt,N){if(typeof lt!="function")throw new r("fn",["Function","AsyncFunction"],lt);async function C(G,ct){return await lt(G,ct)?G:B}return x.call(this,C,N)}var ht=class extends s{constructor(){super("reduce"),this.message="Reduce of an empty stream requires an initial value"}};async function nt(lt,N,C){var G;if(typeof lt!="function")throw new r("reducer",["Function","AsyncFunction"],lt);C!=null&&c(C,"options"),(C==null?void 0:C.signal)!=null&&l(C.signal,"options.signal");let ct=arguments.length>1;if(C!=null&&(G=C.signal)!==null&&G!==void 0&&G.aborted){let L=new a(void 0,{cause:C.signal.reason});throw this.once("error",()=>{}),await f(this.destroy(L)),L}let it=new i,et=it.signal;if(C!=null&&C.signal){let L={once:!0,[u]:this};C.signal.addEventListener("abort",()=>it.abort(),L)}let ft=!1;try{for await(let L of this){var ut;if(ft=!0,C!=null&&(ut=C.signal)!==null&&ut!==void 0&&ut.aborted)throw new a;ct?N=await lt(N,L,{signal:et}):(N=L,ct=!0)}if(!ft&&!ct)throw new ht}finally{it.abort()}return N}async function xt(lt){lt!=null&&c(lt,"options"),(lt==null?void 0:lt.signal)!=null&&l(lt.signal,"options.signal");let N=[];for await(let G of this){var C;if(lt!=null&&(C=lt.signal)!==null&&C!==void 0&&C.aborted)throw new a(void 0,{cause:lt.signal.reason});w(N,G)}return N}function I(lt,N){let C=x.call(this,lt,N);return(async function*(){for await(let G of C)yield*G}).call(this)}function K(lt){if(lt=S(lt),T(lt))return 0;if(lt<0)throw new o("number",">= 0",lt);return lt}function st(lt,N=void 0){return N!=null&&c(N,"options"),(N==null?void 0:N.signal)!=null&&l(N.signal,"options.signal"),lt=K(lt),(async function*(){var C;if(N!=null&&(C=N.signal)!==null&&C!==void 0&&C.aborted)throw new a;for await(let ct of this){var G;if(N!=null&&(G=N.signal)!==null&&G!==void 0&&G.aborted)throw new a;lt--<=0&&(yield ct)}}).call(this)}function Et(lt,N=void 0){return N!=null&&c(N,"options"),(N==null?void 0:N.signal)!=null&&l(N.signal,"options.signal"),lt=K(lt),(async function*(){var C;if(N!=null&&(C=N.signal)!==null&&C!==void 0&&C.aborted)throw new a;for await(let ct of this){var G;if(N!=null&&(G=N.signal)!==null&&G!==void 0&&G.aborted)throw new a;if(lt-- >0)yield ct;else return}}).call(this)}t.exports.streamReturningOperators={asIndexedPairs:z,drop:st,filter:H,flatMap:I,map:x,take:Et,compose:$},t.exports.promiseReturningOperators={every:V,forEach:J,reduce:nt,toArray:xt,some:X,find:rt}}),hp=vt((e,t)=>{dt(),gt(),pt();var{ArrayPrototypePop:i,Promise:n}=De(),{isIterable:r,isNodeStream:s,isWebStream:o}=un(),{pipelineImpl:a}=oc(),{finished:l}=In();cp();function h(...c){return new n((u,f)=>{let d,g,y=c[c.length-1];if(y&&typeof y=="object"&&!s(y)&&!r(y)&&!o(y)){let _=i(c);d=_.signal,g=_.end}a(c,(_,w)=>{_?f(_):u(w)},{signal:d,end:g})})}t.exports={finished:l,pipeline:h}}),cp=vt((e,t)=>{dt(),gt(),pt();var{Buffer:i}=(Ye(),ae(We)),{ObjectDefineProperty:n,ObjectKeys:r,ReflectApply:s}=De(),{promisify:{custom:o}}=an(),{streamReturningOperators:a,promiseReturningOperators:l}=Q0(),{codes:{ERR_ILLEGAL_CONSTRUCTOR:h}}=ti(),c=lp(),{pipeline:u}=oc(),{destroyer:f}=Dr(),d=In(),g=hp(),y=un(),_=t.exports=ic().Stream;_.isDisturbed=y.isDisturbed,_.isErrored=y.isErrored,_.isReadable=y.isReadable,_.Readable=sa();for(let v of r(a)){let S=function(...O){if(new.target)throw h();return _.Readable.from(s(T,this,O))},T=a[v];n(S,"name",{__proto__:null,value:T.name}),n(S,"length",{__proto__:null,value:T.length}),n(_.Readable.prototype,v,{__proto__:null,value:S,enumerable:!1,configurable:!0,writable:!0})}for(let v of r(l)){let S=function(...O){if(new.target)throw h();return s(T,this,O)},T=l[v];n(S,"name",{__proto__:null,value:T.name}),n(S,"length",{__proto__:null,value:T.length}),n(_.Readable.prototype,v,{__proto__:null,value:S,enumerable:!1,configurable:!0,writable:!0})}_.Writable=sp(),_.Duplex=ln(),_.Transform=op(),_.PassThrough=ap(),_.pipeline=u;var{addAbortSignal:w}=na();_.addAbortSignal=w,_.finished=d,_.destroy=f,_.compose=c,n(_,"promises",{__proto__:null,configurable:!0,enumerable:!0,get(){return g}}),n(u,o,{__proto__:null,enumerable:!0,get(){return g.pipeline}}),n(d,o,{__proto__:null,enumerable:!0,get(){return g.finished}}),_.Stream=_,_._isUint8Array=function(v){return v instanceof Uint8Array},_._uint8ArrayToBuffer=function(v){return i.from(v.buffer,v.byteOffset,v.byteLength)}}),pr=vt((e,t)=>{dt(),gt(),pt();var i=cp(),n=hp(),r=i.Readable.destroy;t.exports=i.Readable,t.exports._uint8ArrayToBuffer=i._uint8ArrayToBuffer,t.exports._isUint8Array=i._isUint8Array,t.exports.isDisturbed=i.isDisturbed,t.exports.isErrored=i.isErrored,t.exports.isReadable=i.isReadable,t.exports.Readable=i.Readable,t.exports.Writable=i.Writable,t.exports.Duplex=i.Duplex,t.exports.Transform=i.Transform,t.exports.PassThrough=i.PassThrough,t.exports.addAbortSignal=i.addAbortSignal,t.exports.finished=i.finished,t.exports.destroy=i.destroy,t.exports.destroy=r,t.exports.pipeline=i.pipeline,t.exports.compose=i.compose,Object.defineProperty(i,"promises",{configurable:!0,enumerable:!0,get(){return n}}),t.exports.Stream=i.Stream,t.exports.default=t.exports}),X0=vt((e,t)=>{dt(),gt(),pt(),typeof Object.create=="function"?t.exports=function(i,n){n&&(i.super_=n,i.prototype=Object.create(n.prototype,{constructor:{value:i,enumerable:!1,writable:!0,configurable:!0}}))}:t.exports=function(i,n){if(n){i.super_=n;var r=function(){};r.prototype=n.prototype,i.prototype=new r,i.prototype.constructor=i}}}),Z0=vt((e,t)=>{dt(),gt(),pt();var{Buffer:i}=(Ye(),ae(We)),n=Symbol.for("BufferList");function r(s){if(!(this instanceof r))return new r(s);r._init.call(this,s)}r._init=function(s){Object.defineProperty(this,n,{value:!0}),this._bufs=[],this.length=0,s&&this.append(s)},r.prototype._new=function(s){return new r(s)},r.prototype._offset=function(s){if(s===0)return[0,0];let o=0;for(let a=0;a<this._bufs.length;a++){let l=o+this._bufs[a].length;if(s<l||a===this._bufs.length-1)return[a,s-o];o=l}},r.prototype._reverseOffset=function(s){let o=s[0],a=s[1];for(let l=0;l<o;l++)a+=this._bufs[l].length;return a},r.prototype.get=function(s){if(s>this.length||s<0)return;let o=this._offset(s);return this._bufs[o[0]][o[1]]},r.prototype.slice=function(s,o){return typeof s=="number"&&s<0&&(s+=this.length),typeof o=="number"&&o<0&&(o+=this.length),this.copy(null,0,s,o)},r.prototype.copy=function(s,o,a,l){if((typeof a!="number"||a<0)&&(a=0),(typeof l!="number"||l>this.length)&&(l=this.length),a>=this.length||l<=0)return s||i.alloc(0);let h=!!s,c=this._offset(a),u=l-a,f=u,d=h&&o||0,g=c[1];if(a===0&&l===this.length){if(!h)return this._bufs.length===1?this._bufs[0]:i.concat(this._bufs,this.length);for(let y=0;y<this._bufs.length;y++)this._bufs[y].copy(s,d),d+=this._bufs[y].length;return s}if(f<=this._bufs[c[0]].length-g)return h?this._bufs[c[0]].copy(s,o,g,g+f):this._bufs[c[0]].slice(g,g+f);h||(s=i.allocUnsafe(u));for(let y=c[0];y<this._bufs.length;y++){let _=this._bufs[y].length-g;if(f>_)this._bufs[y].copy(s,d,g),d+=_;else{this._bufs[y].copy(s,d,g,g+f),d+=_;break}f-=_,g&&(g=0)}return s.length>d?s.slice(0,d):s},r.prototype.shallowSlice=function(s,o){if(s=s||0,o=typeof o!="number"?this.length:o,s<0&&(s+=this.length),o<0&&(o+=this.length),s===o)return this._new();let a=this._offset(s),l=this._offset(o),h=this._bufs.slice(a[0],l[0]+1);return l[1]===0?h.pop():h[h.length-1]=h[h.length-1].slice(0,l[1]),a[1]!==0&&(h[0]=h[0].slice(a[1])),this._new(h)},r.prototype.toString=function(s,o,a){return this.slice(o,a).toString(s)},r.prototype.consume=function(s){if(s=Math.trunc(s),Number.isNaN(s)||s<=0)return this;for(;this._bufs.length;)if(s>=this._bufs[0].length)s-=this._bufs[0].length,this.length-=this._bufs[0].length,this._bufs.shift();else{this._bufs[0]=this._bufs[0].slice(s),this.length-=s;break}return this},r.prototype.duplicate=function(){let s=this._new();for(let o=0;o<this._bufs.length;o++)s.append(this._bufs[o]);return s},r.prototype.append=function(s){if(s==null)return this;if(s.buffer)this._appendBuffer(i.from(s.buffer,s.byteOffset,s.byteLength));else if(Array.isArray(s))for(let o=0;o<s.length;o++)this.append(s[o]);else if(this._isBufferList(s))for(let o=0;o<s._bufs.length;o++)this.append(s._bufs[o]);else typeof s=="number"&&(s=s.toString()),this._appendBuffer(i.from(s));return this},r.prototype._appendBuffer=function(s){this._bufs.push(s),this.length+=s.length},r.prototype.indexOf=function(s,o,a){if(a===void 0&&typeof o=="string"&&(a=o,o=void 0),typeof s=="function"||Array.isArray(s))throw new TypeError('The "value" argument must be one of type string, Buffer, BufferList, or Uint8Array.');if(typeof s=="number"?s=i.from([s]):typeof s=="string"?s=i.from(s,a):this._isBufferList(s)?s=s.slice():Array.isArray(s.buffer)?s=i.from(s.buffer,s.byteOffset,s.byteLength):i.isBuffer(s)||(s=i.from(s)),o=Number(o||0),isNaN(o)&&(o=0),o<0&&(o=this.length+o),o<0&&(o=0),s.length===0)return o>this.length?this.length:o;let l=this._offset(o),h=l[0],c=l[1];for(;h<this._bufs.length;h++){let u=this._bufs[h];for(;c<u.length;)if(u.length-c>=s.length){let f=u.indexOf(s,c);if(f!==-1)return this._reverseOffset([h,f]);c=u.length-s.length+1}else{let f=this._reverseOffset([h,c]);if(this._match(f,s))return f;c++}c=0}return-1},r.prototype._match=function(s,o){if(this.length-s<o.length)return!1;for(let a=0;a<o.length;a++)if(this.get(s+a)!==o[a])return!1;return!0},function(){let s={readDoubleBE:8,readDoubleLE:8,readFloatBE:4,readFloatLE:4,readBigInt64BE:8,readBigInt64LE:8,readBigUInt64BE:8,readBigUInt64LE:8,readInt32BE:4,readInt32LE:4,readUInt32BE:4,readUInt32LE:4,readInt16BE:2,readInt16LE:2,readUInt16BE:2,readUInt16LE:2,readInt8:1,readUInt8:1,readIntBE:null,readIntLE:null,readUIntBE:null,readUIntLE:null};for(let o in s)(function(a){s[a]===null?r.prototype[a]=function(l,h){return this.slice(l,l+h)[a](0,h)}:r.prototype[a]=function(l=0){return this.slice(l,l+s[a])[a](0)}})(o)}(),r.prototype._isBufferList=function(s){return s instanceof r||r.isBufferList(s)},r.isBufferList=function(s){return s!=null&&s[n]},t.exports=r}),J0=vt((e,t)=>{dt(),gt(),pt();var i=pr().Duplex,n=X0(),r=Z0();function s(o){if(!(this instanceof s))return new s(o);if(typeof o=="function"){this._callback=o;let a=(function(l){this._callback&&(this._callback(l),this._callback=null)}).bind(this);this.on("pipe",function(l){l.on("error",a)}),this.on("unpipe",function(l){l.removeListener("error",a)}),o=null}r._init.call(this,o),i.call(this)}n(s,i),Object.assign(s.prototype,r.prototype),s.prototype._new=function(o){return new s(o)},s.prototype._write=function(o,a,l){this._appendBuffer(o),typeof l=="function"&&l()},s.prototype._read=function(o){if(!this.length)return this.push(null);o=Math.min(o,this.length),this.push(this.slice(0,o)),this.consume(o)},s.prototype.end=function(o){i.prototype.end.call(this,o),this._callback&&(this._callback(null,this.slice()),this._callback=null)},s.prototype._destroy=function(o,a){this._bufs.length=0,this.length=0,a(o)},s.prototype._isBufferList=function(o){return o instanceof s||o instanceof r||s.isBufferList(o)},s.isBufferList=r.isBufferList,t.exports=s,t.exports.BufferListStream=s,t.exports.BufferList=r}),tb=vt((e,t)=>{dt(),gt(),pt();var i=class{constructor(){this.cmd=null,this.retain=!1,this.qos=0,this.dup=!1,this.length=-1,this.topic=null,this.payload=null}};t.exports=i}),up=vt((e,t)=>{dt(),gt(),pt();var i=t.exports,{Buffer:n}=(Ye(),ae(We));i.types={0:"reserved",1:"connect",2:"connack",3:"publish",4:"puback",5:"pubrec",6:"pubrel",7:"pubcomp",8:"subscribe",9:"suback",10:"unsubscribe",11:"unsuback",12:"pingreq",13:"pingresp",14:"disconnect",15:"auth"},i.requiredHeaderFlags={1:0,2:0,4:0,5:0,6:2,7:0,8:2,9:0,10:2,11:0,12:0,13:0,14:0,15:0},i.requiredHeaderFlagsErrors={};for(let s in i.requiredHeaderFlags){let o=i.requiredHeaderFlags[s];i.requiredHeaderFlagsErrors[s]="Invalid header flag bits, must be 0x"+o.toString(16)+" for "+i.types[s]+" packet"}i.codes={};for(let s in i.types){let o=i.types[s];i.codes[o]=s}i.CMD_SHIFT=4,i.CMD_MASK=240,i.DUP_MASK=8,i.QOS_MASK=3,i.QOS_SHIFT=1,i.RETAIN_MASK=1,i.VARBYTEINT_MASK=127,i.VARBYTEINT_FIN_MASK=128,i.VARBYTEINT_MAX=268435455,i.SESSIONPRESENT_MASK=1,i.SESSIONPRESENT_HEADER=n.from([i.SESSIONPRESENT_MASK]),i.CONNACK_HEADER=n.from([i.codes.connack<<i.CMD_SHIFT]),i.USERNAME_MASK=128,i.PASSWORD_MASK=64,i.WILL_RETAIN_MASK=32,i.WILL_QOS_MASK=24,i.WILL_QOS_SHIFT=3,i.WILL_FLAG_MASK=4,i.CLEAN_SESSION_MASK=2,i.CONNECT_HEADER=n.from([i.codes.connect<<i.CMD_SHIFT]),i.properties={sessionExpiryInterval:17,willDelayInterval:24,receiveMaximum:33,maximumPacketSize:39,topicAliasMaximum:34,requestResponseInformation:25,requestProblemInformation:23,userProperties:38,authenticationMethod:21,authenticationData:22,payloadFormatIndicator:1,messageExpiryInterval:2,contentType:3,responseTopic:8,correlationData:9,maximumQoS:36,retainAvailable:37,assignedClientIdentifier:18,reasonString:31,wildcardSubscriptionAvailable:40,subscriptionIdentifiersAvailable:41,sharedSubscriptionAvailable:42,serverKeepAlive:19,responseInformation:26,serverReference:28,topicAlias:35,subscriptionIdentifier:11},i.propertiesCodes={};for(let s in i.properties){let o=i.properties[s];i.propertiesCodes[o]=s}i.propertiesTypes={sessionExpiryInterval:"int32",willDelayInterval:"int32",receiveMaximum:"int16",maximumPacketSize:"int32",topicAliasMaximum:"int16",requestResponseInformation:"byte",requestProblemInformation:"byte",userProperties:"pair",authenticationMethod:"string",authenticationData:"binary",payloadFormatIndicator:"byte",messageExpiryInterval:"int32",contentType:"string",responseTopic:"string",correlationData:"binary",maximumQoS:"int8",retainAvailable:"byte",assignedClientIdentifier:"string",reasonString:"string",wildcardSubscriptionAvailable:"byte",subscriptionIdentifiersAvailable:"byte",sharedSubscriptionAvailable:"byte",serverKeepAlive:"int16",responseInformation:"string",serverReference:"string",topicAlias:"int16",subscriptionIdentifier:"var"};function r(s){return[0,1,2].map(o=>[0,1].map(a=>[0,1].map(l=>{let h=n.alloc(1);return h.writeUInt8(i.codes[s]<<i.CMD_SHIFT|(a?i.DUP_MASK:0)|o<<i.QOS_SHIFT|l,0,!0),h})))}i.PUBLISH_HEADER=r("publish"),i.SUBSCRIBE_HEADER=r("subscribe"),i.SUBSCRIBE_OPTIONS_QOS_MASK=3,i.SUBSCRIBE_OPTIONS_NL_MASK=1,i.SUBSCRIBE_OPTIONS_NL_SHIFT=2,i.SUBSCRIBE_OPTIONS_RAP_MASK=1,i.SUBSCRIBE_OPTIONS_RAP_SHIFT=3,i.SUBSCRIBE_OPTIONS_RH_MASK=3,i.SUBSCRIBE_OPTIONS_RH_SHIFT=4,i.SUBSCRIBE_OPTIONS_RH=[0,16,32],i.SUBSCRIBE_OPTIONS_NL=4,i.SUBSCRIBE_OPTIONS_RAP=8,i.SUBSCRIBE_OPTIONS_QOS=[0,1,2],i.UNSUBSCRIBE_HEADER=r("unsubscribe"),i.ACKS={unsuback:r("unsuback"),puback:r("puback"),pubcomp:r("pubcomp"),pubrel:r("pubrel"),pubrec:r("pubrec")},i.SUBACK_HEADER=n.from([i.codes.suback<<i.CMD_SHIFT]),i.VERSION3=n.from([3]),i.VERSION4=n.from([4]),i.VERSION5=n.from([5]),i.VERSION131=n.from([131]),i.VERSION132=n.from([132]),i.QOS=[0,1,2].map(s=>n.from([s])),i.EMPTY={pingreq:n.from([i.codes.pingreq<<4,0]),pingresp:n.from([i.codes.pingresp<<4,0]),disconnect:n.from([i.codes.disconnect<<4,0])},i.MQTT5_PUBACK_PUBREC_CODES={0:"Success",16:"No matching subscribers",128:"Unspecified error",131:"Implementation specific error",135:"Not authorized",144:"Topic Name invalid",145:"Packet identifier in use",151:"Quota exceeded",153:"Payload format invalid"},i.MQTT5_PUBREL_PUBCOMP_CODES={0:"Success",146:"Packet Identifier not found"},i.MQTT5_SUBACK_CODES={0:"Granted QoS 0",1:"Granted QoS 1",2:"Granted QoS 2",128:"Unspecified error",131:"Implementation specific error",135:"Not authorized",143:"Topic Filter invalid",145:"Packet Identifier in use",151:"Quota exceeded",158:"Shared Subscriptions not supported",161:"Subscription Identifiers not supported",162:"Wildcard Subscriptions not supported"},i.MQTT5_UNSUBACK_CODES={0:"Success",17:"No subscription existed",128:"Unspecified error",131:"Implementation specific error",135:"Not authorized",143:"Topic Filter invalid",145:"Packet Identifier in use"},i.MQTT5_DISCONNECT_CODES={0:"Normal disconnection",4:"Disconnect with Will Message",128:"Unspecified error",129:"Malformed Packet",130:"Protocol Error",131:"Implementation specific error",135:"Not authorized",137:"Server busy",139:"Server shutting down",141:"Keep Alive timeout",142:"Session taken over",143:"Topic Filter invalid",144:"Topic Name invalid",147:"Receive Maximum exceeded",148:"Topic Alias invalid",149:"Packet too large",150:"Message rate too high",151:"Quota exceeded",152:"Administrative action",153:"Payload format invalid",154:"Retain not supported",155:"QoS not supported",156:"Use another server",157:"Server moved",158:"Shared Subscriptions not supported",159:"Connection rate exceeded",160:"Maximum connect time",161:"Subscription Identifiers not supported",162:"Wildcard Subscriptions not supported"},i.MQTT5_AUTH_CODES={0:"Success",24:"Continue authentication",25:"Re-authenticate"}}),eb=vt((e,t)=>{dt(),gt(),pt();var i=1e3,n=i*60,r=n*60,s=r*24,o=s*7,a=s*365.25;t.exports=function(f,d){d=d||{};var g=typeof f;if(g==="string"&&f.length>0)return l(f);if(g==="number"&&isFinite(f))return d.long?c(f):h(f);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(f))};function l(f){if(f=String(f),!(f.length>100)){var d=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(f);if(d){var g=parseFloat(d[1]),y=(d[2]||"ms").toLowerCase();switch(y){case"years":case"year":case"yrs":case"yr":case"y":return g*a;case"weeks":case"week":case"w":return g*o;case"days":case"day":case"d":return g*s;case"hours":case"hour":case"hrs":case"hr":case"h":return g*r;case"minutes":case"minute":case"mins":case"min":case"m":return g*n;case"seconds":case"second":case"secs":case"sec":case"s":return g*i;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return g;default:return}}}}function h(f){var d=Math.abs(f);return d>=s?Math.round(f/s)+"d":d>=r?Math.round(f/r)+"h":d>=n?Math.round(f/n)+"m":d>=i?Math.round(f/i)+"s":f+"ms"}function c(f){var d=Math.abs(f);return d>=s?u(f,d,s,"day"):d>=r?u(f,d,r,"hour"):d>=n?u(f,d,n,"minute"):d>=i?u(f,d,i,"second"):f+" ms"}function u(f,d,g,y){var _=d>=g*1.5;return Math.round(f/g)+" "+y+(_?"s":"")}}),ib=vt((e,t)=>{dt(),gt(),pt();function i(n){s.debug=s,s.default=s,s.coerce=u,s.disable=l,s.enable=a,s.enabled=h,s.humanize=eb(),s.destroy=f,Object.keys(n).forEach(d=>{s[d]=n[d]}),s.names=[],s.skips=[],s.formatters={};function r(d){let g=0;for(let y=0;y<d.length;y++)g=(g<<5)-g+d.charCodeAt(y),g|=0;return s.colors[Math.abs(g)%s.colors.length]}s.selectColor=r;function s(d){let g,y=null,_,w;function v(...S){if(!v.enabled)return;let T=v,O=Number(new Date),k=O-(g||O);T.diff=k,T.prev=g,T.curr=O,g=O,S[0]=s.coerce(S[0]),typeof S[0]!="string"&&S.unshift("%O");let M=0;S[0]=S[0].replace(/%([a-zA-Z%])/g,(A,B)=>{if(A==="%%")return"%";M++;let q=s.formatters[B];if(typeof q=="function"){let $=S[M];A=q.call(T,$),S.splice(M,1),M--}return A}),s.formatArgs.call(T,S),(T.log||s.log).apply(T,S)}return v.namespace=d,v.useColors=s.useColors(),v.color=s.selectColor(d),v.extend=o,v.destroy=s.destroy,Object.defineProperty(v,"enabled",{enumerable:!0,configurable:!1,get:()=>y!==null?y:(_!==s.namespaces&&(_=s.namespaces,w=s.enabled(d)),w),set:S=>{y=S}}),typeof s.init=="function"&&s.init(v),v}function o(d,g){let y=s(this.namespace+(typeof g>"u"?":":g)+d);return y.log=this.log,y}function a(d){s.save(d),s.namespaces=d,s.names=[],s.skips=[];let g,y=(typeof d=="string"?d:"").split(/[\s,]+/),_=y.length;for(g=0;g<_;g++)y[g]&&(d=y[g].replace(/\*/g,".*?"),d[0]==="-"?s.skips.push(new RegExp("^"+d.slice(1)+"$")):s.names.push(new RegExp("^"+d+"$")))}function l(){let d=[...s.names.map(c),...s.skips.map(c).map(g=>"-"+g)].join(",");return s.enable(""),d}function h(d){if(d[d.length-1]==="*")return!0;let g,y;for(g=0,y=s.skips.length;g<y;g++)if(s.skips[g].test(d))return!1;for(g=0,y=s.names.length;g<y;g++)if(s.names[g].test(d))return!0;return!1}function c(d){return d.toString().substring(2,d.toString().length-2).replace(/\.\*\?$/,"*")}function u(d){return d instanceof Error?d.stack||d.message:d}function f(){console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.")}return s.enable(s.load()),s}t.exports=i}),hn=vt((e,t)=>{dt(),gt(),pt(),e.formatArgs=n,e.save=r,e.load=s,e.useColors=i,e.storage=o(),e.destroy=(()=>{let l=!1;return()=>{l||(l=!0,console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`."))}})(),e.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"];function i(){return typeof window<"u"&&window.process&&(window.process.type==="renderer"||window.process.__nwjs)?!0:typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/)?!1:typeof document<"u"&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||typeof window<"u"&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)}function n(l){if(l[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+l[0]+(this.useColors?"%c ":" ")+"+"+t.exports.humanize(this.diff),!this.useColors)return;let h="color: "+this.color;l.splice(1,0,h,"color: inherit");let c=0,u=0;l[0].replace(/%[a-zA-Z%]/g,f=>{f!=="%%"&&(c++,f==="%c"&&(u=c))}),l.splice(u,0,h)}e.log=console.debug||console.log||(()=>{});function r(l){try{l?e.storage.setItem("debug",l):e.storage.removeItem("debug")}catch{}}function s(){let l;try{l=e.storage.getItem("debug")}catch{}return!l&&typeof Zt<"u"&&"env"in Zt&&(l=Zt.env.DEBUG),l}function o(){try{return localStorage}catch{}}t.exports=ib()(e);var{formatters:a}=t.exports;a.j=function(l){try{return JSON.stringify(l)}catch(h){return"[UnexpectedJSONParseError]: "+h.message}}}),nb=vt((e,t)=>{dt(),gt(),pt();var i=J0(),{EventEmitter:n}=(Lr(),ae(dr)),r=tb(),s=up(),o=hn()("mqtt-packet:parser"),a=class gh extends n{constructor(){super(),this.parser=this.constructor.parser}static parser(h){return this instanceof gh?(this.settings=h||{},this._states=["_parseHeader","_parseLength","_parsePayload","_newPacket"],this._resetState(),this):new gh().parser(h)}_resetState(){o("_resetState: resetting packet, error, _list, and _stateCounter"),this.packet=new r,this.error=null,this._list=i(),this._stateCounter=0}parse(h){for(this.error&&this._resetState(),this._list.append(h),o("parse: current state: %s",this._states[this._stateCounter]);(this.packet.length!==-1||this._list.length>0)&&this[this._states[this._stateCounter]]()&&!this.error;)this._stateCounter++,o("parse: state complete. _stateCounter is now: %d",this._stateCounter),o("parse: packet.length: %d, buffer list length: %d",this.packet.length,this._list.length),this._stateCounter>=this._states.length&&(this._stateCounter=0);return o("parse: exited while loop. packet: %d, buffer list length: %d",this.packet.length,this._list.length),this._list.length}_parseHeader(){let h=this._list.readUInt8(0),c=h>>s.CMD_SHIFT;this.packet.cmd=s.types[c];let u=h&15,f=s.requiredHeaderFlags[c];return f!=null&&u!==f?this._emitError(new Error(s.requiredHeaderFlagsErrors[c])):(this.packet.retain=(h&s.RETAIN_MASK)!==0,this.packet.qos=h>>s.QOS_SHIFT&s.QOS_MASK,this.packet.qos>2?this._emitError(new Error("Packet must not have both QoS bits set to 1")):(this.packet.dup=(h&s.DUP_MASK)!==0,o("_parseHeader: packet: %o",this.packet),this._list.consume(1),!0))}_parseLength(){let h=this._parseVarByteNum(!0);return h&&(this.packet.length=h.value,this._list.consume(h.bytes)),o("_parseLength %d",h.value),!!h}_parsePayload(){o("_parsePayload: payload %O",this._list);let h=!1;if(this.packet.length===0||this._list.length>=this.packet.length){switch(this._pos=0,this.packet.cmd){case"connect":this._parseConnect();break;case"connack":this._parseConnack();break;case"publish":this._parsePublish();break;case"puback":case"pubrec":case"pubrel":case"pubcomp":this._parseConfirmation();break;case"subscribe":this._parseSubscribe();break;case"suback":this._parseSuback();break;case"unsubscribe":this._parseUnsubscribe();break;case"unsuback":this._parseUnsuback();break;case"pingreq":case"pingresp":break;case"disconnect":this._parseDisconnect();break;case"auth":this._parseAuth();break;default:this._emitError(new Error("Not supported"))}h=!0}return o("_parsePayload complete result: %s",h),h}_parseConnect(){o("_parseConnect");let h,c,u,f,d={},g=this.packet,y=this._parseString();if(y===null)return this._emitError(new Error("Cannot parse protocolId"));if(y!=="MQTT"&&y!=="MQIsdp")return this._emitError(new Error("Invalid protocolId"));if(g.protocolId=y,this._pos>=this._list.length)return this._emitError(new Error("Packet too short"));if(g.protocolVersion=this._list.readUInt8(this._pos),g.protocolVersion>=128&&(g.bridgeMode=!0,g.protocolVersion=g.protocolVersion-128),g.protocolVersion!==3&&g.protocolVersion!==4&&g.protocolVersion!==5)return this._emitError(new Error("Invalid protocol version"));if(this._pos++,this._pos>=this._list.length)return this._emitError(new Error("Packet too short"));if(this._list.readUInt8(this._pos)&1)return this._emitError(new Error("Connect flag bit 0 must be 0, but got 1"));d.username=this._list.readUInt8(this._pos)&s.USERNAME_MASK,d.password=this._list.readUInt8(this._pos)&s.PASSWORD_MASK,d.will=this._list.readUInt8(this._pos)&s.WILL_FLAG_MASK;let _=!!(this._list.readUInt8(this._pos)&s.WILL_RETAIN_MASK),w=(this._list.readUInt8(this._pos)&s.WILL_QOS_MASK)>>s.WILL_QOS_SHIFT;if(d.will)g.will={},g.will.retain=_,g.will.qos=w;else{if(_)return this._emitError(new Error("Will Retain Flag must be set to zero when Will Flag is set to 0"));if(w)return this._emitError(new Error("Will QoS must be set to zero when Will Flag is set to 0"))}if(g.clean=(this._list.readUInt8(this._pos)&s.CLEAN_SESSION_MASK)!==0,this._pos++,g.keepalive=this._parseNum(),g.keepalive===-1)return this._emitError(new Error("Packet too short"));if(g.protocolVersion===5){let S=this._parseProperties();Object.getOwnPropertyNames(S).length&&(g.properties=S)}let v=this._parseString();if(v===null)return this._emitError(new Error("Packet too short"));if(g.clientId=v,o("_parseConnect: packet.clientId: %s",g.clientId),d.will){if(g.protocolVersion===5){let S=this._parseProperties();Object.getOwnPropertyNames(S).length&&(g.will.properties=S)}if(h=this._parseString(),h===null)return this._emitError(new Error("Cannot parse will topic"));if(g.will.topic=h,o("_parseConnect: packet.will.topic: %s",g.will.topic),c=this._parseBuffer(),c===null)return this._emitError(new Error("Cannot parse will payload"));g.will.payload=c,o("_parseConnect: packet.will.paylaod: %s",g.will.payload)}if(d.username){if(f=this._parseString(),f===null)return this._emitError(new Error("Cannot parse username"));g.username=f,o("_parseConnect: packet.username: %s",g.username)}if(d.password){if(u=this._parseBuffer(),u===null)return this._emitError(new Error("Cannot parse password"));g.password=u}return this.settings=g,o("_parseConnect: complete"),g}_parseConnack(){o("_parseConnack");let h=this.packet;if(this._list.length<1)return null;let c=this._list.readUInt8(this._pos++);if(c>1)return this._emitError(new Error("Invalid connack flags, bits 7-1 must be set to 0"));if(h.sessionPresent=!!(c&s.SESSIONPRESENT_MASK),this.settings.protocolVersion===5)this._list.length>=2?h.reasonCode=this._list.readUInt8(this._pos++):h.reasonCode=0;else{if(this._list.length<2)return null;h.returnCode=this._list.readUInt8(this._pos++)}if(h.returnCode===-1||h.reasonCode===-1)return this._emitError(new Error("Cannot parse return code"));if(this.settings.protocolVersion===5){let u=this._parseProperties();Object.getOwnPropertyNames(u).length&&(h.properties=u)}o("_parseConnack: complete")}_parsePublish(){o("_parsePublish");let h=this.packet;if(h.topic=this._parseString(),h.topic===null)return this._emitError(new Error("Cannot parse topic"));if(!(h.qos>0&&!this._parseMessageId())){if(this.settings.protocolVersion===5){let c=this._parseProperties();Object.getOwnPropertyNames(c).length&&(h.properties=c)}h.payload=this._list.slice(this._pos,h.length),o("_parsePublish: payload from buffer list: %o",h.payload)}}_parseSubscribe(){o("_parseSubscribe");let h=this.packet,c,u,f,d,g,y,_;if(h.subscriptions=[],!!this._parseMessageId()){if(this.settings.protocolVersion===5){let w=this._parseProperties();Object.getOwnPropertyNames(w).length&&(h.properties=w)}if(h.length<=0)return this._emitError(new Error("Malformed subscribe, no payload specified"));for(;this._pos<h.length;){if(c=this._parseString(),c===null)return this._emitError(new Error("Cannot parse topic"));if(this._pos>=h.length)return this._emitError(new Error("Malformed Subscribe Payload"));if(u=this._parseByte(),this.settings.protocolVersion===5){if(u&192)return this._emitError(new Error("Invalid subscribe topic flag bits, bits 7-6 must be 0"))}else if(u&252)return this._emitError(new Error("Invalid subscribe topic flag bits, bits 7-2 must be 0"));if(f=u&s.SUBSCRIBE_OPTIONS_QOS_MASK,f>2)return this._emitError(new Error("Invalid subscribe QoS, must be <= 2"));if(y=(u>>s.SUBSCRIBE_OPTIONS_NL_SHIFT&s.SUBSCRIBE_OPTIONS_NL_MASK)!==0,g=(u>>s.SUBSCRIBE_OPTIONS_RAP_SHIFT&s.SUBSCRIBE_OPTIONS_RAP_MASK)!==0,d=u>>s.SUBSCRIBE_OPTIONS_RH_SHIFT&s.SUBSCRIBE_OPTIONS_RH_MASK,d>2)return this._emitError(new Error("Invalid retain handling, must be <= 2"));_={topic:c,qos:f},this.settings.protocolVersion===5?(_.nl=y,_.rap=g,_.rh=d):this.settings.bridgeMode&&(_.rh=0,_.rap=!0,_.nl=!0),o("_parseSubscribe: push subscription `%s` to subscription",_),h.subscriptions.push(_)}}}_parseSuback(){o("_parseSuback");let h=this.packet;if(this.packet.granted=[],!!this._parseMessageId()){if(this.settings.protocolVersion===5){let c=this._parseProperties();Object.getOwnPropertyNames(c).length&&(h.properties=c)}if(h.length<=0)return this._emitError(new Error("Malformed suback, no payload specified"));for(;this._pos<this.packet.length;){let c=this._list.readUInt8(this._pos++);if(this.settings.protocolVersion===5){if(!s.MQTT5_SUBACK_CODES[c])return this._emitError(new Error("Invalid suback code"))}else if(c>2&&c!==128)return this._emitError(new Error("Invalid suback QoS, must be 0, 1, 2 or 128"));this.packet.granted.push(c)}}}_parseUnsubscribe(){o("_parseUnsubscribe");let h=this.packet;if(h.unsubscriptions=[],!!this._parseMessageId()){if(this.settings.protocolVersion===5){let c=this._parseProperties();Object.getOwnPropertyNames(c).length&&(h.properties=c)}if(h.length<=0)return this._emitError(new Error("Malformed unsubscribe, no payload specified"));for(;this._pos<h.length;){let c=this._parseString();if(c===null)return this._emitError(new Error("Cannot parse topic"));o("_parseUnsubscribe: push topic `%s` to unsubscriptions",c),h.unsubscriptions.push(c)}}}_parseUnsuback(){o("_parseUnsuback");let h=this.packet;if(!this._parseMessageId())return this._emitError(new Error("Cannot parse messageId"));if((this.settings.protocolVersion===3||this.settings.protocolVersion===4)&&h.length!==2)return this._emitError(new Error("Malformed unsuback, payload length must be 2"));if(h.length<=0)return this._emitError(new Error("Malformed unsuback, no payload specified"));if(this.settings.protocolVersion===5){let c=this._parseProperties();for(Object.getOwnPropertyNames(c).length&&(h.properties=c),h.granted=[];this._pos<this.packet.length;){let u=this._list.readUInt8(this._pos++);if(!s.MQTT5_UNSUBACK_CODES[u])return this._emitError(new Error("Invalid unsuback code"));this.packet.granted.push(u)}}}_parseConfirmation(){o("_parseConfirmation: packet.cmd: `%s`",this.packet.cmd);let h=this.packet;if(this._parseMessageId(),this.settings.protocolVersion===5){if(h.length>2){switch(h.reasonCode=this._parseByte(),this.packet.cmd){case"puback":case"pubrec":if(!s.MQTT5_PUBACK_PUBREC_CODES[h.reasonCode])return this._emitError(new Error("Invalid "+this.packet.cmd+" reason code"));break;case"pubrel":case"pubcomp":if(!s.MQTT5_PUBREL_PUBCOMP_CODES[h.reasonCode])return this._emitError(new Error("Invalid "+this.packet.cmd+" reason code"));break}o("_parseConfirmation: packet.reasonCode `%d`",h.reasonCode)}else h.reasonCode=0;if(h.length>3){let c=this._parseProperties();Object.getOwnPropertyNames(c).length&&(h.properties=c)}}return!0}_parseDisconnect(){let h=this.packet;if(o("_parseDisconnect"),this.settings.protocolVersion===5){this._list.length>0?(h.reasonCode=this._parseByte(),s.MQTT5_DISCONNECT_CODES[h.reasonCode]||this._emitError(new Error("Invalid disconnect reason code"))):h.reasonCode=0;let c=this._parseProperties();Object.getOwnPropertyNames(c).length&&(h.properties=c)}return o("_parseDisconnect result: true"),!0}_parseAuth(){o("_parseAuth");let h=this.packet;if(this.settings.protocolVersion!==5)return this._emitError(new Error("Not supported auth packet for this version MQTT"));if(h.reasonCode=this._parseByte(),!s.MQTT5_AUTH_CODES[h.reasonCode])return this._emitError(new Error("Invalid auth reason code"));let c=this._parseProperties();return Object.getOwnPropertyNames(c).length&&(h.properties=c),o("_parseAuth: result: true"),!0}_parseMessageId(){let h=this.packet;return h.messageId=this._parseNum(),h.messageId===null?(this._emitError(new Error("Cannot parse messageId")),!1):(o("_parseMessageId: packet.messageId %d",h.messageId),!0)}_parseString(h){let c=this._parseNum(),u=c+this._pos;if(c===-1||u>this._list.length||u>this.packet.length)return null;let f=this._list.toString("utf8",this._pos,u);return this._pos+=c,o("_parseString: result: %s",f),f}_parseStringPair(){return o("_parseStringPair"),{name:this._parseString(),value:this._parseString()}}_parseBuffer(){let h=this._parseNum(),c=h+this._pos;if(h===-1||c>this._list.length||c>this.packet.length)return null;let u=this._list.slice(this._pos,c);return this._pos+=h,o("_parseBuffer: result: %o",u),u}_parseNum(){if(this._list.length-this._pos<2)return-1;let h=this._list.readUInt16BE(this._pos);return this._pos+=2,o("_parseNum: result: %s",h),h}_parse4ByteNum(){if(this._list.length-this._pos<4)return-1;let h=this._list.readUInt32BE(this._pos);return this._pos+=4,o("_parse4ByteNum: result: %s",h),h}_parseVarByteNum(h){o("_parseVarByteNum");let c=4,u=0,f=1,d=0,g=!1,y,_=this._pos?this._pos:0;for(;u<c&&_+u<this._list.length;){if(y=this._list.readUInt8(_+u++),d+=f*(y&s.VARBYTEINT_MASK),f*=128,!(y&s.VARBYTEINT_FIN_MASK)){g=!0;break}if(this._list.length<=u)break}return!g&&u===c&&this._list.length>=u&&this._emitError(new Error("Invalid variable byte integer")),_&&(this._pos+=u),g?h?g={bytes:u,value:d}:g=d:g=!1,o("_parseVarByteNum: result: %o",g),g}_parseByte(){let h;return this._pos<this._list.length&&(h=this._list.readUInt8(this._pos),this._pos++),o("_parseByte: result: %o",h),h}_parseByType(h){switch(o("_parseByType: type: %s",h),h){case"byte":return this._parseByte()!==0;case"int8":return this._parseByte();case"int16":return this._parseNum();case"int32":return this._parse4ByteNum();case"var":return this._parseVarByteNum();case"string":return this._parseString();case"pair":return this._parseStringPair();case"binary":return this._parseBuffer()}}_parseProperties(){o("_parseProperties");let h=this._parseVarByteNum(),c=this._pos+h,u={};for(;this._pos<c;){let f=this._parseByte();if(!f)return this._emitError(new Error("Cannot parse property code type")),!1;let d=s.propertiesCodes[f];if(!d)return this._emitError(new Error("Unknown property")),!1;if(d==="userProperties"){u[d]||(u[d]=Object.create(null));let g=this._parseByType(s.propertiesTypes[d]);if(u[d][g.name])if(Array.isArray(u[d][g.name]))u[d][g.name].push(g.value);else{let y=u[d][g.name];u[d][g.name]=[y],u[d][g.name].push(g.value)}else u[d][g.name]=g.value;continue}u[d]?Array.isArray(u[d])?u[d].push(this._parseByType(s.propertiesTypes[d])):(u[d]=[u[d]],u[d].push(this._parseByType(s.propertiesTypes[d]))):u[d]=this._parseByType(s.propertiesTypes[d])}return u}_newPacket(){return o("_newPacket"),this.packet&&(this._list.consume(this.packet.length),o("_newPacket: parser emit packet: packet.cmd: %s, packet.payload: %s, packet.length: %d",this.packet.cmd,this.packet.payload,this.packet.length),this.emit("packet",this.packet)),o("_newPacket: new packet"),this.packet=new r,this._pos=0,!0}_emitError(h){o("_emitError",h),this.error=h,this.emit("error",h)}};t.exports=a}),rb=vt((e,t)=>{dt(),gt(),pt();var{Buffer:i}=(Ye(),ae(We)),n=65536,r={},s=i.isBuffer(i.from([1,2]).subarray(0,1));function o(c){let u=i.allocUnsafe(2);return u.writeUInt8(c>>8,0),u.writeUInt8(c&255,0+1),u}function a(){for(let c=0;c<n;c++)r[c]=o(c)}function l(c){let u=0,f=0,d=i.allocUnsafe(4);do u=c%128|0,c=c/128|0,c>0&&(u=u|128),d.writeUInt8(u,f++);while(c>0&&f<4);return c>0&&(f=0),s?d.subarray(0,f):d.slice(0,f)}function h(c){let u=i.allocUnsafe(4);return u.writeUInt32BE(c,0),u}t.exports={cache:r,generateCache:a,generateNumber:o,genBufVariableByteInt:l,generate4ByteBuffer:h}}),sb=vt((e,t)=>{dt(),gt(),pt(),typeof Zt>"u"||!Zt.version||Zt.version.indexOf("v0.")===0||Zt.version.indexOf("v1.")===0&&Zt.version.indexOf("v1.8.")!==0?t.exports={nextTick:i}:t.exports=Zt;function i(n,r,s,o){if(typeof n!="function")throw new TypeError('"callback" argument must be a function');var a=arguments.length,l,h;switch(a){case 0:case 1:return Zt.nextTick(n);case 2:return Zt.nextTick(function(){n.call(null,r)});case 3:return Zt.nextTick(function(){n.call(null,r,s)});case 4:return Zt.nextTick(function(){n.call(null,r,s,o)});default:for(l=new Array(a-1),h=0;h<l.length;)l[h++]=arguments[h];return Zt.nextTick(function(){n.apply(null,l)})}}}),fp=vt((e,t)=>{dt(),gt(),pt();var i=up(),{Buffer:n}=(Ye(),ae(We)),r=n.allocUnsafe(0),s=n.from([0]),o=rb(),a=sb().nextTick,l=hn()("mqtt-packet:writeToStream"),h=o.cache,c=o.generateNumber,u=o.generateCache,f=o.genBufVariableByteInt,d=o.generate4ByteBuffer,g=J,y=!0;function _(N,C,G){switch(l("generate called"),C.cork&&(C.cork(),a(w,C)),y&&(y=!1,u()),l("generate: packet.cmd: %s",N.cmd),N.cmd){case"connect":return v(N,C);case"connack":return S(N,C,G);case"publish":return T(N,C,G);case"puback":case"pubrec":case"pubrel":case"pubcomp":return O(N,C,G);case"subscribe":return k(N,C,G);case"suback":return M(N,C,G);case"unsubscribe":return A(N,C,G);case"unsuback":return B(N,C,G);case"pingreq":case"pingresp":return q(N,C);case"disconnect":return $(N,C,G);case"auth":return x(N,C,G);default:return C.destroy(new Error("Unknown command")),!1}}Object.defineProperty(_,"cacheNumbers",{get(){return g===J},set(N){N?((!h||Object.keys(h).length===0)&&(y=!0),g=J):(y=!1,g=H)}});function w(N){N.uncork()}function v(N,C,G){let ct=N||{},it=ct.protocolId||"MQTT",et=ct.protocolVersion||4,ft=ct.will,ut=ct.clean,L=ct.keepalive||0,Y=ct.clientId||"",W=ct.username,ot=ct.password,Z=ct.properties;ut===void 0&&(ut=!0);let j=0;if(!it||typeof it!="string"&&!n.isBuffer(it))return C.destroy(new Error("Invalid protocolId")),!1;if(j+=it.length+2,et!==3&&et!==4&&et!==5)return C.destroy(new Error("Invalid protocol version")),!1;if(j+=1,(typeof Y=="string"||n.isBuffer(Y))&&(Y||et>=4)&&(Y||ut))j+=n.byteLength(Y)+2;else{if(et<4)return C.destroy(new Error("clientId must be supplied before 3.1.1")),!1;if(ut*1===0)return C.destroy(new Error("clientId must be given if cleanSession set to 0")),!1}if(typeof L!="number"||L<0||L>65535||L%1!==0)return C.destroy(new Error("Invalid keepalive")),!1;j+=2,j+=1;let Q,_t;if(et===5){if(Q=xt(C,Z),!Q)return!1;j+=Q.length}if(ft){if(typeof ft!="object")return C.destroy(new Error("Invalid will")),!1;if(!ft.topic||typeof ft.topic!="string")return C.destroy(new Error("Invalid will topic")),!1;if(j+=n.byteLength(ft.topic)+2,j+=2,ft.payload)if(ft.payload.length>=0)typeof ft.payload=="string"?j+=n.byteLength(ft.payload):j+=ft.payload.length;else return C.destroy(new Error("Invalid will payload")),!1;if(_t={},et===5){if(_t=xt(C,ft.properties),!_t)return!1;j+=_t.length}}let Mt=!1;if(W!=null)if(lt(W))Mt=!0,j+=n.byteLength(W)+2;else return C.destroy(new Error("Invalid username")),!1;if(ot!=null){if(!Mt)return C.destroy(new Error("Username is required to use password")),!1;if(lt(ot))j+=Et(ot)+2;else return C.destroy(new Error("Invalid password")),!1}C.write(i.CONNECT_HEADER),X(C,j),nt(C,it),ct.bridgeMode&&(et+=128),C.write(et===131?i.VERSION131:et===132?i.VERSION132:et===4?i.VERSION4:et===5?i.VERSION5:i.VERSION3);let Ot=0;return Ot|=W!=null?i.USERNAME_MASK:0,Ot|=ot!=null?i.PASSWORD_MASK:0,Ot|=ft&&ft.retain?i.WILL_RETAIN_MASK:0,Ot|=ft&&ft.qos?ft.qos<<i.WILL_QOS_SHIFT:0,Ot|=ft?i.WILL_FLAG_MASK:0,Ot|=ut?i.CLEAN_SESSION_MASK:0,C.write(n.from([Ot])),g(C,L),et===5&&Q.write(),nt(C,Y),ft&&(et===5&&_t.write(),V(C,ft.topic),nt(C,ft.payload)),W!=null&&nt(C,W),ot!=null&&nt(C,ot),!0}function S(N,C,G){let ct=G?G.protocolVersion:4,it=N||{},et=ct===5?it.reasonCode:it.returnCode,ft=it.properties,ut=2;if(typeof et!="number")return C.destroy(new Error("Invalid return code")),!1;let L=null;if(ct===5){if(L=xt(C,ft),!L)return!1;ut+=L.length}return C.write(i.CONNACK_HEADER),X(C,ut),C.write(it.sessionPresent?i.SESSIONPRESENT_HEADER:s),C.write(n.from([et])),L==null||L.write(),!0}function T(N,C,G){l("publish: packet: %o",N);let ct=G?G.protocolVersion:4,it=N||{},et=it.qos||0,ft=it.retain?i.RETAIN_MASK:0,ut=it.topic,L=it.payload||r,Y=it.messageId,W=it.properties,ot=0;if(typeof ut=="string")ot+=n.byteLength(ut)+2;else if(n.isBuffer(ut))ot+=ut.length+2;else return C.destroy(new Error("Invalid topic")),!1;if(n.isBuffer(L)?ot+=L.length:ot+=n.byteLength(L),et&&typeof Y!="number")return C.destroy(new Error("Invalid messageId")),!1;et&&(ot+=2);let Z=null;if(ct===5){if(Z=xt(C,W),!Z)return!1;ot+=Z.length}return C.write(i.PUBLISH_HEADER[et][it.dup?1:0][ft?1:0]),X(C,ot),g(C,Et(ut)),C.write(ut),et>0&&g(C,Y),Z==null||Z.write(),l("publish: payload: %o",L),C.write(L)}function O(N,C,G){let ct=G?G.protocolVersion:4,it=N||{},et=it.cmd||"puback",ft=it.messageId,ut=it.dup&&et==="pubrel"?i.DUP_MASK:0,L=0,Y=it.reasonCode,W=it.properties,ot=ct===5?3:2;if(et==="pubrel"&&(L=1),typeof ft!="number")return C.destroy(new Error("Invalid messageId")),!1;let Z=null;if(ct===5&&typeof W=="object"){if(Z=I(C,W,G,ot),!Z)return!1;ot+=Z.length}return C.write(i.ACKS[et][L][ut][0]),ot===3&&(ot+=Y!==0?1:-1),X(C,ot),g(C,ft),ct===5&&ot!==2&&C.write(n.from([Y])),Z!==null?Z.write():ot===4&&C.write(n.from([0])),!0}function k(N,C,G){l("subscribe: packet: ");let ct=G?G.protocolVersion:4,it=N||{},et=it.dup?i.DUP_MASK:0,ft=it.messageId,ut=it.subscriptions,L=it.properties,Y=0;if(typeof ft!="number")return C.destroy(new Error("Invalid messageId")),!1;Y+=2;let W=null;if(ct===5){if(W=xt(C,L),!W)return!1;Y+=W.length}if(typeof ut=="object"&&ut.length)for(let Z=0;Z<ut.length;Z+=1){let j=ut[Z].topic,Q=ut[Z].qos;if(typeof j!="string")return C.destroy(new Error("Invalid subscriptions - invalid topic")),!1;if(typeof Q!="number")return C.destroy(new Error("Invalid subscriptions - invalid qos")),!1;if(ct===5){if(typeof(ut[Z].nl||!1)!="boolean")return C.destroy(new Error("Invalid subscriptions - invalid No Local")),!1;if(typeof(ut[Z].rap||!1)!="boolean")return C.destroy(new Error("Invalid subscriptions - invalid Retain as Published")),!1;let _t=ut[Z].rh||0;if(typeof _t!="number"||_t>2)return C.destroy(new Error("Invalid subscriptions - invalid Retain Handling")),!1}Y+=n.byteLength(j)+2+1}else return C.destroy(new Error("Invalid subscriptions")),!1;l("subscribe: writing to stream: %o",i.SUBSCRIBE_HEADER),C.write(i.SUBSCRIBE_HEADER[1][et?1:0][0]),X(C,Y),g(C,ft),W!==null&&W.write();let ot=!0;for(let Z of ut){let j=Z.topic,Q=Z.qos,_t=+Z.nl,Mt=+Z.rap,Ot=Z.rh,zt;V(C,j),zt=i.SUBSCRIBE_OPTIONS_QOS[Q],ct===5&&(zt|=_t?i.SUBSCRIBE_OPTIONS_NL:0,zt|=Mt?i.SUBSCRIBE_OPTIONS_RAP:0,zt|=Ot?i.SUBSCRIBE_OPTIONS_RH[Ot]:0),ot=C.write(n.from([zt]))}return ot}function M(N,C,G){let ct=G?G.protocolVersion:4,it=N||{},et=it.messageId,ft=it.granted,ut=it.properties,L=0;if(typeof et!="number")return C.destroy(new Error("Invalid messageId")),!1;if(L+=2,typeof ft=="object"&&ft.length)for(let W=0;W<ft.length;W+=1){if(typeof ft[W]!="number")return C.destroy(new Error("Invalid qos vector")),!1;L+=1}else return C.destroy(new Error("Invalid qos vector")),!1;let Y=null;if(ct===5){if(Y=I(C,ut,G,L),!Y)return!1;L+=Y.length}return C.write(i.SUBACK_HEADER),X(C,L),g(C,et),Y!==null&&Y.write(),C.write(n.from(ft))}function A(N,C,G){let ct=G?G.protocolVersion:4,it=N||{},et=it.messageId,ft=it.dup?i.DUP_MASK:0,ut=it.unsubscriptions,L=it.properties,Y=0;if(typeof et!="number")return C.destroy(new Error("Invalid messageId")),!1;if(Y+=2,typeof ut=="object"&&ut.length)for(let Z=0;Z<ut.length;Z+=1){if(typeof ut[Z]!="string")return C.destroy(new Error("Invalid unsubscriptions")),!1;Y+=n.byteLength(ut[Z])+2}else return C.destroy(new Error("Invalid unsubscriptions")),!1;let W=null;if(ct===5){if(W=xt(C,L),!W)return!1;Y+=W.length}C.write(i.UNSUBSCRIBE_HEADER[1][ft?1:0][0]),X(C,Y),g(C,et),W!==null&&W.write();let ot=!0;for(let Z=0;Z<ut.length;Z++)ot=V(C,ut[Z]);return ot}function B(N,C,G){let ct=G?G.protocolVersion:4,it=N||{},et=it.messageId,ft=it.dup?i.DUP_MASK:0,ut=it.granted,L=it.properties,Y=it.cmd,W=0,ot=2;if(typeof et!="number")return C.destroy(new Error("Invalid messageId")),!1;if(ct===5)if(typeof ut=="object"&&ut.length)for(let j=0;j<ut.length;j+=1){if(typeof ut[j]!="number")return C.destroy(new Error("Invalid qos vector")),!1;ot+=1}else return C.destroy(new Error("Invalid qos vector")),!1;let Z=null;if(ct===5){if(Z=I(C,L,G,ot),!Z)return!1;ot+=Z.length}return C.write(i.ACKS[Y][W][ft][0]),X(C,ot),g(C,et),Z!==null&&Z.write(),ct===5&&C.write(n.from(ut)),!0}function q(N,C,G){return C.write(i.EMPTY[N.cmd])}function $(N,C,G){let ct=G?G.protocolVersion:4,it=N||{},et=it.reasonCode,ft=it.properties,ut=ct===5?1:0,L=null;if(ct===5){if(L=I(C,ft,G,ut),!L)return!1;ut+=L.length}return C.write(n.from([i.codes.disconnect<<4])),X(C,ut),ct===5&&C.write(n.from([et])),L!==null&&L.write(),!0}function x(N,C,G){let ct=G?G.protocolVersion:4,it=N||{},et=it.reasonCode,ft=it.properties,ut=ct===5?1:0;ct!==5&&C.destroy(new Error("Invalid mqtt version for auth packet"));let L=I(C,ft,G,ut);return L?(ut+=L.length,C.write(n.from([i.codes.auth<<4])),X(C,ut),C.write(n.from([et])),L!==null&&L.write(),!0):!1}var z={};function X(N,C){if(C>i.VARBYTEINT_MAX)return N.destroy(new Error(`Invalid variable byte integer: ${C}`)),!1;let G=z[C];return G||(G=f(C),C<16384&&(z[C]=G)),l("writeVarByteInt: writing to stream: %o",G),N.write(G)}function V(N,C){let G=n.byteLength(C);return g(N,G),l("writeString: %s",C),N.write(C,"utf8")}function rt(N,C,G){V(N,C),V(N,G)}function J(N,C){return l("writeNumberCached: number: %d",C),l("writeNumberCached: %o",h[C]),N.write(h[C])}function H(N,C){let G=c(C);return l("writeNumberGenerated: %o",G),N.write(G)}function ht(N,C){let G=d(C);return l("write4ByteNumber: %o",G),N.write(G)}function nt(N,C){typeof C=="string"?V(N,C):C?(g(N,C.length),N.write(C)):g(N,0)}function xt(N,C){if(typeof C!="object"||C.length!=null)return{length:1,write(){st(N,{},0)}};let G=0;function ct(it,et){let ft=i.propertiesTypes[it],ut=0;switch(ft){case"byte":{if(typeof et!="boolean")return N.destroy(new Error(`Invalid ${it}: ${et}`)),!1;ut+=1+1;break}case"int8":{if(typeof et!="number"||et<0||et>255)return N.destroy(new Error(`Invalid ${it}: ${et}`)),!1;ut+=1+1;break}case"binary":{if(et&&et===null)return N.destroy(new Error(`Invalid ${it}: ${et}`)),!1;ut+=1+n.byteLength(et)+2;break}case"int16":{if(typeof et!="number"||et<0||et>65535)return N.destroy(new Error(`Invalid ${it}: ${et}`)),!1;ut+=1+2;break}case"int32":{if(typeof et!="number"||et<0||et>4294967295)return N.destroy(new Error(`Invalid ${it}: ${et}`)),!1;ut+=1+4;break}case"var":{if(typeof et!="number"||et<0||et>268435455)return N.destroy(new Error(`Invalid ${it}: ${et}`)),!1;ut+=1+n.byteLength(f(et));break}case"string":{if(typeof et!="string")return N.destroy(new Error(`Invalid ${it}: ${et}`)),!1;ut+=1+2+n.byteLength(et.toString());break}case"pair":{if(typeof et!="object")return N.destroy(new Error(`Invalid ${it}: ${et}`)),!1;ut+=Object.getOwnPropertyNames(et).reduce((L,Y)=>{let W=et[Y];return Array.isArray(W)?L+=W.reduce((ot,Z)=>(ot+=1+2+n.byteLength(Y.toString())+2+n.byteLength(Z.toString()),ot),0):L+=1+2+n.byteLength(Y.toString())+2+n.byteLength(et[Y].toString()),L},0);break}default:return N.destroy(new Error(`Invalid property ${it}: ${et}`)),!1}return ut}if(C)for(let it in C){let et=0,ft=0,ut=C[it];if(Array.isArray(ut))for(let L=0;L<ut.length;L++){if(ft=ct(it,ut[L]),!ft)return!1;et+=ft}else{if(ft=ct(it,ut),!ft)return!1;et=ft}if(!et)return!1;G+=et}return{length:n.byteLength(f(G))+G,write(){st(N,C,G)}}}function I(N,C,G,ct){let it=["reasonString","userProperties"],et=G&&G.properties&&G.properties.maximumPacketSize?G.properties.maximumPacketSize:0,ft=xt(N,C);if(et)for(;ct+ft.length>et;){let ut=it.shift();if(ut&&C[ut])delete C[ut],ft=xt(N,C);else return!1}return ft}function K(N,C,G){switch(i.propertiesTypes[C]){case"byte":{N.write(n.from([i.properties[C]])),N.write(n.from([+G]));break}case"int8":{N.write(n.from([i.properties[C]])),N.write(n.from([G]));break}case"binary":{N.write(n.from([i.properties[C]])),nt(N,G);break}case"int16":{N.write(n.from([i.properties[C]])),g(N,G);break}case"int32":{N.write(n.from([i.properties[C]])),ht(N,G);break}case"var":{N.write(n.from([i.properties[C]])),X(N,G);break}case"string":{N.write(n.from([i.properties[C]])),V(N,G);break}case"pair":{Object.getOwnPropertyNames(G).forEach(ct=>{let it=G[ct];Array.isArray(it)?it.forEach(et=>{N.write(n.from([i.properties[C]])),rt(N,ct.toString(),et.toString())}):(N.write(n.from([i.properties[C]])),rt(N,ct.toString(),it.toString()))});break}default:return N.destroy(new Error(`Invalid property ${C} value: ${G}`)),!1}}function st(N,C,G){X(N,G);for(let ct in C)if(Object.prototype.hasOwnProperty.call(C,ct)&&C[ct]!==null){let it=C[ct];if(Array.isArray(it))for(let et=0;et<it.length;et++)K(N,ct,it[et]);else K(N,ct,it)}}function Et(N){return N?N instanceof n?N.length:n.byteLength(N):0}function lt(N){return typeof N=="string"||N instanceof n}t.exports=_}),ob=vt((e,t)=>{dt(),gt(),pt();var i=fp(),{EventEmitter:n}=(Lr(),ae(dr)),{Buffer:r}=(Ye(),ae(We));function s(a,l){let h=new o;return i(a,h,l),h.concat()}var o=class extends n{constructor(){super(),this._array=new Array(20),this._i=0}write(a){return this._array[this._i++]=a,!0}concat(){let a=0,l=new Array(this._array.length),h=this._array,c=0,u;for(u=0;u<h.length&&h[u]!==void 0;u++)typeof h[u]!="string"?l[u]=h[u].length:l[u]=r.byteLength(h[u]),a+=l[u];let f=r.allocUnsafe(a);for(u=0;u<h.length&&h[u]!==void 0;u++)typeof h[u]!="string"?(h[u].copy(f,c),c+=l[u]):(f.write(h[u],c),c+=l[u]);return f}destroy(a){a&&this.emit("error",a)}};t.exports=s}),ab=vt(e=>{dt(),gt(),pt(),e.parser=nb().parser,e.generate=ob(),e.writeToStream=fp()}),dp=vt(e=>{dt(),gt(),pt(),Object.defineProperty(e,"__esModule",{value:!0});var t=class{constructor(){this.nextId=Math.max(1,Math.floor(Math.random()*65535))}allocate(){let i=this.nextId++;return this.nextId===65536&&(this.nextId=1),i}getLastAllocated(){return this.nextId===1?65535:this.nextId-1}register(i){return!0}deallocate(i){}clear(){}};e.default=t}),lb=vt((e,t)=>{dt(),gt(),pt(),t.exports=n;function i(s){return s instanceof Fo?Fo.from(s):new s.constructor(s.buffer.slice(),s.byteOffset,s.length)}function n(s){if(s=s||{},s.circles)return r(s);return s.proto?l:a;function o(h,c){for(var u=Object.keys(h),f=new Array(u.length),d=0;d<u.length;d++){var g=u[d],y=h[g];typeof y!="object"||y===null?f[g]=y:y instanceof Date?f[g]=new Date(y):ArrayBuffer.isView(y)?f[g]=i(y):f[g]=c(y)}return f}function a(h){if(typeof h!="object"||h===null)return h;if(h instanceof Date)return new Date(h);if(Array.isArray(h))return o(h,a);if(h instanceof Map)return new Map(o(Array.from(h),a));if(h instanceof Set)return new Set(o(Array.from(h),a));var c={};for(var u in h)if(Object.hasOwnProperty.call(h,u)!==!1){var f=h[u];typeof f!="object"||f===null?c[u]=f:f instanceof Date?c[u]=new Date(f):f instanceof Map?c[u]=new Map(o(Array.from(f),a)):f instanceof Set?c[u]=new Set(o(Array.from(f),a)):ArrayBuffer.isView(f)?c[u]=i(f):c[u]=a(f)}return c}function l(h){if(typeof h!="object"||h===null)return h;if(h instanceof Date)return new Date(h);if(Array.isArray(h))return o(h,l);if(h instanceof Map)return new Map(o(Array.from(h),l));if(h instanceof Set)return new Set(o(Array.from(h),l));var c={};for(var u in h){var f=h[u];typeof f!="object"||f===null?c[u]=f:f instanceof Date?c[u]=new Date(f):f instanceof Map?c[u]=new Map(o(Array.from(f),l)):f instanceof Set?c[u]=new Set(o(Array.from(f),l)):ArrayBuffer.isView(f)?c[u]=i(f):c[u]=l(f)}return c}}function r(s){var o=[],a=[];return s.proto?c:h;function l(u,f){for(var d=Object.keys(u),g=new Array(d.length),y=0;y<d.length;y++){var _=d[y],w=u[_];if(typeof w!="object"||w===null)g[_]=w;else if(w instanceof Date)g[_]=new Date(w);else if(ArrayBuffer.isView(w))g[_]=i(w);else{var v=o.indexOf(w);v!==-1?g[_]=a[v]:g[_]=f(w)}}return g}function h(u){if(typeof u!="object"||u===null)return u;if(u instanceof Date)return new Date(u);if(Array.isArray(u))return l(u,h);if(u instanceof Map)return new Map(l(Array.from(u),h));if(u instanceof Set)return new Set(l(Array.from(u),h));var f={};o.push(u),a.push(f);for(var d in u)if(Object.hasOwnProperty.call(u,d)!==!1){var g=u[d];if(typeof g!="object"||g===null)f[d]=g;else if(g instanceof Date)f[d]=new Date(g);else if(g instanceof Map)f[d]=new Map(l(Array.from(g),h));else if(g instanceof Set)f[d]=new Set(l(Array.from(g),h));else if(ArrayBuffer.isView(g))f[d]=i(g);else{var y=o.indexOf(g);y!==-1?f[d]=a[y]:f[d]=h(g)}}return o.pop(),a.pop(),f}function c(u){if(typeof u!="object"||u===null)return u;if(u instanceof Date)return new Date(u);if(Array.isArray(u))return l(u,c);if(u instanceof Map)return new Map(l(Array.from(u),c));if(u instanceof Set)return new Set(l(Array.from(u),c));var f={};o.push(u),a.push(f);for(var d in u){var g=u[d];if(typeof g!="object"||g===null)f[d]=g;else if(g instanceof Date)f[d]=new Date(g);else if(g instanceof Map)f[d]=new Map(l(Array.from(g),c));else if(g instanceof Set)f[d]=new Set(l(Array.from(g),c));else if(ArrayBuffer.isView(g))f[d]=i(g);else{var y=o.indexOf(g);y!==-1?f[d]=a[y]:f[d]=c(g)}}return o.pop(),a.pop(),f}}}),hb=vt((e,t)=>{dt(),gt(),pt(),t.exports=lb()()}),cb=vt(e=>{dt(),gt(),pt(),Object.defineProperty(e,"__esModule",{value:!0}),e.validateTopics=e.validateTopic=void 0;function t(n){let r=n.split("/");for(let s=0;s<r.length;s++)if(r[s]!=="+"){if(r[s]==="#")return s===r.length-1;if(r[s].indexOf("+")!==-1||r[s].indexOf("#")!==-1)return!1}return!0}e.validateTopic=t;function i(n){if(n.length===0)return"empty_topic_list";for(let r=0;r<n.length;r++)if(!t(n[r]))return n[r];return null}e.validateTopics=i}),pp=vt(e=>{dt(),gt(),pt(),Object.defineProperty(e,"__esModule",{value:!0});var t=pr(),i={objectMode:!0},n={clean:!0},r=class{constructor(s){this.options=s||{},this.options=Object.assign(Object.assign({},n),s),this._inflights=new Map}put(s,o){return this._inflights.set(s.messageId,s),o&&o(),this}createStream(){let s=new t.Readable(i),o=[],a=!1,l=0;return this._inflights.forEach((h,c)=>{o.push(h)}),s._read=()=>{!a&&l<o.length?s.push(o[l++]):s.push(null)},s.destroy=h=>{if(!a)return a=!0,setTimeout(()=>{s.emit("close")},0),s},s}del(s,o){let a=this._inflights.get(s.messageId);return a?(this._inflights.delete(s.messageId),o(null,a)):o&&o(new Error("missing packet")),this}get(s,o){let a=this._inflights.get(s.messageId);return a?o(null,a):o&&o(new Error("missing packet")),this}close(s){this.options.clean&&(this._inflights=null),s&&s()}};e.default=r}),ub=vt(e=>{dt(),gt(),pt(),Object.defineProperty(e,"__esModule",{value:!0});var t=[0,16,128,131,135,144,145,151,153],i=(n,r,s)=>{n.log("handlePublish: packet %o",r),s=typeof s<"u"?s:n.noop;let o=r.topic.toString(),a=r.payload,{qos:l}=r,{messageId:h}=r,{options:c}=n;if(n.options.protocolVersion===5){let u;if(r.properties&&(u=r.properties.topicAlias),typeof u<"u")if(o.length===0)if(u>0&&u<=65535){let f=n.topicAliasRecv.getTopicByAlias(u);if(f)o=f,n.log("handlePublish :: topic complemented by alias. topic: %s - alias: %d",o,u);else{n.log("handlePublish :: unregistered topic alias. alias: %d",u),n.emit("error",new Error("Received unregistered Topic Alias"));return}}else{n.log("handlePublish :: topic alias out of range. alias: %d",u),n.emit("error",new Error("Received Topic Alias is out of range"));return}else if(n.topicAliasRecv.put(o,u))n.log("handlePublish :: registered topic: %s - alias: %d",o,u);else{n.log("handlePublish :: topic alias out of range. alias: %d",u),n.emit("error",new Error("Received Topic Alias is out of range"));return}}switch(n.log("handlePublish: qos %d",l),l){case 2:{c.customHandleAcks(o,a,r,(u,f)=>{if(typeof u=="number"&&(f=u,u=null),u)return n.emit("error",u);if(t.indexOf(f)===-1)return n.emit("error",new Error("Wrong reason code for pubrec"));f?n._sendPacket({cmd:"pubrec",messageId:h,reasonCode:f},s):n.incomingStore.put(r,()=>{n._sendPacket({cmd:"pubrec",messageId:h},s)})});break}case 1:{c.customHandleAcks(o,a,r,(u,f)=>{if(typeof u=="number"&&(f=u,u=null),u)return n.emit("error",u);if(t.indexOf(f)===-1)return n.emit("error",new Error("Wrong reason code for puback"));f||n.emit("message",o,a,r),n.handleMessage(r,d=>{if(d)return s&&s(d);n._sendPacket({cmd:"puback",messageId:h,reasonCode:f},s)})});break}case 0:n.emit("message",o,a,r),n.handleMessage(r,s);break;default:n.log("handlePublish: unknown QoS. Doing nothing.");break}};e.default=i}),fb=vt((e,t)=>{t.exports={version:"5.10.3"}}),Br=vt(e=>{dt(),gt(),pt(),Object.defineProperty(e,"__esModule",{value:!0}),e.MQTTJS_VERSION=e.nextTick=e.applyMixin=e.ErrorWithReasonCode=void 0;var t=class gp extends Error{constructor(r,s){super(r),this.code=s,Object.setPrototypeOf(this,gp.prototype),Object.getPrototypeOf(this).name="ErrorWithReasonCode"}};e.ErrorWithReasonCode=t;function i(n,r,s=!1){var o;let a=[r];for(;;){let l=a[0],h=Object.getPrototypeOf(l);if(h!=null&&h.prototype)a.unshift(h);else break}for(let l of a)for(let h of Object.getOwnPropertyNames(l.prototype))(s||h!=="constructor")&&Object.defineProperty(n.prototype,h,(o=Object.getOwnPropertyDescriptor(l.prototype,h))!==null&&o!==void 0?o:Object.create(null))}e.applyMixin=i,e.nextTick=typeof(Zt==null?void 0:Zt.nextTick)=="function"?Zt.nextTick:n=>{setTimeout(n,0)},e.MQTTJS_VERSION=fb().version}),oa=vt(e=>{dt(),gt(),pt(),Object.defineProperty(e,"__esModule",{value:!0}),e.ReasonCodes=void 0;var t=Br();e.ReasonCodes={0:"",1:"Unacceptable protocol version",2:"Identifier rejected",3:"Server unavailable",4:"Bad username or password",5:"Not authorized",16:"No matching subscribers",17:"No subscription existed",128:"Unspecified error",129:"Malformed Packet",130:"Protocol Error",131:"Implementation specific error",132:"Unsupported Protocol Version",133:"Client Identifier not valid",134:"Bad User Name or Password",135:"Not authorized",136:"Server unavailable",137:"Server busy",138:"Banned",139:"Server shutting down",140:"Bad authentication method",141:"Keep Alive timeout",142:"Session taken over",143:"Topic Filter invalid",144:"Topic Name invalid",145:"Packet identifier in use",146:"Packet Identifier not found",147:"Receive Maximum exceeded",148:"Topic Alias invalid",149:"Packet too large",150:"Message rate too high",151:"Quota exceeded",152:"Administrative action",153:"Payload format invalid",154:"Retain not supported",155:"QoS not supported",156:"Use another server",157:"Server moved",158:"Shared Subscriptions not supported",159:"Connection rate exceeded",160:"Maximum connect time",161:"Subscription Identifiers not supported",162:"Wildcard Subscriptions not supported"};var i=(n,r)=>{let{messageId:s}=r,o=r.cmd,a=null,l=n.outgoing[s]?n.outgoing[s].cb:null,h=null;if(!l){n.log("_handleAck :: Server sent an ack in error. Ignoring.");return}switch(n.log("_handleAck :: packet type",o),o){case"pubcomp":case"puback":{let c=r.reasonCode;c&&c>0&&c!==16?(h=new t.ErrorWithReasonCode(`Publish error: ${e.ReasonCodes[c]}`,c),n._removeOutgoingAndStoreMessage(s,()=>{l(h,r)})):n._removeOutgoingAndStoreMessage(s,l);break}case"pubrec":{a={cmd:"pubrel",qos:2,messageId:s};let c=r.reasonCode;c&&c>0&&c!==16?(h=new t.ErrorWithReasonCode(`Publish error: ${e.ReasonCodes[c]}`,c),n._removeOutgoingAndStoreMessage(s,()=>{l(h,r)})):n._sendPacket(a);break}case"suback":{delete n.outgoing[s],n.messageIdProvider.deallocate(s);let c=r.granted;for(let u=0;u<c.length;u++){let f=c[u];if(f&128){h=new Error(`Subscribe error: ${e.ReasonCodes[f]}`),h.code=f;let d=n.messageIdToTopic[s];d&&d.forEach(g=>{delete n._resubscribeTopics[g]})}}delete n.messageIdToTopic[s],n._invokeStoreProcessingQueue(),l(h,r);break}case"unsuback":{delete n.outgoing[s],n.messageIdProvider.deallocate(s),n._invokeStoreProcessingQueue(),l(null,r);break}default:n.emit("error",new Error("unrecognized packet type"))}n.disconnecting&&Object.keys(n.outgoing).length===0&&n.emit("outgoingEmpty")};e.default=i}),db=vt(e=>{dt(),gt(),pt(),Object.defineProperty(e,"__esModule",{value:!0});var t=Br(),i=oa(),n=(r,s)=>{let{options:o}=r,a=o.protocolVersion,l=a===5?s.reasonCode:s.returnCode;if(a!==5){let h=new t.ErrorWithReasonCode(`Protocol error: Auth packets are only supported in MQTT 5. Your version:${a}`,l);r.emit("error",h);return}r.handleAuth(s,(h,c)=>{if(h){r.emit("error",h);return}if(l===24)r.reconnecting=!1,r._sendPacket(c);else{let u=new t.ErrorWithReasonCode(`Connection refused: ${i.ReasonCodes[l]}`,l);r.emit("error",u)}})};e.default=n}),pb=vt(e=>{var d,g,y,_,w,v,S,T,O,k,M,A,B,q,$,x,z,X,V,rt,J,H,ht,nt,xt,I,mh,st,Et,lt,N,C,mp,ct,it,et,ft,yn,L,_n,W,bh,Z,go,Q,mo,Mt,me,zt,yh,p,Jr,P;dt(),gt(),pt(),Object.defineProperty(e,"__esModule",{value:!0}),e.LRUCache=void 0;var t=typeof performance=="object"&&performance&&typeof performance.now=="function"?performance:Date,i=new Set,n=typeof Zt=="object"&&Zt?Zt:{},r=(R,E,D,U)=>{typeof n.emitWarning=="function"?n.emitWarning(R,E,D,U):console.error(`[${D}] ${E}: ${R}`)},s=globalThis.AbortController,o=globalThis.AbortSignal;if(typeof s>"u"){o=class{constructor(){yt(this,"onabort");yt(this,"_onabort",[]);yt(this,"reason");yt(this,"aborted",!1)}addEventListener(D,U){this._onabort.push(U)}},s=class{constructor(){yt(this,"signal",new o);E()}abort(D){var U,tt;if(!this.signal.aborted){this.signal.reason=D,this.signal.aborted=!0;for(let at of this.signal._onabort)at(D);(tt=(U=this.signal).onabort)==null||tt.call(U,D)}}};let R=((d=n.env)==null?void 0:d.LRU_CACHE_IGNORE_AC_WARNING)!=="1",E=()=>{R&&(R=!1,r("AbortController is not defined. If using lru-cache in node 14, load an AbortController polyfill from the `node-abort-controller` package. A minimal polyfill is provided for use by LRUCache.fetch(), but it should not be relied upon in other contexts (eg, passing it to other APIs that use AbortController/AbortSignal might have undesirable effects). You may disable this with LRU_CACHE_IGNORE_AC_WARNING=1 in the env.","NO_ABORT_CONTROLLER","ENOTSUP",E))}}var a=R=>!i.has(R),l=R=>R&&R===Math.floor(R)&&R>0&&isFinite(R),h=R=>l(R)?R<=Math.pow(2,8)?Uint8Array:R<=Math.pow(2,16)?Uint16Array:R<=Math.pow(2,32)?Uint32Array:R<=Number.MAX_SAFE_INTEGER?c:null:null,c=class extends Array{constructor(R){super(R),this.fill(0)}},u=(g=class{constructor(E,D){yt(this,"heap");yt(this,"length");if(!F(g,y))throw new TypeError("instantiate Stack using Stack.create(n)");this.heap=new D(E),this.length=0}static create(E){let D=h(E);if(!D)return[];Ft(g,y,!0);let U=new g(E,D);return Ft(g,y,!1),U}push(E){this.heap[this.length++]=E}pop(){return this.heap[--this.length]}},y=new WeakMap,Wt(g,y,!1),g),f=(P=class{constructor(E){Wt(this,I);Wt(this,C);Wt(this,ft);Wt(this,L);Wt(this,W);Wt(this,Z);Wt(this,Q);Wt(this,Mt);Wt(this,zt);Wt(this,p);Wt(this,_,void 0);Wt(this,w,void 0);Wt(this,v,void 0);Wt(this,S,void 0);Wt(this,T,void 0);yt(this,"ttl");yt(this,"ttlResolution");yt(this,"ttlAutopurge");yt(this,"updateAgeOnGet");yt(this,"updateAgeOnHas");yt(this,"allowStale");yt(this,"noDisposeOnSet");yt(this,"noUpdateTTL");yt(this,"maxEntrySize");yt(this,"sizeCalculation");yt(this,"noDeleteOnFetchRejection");yt(this,"noDeleteOnStaleGet");yt(this,"allowStaleOnFetchAbort");yt(this,"allowStaleOnFetchRejection");yt(this,"ignoreFetchAbort");Wt(this,O,void 0);Wt(this,k,void 0);Wt(this,M,void 0);Wt(this,A,void 0);Wt(this,B,void 0);Wt(this,q,void 0);Wt(this,$,void 0);Wt(this,x,void 0);Wt(this,z,void 0);Wt(this,X,void 0);Wt(this,V,void 0);Wt(this,rt,void 0);Wt(this,J,void 0);Wt(this,H,void 0);Wt(this,ht,void 0);Wt(this,nt,void 0);Wt(this,xt,void 0);Wt(this,st,()=>{});Wt(this,Et,()=>{});Wt(this,lt,()=>{});Wt(this,N,()=>!1);Wt(this,ct,E=>{});Wt(this,it,(E,D,U)=>{});Wt(this,et,(E,D,U,tt)=>{if(U||tt)throw new TypeError("cannot set size without setting maxSize or maxEntrySize on cache");return 0});let{max:D=0,ttl:U,ttlResolution:tt=1,ttlAutopurge:at,updateAgeOnGet:wt,updateAgeOnHas:Tt,allowStale:Bt,dispose:ge,disposeAfter:Ne,noDisposeOnSet:Kt,noUpdateTTL:Te,maxSize:oe=0,maxEntrySize:he=0,sizeCalculation:te,fetchMethod:Oe,noDeleteOnFetchRejection:Ut,noDeleteOnStaleGet:xe,allowStaleOnFetchRejection:Ke,allowStaleOnFetchAbort:Fe,ignoreFetchAbort:ui}=E;if(D!==0&&!l(D))throw new TypeError("max option must be a nonnegative integer");let Dn=D?h(D):Array;if(!Dn)throw new Error("invalid max value: "+D);if(Ft(this,_,D),Ft(this,w,oe),this.maxEntrySize=he||F(this,w),this.sizeCalculation=te,this.sizeCalculation){if(!F(this,w)&&!this.maxEntrySize)throw new TypeError("cannot set sizeCalculation without setting maxSize or maxEntrySize");if(typeof this.sizeCalculation!="function")throw new TypeError("sizeCalculation set to non-function")}if(Oe!==void 0&&typeof Oe!="function")throw new TypeError("fetchMethod must be a function if specified");if(Ft(this,T,Oe),Ft(this,nt,!!Oe),Ft(this,M,new Map),Ft(this,A,new Array(D).fill(void 0)),Ft(this,B,new Array(D).fill(void 0)),Ft(this,q,new Dn(D)),Ft(this,$,new Dn(D)),Ft(this,x,0),Ft(this,z,0),Ft(this,X,u.create(D)),Ft(this,O,0),Ft(this,k,0),typeof ge=="function"&&Ft(this,v,ge),typeof Ne=="function"?(Ft(this,S,Ne),Ft(this,V,[])):(Ft(this,S,void 0),Ft(this,V,void 0)),Ft(this,ht,!!F(this,v)),Ft(this,xt,!!F(this,S)),this.noDisposeOnSet=!!Kt,this.noUpdateTTL=!!Te,this.noDeleteOnFetchRejection=!!Ut,this.allowStaleOnFetchRejection=!!Ke,this.allowStaleOnFetchAbort=!!Fe,this.ignoreFetchAbort=!!ui,this.maxEntrySize!==0){if(F(this,w)!==0&&!l(F(this,w)))throw new TypeError("maxSize must be a positive integer if specified");if(!l(this.maxEntrySize))throw new TypeError("maxEntrySize must be a positive integer if specified");Rt(this,C,mp).call(this)}if(this.allowStale=!!Bt,this.noDeleteOnStaleGet=!!xe,this.updateAgeOnGet=!!wt,this.updateAgeOnHas=!!Tt,this.ttlResolution=l(tt)||tt===0?tt:1,this.ttlAutopurge=!!at,this.ttl=U||0,this.ttl){if(!l(this.ttl))throw new TypeError("ttl must be a positive integer if specified");Rt(this,I,mh).call(this)}if(F(this,_)===0&&this.ttl===0&&F(this,w)===0)throw new TypeError("At least one of max, maxSize, or ttl is required");if(!this.ttlAutopurge&&!F(this,_)&&!F(this,w)){let mn="LRU_CACHE_UNBOUNDED";a(mn)&&(i.add(mn),r("TTL caching without ttlAutopurge, max, or maxSize can result in unbounded memory consumption.","UnboundedCacheWarning",mn,P))}}static unsafeExposeInternals(E){return{starts:F(E,J),ttls:F(E,H),sizes:F(E,rt),keyMap:F(E,M),keyList:F(E,A),valList:F(E,B),next:F(E,q),prev:F(E,$),get head(){return F(E,x)},get tail(){return F(E,z)},free:F(E,X),isBackgroundFetch:D=>{var U;return Rt(U=E,Mt,me).call(U,D)},backgroundFetch:(D,U,tt,at)=>{var wt;return Rt(wt=E,Q,mo).call(wt,D,U,tt,at)},moveToTail:D=>{var U;return Rt(U=E,p,Jr).call(U,D)},indexes:D=>{var U;return Rt(U=E,ft,yn).call(U,D)},rindexes:D=>{var U;return Rt(U=E,L,_n).call(U,D)},isStale:D=>{var U;return F(U=E,N).call(U,D)}}}get max(){return F(this,_)}get maxSize(){return F(this,w)}get calculatedSize(){return F(this,k)}get size(){return F(this,O)}get fetchMethod(){return F(this,T)}get dispose(){return F(this,v)}get disposeAfter(){return F(this,S)}getRemainingTTL(E){return F(this,M).has(E)?1/0:0}*entries(){for(let E of Rt(this,ft,yn).call(this))F(this,B)[E]!==void 0&&F(this,A)[E]!==void 0&&!Rt(this,Mt,me).call(this,F(this,B)[E])&&(yield[F(this,A)[E],F(this,B)[E]])}*rentries(){for(let E of Rt(this,L,_n).call(this))F(this,B)[E]!==void 0&&F(this,A)[E]!==void 0&&!Rt(this,Mt,me).call(this,F(this,B)[E])&&(yield[F(this,A)[E],F(this,B)[E]])}*keys(){for(let E of Rt(this,ft,yn).call(this)){let D=F(this,A)[E];D!==void 0&&!Rt(this,Mt,me).call(this,F(this,B)[E])&&(yield D)}}*rkeys(){for(let E of Rt(this,L,_n).call(this)){let D=F(this,A)[E];D!==void 0&&!Rt(this,Mt,me).call(this,F(this,B)[E])&&(yield D)}}*values(){for(let E of Rt(this,ft,yn).call(this))F(this,B)[E]!==void 0&&!Rt(this,Mt,me).call(this,F(this,B)[E])&&(yield F(this,B)[E])}*rvalues(){for(let E of Rt(this,L,_n).call(this))F(this,B)[E]!==void 0&&!Rt(this,Mt,me).call(this,F(this,B)[E])&&(yield F(this,B)[E])}[Symbol.iterator](){return this.entries()}find(E,D={}){for(let U of Rt(this,ft,yn).call(this)){let tt=F(this,B)[U],at=Rt(this,Mt,me).call(this,tt)?tt.__staleWhileFetching:tt;if(at!==void 0&&E(at,F(this,A)[U],this))return this.get(F(this,A)[U],D)}}forEach(E,D=this){for(let U of Rt(this,ft,yn).call(this)){let tt=F(this,B)[U],at=Rt(this,Mt,me).call(this,tt)?tt.__staleWhileFetching:tt;at!==void 0&&E.call(D,at,F(this,A)[U],this)}}rforEach(E,D=this){for(let U of Rt(this,L,_n).call(this)){let tt=F(this,B)[U],at=Rt(this,Mt,me).call(this,tt)?tt.__staleWhileFetching:tt;at!==void 0&&E.call(D,at,F(this,A)[U],this)}}purgeStale(){let E=!1;for(let D of Rt(this,L,_n).call(this,{allowStale:!0}))F(this,N).call(this,D)&&(this.delete(F(this,A)[D]),E=!0);return E}dump(){let E=[];for(let D of Rt(this,ft,yn).call(this,{allowStale:!0})){let U=F(this,A)[D],tt=F(this,B)[D],at=Rt(this,Mt,me).call(this,tt)?tt.__staleWhileFetching:tt;if(at===void 0||U===void 0)continue;let wt={value:at};if(F(this,H)&&F(this,J)){wt.ttl=F(this,H)[D];let Tt=t.now()-F(this,J)[D];wt.start=Math.floor(Date.now()-Tt)}F(this,rt)&&(wt.size=F(this,rt)[D]),E.unshift([U,wt])}return E}load(E){this.clear();for(let[D,U]of E){if(U.start){let tt=Date.now()-U.start;U.start=t.now()-tt}this.set(D,U.value,U)}}set(E,D,U={}){var Te,oe,he,te,Oe;if(D===void 0)return this.delete(E),this;let{ttl:tt=this.ttl,start:at,noDisposeOnSet:wt=this.noDisposeOnSet,sizeCalculation:Tt=this.sizeCalculation,status:Bt}=U,{noUpdateTTL:ge=this.noUpdateTTL}=U,Ne=F(this,et).call(this,E,D,U.size||0,Tt);if(this.maxEntrySize&&Ne>this.maxEntrySize)return Bt&&(Bt.set="miss",Bt.maxEntrySizeExceeded=!0),this.delete(E),this;let Kt=F(this,O)===0?void 0:F(this,M).get(E);if(Kt===void 0)Kt=F(this,O)===0?F(this,z):F(this,X).length!==0?F(this,X).pop():F(this,O)===F(this,_)?Rt(this,Z,go).call(this,!1):F(this,O),F(this,A)[Kt]=E,F(this,B)[Kt]=D,F(this,M).set(E,Kt),F(this,q)[F(this,z)]=Kt,F(this,$)[Kt]=F(this,z),Ft(this,z,Kt),Ns(this,O)._++,F(this,it).call(this,Kt,Ne,Bt),Bt&&(Bt.set="add"),ge=!1;else{Rt(this,p,Jr).call(this,Kt);let Ut=F(this,B)[Kt];if(D!==Ut){if(F(this,nt)&&Rt(this,Mt,me).call(this,Ut)){Ut.__abortController.abort(new Error("replaced"));let{__staleWhileFetching:xe}=Ut;xe!==void 0&&!wt&&(F(this,ht)&&((Te=F(this,v))==null||Te.call(this,xe,E,"set")),F(this,xt)&&((oe=F(this,V))==null||oe.push([xe,E,"set"])))}else wt||(F(this,ht)&&((he=F(this,v))==null||he.call(this,Ut,E,"set")),F(this,xt)&&((te=F(this,V))==null||te.push([Ut,E,"set"])));if(F(this,ct).call(this,Kt),F(this,it).call(this,Kt,Ne,Bt),F(this,B)[Kt]=D,Bt){Bt.set="replace";let xe=Ut&&Rt(this,Mt,me).call(this,Ut)?Ut.__staleWhileFetching:Ut;xe!==void 0&&(Bt.oldValue=xe)}}else Bt&&(Bt.set="update")}if(tt!==0&&!F(this,H)&&Rt(this,I,mh).call(this),F(this,H)&&(ge||F(this,lt).call(this,Kt,tt,at),Bt&&F(this,Et).call(this,Bt,Kt)),!wt&&F(this,xt)&&F(this,V)){let Ut=F(this,V),xe;for(;xe=Ut==null?void 0:Ut.shift();)(Oe=F(this,S))==null||Oe.call(this,...xe)}return this}pop(){var E;try{for(;F(this,O);){let D=F(this,B)[F(this,x)];if(Rt(this,Z,go).call(this,!0),Rt(this,Mt,me).call(this,D)){if(D.__staleWhileFetching)return D.__staleWhileFetching}else if(D!==void 0)return D}}finally{if(F(this,xt)&&F(this,V)){let D=F(this,V),U;for(;U=D==null?void 0:D.shift();)(E=F(this,S))==null||E.call(this,...U)}}}has(E,D={}){let{updateAgeOnHas:U=this.updateAgeOnHas,status:tt}=D,at=F(this,M).get(E);if(at!==void 0){let wt=F(this,B)[at];if(Rt(this,Mt,me).call(this,wt)&&wt.__staleWhileFetching===void 0)return!1;if(F(this,N).call(this,at))tt&&(tt.has="stale",F(this,Et).call(this,tt,at));else return U&&F(this,st).call(this,at),tt&&(tt.has="hit",F(this,Et).call(this,tt,at)),!0}else tt&&(tt.has="miss");return!1}peek(E,D={}){let{allowStale:U=this.allowStale}=D,tt=F(this,M).get(E);if(tt!==void 0&&(U||!F(this,N).call(this,tt))){let at=F(this,B)[tt];return Rt(this,Mt,me).call(this,at)?at.__staleWhileFetching:at}}async fetch(E,D={}){let{allowStale:U=this.allowStale,updateAgeOnGet:tt=this.updateAgeOnGet,noDeleteOnStaleGet:at=this.noDeleteOnStaleGet,ttl:wt=this.ttl,noDisposeOnSet:Tt=this.noDisposeOnSet,size:Bt=0,sizeCalculation:ge=this.sizeCalculation,noUpdateTTL:Ne=this.noUpdateTTL,noDeleteOnFetchRejection:Kt=this.noDeleteOnFetchRejection,allowStaleOnFetchRejection:Te=this.allowStaleOnFetchRejection,ignoreFetchAbort:oe=this.ignoreFetchAbort,allowStaleOnFetchAbort:he=this.allowStaleOnFetchAbort,context:te,forceRefresh:Oe=!1,status:Ut,signal:xe}=D;if(!F(this,nt))return Ut&&(Ut.fetch="get"),this.get(E,{allowStale:U,updateAgeOnGet:tt,noDeleteOnStaleGet:at,status:Ut});let Ke={allowStale:U,updateAgeOnGet:tt,noDeleteOnStaleGet:at,ttl:wt,noDisposeOnSet:Tt,size:Bt,sizeCalculation:ge,noUpdateTTL:Ne,noDeleteOnFetchRejection:Kt,allowStaleOnFetchRejection:Te,allowStaleOnFetchAbort:he,ignoreFetchAbort:oe,status:Ut,signal:xe},Fe=F(this,M).get(E);if(Fe===void 0){Ut&&(Ut.fetch="miss");let ui=Rt(this,Q,mo).call(this,E,Fe,Ke,te);return ui.__returned=ui}else{let ui=F(this,B)[Fe];if(Rt(this,Mt,me).call(this,ui)){let Qc=U&&ui.__staleWhileFetching!==void 0;return Ut&&(Ut.fetch="inflight",Qc&&(Ut.returnedStale=!0)),Qc?ui.__staleWhileFetching:ui.__returned=ui}let Dn=F(this,N).call(this,Fe);if(!Oe&&!Dn)return Ut&&(Ut.fetch="hit"),Rt(this,p,Jr).call(this,Fe),tt&&F(this,st).call(this,Fe),Ut&&F(this,Et).call(this,Ut,Fe),ui;let mn=Rt(this,Q,mo).call(this,E,Fe,Ke,te),Kc=mn.__staleWhileFetching!==void 0&&U;return Ut&&(Ut.fetch=Dn?"stale":"refresh",Kc&&Dn&&(Ut.returnedStale=!0)),Kc?mn.__staleWhileFetching:mn.__returned=mn}}get(E,D={}){let{allowStale:U=this.allowStale,updateAgeOnGet:tt=this.updateAgeOnGet,noDeleteOnStaleGet:at=this.noDeleteOnStaleGet,status:wt}=D,Tt=F(this,M).get(E);if(Tt!==void 0){let Bt=F(this,B)[Tt],ge=Rt(this,Mt,me).call(this,Bt);return wt&&F(this,Et).call(this,wt,Tt),F(this,N).call(this,Tt)?(wt&&(wt.get="stale"),ge?(wt&&U&&Bt.__staleWhileFetching!==void 0&&(wt.returnedStale=!0),U?Bt.__staleWhileFetching:void 0):(at||this.delete(E),wt&&U&&(wt.returnedStale=!0),U?Bt:void 0)):(wt&&(wt.get="hit"),ge?Bt.__staleWhileFetching:(Rt(this,p,Jr).call(this,Tt),tt&&F(this,st).call(this,Tt),Bt))}else wt&&(wt.get="miss")}delete(E){var U,tt,at,wt;let D=!1;if(F(this,O)!==0){let Tt=F(this,M).get(E);if(Tt!==void 0)if(D=!0,F(this,O)===1)this.clear();else{F(this,ct).call(this,Tt);let Bt=F(this,B)[Tt];Rt(this,Mt,me).call(this,Bt)?Bt.__abortController.abort(new Error("deleted")):(F(this,ht)||F(this,xt))&&(F(this,ht)&&((U=F(this,v))==null||U.call(this,Bt,E,"delete")),F(this,xt)&&((tt=F(this,V))==null||tt.push([Bt,E,"delete"]))),F(this,M).delete(E),F(this,A)[Tt]=void 0,F(this,B)[Tt]=void 0,Tt===F(this,z)?Ft(this,z,F(this,$)[Tt]):Tt===F(this,x)?Ft(this,x,F(this,q)[Tt]):(F(this,q)[F(this,$)[Tt]]=F(this,q)[Tt],F(this,$)[F(this,q)[Tt]]=F(this,$)[Tt]),Ns(this,O)._--,F(this,X).push(Tt)}}if(F(this,xt)&&((at=F(this,V))!=null&&at.length)){let Tt=F(this,V),Bt;for(;Bt=Tt==null?void 0:Tt.shift();)(wt=F(this,S))==null||wt.call(this,...Bt)}return D}clear(){var E,D,U;for(let tt of Rt(this,L,_n).call(this,{allowStale:!0})){let at=F(this,B)[tt];if(Rt(this,Mt,me).call(this,at))at.__abortController.abort(new Error("deleted"));else{let wt=F(this,A)[tt];F(this,ht)&&((E=F(this,v))==null||E.call(this,at,wt,"delete")),F(this,xt)&&((D=F(this,V))==null||D.push([at,wt,"delete"]))}}if(F(this,M).clear(),F(this,B).fill(void 0),F(this,A).fill(void 0),F(this,H)&&F(this,J)&&(F(this,H).fill(0),F(this,J).fill(0)),F(this,rt)&&F(this,rt).fill(0),Ft(this,x,0),Ft(this,z,0),F(this,X).length=0,Ft(this,k,0),Ft(this,O,0),F(this,xt)&&F(this,V)){let tt=F(this,V),at;for(;at=tt==null?void 0:tt.shift();)(U=F(this,S))==null||U.call(this,...at)}}},_=new WeakMap,w=new WeakMap,v=new WeakMap,S=new WeakMap,T=new WeakMap,O=new WeakMap,k=new WeakMap,M=new WeakMap,A=new WeakMap,B=new WeakMap,q=new WeakMap,$=new WeakMap,x=new WeakMap,z=new WeakMap,X=new WeakMap,V=new WeakMap,rt=new WeakMap,J=new WeakMap,H=new WeakMap,ht=new WeakMap,nt=new WeakMap,xt=new WeakMap,I=new WeakSet,mh=function(){let E=new c(F(this,_)),D=new c(F(this,_));Ft(this,H,E),Ft(this,J,D),Ft(this,lt,(at,wt,Tt=t.now())=>{if(D[at]=wt!==0?Tt:0,E[at]=wt,wt!==0&&this.ttlAutopurge){let Bt=setTimeout(()=>{F(this,N).call(this,at)&&this.delete(F(this,A)[at])},wt+1);Bt.unref&&Bt.unref()}}),Ft(this,st,at=>{D[at]=E[at]!==0?t.now():0}),Ft(this,Et,(at,wt)=>{if(E[wt]){let Tt=E[wt],Bt=D[wt];at.ttl=Tt,at.start=Bt,at.now=U||tt();let ge=at.now-Bt;at.remainingTTL=Tt-ge}});let U=0,tt=()=>{let at=t.now();if(this.ttlResolution>0){U=at;let wt=setTimeout(()=>U=0,this.ttlResolution);wt.unref&&wt.unref()}return at};this.getRemainingTTL=at=>{let wt=F(this,M).get(at);if(wt===void 0)return 0;let Tt=E[wt],Bt=D[wt];if(Tt===0||Bt===0)return 1/0;let ge=(U||tt())-Bt;return Tt-ge},Ft(this,N,at=>E[at]!==0&&D[at]!==0&&(U||tt())-D[at]>E[at])},st=new WeakMap,Et=new WeakMap,lt=new WeakMap,N=new WeakMap,C=new WeakSet,mp=function(){let E=new c(F(this,_));Ft(this,k,0),Ft(this,rt,E),Ft(this,ct,D=>{Ft(this,k,F(this,k)-E[D]),E[D]=0}),Ft(this,et,(D,U,tt,at)=>{if(Rt(this,Mt,me).call(this,U))return 0;if(!l(tt))if(at){if(typeof at!="function")throw new TypeError("sizeCalculation must be a function");if(tt=at(U,D),!l(tt))throw new TypeError("sizeCalculation return invalid (expect positive integer)")}else throw new TypeError("invalid size value (must be positive integer). When maxSize or maxEntrySize is used, sizeCalculation or size must be set.");return tt}),Ft(this,it,(D,U,tt)=>{if(E[D]=U,F(this,w)){let at=F(this,w)-E[D];for(;F(this,k)>at;)Rt(this,Z,go).call(this,!0)}Ft(this,k,F(this,k)+E[D]),tt&&(tt.entrySize=U,tt.totalCalculatedSize=F(this,k))})},ct=new WeakMap,it=new WeakMap,et=new WeakMap,ft=new WeakSet,yn=function*({allowStale:E=this.allowStale}={}){if(F(this,O))for(let D=F(this,z);!(!Rt(this,W,bh).call(this,D)||((E||!F(this,N).call(this,D))&&(yield D),D===F(this,x)));)D=F(this,$)[D]},L=new WeakSet,_n=function*({allowStale:E=this.allowStale}={}){if(F(this,O))for(let D=F(this,x);!(!Rt(this,W,bh).call(this,D)||((E||!F(this,N).call(this,D))&&(yield D),D===F(this,z)));)D=F(this,q)[D]},W=new WeakSet,bh=function(E){return E!==void 0&&F(this,M).get(F(this,A)[E])===E},Z=new WeakSet,go=function(E){var at,wt;let D=F(this,x),U=F(this,A)[D],tt=F(this,B)[D];return F(this,nt)&&Rt(this,Mt,me).call(this,tt)?tt.__abortController.abort(new Error("evicted")):(F(this,ht)||F(this,xt))&&(F(this,ht)&&((at=F(this,v))==null||at.call(this,tt,U,"evict")),F(this,xt)&&((wt=F(this,V))==null||wt.push([tt,U,"evict"]))),F(this,ct).call(this,D),E&&(F(this,A)[D]=void 0,F(this,B)[D]=void 0,F(this,X).push(D)),F(this,O)===1?(Ft(this,x,Ft(this,z,0)),F(this,X).length=0):Ft(this,x,F(this,q)[D]),F(this,M).delete(U),Ns(this,O)._--,D},Q=new WeakSet,mo=function(E,D,U,tt){let at=D===void 0?void 0:F(this,B)[D];if(Rt(this,Mt,me).call(this,at))return at;let wt=new s,{signal:Tt}=U;Tt==null||Tt.addEventListener("abort",()=>wt.abort(Tt.reason),{signal:wt.signal});let Bt={signal:wt.signal,options:U,context:tt},ge=(te,Oe=!1)=>{let{aborted:Ut}=wt.signal,xe=U.ignoreFetchAbort&&te!==void 0;if(U.status&&(Ut&&!Oe?(U.status.fetchAborted=!0,U.status.fetchError=wt.signal.reason,xe&&(U.status.fetchAbortIgnored=!0)):U.status.fetchResolved=!0),Ut&&!xe&&!Oe)return Kt(wt.signal.reason);let Ke=oe;return F(this,B)[D]===oe&&(te===void 0?Ke.__staleWhileFetching?F(this,B)[D]=Ke.__staleWhileFetching:this.delete(E):(U.status&&(U.status.fetchUpdated=!0),this.set(E,te,Bt.options))),te},Ne=te=>(U.status&&(U.status.fetchRejected=!0,U.status.fetchError=te),Kt(te)),Kt=te=>{let{aborted:Oe}=wt.signal,Ut=Oe&&U.allowStaleOnFetchAbort,xe=Ut||U.allowStaleOnFetchRejection,Ke=xe||U.noDeleteOnFetchRejection,Fe=oe;if(F(this,B)[D]===oe&&(!Ke||Fe.__staleWhileFetching===void 0?this.delete(E):Ut||(F(this,B)[D]=Fe.__staleWhileFetching)),xe)return U.status&&Fe.__staleWhileFetching!==void 0&&(U.status.returnedStale=!0),Fe.__staleWhileFetching;if(Fe.__returned===Fe)throw te},Te=(te,Oe)=>{var xe;let Ut=(xe=F(this,T))==null?void 0:xe.call(this,E,at,Bt);Ut&&Ut instanceof Promise&&Ut.then(Ke=>te(Ke===void 0?void 0:Ke),Oe),wt.signal.addEventListener("abort",()=>{(!U.ignoreFetchAbort||U.allowStaleOnFetchAbort)&&(te(void 0),U.allowStaleOnFetchAbort&&(te=Ke=>ge(Ke,!0)))})};U.status&&(U.status.fetchDispatched=!0);let oe=new Promise(Te).then(ge,Ne),he=Object.assign(oe,{__abortController:wt,__staleWhileFetching:at,__returned:void 0});return D===void 0?(this.set(E,he,{...Bt.options,status:void 0}),D=F(this,M).get(E)):F(this,B)[D]=he,he},Mt=new WeakSet,me=function(E){if(!F(this,nt))return!1;let D=E;return!!D&&D instanceof Promise&&D.hasOwnProperty("__staleWhileFetching")&&D.__abortController instanceof s},zt=new WeakSet,yh=function(E,D){F(this,$)[D]=E,F(this,q)[E]=D},p=new WeakSet,Jr=function(E){E!==F(this,z)&&(E===F(this,x)?Ft(this,x,F(this,q)[E]):Rt(this,zt,yh).call(this,F(this,$)[E],F(this,q)[E]),Rt(this,zt,yh).call(this,F(this,z),E),Ft(this,z,E))},P);e.LRUCache=f}),fn=vt(e=>{dt(),gt(),pt(),Object.defineProperty(e,"t",{value:!0}),e.ContainerIterator=e.Container=e.Base=void 0;var t=class{constructor(r=0){this.iteratorType=r}equals(r){return this.o===r.o}};e.ContainerIterator=t;var i=class{constructor(){this.i=0}get length(){return this.i}size(){return this.i}empty(){return this.i===0}};e.Base=i;var n=class extends i{};e.Container=n}),gb=vt(e=>{dt(),gt(),pt(),Object.defineProperty(e,"t",{value:!0}),e.default=void 0;var t=fn(),i=class extends t.Base{constructor(r=[]){super(),this.S=[];let s=this;r.forEach(function(o){s.push(o)})}clear(){this.i=0,this.S=[]}push(r){return this.S.push(r),this.i+=1,this.i}pop(){if(this.i!==0)return this.i-=1,this.S.pop()}top(){return this.S[this.i-1]}},n=i;e.default=n}),mb=vt(e=>{dt(),gt(),pt(),Object.defineProperty(e,"t",{value:!0}),e.default=void 0;var t=fn(),i=class extends t.Base{constructor(r=[]){super(),this.j=0,this.q=[];let s=this;r.forEach(function(o){s.push(o)})}clear(){this.q=[],this.i=this.j=0}push(r){let s=this.q.length;if(this.j/s>.5&&this.j+this.i>=s&&s>4096){let o=this.i;for(let a=0;a<o;++a)this.q[a]=this.q[this.j+a];this.j=0,this.q[this.i]=r}else this.q[this.j+this.i]=r;return++this.i}pop(){if(this.i===0)return;let r=this.q[this.j++];return this.i-=1,r}front(){if(this.i!==0)return this.q[this.j]}},n=i;e.default=n}),bb=vt(e=>{dt(),gt(),pt(),Object.defineProperty(e,"t",{value:!0}),e.default=void 0;var t=fn(),i=class extends t.Base{constructor(r=[],s=function(a,l){return a>l?-1:a<l?1:0},o=!0){if(super(),this.v=s,Array.isArray(r))this.C=o?[...r]:r;else{this.C=[];let l=this;r.forEach(function(h){l.C.push(h)})}this.i=this.C.length;let a=this.i>>1;for(let l=this.i-1>>1;l>=0;--l)this.k(l,a)}m(r){let s=this.C[r];for(;r>0;){let o=r-1>>1,a=this.C[o];if(this.v(a,s)<=0)break;this.C[r]=a,r=o}this.C[r]=s}k(r,s){let o=this.C[r];for(;r<s;){let a=r<<1|1,l=a+1,h=this.C[a];if(l<this.i&&this.v(h,this.C[l])>0&&(a=l,h=this.C[l]),this.v(h,o)>=0)break;this.C[r]=h,r=a}this.C[r]=o}clear(){this.i=0,this.C.length=0}push(r){this.C.push(r),this.m(this.i),this.i+=1}pop(){if(this.i===0)return;let r=this.C[0],s=this.C.pop();return this.i-=1,this.i&&(this.C[0]=s,this.k(0,this.i>>1)),r}top(){return this.C[0]}find(r){return this.C.indexOf(r)>=0}remove(r){let s=this.C.indexOf(r);return s<0?!1:(s===0?this.pop():s===this.i-1?(this.C.pop(),this.i-=1):(this.C.splice(s,1,this.C.pop()),this.i-=1,this.m(s),this.k(s,this.i>>1)),!0)}updateItem(r){let s=this.C.indexOf(r);return s<0?!1:(this.m(s),this.k(s,this.i>>1),!0)}toArray(){return[...this.C]}},n=i;e.default=n}),ac=vt(e=>{dt(),gt(),pt(),Object.defineProperty(e,"t",{value:!0}),e.default=void 0;var t=fn(),i=class extends t.Container{},n=i;e.default=n}),dn=vt(e=>{dt(),gt(),pt(),Object.defineProperty(e,"t",{value:!0}),e.throwIteratorAccessError=t;function t(){throw new RangeError("Iterator access denied!")}}),bp=vt(e=>{dt(),gt(),pt(),Object.defineProperty(e,"t",{value:!0}),e.RandomIterator=void 0;var t=fn(),i=dn(),n=class extends t.ContainerIterator{constructor(r,s){super(s),this.o=r,this.iteratorType===0?(this.pre=function(){return this.o===0&&(0,i.throwIteratorAccessError)(),this.o-=1,this},this.next=function(){return this.o===this.container.size()&&(0,i.throwIteratorAccessError)(),this.o+=1,this}):(this.pre=function(){return this.o===this.container.size()-1&&(0,i.throwIteratorAccessError)(),this.o+=1,this},this.next=function(){return this.o===-1&&(0,i.throwIteratorAccessError)(),this.o-=1,this})}get pointer(){return this.container.getElementByPos(this.o)}set pointer(r){this.container.setElementByPos(this.o,r)}};e.RandomIterator=n}),yb=vt(e=>{dt(),gt(),pt(),Object.defineProperty(e,"t",{value:!0}),e.default=void 0;var t=n(ac()),i=bp();function n(a){return a&&a.t?a:{default:a}}var r=class yp extends i.RandomIterator{constructor(l,h,c){super(l,c),this.container=h}copy(){return new yp(this.o,this.container,this.iteratorType)}},s=class extends t.default{constructor(a=[],l=!0){if(super(),Array.isArray(a))this.J=l?[...a]:a,this.i=a.length;else{this.J=[];let h=this;a.forEach(function(c){h.pushBack(c)})}}clear(){this.i=0,this.J.length=0}begin(){return new r(0,this)}end(){return new r(this.i,this)}rBegin(){return new r(this.i-1,this,1)}rEnd(){return new r(-1,this,1)}front(){return this.J[0]}back(){return this.J[this.i-1]}getElementByPos(a){if(a<0||a>this.i-1)throw new RangeError;return this.J[a]}eraseElementByPos(a){if(a<0||a>this.i-1)throw new RangeError;return this.J.splice(a,1),this.i-=1,this.i}eraseElementByValue(a){let l=0;for(let h=0;h<this.i;++h)this.J[h]!==a&&(this.J[l++]=this.J[h]);return this.i=this.J.length=l,this.i}eraseElementByIterator(a){let l=a.o;return a=a.next(),this.eraseElementByPos(l),a}pushBack(a){return this.J.push(a),this.i+=1,this.i}popBack(){if(this.i!==0)return this.i-=1,this.J.pop()}setElementByPos(a,l){if(a<0||a>this.i-1)throw new RangeError;this.J[a]=l}insert(a,l,h=1){if(a<0||a>this.i)throw new RangeError;return this.J.splice(a,0,...new Array(h).fill(l)),this.i+=h,this.i}find(a){for(let l=0;l<this.i;++l)if(this.J[l]===a)return new r(l,this);return this.end()}reverse(){this.J.reverse()}unique(){let a=1;for(let l=1;l<this.i;++l)this.J[l]!==this.J[l-1]&&(this.J[a++]=this.J[l]);return this.i=this.J.length=a,this.i}sort(a){this.J.sort(a)}forEach(a){for(let l=0;l<this.i;++l)a(this.J[l],l,this)}[Symbol.iterator](){return(function*(){yield*this.J}).bind(this)()}},o=s;e.default=o}),_b=vt(e=>{dt(),gt(),pt(),Object.defineProperty(e,"t",{value:!0}),e.default=void 0;var t=r(ac()),i=fn(),n=dn();function r(l){return l&&l.t?l:{default:l}}var s=class _p extends i.ContainerIterator{constructor(h,c,u,f){super(f),this.o=h,this.h=c,this.container=u,this.iteratorType===0?(this.pre=function(){return this.o.L===this.h&&(0,n.throwIteratorAccessError)(),this.o=this.o.L,this},this.next=function(){return this.o===this.h&&(0,n.throwIteratorAccessError)(),this.o=this.o.B,this}):(this.pre=function(){return this.o.B===this.h&&(0,n.throwIteratorAccessError)(),this.o=this.o.B,this},this.next=function(){return this.o===this.h&&(0,n.throwIteratorAccessError)(),this.o=this.o.L,this})}get pointer(){return this.o===this.h&&(0,n.throwIteratorAccessError)(),this.o.l}set pointer(h){this.o===this.h&&(0,n.throwIteratorAccessError)(),this.o.l=h}copy(){return new _p(this.o,this.h,this.container,this.iteratorType)}},o=class extends t.default{constructor(l=[]){super(),this.h={},this.p=this._=this.h.L=this.h.B=this.h;let h=this;l.forEach(function(c){h.pushBack(c)})}V(l){let{L:h,B:c}=l;h.B=c,c.L=h,l===this.p&&(this.p=c),l===this._&&(this._=h),this.i-=1}G(l,h){let c=h.B,u={l,L:h,B:c};h.B=u,c.L=u,h===this.h&&(this.p=u),c===this.h&&(this._=u),this.i+=1}clear(){this.i=0,this.p=this._=this.h.L=this.h.B=this.h}begin(){return new s(this.p,this.h,this)}end(){return new s(this.h,this.h,this)}rBegin(){return new s(this._,this.h,this,1)}rEnd(){return new s(this.h,this.h,this,1)}front(){return this.p.l}back(){return this._.l}getElementByPos(l){if(l<0||l>this.i-1)throw new RangeError;let h=this.p;for(;l--;)h=h.B;return h.l}eraseElementByPos(l){if(l<0||l>this.i-1)throw new RangeError;let h=this.p;for(;l--;)h=h.B;return this.V(h),this.i}eraseElementByValue(l){let h=this.p;for(;h!==this.h;)h.l===l&&this.V(h),h=h.B;return this.i}eraseElementByIterator(l){let h=l.o;return h===this.h&&(0,n.throwIteratorAccessError)(),l=l.next(),this.V(h),l}pushBack(l){return this.G(l,this._),this.i}popBack(){if(this.i===0)return;let l=this._.l;return this.V(this._),l}pushFront(l){return this.G(l,this.h),this.i}popFront(){if(this.i===0)return;let l=this.p.l;return this.V(this.p),l}setElementByPos(l,h){if(l<0||l>this.i-1)throw new RangeError;let c=this.p;for(;l--;)c=c.B;c.l=h}insert(l,h,c=1){if(l<0||l>this.i)throw new RangeError;if(c<=0)return this.i;if(l===0)for(;c--;)this.pushFront(h);else if(l===this.i)for(;c--;)this.pushBack(h);else{let u=this.p;for(let d=1;d<l;++d)u=u.B;let f=u.B;for(this.i+=c;c--;)u.B={l:h,L:u},u.B.L=u,u=u.B;u.B=f,f.L=u}return this.i}find(l){let h=this.p;for(;h!==this.h;){if(h.l===l)return new s(h,this.h,this);h=h.B}return this.end()}reverse(){if(this.i<=1)return;let l=this.p,h=this._,c=0;for(;c<<1<this.i;){let u=l.l;l.l=h.l,h.l=u,l=l.B,h=h.L,c+=1}}unique(){if(this.i<=1)return this.i;let l=this.p;for(;l!==this.h;){let h=l;for(;h.B!==this.h&&h.l===h.B.l;)h=h.B,this.i-=1;l.B=h.B,l.B.L=l,l=l.B}return this.i}sort(l){if(this.i<=1)return;let h=[];this.forEach(function(u){h.push(u)}),h.sort(l);let c=this.p;h.forEach(function(u){c.l=u,c=c.B})}merge(l){let h=this;if(this.i===0)l.forEach(function(c){h.pushBack(c)});else{let c=this.p;l.forEach(function(u){for(;c!==h.h&&c.l<=u;)c=c.B;h.G(u,c.L)})}return this.i}forEach(l){let h=this.p,c=0;for(;h!==this.h;)l(h.l,c++,this),h=h.B}[Symbol.iterator](){return(function*(){if(this.i===0)return;let l=this.p;for(;l!==this.h;)yield l.l,l=l.B}).bind(this)()}},a=o;e.default=a}),wb=vt(e=>{dt(),gt(),pt(),Object.defineProperty(e,"t",{value:!0}),e.default=void 0;var t=n(ac()),i=bp();function n(a){return a&&a.t?a:{default:a}}var r=class wp extends i.RandomIterator{constructor(l,h,c){super(l,c),this.container=h}copy(){return new wp(this.o,this.container,this.iteratorType)}},s=class extends t.default{constructor(a=[],l=4096){super(),this.j=0,this.D=0,this.R=0,this.N=0,this.P=0,this.A=[];let h=(()=>{if(typeof a.length=="number")return a.length;if(typeof a.size=="number")return a.size;if(typeof a.size=="function")return a.size();throw new TypeError("Cannot get the length or size of the container")})();this.F=l,this.P=Math.max(Math.ceil(h/this.F),1);for(let f=0;f<this.P;++f)this.A.push(new Array(this.F));let c=Math.ceil(h/this.F);this.j=this.R=(this.P>>1)-(c>>1),this.D=this.N=this.F-h%this.F>>1;let u=this;a.forEach(function(f){u.pushBack(f)})}T(){let a=[],l=Math.max(this.P>>1,1);for(let h=0;h<l;++h)a[h]=new Array(this.F);for(let h=this.j;h<this.P;++h)a[a.length]=this.A[h];for(let h=0;h<this.R;++h)a[a.length]=this.A[h];a[a.length]=[...this.A[this.R]],this.j=l,this.R=a.length-1;for(let h=0;h<l;++h)a[a.length]=new Array(this.F);this.A=a,this.P=a.length}O(a){let l=this.D+a+1,h=l%this.F,c=h-1,u=this.j+(l-h)/this.F;return h===0&&(u-=1),u%=this.P,c<0&&(c+=this.F),{curNodeBucketIndex:u,curNodePointerIndex:c}}clear(){this.A=[new Array(this.F)],this.P=1,this.j=this.R=this.i=0,this.D=this.N=this.F>>1}begin(){return new r(0,this)}end(){return new r(this.i,this)}rBegin(){return new r(this.i-1,this,1)}rEnd(){return new r(-1,this,1)}front(){if(this.i!==0)return this.A[this.j][this.D]}back(){if(this.i!==0)return this.A[this.R][this.N]}pushBack(a){return this.i&&(this.N<this.F-1?this.N+=1:this.R<this.P-1?(this.R+=1,this.N=0):(this.R=0,this.N=0),this.R===this.j&&this.N===this.D&&this.T()),this.i+=1,this.A[this.R][this.N]=a,this.i}popBack(){if(this.i===0)return;let a=this.A[this.R][this.N];return this.i!==1&&(this.N>0?this.N-=1:this.R>0?(this.R-=1,this.N=this.F-1):(this.R=this.P-1,this.N=this.F-1)),this.i-=1,a}pushFront(a){return this.i&&(this.D>0?this.D-=1:this.j>0?(this.j-=1,this.D=this.F-1):(this.j=this.P-1,this.D=this.F-1),this.j===this.R&&this.D===this.N&&this.T()),this.i+=1,this.A[this.j][this.D]=a,this.i}popFront(){if(this.i===0)return;let a=this.A[this.j][this.D];return this.i!==1&&(this.D<this.F-1?this.D+=1:this.j<this.P-1?(this.j+=1,this.D=0):(this.j=0,this.D=0)),this.i-=1,a}getElementByPos(a){if(a<0||a>this.i-1)throw new RangeError;let{curNodeBucketIndex:l,curNodePointerIndex:h}=this.O(a);return this.A[l][h]}setElementByPos(a,l){if(a<0||a>this.i-1)throw new RangeError;let{curNodeBucketIndex:h,curNodePointerIndex:c}=this.O(a);this.A[h][c]=l}insert(a,l,h=1){if(a<0||a>this.i)throw new RangeError;if(a===0)for(;h--;)this.pushFront(l);else if(a===this.i)for(;h--;)this.pushBack(l);else{let c=[];for(let u=a;u<this.i;++u)c.push(this.getElementByPos(u));this.cut(a-1);for(let u=0;u<h;++u)this.pushBack(l);for(let u=0;u<c.length;++u)this.pushBack(c[u])}return this.i}cut(a){if(a<0)return this.clear(),0;let{curNodeBucketIndex:l,curNodePointerIndex:h}=this.O(a);return this.R=l,this.N=h,this.i=a+1,this.i}eraseElementByPos(a){if(a<0||a>this.i-1)throw new RangeError;if(a===0)this.popFront();else if(a===this.i-1)this.popBack();else{let l=[];for(let c=a+1;c<this.i;++c)l.push(this.getElementByPos(c));this.cut(a),this.popBack();let h=this;l.forEach(function(c){h.pushBack(c)})}return this.i}eraseElementByValue(a){if(this.i===0)return 0;let l=[];for(let c=0;c<this.i;++c){let u=this.getElementByPos(c);u!==a&&l.push(u)}let h=l.length;for(let c=0;c<h;++c)this.setElementByPos(c,l[c]);return this.cut(h-1)}eraseElementByIterator(a){let l=a.o;return this.eraseElementByPos(l),a=a.next(),a}find(a){for(let l=0;l<this.i;++l)if(this.getElementByPos(l)===a)return new r(l,this);return this.end()}reverse(){let a=0,l=this.i-1;for(;a<l;){let h=this.getElementByPos(a);this.setElementByPos(a,this.getElementByPos(l)),this.setElementByPos(l,h),a+=1,l-=1}}unique(){if(this.i<=1)return this.i;let a=1,l=this.getElementByPos(0);for(let h=1;h<this.i;++h){let c=this.getElementByPos(h);c!==l&&(l=c,this.setElementByPos(a++,c))}for(;this.i>a;)this.popBack();return this.i}sort(a){let l=[];for(let h=0;h<this.i;++h)l.push(this.getElementByPos(h));l.sort(a);for(let h=0;h<this.i;++h)this.setElementByPos(h,l[h])}shrinkToFit(){if(this.i===0)return;let a=[];this.forEach(function(l){a.push(l)}),this.P=Math.max(Math.ceil(this.i/this.F),1),this.i=this.j=this.R=this.D=this.N=0,this.A=[];for(let l=0;l<this.P;++l)this.A.push(new Array(this.F));for(let l=0;l<a.length;++l)this.pushBack(a[l])}forEach(a){for(let l=0;l<this.i;++l)a(this.getElementByPos(l),l,this)}[Symbol.iterator](){return(function*(){for(let a=0;a<this.i;++a)yield this.getElementByPos(a)}).bind(this)()}},o=s;e.default=o}),vb=vt(e=>{dt(),gt(),pt(),Object.defineProperty(e,"t",{value:!0}),e.TreeNodeEnableIndex=e.TreeNode=void 0;var t=class{constructor(n,r){this.ee=1,this.u=void 0,this.l=void 0,this.U=void 0,this.W=void 0,this.tt=void 0,this.u=n,this.l=r}L(){let n=this;if(n.ee===1&&n.tt.tt===n)n=n.W;else if(n.U)for(n=n.U;n.W;)n=n.W;else{let r=n.tt;for(;r.U===n;)n=r,r=n.tt;n=r}return n}B(){let n=this;if(n.W){for(n=n.W;n.U;)n=n.U;return n}else{let r=n.tt;for(;r.W===n;)n=r,r=n.tt;return n.W!==r?r:n}}te(){let n=this.tt,r=this.W,s=r.U;return n.tt===this?n.tt=r:n.U===this?n.U=r:n.W=r,r.tt=n,r.U=this,this.tt=r,this.W=s,s&&(s.tt=this),r}se(){let n=this.tt,r=this.U,s=r.W;return n.tt===this?n.tt=r:n.U===this?n.U=r:n.W=r,r.tt=n,r.W=this,this.tt=r,this.U=s,s&&(s.tt=this),r}};e.TreeNode=t;var i=class extends t{constructor(){super(...arguments),this.rt=1}te(){let n=super.te();return this.ie(),n.ie(),n}se(){let n=super.se();return this.ie(),n.ie(),n}ie(){this.rt=1,this.U&&(this.rt+=this.U.rt),this.W&&(this.rt+=this.W.rt)}};e.TreeNodeEnableIndex=i}),vp=vt(e=>{dt(),gt(),pt(),Object.defineProperty(e,"t",{value:!0}),e.default=void 0;var t=vb(),i=fn(),n=dn(),r=class extends i.Container{constructor(o=function(l,h){return l<h?-1:l>h?1:0},a=!1){super(),this.Y=void 0,this.v=o,a?(this.re=t.TreeNodeEnableIndex,this.M=function(l,h,c){let u=this.ne(l,h,c);if(u){let f=u.tt;for(;f!==this.h;)f.rt+=1,f=f.tt;let d=this.he(u);if(d){let{parentNode:g,grandParent:y,curNode:_}=d;g.ie(),y.ie(),_.ie()}}return this.i},this.V=function(l){let h=this.fe(l);for(;h!==this.h;)h.rt-=1,h=h.tt}):(this.re=t.TreeNode,this.M=function(l,h,c){let u=this.ne(l,h,c);return u&&this.he(u),this.i},this.V=this.fe),this.h=new this.re}X(o,a){let l=this.h;for(;o;){let h=this.v(o.u,a);if(h<0)o=o.W;else if(h>0)l=o,o=o.U;else return o}return l}Z(o,a){let l=this.h;for(;o;)this.v(o.u,a)<=0?o=o.W:(l=o,o=o.U);return l}$(o,a){let l=this.h;for(;o;){let h=this.v(o.u,a);if(h<0)l=o,o=o.W;else if(h>0)o=o.U;else return o}return l}rr(o,a){let l=this.h;for(;o;)this.v(o.u,a)<0?(l=o,o=o.W):o=o.U;return l}ue(o){for(;;){let a=o.tt;if(a===this.h)return;if(o.ee===1){o.ee=0;return}if(o===a.U){let l=a.W;if(l.ee===1)l.ee=0,a.ee=1,a===this.Y?this.Y=a.te():a.te();else if(l.W&&l.W.ee===1){l.ee=a.ee,a.ee=0,l.W.ee=0,a===this.Y?this.Y=a.te():a.te();return}else l.U&&l.U.ee===1?(l.ee=1,l.U.ee=0,l.se()):(l.ee=1,o=a)}else{let l=a.U;if(l.ee===1)l.ee=0,a.ee=1,a===this.Y?this.Y=a.se():a.se();else if(l.U&&l.U.ee===1){l.ee=a.ee,a.ee=0,l.U.ee=0,a===this.Y?this.Y=a.se():a.se();return}else l.W&&l.W.ee===1?(l.ee=1,l.W.ee=0,l.te()):(l.ee=1,o=a)}}}fe(o){if(this.i===1)return this.clear(),this.h;let a=o;for(;a.U||a.W;){if(a.W)for(a=a.W;a.U;)a=a.U;else a=a.U;[o.u,a.u]=[a.u,o.u],[o.l,a.l]=[a.l,o.l],o=a}this.h.U===a?this.h.U=a.tt:this.h.W===a&&(this.h.W=a.tt),this.ue(a);let l=a.tt;return a===l.U?l.U=void 0:l.W=void 0,this.i-=1,this.Y.ee=0,l}oe(o,a){return o===void 0?!1:this.oe(o.U,a)||a(o)?!0:this.oe(o.W,a)}he(o){for(;;){let a=o.tt;if(a.ee===0)return;let l=a.tt;if(a===l.U){let h=l.W;if(h&&h.ee===1){if(h.ee=a.ee=0,l===this.Y)return;l.ee=1,o=l;continue}else if(o===a.W){if(o.ee=0,o.U&&(o.U.tt=a),o.W&&(o.W.tt=l),a.W=o.U,l.U=o.W,o.U=a,o.W=l,l===this.Y)this.Y=o,this.h.tt=o;else{let c=l.tt;c.U===l?c.U=o:c.W=o}return o.tt=l.tt,a.tt=o,l.tt=o,l.ee=1,{parentNode:a,grandParent:l,curNode:o}}else a.ee=0,l===this.Y?this.Y=l.se():l.se(),l.ee=1}else{let h=l.U;if(h&&h.ee===1){if(h.ee=a.ee=0,l===this.Y)return;l.ee=1,o=l;continue}else if(o===a.U){if(o.ee=0,o.U&&(o.U.tt=l),o.W&&(o.W.tt=a),l.W=o.U,a.U=o.W,o.U=l,o.W=a,l===this.Y)this.Y=o,this.h.tt=o;else{let c=l.tt;c.U===l?c.U=o:c.W=o}return o.tt=l.tt,a.tt=o,l.tt=o,l.ee=1,{parentNode:a,grandParent:l,curNode:o}}else a.ee=0,l===this.Y?this.Y=l.te():l.te(),l.ee=1}return}}ne(o,a,l){if(this.Y===void 0){this.i+=1,this.Y=new this.re(o,a),this.Y.ee=0,this.Y.tt=this.h,this.h.tt=this.Y,this.h.U=this.Y,this.h.W=this.Y;return}let h,c=this.h.U,u=this.v(c.u,o);if(u===0){c.l=a;return}else if(u>0)c.U=new this.re(o,a),c.U.tt=c,h=c.U,this.h.U=h;else{let f=this.h.W,d=this.v(f.u,o);if(d===0){f.l=a;return}else if(d<0)f.W=new this.re(o,a),f.W.tt=f,h=f.W,this.h.W=h;else{if(l!==void 0){let g=l.o;if(g!==this.h){let y=this.v(g.u,o);if(y===0){g.l=a;return}else if(y>0){let _=g.L(),w=this.v(_.u,o);if(w===0){_.l=a;return}else w<0&&(h=new this.re(o,a),_.W===void 0?(_.W=h,h.tt=_):(g.U=h,h.tt=g))}}}if(h===void 0)for(h=this.Y;;){let g=this.v(h.u,o);if(g>0){if(h.U===void 0){h.U=new this.re(o,a),h.U.tt=h,h=h.U;break}h=h.U}else if(g<0){if(h.W===void 0){h.W=new this.re(o,a),h.W.tt=h,h=h.W;break}h=h.W}else{h.l=a;return}}}}return this.i+=1,h}I(o,a){for(;o;){let l=this.v(o.u,a);if(l<0)o=o.W;else if(l>0)o=o.U;else return o}return o||this.h}clear(){this.i=0,this.Y=void 0,this.h.tt=void 0,this.h.U=this.h.W=void 0}updateKeyByIterator(o,a){let l=o.o;if(l===this.h&&(0,n.throwIteratorAccessError)(),this.i===1)return l.u=a,!0;if(l===this.h.U)return this.v(l.B().u,a)>0?(l.u=a,!0):!1;if(l===this.h.W)return this.v(l.L().u,a)<0?(l.u=a,!0):!1;let h=l.L().u;if(this.v(h,a)>=0)return!1;let c=l.B().u;return this.v(c,a)<=0?!1:(l.u=a,!0)}eraseElementByPos(o){if(o<0||o>this.i-1)throw new RangeError;let a=0,l=this;return this.oe(this.Y,function(h){return o===a?(l.V(h),!0):(a+=1,!1)}),this.i}eraseElementByKey(o){if(this.i===0)return!1;let a=this.I(this.Y,o);return a===this.h?!1:(this.V(a),!0)}eraseElementByIterator(o){let a=o.o;a===this.h&&(0,n.throwIteratorAccessError)();let l=a.W===void 0;return o.iteratorType===0?l&&o.next():(!l||a.U===void 0)&&o.next(),this.V(a),o}forEach(o){let a=0;for(let l of this)o(l,a++,this)}getElementByPos(o){if(o<0||o>this.i-1)throw new RangeError;let a,l=0;for(let h of this){if(l===o){a=h;break}l+=1}return a}getHeight(){if(this.i===0)return 0;let o=function(a){return a?Math.max(o(a.U),o(a.W))+1:0};return o(this.Y)}},s=r;e.default=s}),Sp=vt(e=>{dt(),gt(),pt(),Object.defineProperty(e,"t",{value:!0}),e.default=void 0;var t=fn(),i=dn(),n=class extends t.ContainerIterator{constructor(s,o,a){super(a),this.o=s,this.h=o,this.iteratorType===0?(this.pre=function(){return this.o===this.h.U&&(0,i.throwIteratorAccessError)(),this.o=this.o.L(),this},this.next=function(){return this.o===this.h&&(0,i.throwIteratorAccessError)(),this.o=this.o.B(),this}):(this.pre=function(){return this.o===this.h.W&&(0,i.throwIteratorAccessError)(),this.o=this.o.B(),this},this.next=function(){return this.o===this.h&&(0,i.throwIteratorAccessError)(),this.o=this.o.L(),this})}get index(){let s=this.o,o=this.h.tt;if(s===this.h)return o?o.rt-1:0;let a=0;for(s.U&&(a+=s.U.rt);s!==o;){let l=s.tt;s===l.W&&(a+=1,l.U&&(a+=l.U.rt)),s=l}return a}},r=n;e.default=r}),Sb=vt(e=>{dt(),gt(),pt(),Object.defineProperty(e,"t",{value:!0}),e.default=void 0;var t=r(vp()),i=r(Sp()),n=dn();function r(l){return l&&l.t?l:{default:l}}var s=class xp extends i.default{constructor(h,c,u,f){super(h,c,f),this.container=u}get pointer(){return this.o===this.h&&(0,n.throwIteratorAccessError)(),this.o.u}copy(){return new xp(this.o,this.h,this.container,this.iteratorType)}},o=class extends t.default{constructor(l=[],h,c){super(h,c);let u=this;l.forEach(function(f){u.insert(f)})}*K(l){l!==void 0&&(yield*this.K(l.U),yield l.u,yield*this.K(l.W))}begin(){return new s(this.h.U||this.h,this.h,this)}end(){return new s(this.h,this.h,this)}rBegin(){return new s(this.h.W||this.h,this.h,this,1)}rEnd(){return new s(this.h,this.h,this,1)}front(){return this.h.U?this.h.U.u:void 0}back(){return this.h.W?this.h.W.u:void 0}insert(l,h){return this.M(l,void 0,h)}find(l){let h=this.I(this.Y,l);return new s(h,this.h,this)}lowerBound(l){let h=this.X(this.Y,l);return new s(h,this.h,this)}upperBound(l){let h=this.Z(this.Y,l);return new s(h,this.h,this)}reverseLowerBound(l){let h=this.$(this.Y,l);return new s(h,this.h,this)}reverseUpperBound(l){let h=this.rr(this.Y,l);return new s(h,this.h,this)}union(l){let h=this;return l.forEach(function(c){h.insert(c)}),this.i}[Symbol.iterator](){return this.K(this.Y)}},a=o;e.default=a}),xb=vt(e=>{dt(),gt(),pt(),Object.defineProperty(e,"t",{value:!0}),e.default=void 0;var t=r(vp()),i=r(Sp()),n=dn();function r(l){return l&&l.t?l:{default:l}}var s=class kp extends i.default{constructor(h,c,u,f){super(h,c,f),this.container=u}get pointer(){this.o===this.h&&(0,n.throwIteratorAccessError)();let h=this;return new Proxy([],{get(c,u){if(u==="0")return h.o.u;if(u==="1")return h.o.l},set(c,u,f){if(u!=="1")throw new TypeError("props must be 1");return h.o.l=f,!0}})}copy(){return new kp(this.o,this.h,this.container,this.iteratorType)}},o=class extends t.default{constructor(l=[],h,c){super(h,c);let u=this;l.forEach(function(f){u.setElement(f[0],f[1])})}*K(l){l!==void 0&&(yield*this.K(l.U),yield[l.u,l.l],yield*this.K(l.W))}begin(){return new s(this.h.U||this.h,this.h,this)}end(){return new s(this.h,this.h,this)}rBegin(){return new s(this.h.W||this.h,this.h,this,1)}rEnd(){return new s(this.h,this.h,this,1)}front(){if(this.i===0)return;let l=this.h.U;return[l.u,l.l]}back(){if(this.i===0)return;let l=this.h.W;return[l.u,l.l]}lowerBound(l){let h=this.X(this.Y,l);return new s(h,this.h,this)}upperBound(l){let h=this.Z(this.Y,l);return new s(h,this.h,this)}reverseLowerBound(l){let h=this.$(this.Y,l);return new s(h,this.h,this)}reverseUpperBound(l){let h=this.rr(this.Y,l);return new s(h,this.h,this)}setElement(l,h,c){return this.M(l,h,c)}find(l){let h=this.I(this.Y,l);return new s(h,this.h,this)}getElementByKey(l){return this.I(this.Y,l).l}union(l){let h=this;return l.forEach(function(c){h.setElement(c[0],c[1])}),this.i}[Symbol.iterator](){return this.K(this.Y)}},a=o;e.default=a}),Ep=vt(e=>{dt(),gt(),pt(),Object.defineProperty(e,"t",{value:!0}),e.default=t;function t(i){let n=typeof i;return n==="object"&&i!==null||n==="function"}}),Mp=vt(e=>{dt(),gt(),pt(),Object.defineProperty(e,"t",{value:!0}),e.HashContainerIterator=e.HashContainer=void 0;var t=fn(),i=r(Ep()),n=dn();function r(a){return a&&a.t?a:{default:a}}var s=class extends t.ContainerIterator{constructor(a,l,h){super(h),this.o=a,this.h=l,this.iteratorType===0?(this.pre=function(){return this.o.L===this.h&&(0,n.throwIteratorAccessError)(),this.o=this.o.L,this},this.next=function(){return this.o===this.h&&(0,n.throwIteratorAccessError)(),this.o=this.o.B,this}):(this.pre=function(){return this.o.B===this.h&&(0,n.throwIteratorAccessError)(),this.o=this.o.B,this},this.next=function(){return this.o===this.h&&(0,n.throwIteratorAccessError)(),this.o=this.o.L,this})}};e.HashContainerIterator=s;var o=class extends t.Container{constructor(){super(),this.H=[],this.g={},this.HASH_TAG=Symbol("@@HASH_TAG"),Object.setPrototypeOf(this.g,null),this.h={},this.h.L=this.h.B=this.p=this._=this.h}V(a){let{L:l,B:h}=a;l.B=h,h.L=l,a===this.p&&(this.p=h),a===this._&&(this._=l),this.i-=1}M(a,l,h){h===void 0&&(h=(0,i.default)(a));let c;if(h){let u=a[this.HASH_TAG];if(u!==void 0)return this.H[u].l=l,this.i;Object.defineProperty(a,this.HASH_TAG,{value:this.H.length,configurable:!0}),c={u:a,l,L:this._,B:this.h},this.H.push(c)}else{let u=this.g[a];if(u)return u.l=l,this.i;c={u:a,l,L:this._,B:this.h},this.g[a]=c}return this.i===0?(this.p=c,this.h.B=c):this._.B=c,this._=c,this.h.L=c,++this.i}I(a,l){if(l===void 0&&(l=(0,i.default)(a)),l){let h=a[this.HASH_TAG];return h===void 0?this.h:this.H[h]}else return this.g[a]||this.h}clear(){let a=this.HASH_TAG;this.H.forEach(function(l){delete l.u[a]}),this.H=[],this.g={},Object.setPrototypeOf(this.g,null),this.i=0,this.p=this._=this.h.L=this.h.B=this.h}eraseElementByKey(a,l){let h;if(l===void 0&&(l=(0,i.default)(a)),l){let c=a[this.HASH_TAG];if(c===void 0)return!1;delete a[this.HASH_TAG],h=this.H[c],delete this.H[c]}else{if(h=this.g[a],h===void 0)return!1;delete this.g[a]}return this.V(h),!0}eraseElementByIterator(a){let l=a.o;return l===this.h&&(0,n.throwIteratorAccessError)(),this.V(l),a.next()}eraseElementByPos(a){if(a<0||a>this.i-1)throw new RangeError;let l=this.p;for(;a--;)l=l.B;return this.V(l),this.i}};e.HashContainer=o}),kb=vt(e=>{dt(),gt(),pt(),Object.defineProperty(e,"t",{value:!0}),e.default=void 0;var t=Mp(),i=dn(),n=class Ap extends t.HashContainerIterator{constructor(a,l,h,c){super(a,l,c),this.container=h}get pointer(){return this.o===this.h&&(0,i.throwIteratorAccessError)(),this.o.u}copy(){return new Ap(this.o,this.h,this.container,this.iteratorType)}},r=class extends t.HashContainer{constructor(o=[]){super();let a=this;o.forEach(function(l){a.insert(l)})}begin(){return new n(this.p,this.h,this)}end(){return new n(this.h,this.h,this)}rBegin(){return new n(this._,this.h,this,1)}rEnd(){return new n(this.h,this.h,this,1)}front(){return this.p.u}back(){return this._.u}insert(o,a){return this.M(o,void 0,a)}getElementByPos(o){if(o<0||o>this.i-1)throw new RangeError;let a=this.p;for(;o--;)a=a.B;return a.u}find(o,a){let l=this.I(o,a);return new n(l,this.h,this)}forEach(o){let a=0,l=this.p;for(;l!==this.h;)o(l.u,a++,this),l=l.B}[Symbol.iterator](){return(function*(){let o=this.p;for(;o!==this.h;)yield o.u,o=o.B}).bind(this)()}},s=r;e.default=s}),Eb=vt(e=>{dt(),gt(),pt(),Object.defineProperty(e,"t",{value:!0}),e.default=void 0;var t=Mp(),i=r(Ep()),n=dn();function r(l){return l&&l.t?l:{default:l}}var s=class Tp extends t.HashContainerIterator{constructor(h,c,u,f){super(h,c,f),this.container=u}get pointer(){this.o===this.h&&(0,n.throwIteratorAccessError)();let h=this;return new Proxy([],{get(c,u){if(u==="0")return h.o.u;if(u==="1")return h.o.l},set(c,u,f){if(u!=="1")throw new TypeError("props must be 1");return h.o.l=f,!0}})}copy(){return new Tp(this.o,this.h,this.container,this.iteratorType)}},o=class extends t.HashContainer{constructor(l=[]){super();let h=this;l.forEach(function(c){h.setElement(c[0],c[1])})}begin(){return new s(this.p,this.h,this)}end(){return new s(this.h,this.h,this)}rBegin(){return new s(this._,this.h,this,1)}rEnd(){return new s(this.h,this.h,this,1)}front(){if(this.i!==0)return[this.p.u,this.p.l]}back(){if(this.i!==0)return[this._.u,this._.l]}setElement(l,h,c){return this.M(l,h,c)}getElementByKey(l,h){if(h===void 0&&(h=(0,i.default)(l)),h){let u=l[this.HASH_TAG];return u!==void 0?this.H[u].l:void 0}let c=this.g[l];return c?c.l:void 0}getElementByPos(l){if(l<0||l>this.i-1)throw new RangeError;let h=this.p;for(;l--;)h=h.B;return[h.u,h.l]}find(l,h){let c=this.I(l,h);return new s(c,this.h,this)}forEach(l){let h=0,c=this.p;for(;c!==this.h;)l([c.u,c.l],h++,this),c=c.B}[Symbol.iterator](){return(function*(){let l=this.p;for(;l!==this.h;)yield[l.u,l.l],l=l.B}).bind(this)()}},a=o;e.default=a}),Mb=vt(e=>{dt(),gt(),pt(),Object.defineProperty(e,"t",{value:!0}),Object.defineProperty(e,"Deque",{enumerable:!0,get:function(){return o.default}}),Object.defineProperty(e,"HashMap",{enumerable:!0,get:function(){return c.default}}),Object.defineProperty(e,"HashSet",{enumerable:!0,get:function(){return h.default}}),Object.defineProperty(e,"LinkList",{enumerable:!0,get:function(){return s.default}}),Object.defineProperty(e,"OrderedMap",{enumerable:!0,get:function(){return l.default}}),Object.defineProperty(e,"OrderedSet",{enumerable:!0,get:function(){return a.default}}),Object.defineProperty(e,"PriorityQueue",{enumerable:!0,get:function(){return n.default}}),Object.defineProperty(e,"Queue",{enumerable:!0,get:function(){return i.default}}),Object.defineProperty(e,"Stack",{enumerable:!0,get:function(){return t.default}}),Object.defineProperty(e,"Vector",{enumerable:!0,get:function(){return r.default}});var t=u(gb()),i=u(mb()),n=u(bb()),r=u(yb()),s=u(_b()),o=u(wb()),a=u(Sb()),l=u(xb()),h=u(kb()),c=u(Eb());function u(f){return f&&f.t?f:{default:f}}}),Ab=vt((e,t)=>{dt(),gt(),pt();var i=Mb().OrderedSet,n=hn()("number-allocator:trace"),r=hn()("number-allocator:error");function s(a,l){this.low=a,this.high=l}s.prototype.equals=function(a){return this.low===a.low&&this.high===a.high},s.prototype.compare=function(a){return this.low<a.low&&this.high<a.low?-1:a.low<this.low&&a.high<this.low?1:0};function o(a,l){if(!(this instanceof o))return new o(a,l);this.min=a,this.max=l,this.ss=new i([],(h,c)=>h.compare(c)),n("Create"),this.clear()}o.prototype.firstVacant=function(){return this.ss.size()===0?null:this.ss.front().low},o.prototype.alloc=function(){if(this.ss.size()===0)return n("alloc():empty"),null;let a=this.ss.begin(),l=a.pointer.low,h=a.pointer.high,c=l;return c+1<=h?this.ss.updateKeyByIterator(a,new s(l+1,h)):this.ss.eraseElementByPos(0),n("alloc():"+c),c},o.prototype.use=function(a){let l=new s(a,a),h=this.ss.lowerBound(l);if(!h.equals(this.ss.end())){let c=h.pointer.low,u=h.pointer.high;return h.pointer.equals(l)?(this.ss.eraseElementByIterator(h),n("use():"+a),!0):c>a?!1:c===a?(this.ss.updateKeyByIterator(h,new s(c+1,u)),n("use():"+a),!0):u===a?(this.ss.updateKeyByIterator(h,new s(c,u-1)),n("use():"+a),!0):(this.ss.updateKeyByIterator(h,new s(a+1,u)),this.ss.insert(new s(c,a-1)),n("use():"+a),!0)}return n("use():failed"),!1},o.prototype.free=function(a){if(a<this.min||a>this.max){r("free():"+a+" is out of range");return}let l=new s(a,a),h=this.ss.upperBound(l);if(h.equals(this.ss.end())){if(h.equals(this.ss.begin())){this.ss.insert(l);return}h.pre();let c=h.pointer.high;h.pointer.high+1===a?this.ss.updateKeyByIterator(h,new s(c,a)):this.ss.insert(l)}else if(h.equals(this.ss.begin()))if(a+1===h.pointer.low){let c=h.pointer.high;this.ss.updateKeyByIterator(h,new s(a,c))}else this.ss.insert(l);else{let c=h.pointer.low,u=h.pointer.high;h.pre();let f=h.pointer.low;h.pointer.high+1===a?a+1===c?(this.ss.eraseElementByIterator(h),this.ss.updateKeyByIterator(h,new s(f,u))):this.ss.updateKeyByIterator(h,new s(f,a)):a+1===c?(this.ss.eraseElementByIterator(h.next()),this.ss.insert(new s(a,u))):this.ss.insert(l)}n("free():"+a)},o.prototype.clear=function(){n("clear()"),this.ss.clear(),this.ss.insert(new s(this.min,this.max))},o.prototype.intervalCount=function(){return this.ss.size()},o.prototype.dump=function(){console.log("length:"+this.ss.size());for(let a of this.ss)console.log(a)},t.exports=o}),Op=vt((e,t)=>{dt(),gt(),pt();var i=Ab();t.exports.NumberAllocator=i}),Tb=vt(e=>{dt(),gt(),pt(),Object.defineProperty(e,"__esModule",{value:!0});var t=pb(),i=Op(),n=class{constructor(r){r>0&&(this.aliasToTopic=new t.LRUCache({max:r}),this.topicToAlias={},this.numberAllocator=new i.NumberAllocator(1,r),this.max=r,this.length=0)}put(r,s){if(s===0||s>this.max)return!1;let o=this.aliasToTopic.get(s);return o&&delete this.topicToAlias[o],this.aliasToTopic.set(s,r),this.topicToAlias[r]=s,this.numberAllocator.use(s),this.length=this.aliasToTopic.size,!0}getTopicByAlias(r){return this.aliasToTopic.get(r)}getAliasByTopic(r){let s=this.topicToAlias[r];return typeof s<"u"&&this.aliasToTopic.get(s),s}clear(){this.aliasToTopic.clear(),this.topicToAlias={},this.numberAllocator.clear(),this.length=0}getLruAlias(){return this.numberAllocator.firstVacant()||[...this.aliasToTopic.keys()][this.aliasToTopic.size-1]}};e.default=n}),Ob=vt(e=>{dt(),gt(),pt();var t=e&&e.__importDefault||function(o){return o&&o.__esModule?o:{default:o}};Object.defineProperty(e,"__esModule",{value:!0});var i=oa(),n=t(Tb()),r=Br(),s=(o,a)=>{o.log("_handleConnack");let{options:l}=o,h=l.protocolVersion===5?a.reasonCode:a.returnCode;if(clearTimeout(o.connackTimer),delete o.topicAliasSend,a.properties){if(a.properties.topicAliasMaximum){if(a.properties.topicAliasMaximum>65535){o.emit("error",new Error("topicAliasMaximum from broker is out of range"));return}a.properties.topicAliasMaximum>0&&(o.topicAliasSend=new n.default(a.properties.topicAliasMaximum))}a.properties.serverKeepAlive&&l.keepalive&&(l.keepalive=a.properties.serverKeepAlive),a.properties.maximumPacketSize&&(l.properties||(l.properties={}),l.properties.maximumPacketSize=a.properties.maximumPacketSize)}if(h===0)o.reconnecting=!1,o._onConnect(a);else if(h>0){let c=new r.ErrorWithReasonCode(`Connection refused: ${i.ReasonCodes[h]}`,h);o.emit("error",c),o.options.reconnectOnConnackError&&o._cleanUp(!0)}};e.default=s}),Pb=vt(e=>{dt(),gt(),pt(),Object.defineProperty(e,"__esModule",{value:!0});var t=(i,n,r)=>{i.log("handling pubrel packet");let s=typeof r<"u"?r:i.noop,{messageId:o}=n,a={cmd:"pubcomp",messageId:o};i.incomingStore.get(n,(l,h)=>{l?i._sendPacket(a,s):(i.emit("message",h.topic,h.payload,h),i.handleMessage(h,c=>{if(c)return s(c);i.incomingStore.del(h,i.noop),i._sendPacket(a,s)}))})};e.default=t}),Cb=vt(e=>{dt(),gt(),pt();var t=e&&e.__importDefault||function(l){return l&&l.__esModule?l:{default:l}};Object.defineProperty(e,"__esModule",{value:!0});var i=t(ub()),n=t(db()),r=t(Ob()),s=t(oa()),o=t(Pb()),a=(l,h,c)=>{let{options:u}=l;if(u.protocolVersion===5&&u.properties&&u.properties.maximumPacketSize&&u.properties.maximumPacketSize<h.length)return l.emit("error",new Error(`exceeding packets size ${h.cmd}`)),l.end({reasonCode:149,properties:{reasonString:"Maximum packet size was exceeded"}}),l;switch(l.log("_handlePacket :: emitting packetreceive"),l.emit("packetreceive",h),h.cmd){case"publish":(0,i.default)(l,h,c);break;case"puback":case"pubrec":case"pubcomp":case"suback":case"unsuback":l.reschedulePing(),(0,s.default)(l,h),c();break;case"pubrel":l.reschedulePing(),(0,o.default)(l,h,c);break;case"connack":(0,r.default)(l,h),c();break;case"auth":l.reschedulePing(),(0,n.default)(l,h),c();break;case"pingresp":l.log("_handlePacket :: received pingresp"),l.reschedulePing(!0),c();break;case"disconnect":l.emit("disconnect",h),c();break;default:l.log("_handlePacket :: unknown command"),c();break}};e.default=a}),Ib=vt(e=>{dt(),gt(),pt();var t=e&&e.__importDefault||function(s){return s&&s.__esModule?s:{default:s}};Object.defineProperty(e,"__esModule",{value:!0}),e.TypedEventEmitter=void 0;var i=t((Lr(),ae(dr))),n=Br(),r=class{};e.TypedEventEmitter=r,(0,n.applyMixin)(r,i.default)}),aa=vt(e=>{dt(),gt(),pt(),Object.defineProperty(e,"__esModule",{value:!0}),e.isReactNativeBrowser=e.isWebWorker=void 0;var t=()=>{var s;return typeof window<"u"?typeof navigator<"u"&&((s=navigator.userAgent)===null||s===void 0?void 0:s.toLowerCase().indexOf(" electron/"))>-1&&Zt!=null&&Zt.versions?!Object.prototype.hasOwnProperty.call(Zt.versions,"electron"):typeof window.document<"u":!1},i=()=>{var s,o;return!!(typeof self=="object"&&!((o=(s=self==null?void 0:self.constructor)===null||s===void 0?void 0:s.name)===null||o===void 0)&&o.includes("WorkerGlobalScope"))},n=()=>typeof navigator<"u"&&navigator.product==="ReactNative",r=t()||i()||n();e.isWebWorker=i(),e.isReactNativeBrowser=n(),e.default=r}),Rb=vt((e,t)=>{dt(),gt(),pt(),function(i,n){typeof e=="object"&&typeof t<"u"?n(e):typeof define=="function"&&define.amd?define(["exports"],n):(i=typeof globalThis<"u"?globalThis:i||self,n(i.fastUniqueNumbers={}))}(e,function(i){var n=function(d){return function(g){var y=d(g);return g.add(y),y}},r=function(d){return function(g,y){return d.set(g,y),y}},s=Number.MAX_SAFE_INTEGER===void 0?9007199254740991:Number.MAX_SAFE_INTEGER,o=536870912,a=o*2,l=function(d,g){return function(y){var _=g.get(y),w=_===void 0?y.size:_<a?_+1:0;if(!y.has(w))return d(y,w);if(y.size<o){for(;y.has(w);)w=Math.floor(Math.random()*a);return d(y,w)}if(y.size>s)throw new Error("Congratulations, you created a collection of unique numbers which uses all available integers!");for(;y.has(w);)w=Math.floor(Math.random()*s);return d(y,w)}},h=new WeakMap,c=r(h),u=l(c,h),f=n(u);i.addUniqueNumber=f,i.generateUniqueNumber=u})}),Db=vt((e,t)=>{dt(),gt(),pt(),function(i,n){typeof e=="object"&&typeof t<"u"?n(e,Rb()):typeof define=="function"&&define.amd?define(["exports","fast-unique-numbers"],n):(i=typeof globalThis<"u"?globalThis:i||self,n(i.workerTimersBroker={},i.fastUniqueNumbers))}(e,function(i,n){var r=function(a){return a.method!==void 0&&a.method==="call"},s=function(a){return a.error===null&&typeof a.id=="number"},o=function(a){var l=new Map([[0,function(){}]]),h=new Map([[0,function(){}]]),c=new Map,u=new Worker(a);u.addEventListener("message",function(_){var w=_.data;if(r(w)){var v=w.params,S=v.timerId,T=v.timerType;if(T==="interval"){var O=l.get(S);if(typeof O=="number"){var k=c.get(O);if(k===void 0||k.timerId!==S||k.timerType!==T)throw new Error("The timer is in an undefined state.")}else if(typeof O<"u")O();else throw new Error("The timer is in an undefined state.")}else if(T==="timeout"){var M=h.get(S);if(typeof M=="number"){var A=c.get(M);if(A===void 0||A.timerId!==S||A.timerType!==T)throw new Error("The timer is in an undefined state.")}else if(typeof M<"u")M(),h.delete(S);else throw new Error("The timer is in an undefined state.")}}else if(s(w)){var B=w.id,q=c.get(B);if(q===void 0)throw new Error("The timer is in an undefined state.");var $=q.timerId,x=q.timerType;c.delete(B),x==="interval"?l.delete($):h.delete($)}else{var z=w.error.message;throw new Error(z)}});var f=function(_){var w=n.generateUniqueNumber(c);c.set(w,{timerId:_,timerType:"interval"}),l.set(_,w),u.postMessage({id:w,method:"clear",params:{timerId:_,timerType:"interval"}})},d=function(_){var w=n.generateUniqueNumber(c);c.set(w,{timerId:_,timerType:"timeout"}),h.set(_,w),u.postMessage({id:w,method:"clear",params:{timerId:_,timerType:"timeout"}})},g=function(_){var w=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,v=n.generateUniqueNumber(l);return l.set(v,function(){_(),typeof l.get(v)=="function"&&u.postMessage({id:null,method:"set",params:{delay:w,now:performance.now(),timerId:v,timerType:"interval"}})}),u.postMessage({id:null,method:"set",params:{delay:w,now:performance.now(),timerId:v,timerType:"interval"}}),v},y=function(_){var w=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,v=n.generateUniqueNumber(h);return h.set(v,_),u.postMessage({id:null,method:"set",params:{delay:w,now:performance.now(),timerId:v,timerType:"timeout"}}),v};return{clearInterval:f,clearTimeout:d,setInterval:g,setTimeout:y}};i.load=o})}),Lb=vt((e,t)=>{dt(),gt(),pt(),function(i,n){typeof e=="object"&&typeof t<"u"?n(e,Db()):typeof define=="function"&&define.amd?define(["exports","worker-timers-broker"],n):(i=typeof globalThis<"u"?globalThis:i||self,n(i.workerTimers={},i.workerTimersBroker))}(e,function(i,n){var r=function(u,f){var d=null;return function(){if(d!==null)return d;var g=new Blob([f],{type:"application/javascript; charset=utf-8"}),y=URL.createObjectURL(g);return d=u(y),setTimeout(function(){return URL.revokeObjectURL(y)}),d}},s=`(()=>{var e={472:(e,t,r)=>{var o,i;void 0===(i="function"==typeof(o=function(){"use strict";var e=new Map,t=new Map,r=function(t){var r=e.get(t);if(void 0===r)throw new Error('There is no interval scheduled with the given id "'.concat(t,'".'));clearTimeout(r),e.delete(t)},o=function(e){var r=t.get(e);if(void 0===r)throw new Error('There is no timeout scheduled with the given id "'.concat(e,'".'));clearTimeout(r),t.delete(e)},i=function(e,t){var r,o=performance.now();return{expected:o+(r=e-Math.max(0,o-t)),remainingDelay:r}},n=function e(t,r,o,i){var n=performance.now();n>o?postMessage({id:null,method:"call",params:{timerId:r,timerType:i}}):t.set(r,setTimeout(e,o-n,t,r,o,i))},a=function(t,r,o){var a=i(t,o),s=a.expected,d=a.remainingDelay;e.set(r,setTimeout(n,d,e,r,s,"interval"))},s=function(e,r,o){var a=i(e,o),s=a.expected,d=a.remainingDelay;t.set(r,setTimeout(n,d,t,r,s,"timeout"))};addEventListener("message",(function(e){var t=e.data;try{if("clear"===t.method){var i=t.id,n=t.params,d=n.timerId,c=n.timerType;if("interval"===c)r(d),postMessage({error:null,id:i});else{if("timeout"!==c)throw new Error('The given type "'.concat(c,'" is not supported'));o(d),postMessage({error:null,id:i})}}else{if("set"!==t.method)throw new Error('The given method "'.concat(t.method,'" is not supported'));var u=t.params,l=u.delay,p=u.now,m=u.timerId,v=u.timerType;if("interval"===v)a(l,m,p);else{if("timeout"!==v)throw new Error('The given type "'.concat(v,'" is not supported'));s(l,m,p)}}}catch(e){postMessage({error:{message:e.message},id:t.id,result:null})}}))})?o.call(t,r,t,e):o)||(e.exports=i)}},t={};function r(o){var i=t[o];if(void 0!==i)return i.exports;var n=t[o]={exports:{}};return e[o](n,n.exports,r),n.exports}r.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return r.d(t,{a:t}),t},r.d=(e,t)=>{for(var o in t)r.o(t,o)&&!r.o(e,o)&&Object.defineProperty(e,o,{enumerable:!0,get:t[o]})},r.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),(()=>{"use strict";r(472)})()})();`,o=r(n.load,s),a=function(u){return o().clearInterval(u)},l=function(u){return o().clearTimeout(u)},h=function(){var u;return(u=o()).setInterval.apply(u,arguments)},c=function(){var u;return(u=o()).setTimeout.apply(u,arguments)};i.clearInterval=a,i.clearTimeout=l,i.setInterval=h,i.setTimeout=c})}),Bb=vt(e=>{dt(),gt(),pt();var t=e&&e.__createBinding||(Object.create?function(h,c,u,f){f===void 0&&(f=u);var d=Object.getOwnPropertyDescriptor(c,u);(!d||("get"in d?!c.__esModule:d.writable||d.configurable))&&(d={enumerable:!0,get:function(){return c[u]}}),Object.defineProperty(h,f,d)}:function(h,c,u,f){f===void 0&&(f=u),h[f]=c[u]}),i=e&&e.__setModuleDefault||(Object.create?function(h,c){Object.defineProperty(h,"default",{enumerable:!0,value:c})}:function(h,c){h.default=c}),n=e&&e.__importStar||function(h){if(h&&h.__esModule)return h;var c={};if(h!=null)for(var u in h)u!=="default"&&Object.prototype.hasOwnProperty.call(h,u)&&t(c,h,u);return i(c,h),c};Object.defineProperty(e,"__esModule",{value:!0});var r=n(aa()),s=Lb(),o={set:s.setInterval,clear:s.clearInterval},a={set:(h,c)=>setInterval(h,c),clear:h=>clearInterval(h)},l=h=>{switch(h){case"native":return a;case"worker":return o;case"auto":default:return r.default&&!r.isWebWorker&&!r.isReactNativeBrowser?o:a}};e.default=l}),Pp=vt(e=>{dt(),gt(),pt();var t=e&&e.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(e,"__esModule",{value:!0});var i=t(Bb()),n=class{get keepaliveTimeoutTimestamp(){return this._keepaliveTimeoutTimestamp}get intervalEvery(){return this._intervalEvery}get keepalive(){return this._keepalive}constructor(r,s){this.destroyed=!1,this.client=r,this.timer=typeof s=="object"&&"set"in s&&"clear"in s?s:(0,i.default)(s),this.setKeepalive(r.options.keepalive)}clear(){this.timerId&&(this.timer.clear(this.timerId),this.timerId=null)}setKeepalive(r){if(r*=1e3,isNaN(r)||r<=0||r>2147483647)throw new Error(`Keepalive value must be an integer between 0 and 2147483647. Provided value is ${r}`);this._keepalive=r,this.reschedule(),this.client.log(`KeepaliveManager: set keepalive to ${r}ms`)}destroy(){this.clear(),this.destroyed=!0}reschedule(){if(this.destroyed)return;this.clear(),this.counter=0;let r=Math.ceil(this._keepalive*1.5);this._keepaliveTimeoutTimestamp=Date.now()+r,this._intervalEvery=Math.ceil(this._keepalive/2),this.timerId=this.timer.set(()=>{this.destroyed||(this.counter+=1,this.counter===2?this.client.sendPing():this.counter>2&&this.client.onKeepaliveTimeout())},this._intervalEvery)}};e.default=n}),_h=vt(e=>{dt(),gt(),pt();var t=e&&e.__createBinding||(Object.create?function(O,k,M,A){A===void 0&&(A=M);var B=Object.getOwnPropertyDescriptor(k,M);(!B||("get"in B?!k.__esModule:B.writable||B.configurable))&&(B={enumerable:!0,get:function(){return k[M]}}),Object.defineProperty(O,A,B)}:function(O,k,M,A){A===void 0&&(A=M),O[A]=k[M]}),i=e&&e.__setModuleDefault||(Object.create?function(O,k){Object.defineProperty(O,"default",{enumerable:!0,value:k})}:function(O,k){O.default=k}),n=e&&e.__importStar||function(O){if(O&&O.__esModule)return O;var k={};if(O!=null)for(var M in O)M!=="default"&&Object.prototype.hasOwnProperty.call(O,M)&&t(k,O,M);return i(k,O),k},r=e&&e.__importDefault||function(O){return O&&O.__esModule?O:{default:O}};Object.defineProperty(e,"__esModule",{value:!0});var s=r(E0()),o=r(ab()),a=r(dp()),l=pr(),h=r(hb()),c=n(cb()),u=r(hn()),f=r(pp()),d=r(Cb()),g=Br(),y=Ib(),_=r(Pp()),w=n(aa()),v=globalThis.setImmediate||((...O)=>{let k=O.shift();(0,g.nextTick)(()=>{k(...O)})}),S={keepalive:60,reschedulePings:!0,protocolId:"MQTT",protocolVersion:4,reconnectPeriod:1e3,connectTimeout:30*1e3,clean:!0,resubscribe:!0,writeCache:!0,timerVariant:"auto"},T=class wh extends y.TypedEventEmitter{static defaultId(){return`mqttjs_${Math.random().toString(16).substr(2,8)}`}constructor(k,M){super(),this.options=M||{};for(let A in S)typeof this.options[A]>"u"?this.options[A]=S[A]:this.options[A]=M[A];this.log=this.options.log||(0,u.default)("mqttjs:client"),this.noop=this._noop.bind(this),this.log("MqttClient :: version:",wh.VERSION),w.isWebWorker?this.log("MqttClient :: environment","webworker"):this.log("MqttClient :: environment",w.default?"browser":"node"),this.log("MqttClient :: options.protocol",M.protocol),this.log("MqttClient :: options.protocolVersion",M.protocolVersion),this.log("MqttClient :: options.username",M.username),this.log("MqttClient :: options.keepalive",M.keepalive),this.log("MqttClient :: options.reconnectPeriod",M.reconnectPeriod),this.log("MqttClient :: options.rejectUnauthorized",M.rejectUnauthorized),this.log("MqttClient :: options.properties.topicAliasMaximum",M.properties?M.properties.topicAliasMaximum:void 0),this.options.clientId=typeof M.clientId=="string"?M.clientId:wh.defaultId(),this.log("MqttClient :: clientId",this.options.clientId),this.options.customHandleAcks=M.protocolVersion===5&&M.customHandleAcks?M.customHandleAcks:(...A)=>{A[3](null,0)},this.options.writeCache||(o.default.writeToStream.cacheNumbers=!1),this.streamBuilder=k,this.messageIdProvider=typeof this.options.messageIdProvider>"u"?new a.default:this.options.messageIdProvider,this.outgoingStore=M.outgoingStore||new f.default,this.incomingStore=M.incomingStore||new f.default,this.queueQoSZero=M.queueQoSZero===void 0?!0:M.queueQoSZero,this._resubscribeTopics={},this.messageIdToTopic={},this.keepaliveManager=null,this.connected=!1,this.disconnecting=!1,this.reconnecting=!1,this.queue=[],this.connackTimer=null,this.reconnectTimer=null,this._storeProcessing=!1,this._packetIdsDuringStoreProcessing={},this._storeProcessingQueue=[],this.outgoing={},this._firstConnection=!0,M.properties&&M.properties.topicAliasMaximum>0&&(M.properties.topicAliasMaximum>65535?this.log("MqttClient :: options.properties.topicAliasMaximum is out of range"):this.topicAliasRecv=new s.default(M.properties.topicAliasMaximum)),this.on("connect",()=>{let{queue:A}=this,B=()=>{let q=A.shift();this.log("deliver :: entry %o",q);let $=null;if(!q){this._resubscribe();return}$=q.packet,this.log("deliver :: call _sendPacket for %o",$);let x=!0;$.messageId&&$.messageId!==0&&(this.messageIdProvider.register($.messageId)||(x=!1)),x?this._sendPacket($,z=>{q.cb&&q.cb(z),B()}):(this.log("messageId: %d has already used. The message is skipped and removed.",$.messageId),B())};this.log("connect :: sending queued packets"),B()}),this.on("close",()=>{this.log("close :: connected set to `false`"),this.connected=!1,this.log("close :: clearing connackTimer"),clearTimeout(this.connackTimer),this._destroyKeepaliveManager(),this.topicAliasRecv&&this.topicAliasRecv.clear(),this.log("close :: calling _setupReconnect"),this._setupReconnect()}),this.options.manualConnect||(this.log("MqttClient :: setting up stream"),this.connect())}handleAuth(k,M){M()}handleMessage(k,M){M()}_nextId(){return this.messageIdProvider.allocate()}getLastMessageId(){return this.messageIdProvider.getLastAllocated()}connect(){var k;let M=new l.Writable,A=o.default.parser(this.options),B=null,q=[];this.log("connect :: calling method to clear reconnect"),this._clearReconnect(),this.disconnected&&!this.reconnecting&&(this.incomingStore=this.options.incomingStore||new f.default,this.outgoingStore=this.options.outgoingStore||new f.default,this.disconnecting=!1,this.disconnected=!1),this.log("connect :: using streamBuilder provided to client to create stream"),this.stream=this.streamBuilder(this),A.on("packet",V=>{this.log("parser :: on packet push to packets array."),q.push(V)});let $=()=>{this.log("work :: getting next packet in queue");let V=q.shift();if(V)this.log("work :: packet pulled from queue"),(0,d.default)(this,V,x);else{this.log("work :: no packets in queue");let rt=B;B=null,this.log("work :: done flag is %s",!!rt),rt&&rt()}},x=()=>{if(q.length)(0,g.nextTick)($);else{let V=B;B=null,V()}};M._write=(V,rt,J)=>{B=J,this.log("writable stream :: parsing buffer"),A.parse(V),$()};let z=V=>{this.log("streamErrorHandler :: error",V.message),V.code?(this.log("streamErrorHandler :: emitting error"),this.emit("error",V)):this.noop(V)};this.log("connect :: pipe stream to writable stream"),this.stream.pipe(M),this.stream.on("error",z),this.stream.on("close",()=>{this.log("(%s)stream :: on close",this.options.clientId),this._flushVolatile(),this.log("stream: emit close to MqttClient"),this.emit("close")}),this.log("connect: sending packet `connect`");let X={cmd:"connect",protocolId:this.options.protocolId,protocolVersion:this.options.protocolVersion,clean:this.options.clean,clientId:this.options.clientId,keepalive:this.options.keepalive,username:this.options.username,password:this.options.password,properties:this.options.properties};if(this.options.will&&(X.will=Object.assign(Object.assign({},this.options.will),{payload:(k=this.options.will)===null||k===void 0?void 0:k.payload})),this.topicAliasRecv&&(X.properties||(X.properties={}),this.topicAliasRecv&&(X.properties.topicAliasMaximum=this.topicAliasRecv.max)),this._writePacket(X),A.on("error",this.emit.bind(this,"error")),this.options.properties){if(!this.options.properties.authenticationMethod&&this.options.properties.authenticationData)return this.end(()=>this.emit("error",new Error("Packet has no Authentication Method"))),this;if(this.options.properties.authenticationMethod&&this.options.authPacket&&typeof this.options.authPacket=="object"){let V=Object.assign({cmd:"auth",reasonCode:0},this.options.authPacket);this._writePacket(V)}}return this.stream.setMaxListeners(1e3),clearTimeout(this.connackTimer),this.connackTimer=setTimeout(()=>{this.log("!!connectTimeout hit!! Calling _cleanUp with force `true`"),this.emit("error",new Error("connack timeout")),this._cleanUp(!0)},this.options.connectTimeout),this}publish(k,M,A,B){this.log("publish :: message `%s` to topic `%s`",M,k);let{options:q}=this;typeof A=="function"&&(B=A,A=null),A=A||{},A=Object.assign(Object.assign({},{qos:0,retain:!1,dup:!1}),A);let{qos:$,retain:x,dup:z,properties:X,cbStorePut:V}=A;if(this._checkDisconnecting(B))return this;let rt=()=>{let J=0;if(($===1||$===2)&&(J=this._nextId(),J===null))return this.log("No messageId left"),!1;let H={cmd:"publish",topic:k,payload:M,qos:$,retain:x,messageId:J,dup:z};switch(q.protocolVersion===5&&(H.properties=X),this.log("publish :: qos",$),$){case 1:case 2:this.outgoing[H.messageId]={volatile:!1,cb:B||this.noop},this.log("MqttClient:publish: packet cmd: %s",H.cmd),this._sendPacket(H,void 0,V);break;default:this.log("MqttClient:publish: packet cmd: %s",H.cmd),this._sendPacket(H,B,V);break}return!0};return(this._storeProcessing||this._storeProcessingQueue.length>0||!rt())&&this._storeProcessingQueue.push({invoke:rt,cbStorePut:A.cbStorePut,callback:B}),this}publishAsync(k,M,A){return new Promise((B,q)=>{this.publish(k,M,A,($,x)=>{$?q($):B(x)})})}subscribe(k,M,A){let B=this.options.protocolVersion;typeof M=="function"&&(A=M),A=A||this.noop;let q=!1,$=[];typeof k=="string"?(k=[k],$=k):Array.isArray(k)?$=k:typeof k=="object"&&(q=k.resubscribe,delete k.resubscribe,$=Object.keys(k));let x=c.validateTopics($);if(x!==null)return v(A,new Error(`Invalid topic ${x}`)),this;if(this._checkDisconnecting(A))return this.log("subscribe: discconecting true"),this;let z={qos:0};B===5&&(z.nl=!1,z.rap=!1,z.rh=0),M=Object.assign(Object.assign({},z),M);let X=M.properties,V=[],rt=(H,ht)=>{if(ht=ht||M,!Object.prototype.hasOwnProperty.call(this._resubscribeTopics,H)||this._resubscribeTopics[H].qos<ht.qos||q){let nt={topic:H,qos:ht.qos};B===5&&(nt.nl=ht.nl,nt.rap=ht.rap,nt.rh=ht.rh,nt.properties=X),this.log("subscribe: pushing topic `%s` and qos `%s` to subs list",nt.topic,nt.qos),V.push(nt)}};if(Array.isArray(k)?k.forEach(H=>{this.log("subscribe: array topic %s",H),rt(H)}):Object.keys(k).forEach(H=>{this.log("subscribe: object topic %s, %o",H,k[H]),rt(H,k[H])}),!V.length)return A(null,[]),this;let J=()=>{let H=this._nextId();if(H===null)return this.log("No messageId left"),!1;let ht={cmd:"subscribe",subscriptions:V,messageId:H};if(X&&(ht.properties=X),this.options.resubscribe){this.log("subscribe :: resubscribe true");let nt=[];V.forEach(xt=>{if(this.options.reconnectPeriod>0){let I={qos:xt.qos};B===5&&(I.nl=xt.nl||!1,I.rap=xt.rap||!1,I.rh=xt.rh||0,I.properties=xt.properties),this._resubscribeTopics[xt.topic]=I,nt.push(xt.topic)}}),this.messageIdToTopic[ht.messageId]=nt}return this.outgoing[ht.messageId]={volatile:!0,cb(nt,xt){if(!nt){let{granted:I}=xt;for(let K=0;K<I.length;K+=1)V[K].qos=I[K]}A(nt,V,xt)}},this.log("subscribe :: call _sendPacket"),this._sendPacket(ht),!0};return(this._storeProcessing||this._storeProcessingQueue.length>0||!J())&&this._storeProcessingQueue.push({invoke:J,callback:A}),this}subscribeAsync(k,M){return new Promise((A,B)=>{this.subscribe(k,M,(q,$)=>{q?B(q):A($)})})}unsubscribe(k,M,A){typeof k=="string"&&(k=[k]),typeof M=="function"&&(A=M),A=A||this.noop;let B=c.validateTopics(k);if(B!==null)return v(A,new Error(`Invalid topic ${B}`)),this;if(this._checkDisconnecting(A))return this;let q=()=>{let $=this._nextId();if($===null)return this.log("No messageId left"),!1;let x={cmd:"unsubscribe",messageId:$,unsubscriptions:[]};return typeof k=="string"?x.unsubscriptions=[k]:Array.isArray(k)&&(x.unsubscriptions=k),this.options.resubscribe&&x.unsubscriptions.forEach(z=>{delete this._resubscribeTopics[z]}),typeof M=="object"&&M.properties&&(x.properties=M.properties),this.outgoing[x.messageId]={volatile:!0,cb:A},this.log("unsubscribe: call _sendPacket"),this._sendPacket(x),!0};return(this._storeProcessing||this._storeProcessingQueue.length>0||!q())&&this._storeProcessingQueue.push({invoke:q,callback:A}),this}unsubscribeAsync(k,M){return new Promise((A,B)=>{this.unsubscribe(k,M,(q,$)=>{q?B(q):A($)})})}end(k,M,A){this.log("end :: (%s)",this.options.clientId),(k==null||typeof k!="boolean")&&(A=A||M,M=k,k=!1),typeof M!="object"&&(A=A||M,M=null),this.log("end :: cb? %s",!!A),(!A||typeof A!="function")&&(A=this.noop);let B=()=>{this.log("end :: closeStores: closing incoming and outgoing stores"),this.disconnected=!0,this.incomingStore.close($=>{this.outgoingStore.close(x=>{if(this.log("end :: closeStores: emitting end"),this.emit("end"),A){let z=$||x;this.log("end :: closeStores: invoking callback with args"),A(z)}})}),this._deferredReconnect?this._deferredReconnect():(this.options.reconnectPeriod===0||this.options.manualConnect)&&(this.disconnecting=!1)},q=()=>{this.log("end :: (%s) :: finish :: calling _cleanUp with force %s",this.options.clientId,k),this._cleanUp(k,()=>{this.log("end :: finish :: calling process.nextTick on closeStores"),(0,g.nextTick)(B)},M)};return this.disconnecting?(A(),this):(this._clearReconnect(),this.disconnecting=!0,!k&&Object.keys(this.outgoing).length>0?(this.log("end :: (%s) :: calling finish in 10ms once outgoing is empty",this.options.clientId),this.once("outgoingEmpty",setTimeout.bind(null,q,10))):(this.log("end :: (%s) :: immediately calling finish",this.options.clientId),q()),this)}endAsync(k,M){return new Promise((A,B)=>{this.end(k,M,q=>{q?B(q):A()})})}removeOutgoingMessage(k){if(this.outgoing[k]){let{cb:M}=this.outgoing[k];this._removeOutgoingAndStoreMessage(k,()=>{M(new Error("Message removed"))})}return this}reconnect(k){this.log("client reconnect");let M=()=>{k?(this.options.incomingStore=k.incomingStore,this.options.outgoingStore=k.outgoingStore):(this.options.incomingStore=null,this.options.outgoingStore=null),this.incomingStore=this.options.incomingStore||new f.default,this.outgoingStore=this.options.outgoingStore||new f.default,this.disconnecting=!1,this.disconnected=!1,this._deferredReconnect=null,this._reconnect()};return this.disconnecting&&!this.disconnected?this._deferredReconnect=M:M(),this}_flushVolatile(){this.outgoing&&(this.log("_flushVolatile :: deleting volatile messages from the queue and setting their callbacks as error function"),Object.keys(this.outgoing).forEach(k=>{this.outgoing[k].volatile&&typeof this.outgoing[k].cb=="function"&&(this.outgoing[k].cb(new Error("Connection closed")),delete this.outgoing[k])}))}_flush(){this.outgoing&&(this.log("_flush: queue exists? %b",!!this.outgoing),Object.keys(this.outgoing).forEach(k=>{typeof this.outgoing[k].cb=="function"&&(this.outgoing[k].cb(new Error("Connection closed")),delete this.outgoing[k])}))}_removeTopicAliasAndRecoverTopicName(k){let M;k.properties&&(M=k.properties.topicAlias);let A=k.topic.toString();if(this.log("_removeTopicAliasAndRecoverTopicName :: alias %d, topic %o",M,A),A.length===0){if(typeof M>"u")return new Error("Unregistered Topic Alias");if(A=this.topicAliasSend.getTopicByAlias(M),typeof A>"u")return new Error("Unregistered Topic Alias");k.topic=A}M&&delete k.properties.topicAlias}_checkDisconnecting(k){return this.disconnecting&&(k&&k!==this.noop?k(new Error("client disconnecting")):this.emit("error",new Error("client disconnecting"))),this.disconnecting}_reconnect(){this.log("_reconnect: emitting reconnect to client"),this.emit("reconnect"),this.connected?(this.end(()=>{this.connect()}),this.log("client already connected. disconnecting first.")):(this.log("_reconnect: calling connect"),this.connect())}_setupReconnect(){!this.disconnecting&&!this.reconnectTimer&&this.options.reconnectPeriod>0?(this.reconnecting||(this.log("_setupReconnect :: emit `offline` state"),this.emit("offline"),this.log("_setupReconnect :: set `reconnecting` to `true`"),this.reconnecting=!0),this.log("_setupReconnect :: setting reconnectTimer for %d ms",this.options.reconnectPeriod),this.reconnectTimer=setInterval(()=>{this.log("reconnectTimer :: reconnect triggered!"),this._reconnect()},this.options.reconnectPeriod)):this.log("_setupReconnect :: doing nothing...")}_clearReconnect(){this.log("_clearReconnect : clearing reconnect timer"),this.reconnectTimer&&(clearInterval(this.reconnectTimer),this.reconnectTimer=null)}_cleanUp(k,M,A={}){if(M&&(this.log("_cleanUp :: done callback provided for on stream close"),this.stream.on("close",M)),this.log("_cleanUp :: forced? %s",k),k)this.options.reconnectPeriod===0&&this.options.clean&&this._flush(),this.log("_cleanUp :: (%s) :: destroying stream",this.options.clientId),this.stream.destroy();else{let B=Object.assign({cmd:"disconnect"},A);this.log("_cleanUp :: (%s) :: call _sendPacket with disconnect packet",this.options.clientId),this._sendPacket(B,()=>{this.log("_cleanUp :: (%s) :: destroying stream",this.options.clientId),v(()=>{this.stream.end(()=>{this.log("_cleanUp :: (%s) :: stream destroyed",this.options.clientId)})})})}!this.disconnecting&&!this.reconnecting&&(this.log("_cleanUp :: client not disconnecting/reconnecting. Clearing and resetting reconnect."),this._clearReconnect(),this._setupReconnect()),this._destroyKeepaliveManager(),M&&!this.connected&&(this.log("_cleanUp :: (%s) :: removing stream `done` callback `close` listener",this.options.clientId),this.stream.removeListener("close",M),M())}_storeAndSend(k,M,A){this.log("storeAndSend :: store packet with cmd %s to outgoingStore",k.cmd);let B=k,q;if(B.cmd==="publish"&&(B=(0,h.default)(k),q=this._removeTopicAliasAndRecoverTopicName(B),q))return M&&M(q);this.outgoingStore.put(B,$=>{if($)return M&&M($);A(),this._writePacket(k,M)})}_applyTopicAlias(k){if(this.options.protocolVersion===5&&k.cmd==="publish"){let M;k.properties&&(M=k.properties.topicAlias);let A=k.topic.toString();if(this.topicAliasSend)if(M){if(A.length!==0&&(this.log("applyTopicAlias :: register topic: %s - alias: %d",A,M),!this.topicAliasSend.put(A,M)))return this.log("applyTopicAlias :: error out of range. topic: %s - alias: %d",A,M),new Error("Sending Topic Alias out of range")}else A.length!==0&&(this.options.autoAssignTopicAlias?(M=this.topicAliasSend.getAliasByTopic(A),M?(k.topic="",k.properties=Object.assign(Object.assign({},k.properties),{topicAlias:M}),this.log("applyTopicAlias :: auto assign(use) topic: %s - alias: %d",A,M)):(M=this.topicAliasSend.getLruAlias(),this.topicAliasSend.put(A,M),k.properties=Object.assign(Object.assign({},k.properties),{topicAlias:M}),this.log("applyTopicAlias :: auto assign topic: %s - alias: %d",A,M))):this.options.autoUseTopicAlias&&(M=this.topicAliasSend.getAliasByTopic(A),M&&(k.topic="",k.properties=Object.assign(Object.assign({},k.properties),{topicAlias:M}),this.log("applyTopicAlias :: auto use topic: %s - alias: %d",A,M))));else if(M)return this.log("applyTopicAlias :: error out of range. topic: %s - alias: %d",A,M),new Error("Sending Topic Alias out of range")}}_noop(k){this.log("noop ::",k)}_writePacket(k,M){this.log("_writePacket :: packet: %O",k),this.log("_writePacket :: emitting `packetsend`"),this.emit("packetsend",k),this.log("_writePacket :: writing to stream");let A=o.default.writeToStream(k,this.stream,this.options);this.log("_writePacket :: writeToStream result %s",A),!A&&M&&M!==this.noop?(this.log("_writePacket :: handle events on `drain` once through callback."),this.stream.once("drain",M)):M&&(this.log("_writePacket :: invoking cb"),M())}_sendPacket(k,M,A,B){this.log("_sendPacket :: (%s) ::  start",this.options.clientId),A=A||this.noop,M=M||this.noop;let q=this._applyTopicAlias(k);if(q){M(q);return}if(!this.connected){if(k.cmd==="auth"){this._writePacket(k,M);return}this.log("_sendPacket :: client not connected. Storing packet offline."),this._storePacket(k,M,A);return}if(B){this._writePacket(k,M);return}switch(k.cmd){case"publish":break;case"pubrel":this._storeAndSend(k,M,A);return;default:this._writePacket(k,M);return}switch(k.qos){case 2:case 1:this._storeAndSend(k,M,A);break;case 0:default:this._writePacket(k,M);break}this.log("_sendPacket :: (%s) ::  end",this.options.clientId)}_storePacket(k,M,A){this.log("_storePacket :: packet: %o",k),this.log("_storePacket :: cb? %s",!!M),A=A||this.noop;let B=k;if(B.cmd==="publish"){B=(0,h.default)(k);let $=this._removeTopicAliasAndRecoverTopicName(B);if($)return M&&M($)}let q=B.qos||0;q===0&&this.queueQoSZero||B.cmd!=="publish"?this.queue.push({packet:B,cb:M}):q>0?(M=this.outgoing[B.messageId]?this.outgoing[B.messageId].cb:null,this.outgoingStore.put(B,$=>{if($)return M&&M($);A()})):M&&M(new Error("No connection to broker"))}_setupKeepaliveManager(){this.log("_setupKeepaliveManager :: keepalive %d (seconds)",this.options.keepalive),!this.keepaliveManager&&this.options.keepalive&&(this.keepaliveManager=new _.default(this,this.options.timerVariant))}_destroyKeepaliveManager(){this.keepaliveManager&&(this.log("_destroyKeepaliveManager :: destroying keepalive manager"),this.keepaliveManager.destroy(),this.keepaliveManager=null)}reschedulePing(k=!1){this.keepaliveManager&&this.options.keepalive&&(k||this.options.reschedulePings)&&this._reschedulePing()}_reschedulePing(){this.log("_reschedulePing :: rescheduling ping"),this.keepaliveManager.reschedule()}sendPing(){this.log("_sendPing :: sending pingreq"),this._sendPacket({cmd:"pingreq"})}onKeepaliveTimeout(){this.emit("error",new Error("Keepalive timeout")),this.log("onKeepaliveTimeout :: calling _cleanUp with force true"),this._cleanUp(!0)}_resubscribe(){this.log("_resubscribe");let k=Object.keys(this._resubscribeTopics);if(!this._firstConnection&&(this.options.clean||this.options.protocolVersion>=4&&!this.connackPacket.sessionPresent)&&k.length>0)if(this.options.resubscribe)if(this.options.protocolVersion===5){this.log("_resubscribe: protocolVersion 5");for(let M=0;M<k.length;M++){let A={};A[k[M]]=this._resubscribeTopics[k[M]],A.resubscribe=!0,this.subscribe(A,{properties:A[k[M]].properties})}}else this._resubscribeTopics.resubscribe=!0,this.subscribe(this._resubscribeTopics);else this._resubscribeTopics={};this._firstConnection=!1}_onConnect(k){if(this.disconnected){this.emit("connect",k);return}this.connackPacket=k,this.messageIdProvider.clear(),this._setupKeepaliveManager(),this.connected=!0;let M=()=>{let A=this.outgoingStore.createStream(),B=()=>{A.destroy(),A=null,this._flushStoreProcessingQueue(),q()},q=()=>{this._storeProcessing=!1,this._packetIdsDuringStoreProcessing={}};this.once("close",B),A.on("error",x=>{q(),this._flushStoreProcessingQueue(),this.removeListener("close",B),this.emit("error",x)});let $=()=>{if(!A)return;let x=A.read(1),z;if(!x){A.once("readable",$);return}if(this._storeProcessing=!0,this._packetIdsDuringStoreProcessing[x.messageId]){$();return}!this.disconnecting&&!this.reconnectTimer?(z=this.outgoing[x.messageId]?this.outgoing[x.messageId].cb:null,this.outgoing[x.messageId]={volatile:!1,cb(X,V){z&&z(X,V),$()}},this._packetIdsDuringStoreProcessing[x.messageId]=!0,this.messageIdProvider.register(x.messageId)?this._sendPacket(x,void 0,void 0,!0):this.log("messageId: %d has already used.",x.messageId)):A.destroy&&A.destroy()};A.on("end",()=>{let x=!0;for(let z in this._packetIdsDuringStoreProcessing)if(!this._packetIdsDuringStoreProcessing[z]){x=!1;break}this.removeListener("close",B),x?(q(),this._invokeAllStoreProcessingQueue(),this.emit("connect",k)):M()}),$()};M()}_invokeStoreProcessingQueue(){if(!this._storeProcessing&&this._storeProcessingQueue.length>0){let k=this._storeProcessingQueue[0];if(k&&k.invoke())return this._storeProcessingQueue.shift(),!0}return!1}_invokeAllStoreProcessingQueue(){for(;this._invokeStoreProcessingQueue(););}_flushStoreProcessingQueue(){for(let k of this._storeProcessingQueue)k.cbStorePut&&k.cbStorePut(new Error("Connection closed")),k.callback&&k.callback(new Error("Connection closed"));this._storeProcessingQueue.splice(0)}_removeOutgoingAndStoreMessage(k,M){delete this.outgoing[k],this.outgoingStore.del({messageId:k},(A,B)=>{M(A,B),this.messageIdProvider.deallocate(k),this._invokeStoreProcessingQueue()})}};T.VERSION=g.MQTTJS_VERSION,e.default=T}),Nb=vt(e=>{dt(),gt(),pt(),Object.defineProperty(e,"__esModule",{value:!0});var t=Op(),i=class{constructor(){this.numberAllocator=new t.NumberAllocator(1,65535)}allocate(){return this.lastId=this.numberAllocator.alloc(),this.lastId}getLastAllocated(){return this.lastId}register(n){return this.numberAllocator.use(n)}deallocate(n){this.numberAllocator.free(n)}clear(){this.numberAllocator.clear()}};e.default=i});function Un(e){throw new RangeError(Ip[e])}function wu(e,t){let i=e.split("@"),n="";i.length>1&&(n=i[0]+"@",e=i[1]);let r=function(s,o){let a=[],l=s.length;for(;l--;)a[l]=o(s[l]);return a}((e=e.replace(Cp,".")).split("."),t).join(".");return n+r}function vu(e){let t=[],i=0,n=e.length;for(;i<n;){let r=e.charCodeAt(i++);if(r>=55296&&r<=56319&&i<n){let s=e.charCodeAt(i++);(64512&s)==56320?t.push(((1023&r)<<10)+(1023&s)+65536):(t.push(r),i--)}else t.push(r)}return t}var Su,xu,Cp,Ip,fi,js,Da,La,Ba,Na,wn,Fb=je(()=>{dt(),gt(),pt(),Su=/^xn--/,xu=/[^\0-\x7E]/,Cp=/[\x2E\u3002\uFF0E\uFF61]/g,Ip={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},fi=Math.floor,js=String.fromCharCode,Da=function(e,t){return e+22+75*(e<26)-((t!=0)<<5)},La=function(e,t,i){let n=0;for(e=i?fi(e/700):e>>1,e+=fi(e/t);e>455;n+=36)e=fi(e/35);return fi(n+36*e/(e+38))},Ba=function(e){let t=[],i=e.length,n=0,r=128,s=72,o=e.lastIndexOf("-");o<0&&(o=0);for(let l=0;l<o;++l)e.charCodeAt(l)>=128&&Un("not-basic"),t.push(e.charCodeAt(l));for(let l=o>0?o+1:0;l<i;){let h=n;for(let u=1,f=36;;f+=36){l>=i&&Un("invalid-input");let d=(a=e.charCodeAt(l++))-48<10?a-22:a-65<26?a-65:a-97<26?a-97:36;(d>=36||d>fi((2147483647-n)/u))&&Un("overflow"),n+=d*u;let g=f<=s?1:f>=s+26?26:f-s;if(d<g)break;let y=36-g;u>fi(2147483647/y)&&Un("overflow"),u*=y}let c=t.length+1;s=La(n-h,c,h==0),fi(n/c)>2147483647-r&&Un("overflow"),r+=fi(n/c),n%=c,t.splice(n++,0,r)}var a;return String.fromCodePoint(...t)},Na=function(e){let t=[],i=(e=vu(e)).length,n=128,r=0,s=72;for(let l of e)l<128&&t.push(js(l));let o=t.length,a=o;for(o&&t.push("-");a<i;){let l=2147483647;for(let c of e)c>=n&&c<l&&(l=c);let h=a+1;l-n>fi((2147483647-r)/h)&&Un("overflow"),r+=(l-n)*h,n=l;for(let c of e)if(c<n&&++r>2147483647&&Un("overflow"),c==n){let u=r;for(let f=36;;f+=36){let d=f<=s?1:f>=s+26?26:f-s;if(u<d)break;let g=u-d,y=36-d;t.push(js(Da(d+g%y,0))),u=fi(g/y)}t.push(js(Da(u,0))),s=La(r,h,a==o),r=0,++a}++r,++n}return t.join("")},wn={version:"2.1.0",ucs2:{decode:vu,encode:e=>String.fromCodePoint(...e)},decode:Ba,encode:Na,toASCII:function(e){return wu(e,function(t){return xu.test(t)?"xn--"+Na(t):t})},toUnicode:function(e){return wu(e,function(t){return Su.test(t)?Ba(t.slice(4).toLowerCase()):t})}},wn.decode,wn.encode,wn.toASCII,wn.toUnicode,wn.ucs2,wn.version});function Ub(e,t){return Object.prototype.hasOwnProperty.call(e,t)}var ku,br,Eu,Ei,jb=je(()=>{dt(),gt(),pt(),ku=function(e,t,i,n){t=t||"&",i=i||"=";var r={};if(typeof e!="string"||e.length===0)return r;var s=/\+/g;e=e.split(t);var o=1e3;n&&typeof n.maxKeys=="number"&&(o=n.maxKeys);var a=e.length;o>0&&a>o&&(a=o);for(var l=0;l<a;++l){var h,c,u,f,d=e[l].replace(s,"%20"),g=d.indexOf(i);g>=0?(h=d.substr(0,g),c=d.substr(g+1)):(h=d,c=""),u=decodeURIComponent(h),f=decodeURIComponent(c),Ub(r,u)?Array.isArray(r[u])?r[u].push(f):r[u]=[r[u],f]:r[u]=f}return r},br=function(e){switch(typeof e){case"string":return e;case"boolean":return e?"true":"false";case"number":return isFinite(e)?e:"";default:return""}},Eu=function(e,t,i,n){return t=t||"&",i=i||"=",e===null&&(e=void 0),typeof e=="object"?Object.keys(e).map(function(r){var s=encodeURIComponent(br(r))+i;return Array.isArray(e[r])?e[r].map(function(o){return s+encodeURIComponent(br(o))}).join(t):s+encodeURIComponent(br(e[r]))}).join(t):n?encodeURIComponent(br(n))+i+encodeURIComponent(br(e)):""},Ei={},Ei.decode=Ei.parse=ku,Ei.encode=Ei.stringify=Eu,Ei.decode,Ei.encode,Ei.parse,Ei.stringify});function vh(){throw new Error("setTimeout has not been defined")}function Sh(){throw new Error("clearTimeout has not been defined")}function Rp(e){if(Hi===setTimeout)return setTimeout(e,0);if((Hi===vh||!Hi)&&setTimeout)return Hi=setTimeout,setTimeout(e,0);try{return Hi(e,0)}catch{try{return Hi.call(null,e,0)}catch{return Hi.call(this||nr,e,0)}}}function Wb(){rr&&Xn&&(rr=!1,Xn.length?Pi=Xn.concat(Pi):hs=-1,Pi.length&&Dp())}function Dp(){if(!rr){var e=Rp(Wb);rr=!0;for(var t=Pi.length;t;){for(Xn=Pi,Pi=[];++hs<t;)Xn&&Xn[hs].run();hs=-1,t=Pi.length}Xn=null,rr=!1,function(i){if(qi===clearTimeout)return clearTimeout(i);if((qi===Sh||!qi)&&clearTimeout)return qi=clearTimeout,clearTimeout(i);try{qi(i)}catch{try{return qi.call(null,i)}catch{return qi.call(this||nr,i)}}}(e)}}function Mu(e,t){(this||nr).fun=e,(this||nr).array=t}function Fi(){}var Au,Hi,qi,nr,ke,Xn,Pi,rr,hs,Se,Yb=je(()=>{dt(),gt(),pt(),nr=typeof globalThis<"u"?globalThis:typeof self<"u"?self:global,ke=Au={},function(){try{Hi=typeof setTimeout=="function"?setTimeout:vh}catch{Hi=vh}try{qi=typeof clearTimeout=="function"?clearTimeout:Sh}catch{qi=Sh}}(),Pi=[],rr=!1,hs=-1,ke.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var i=1;i<arguments.length;i++)t[i-1]=arguments[i];Pi.push(new Mu(e,t)),Pi.length!==1||rr||Rp(Dp)},Mu.prototype.run=function(){(this||nr).fun.apply(null,(this||nr).array)},ke.title="browser",ke.browser=!0,ke.env={},ke.argv=[],ke.version="",ke.versions={},ke.on=Fi,ke.addListener=Fi,ke.once=Fi,ke.off=Fi,ke.removeListener=Fi,ke.removeAllListeners=Fi,ke.emit=Fi,ke.prependListener=Fi,ke.prependOnceListener=Fi,ke.listeners=function(e){return[]},ke.binding=function(e){throw new Error("process.binding is not supported")},ke.cwd=function(){return"/"},ke.chdir=function(e){throw new Error("process.chdir is not supported")},ke.umask=function(){return 0},Se=Au,Se.addListener,Se.argv,Se.binding,Se.browser,Se.chdir,Se.cwd,Se.emit,Se.env,Se.listeners,Se.nextTick,Se.off,Se.on,Se.once,Se.prependListener,Se.prependOnceListener,Se.removeAllListeners,Se.removeListener,Se.title,Se.umask,Se.version,Se.versions});function zb(){if(xh)return bo;xh=!0;var e=bo={},t,i;function n(){throw new Error("setTimeout has not been defined")}function r(){throw new Error("clearTimeout has not been defined")}(function(){try{typeof setTimeout=="function"?t=setTimeout:t=n}catch{t=n}try{typeof clearTimeout=="function"?i=clearTimeout:i=r}catch{i=r}})();function s(y){if(t===setTimeout)return setTimeout(y,0);if((t===n||!t)&&setTimeout)return t=setTimeout,setTimeout(y,0);try{return t(y,0)}catch{try{return t.call(null,y,0)}catch{return t.call(this||qn,y,0)}}}function o(y){if(i===clearTimeout)return clearTimeout(y);if((i===r||!i)&&clearTimeout)return i=clearTimeout,clearTimeout(y);try{return i(y)}catch{try{return i.call(null,y)}catch{return i.call(this||qn,y)}}}var a=[],l=!1,h,c=-1;function u(){!l||!h||(l=!1,h.length?a=h.concat(a):c=-1,a.length&&f())}function f(){if(!l){var y=s(u);l=!0;for(var _=a.length;_;){for(h=a,a=[];++c<_;)h&&h[c].run();c=-1,_=a.length}h=null,l=!1,o(y)}}e.nextTick=function(y){var _=new Array(arguments.length-1);if(arguments.length>1)for(var w=1;w<arguments.length;w++)_[w-1]=arguments[w];a.push(new d(y,_)),a.length===1&&!l&&s(f)};function d(y,_){(this||qn).fun=y,(this||qn).array=_}d.prototype.run=function(){(this||qn).fun.apply(null,(this||qn).array)},e.title="browser",e.browser=!0,e.env={},e.argv=[],e.version="",e.versions={};function g(){}return e.on=g,e.addListener=g,e.once=g,e.off=g,e.removeListener=g,e.removeAllListeners=g,e.emit=g,e.prependListener=g,e.prependOnceListener=g,e.listeners=function(y){return[]},e.binding=function(y){throw new Error("process.binding is not supported")},e.cwd=function(){return"/"},e.chdir=function(y){throw new Error("process.chdir is not supported")},e.umask=function(){return 0},bo}var bo,xh,qn,be,Lp=je(()=>{dt(),gt(),pt(),bo={},xh=!1,qn=typeof globalThis<"u"?globalThis:typeof self<"u"?self:global,be=zb(),be.platform="browser",be.addListener,be.argv,be.binding,be.browser,be.chdir,be.cwd,be.emit,be.env,be.listeners,be.nextTick,be.off,be.on,be.once,be.prependListener,be.prependOnceListener,be.removeAllListeners,be.removeListener,be.title,be.umask,be.version,be.versions});function Vb(){if(kh)return yo;kh=!0;var e=be;function t(s){if(typeof s!="string")throw new TypeError("Path must be a string. Received "+JSON.stringify(s))}function i(s,o){for(var a="",l=0,h=-1,c=0,u,f=0;f<=s.length;++f){if(f<s.length)u=s.charCodeAt(f);else{if(u===47)break;u=47}if(u===47){if(!(h===f-1||c===1))if(h!==f-1&&c===2){if(a.length<2||l!==2||a.charCodeAt(a.length-1)!==46||a.charCodeAt(a.length-2)!==46){if(a.length>2){var d=a.lastIndexOf("/");if(d!==a.length-1){d===-1?(a="",l=0):(a=a.slice(0,d),l=a.length-1-a.lastIndexOf("/")),h=f,c=0;continue}}else if(a.length===2||a.length===1){a="",l=0,h=f,c=0;continue}}o&&(a.length>0?a+="/..":a="..",l=2)}else a.length>0?a+="/"+s.slice(h+1,f):a=s.slice(h+1,f),l=f-h-1;h=f,c=0}else u===46&&c!==-1?++c:c=-1}return a}function n(s,o){var a=o.dir||o.root,l=o.base||(o.name||"")+(o.ext||"");return a?a===o.root?a+l:a+s+l:l}var r={resolve:function(){for(var s="",o=!1,a,l=arguments.length-1;l>=-1&&!o;l--){var h;l>=0?h=arguments[l]:(a===void 0&&(a=e.cwd()),h=a),t(h),h.length!==0&&(s=h+"/"+s,o=h.charCodeAt(0)===47)}return s=i(s,!o),o?s.length>0?"/"+s:"/":s.length>0?s:"."},normalize:function(s){if(t(s),s.length===0)return".";var o=s.charCodeAt(0)===47,a=s.charCodeAt(s.length-1)===47;return s=i(s,!o),s.length===0&&!o&&(s="."),s.length>0&&a&&(s+="/"),o?"/"+s:s},isAbsolute:function(s){return t(s),s.length>0&&s.charCodeAt(0)===47},join:function(){if(arguments.length===0)return".";for(var s,o=0;o<arguments.length;++o){var a=arguments[o];t(a),a.length>0&&(s===void 0?s=a:s+="/"+a)}return s===void 0?".":r.normalize(s)},relative:function(s,o){if(t(s),t(o),s===o||(s=r.resolve(s),o=r.resolve(o),s===o))return"";for(var a=1;a<s.length&&s.charCodeAt(a)===47;++a);for(var l=s.length,h=l-a,c=1;c<o.length&&o.charCodeAt(c)===47;++c);for(var u=o.length,f=u-c,d=h<f?h:f,g=-1,y=0;y<=d;++y){if(y===d){if(f>d){if(o.charCodeAt(c+y)===47)return o.slice(c+y+1);if(y===0)return o.slice(c+y)}else h>d&&(s.charCodeAt(a+y)===47?g=y:y===0&&(g=0));break}var _=s.charCodeAt(a+y),w=o.charCodeAt(c+y);if(_!==w)break;_===47&&(g=y)}var v="";for(y=a+g+1;y<=l;++y)(y===l||s.charCodeAt(y)===47)&&(v.length===0?v+="..":v+="/..");return v.length>0?v+o.slice(c+g):(c+=g,o.charCodeAt(c)===47&&++c,o.slice(c))},_makeLong:function(s){return s},dirname:function(s){if(t(s),s.length===0)return".";for(var o=s.charCodeAt(0),a=o===47,l=-1,h=!0,c=s.length-1;c>=1;--c)if(o=s.charCodeAt(c),o===47){if(!h){l=c;break}}else h=!1;return l===-1?a?"/":".":a&&l===1?"//":s.slice(0,l)},basename:function(s,o){if(o!==void 0&&typeof o!="string")throw new TypeError('"ext" argument must be a string');t(s);var a=0,l=-1,h=!0,c;if(o!==void 0&&o.length>0&&o.length<=s.length){if(o.length===s.length&&o===s)return"";var u=o.length-1,f=-1;for(c=s.length-1;c>=0;--c){var d=s.charCodeAt(c);if(d===47){if(!h){a=c+1;break}}else f===-1&&(h=!1,f=c+1),u>=0&&(d===o.charCodeAt(u)?--u===-1&&(l=c):(u=-1,l=f))}return a===l?l=f:l===-1&&(l=s.length),s.slice(a,l)}else{for(c=s.length-1;c>=0;--c)if(s.charCodeAt(c)===47){if(!h){a=c+1;break}}else l===-1&&(h=!1,l=c+1);return l===-1?"":s.slice(a,l)}},extname:function(s){t(s);for(var o=-1,a=0,l=-1,h=!0,c=0,u=s.length-1;u>=0;--u){var f=s.charCodeAt(u);if(f===47){if(!h){a=u+1;break}continue}l===-1&&(h=!1,l=u+1),f===46?o===-1?o=u:c!==1&&(c=1):o!==-1&&(c=-1)}return o===-1||l===-1||c===0||c===1&&o===l-1&&o===a+1?"":s.slice(o,l)},format:function(s){if(s===null||typeof s!="object")throw new TypeError('The "pathObject" argument must be of type Object. Received type '+typeof s);return n("/",s)},parse:function(s){t(s);var o={root:"",dir:"",base:"",ext:"",name:""};if(s.length===0)return o;var a=s.charCodeAt(0),l=a===47,h;l?(o.root="/",h=1):h=0;for(var c=-1,u=0,f=-1,d=!0,g=s.length-1,y=0;g>=h;--g){if(a=s.charCodeAt(g),a===47){if(!d){u=g+1;break}continue}f===-1&&(d=!1,f=g+1),a===46?c===-1?c=g:y!==1&&(y=1):c!==-1&&(y=-1)}return c===-1||f===-1||y===0||y===1&&c===f-1&&c===u+1?f!==-1&&(u===0&&l?o.base=o.name=s.slice(1,f):o.base=o.name=s.slice(u,f)):(u===0&&l?(o.name=s.slice(1,c),o.base=s.slice(1,f)):(o.name=s.slice(u,c),o.base=s.slice(u,f)),o.ext=s.slice(c,f)),u>0?o.dir=s.slice(0,u-1):l&&(o.dir="/"),o},sep:"/",delimiter:":",win32:null,posix:null};return r.posix=r,yo=r,yo}var yo,kh,Eh,Hb=je(()=>{dt(),gt(),pt(),Lp(),yo={},kh=!1,Eh=Vb()}),Bp={};ur(Bp,{URL:()=>tg,Url:()=>Kp,default:()=>ee,fileURLToPath:()=>Np,format:()=>Qp,parse:()=>Jp,pathToFileURL:()=>Fp,resolve:()=>Xp,resolveObject:()=>Zp});function ai(){this.protocol=null,this.slashes=null,this.auth=null,this.host=null,this.port=null,this.hostname=null,this.hash=null,this.search=null,this.query=null,this.pathname=null,this.path=null,this.href=null}function zr(e,t,i){if(e&&pi.isObject(e)&&e instanceof ai)return e;var n=new ai;return n.parse(e,t,i),n}function qb(){if(Mh)return _o;Mh=!0;var e=Se;function t(s){if(typeof s!="string")throw new TypeError("Path must be a string. Received "+JSON.stringify(s))}function i(s,o){for(var a="",l=0,h=-1,c=0,u,f=0;f<=s.length;++f){if(f<s.length)u=s.charCodeAt(f);else{if(u===47)break;u=47}if(u===47){if(!(h===f-1||c===1))if(h!==f-1&&c===2){if(a.length<2||l!==2||a.charCodeAt(a.length-1)!==46||a.charCodeAt(a.length-2)!==46){if(a.length>2){var d=a.lastIndexOf("/");if(d!==a.length-1){d===-1?(a="",l=0):(a=a.slice(0,d),l=a.length-1-a.lastIndexOf("/")),h=f,c=0;continue}}else if(a.length===2||a.length===1){a="",l=0,h=f,c=0;continue}}o&&(a.length>0?a+="/..":a="..",l=2)}else a.length>0?a+="/"+s.slice(h+1,f):a=s.slice(h+1,f),l=f-h-1;h=f,c=0}else u===46&&c!==-1?++c:c=-1}return a}function n(s,o){var a=o.dir||o.root,l=o.base||(o.name||"")+(o.ext||"");return a?a===o.root?a+l:a+s+l:l}var r={resolve:function(){for(var s="",o=!1,a,l=arguments.length-1;l>=-1&&!o;l--){var h;l>=0?h=arguments[l]:(a===void 0&&(a=e.cwd()),h=a),t(h),h.length!==0&&(s=h+"/"+s,o=h.charCodeAt(0)===47)}return s=i(s,!o),o?s.length>0?"/"+s:"/":s.length>0?s:"."},normalize:function(s){if(t(s),s.length===0)return".";var o=s.charCodeAt(0)===47,a=s.charCodeAt(s.length-1)===47;return s=i(s,!o),s.length===0&&!o&&(s="."),s.length>0&&a&&(s+="/"),o?"/"+s:s},isAbsolute:function(s){return t(s),s.length>0&&s.charCodeAt(0)===47},join:function(){if(arguments.length===0)return".";for(var s,o=0;o<arguments.length;++o){var a=arguments[o];t(a),a.length>0&&(s===void 0?s=a:s+="/"+a)}return s===void 0?".":r.normalize(s)},relative:function(s,o){if(t(s),t(o),s===o||(s=r.resolve(s),o=r.resolve(o),s===o))return"";for(var a=1;a<s.length&&s.charCodeAt(a)===47;++a);for(var l=s.length,h=l-a,c=1;c<o.length&&o.charCodeAt(c)===47;++c);for(var u=o.length,f=u-c,d=h<f?h:f,g=-1,y=0;y<=d;++y){if(y===d){if(f>d){if(o.charCodeAt(c+y)===47)return o.slice(c+y+1);if(y===0)return o.slice(c+y)}else h>d&&(s.charCodeAt(a+y)===47?g=y:y===0&&(g=0));break}var _=s.charCodeAt(a+y),w=o.charCodeAt(c+y);if(_!==w)break;_===47&&(g=y)}var v="";for(y=a+g+1;y<=l;++y)(y===l||s.charCodeAt(y)===47)&&(v.length===0?v+="..":v+="/..");return v.length>0?v+o.slice(c+g):(c+=g,o.charCodeAt(c)===47&&++c,o.slice(c))},_makeLong:function(s){return s},dirname:function(s){if(t(s),s.length===0)return".";for(var o=s.charCodeAt(0),a=o===47,l=-1,h=!0,c=s.length-1;c>=1;--c)if(o=s.charCodeAt(c),o===47){if(!h){l=c;break}}else h=!1;return l===-1?a?"/":".":a&&l===1?"//":s.slice(0,l)},basename:function(s,o){if(o!==void 0&&typeof o!="string")throw new TypeError('"ext" argument must be a string');t(s);var a=0,l=-1,h=!0,c;if(o!==void 0&&o.length>0&&o.length<=s.length){if(o.length===s.length&&o===s)return"";var u=o.length-1,f=-1;for(c=s.length-1;c>=0;--c){var d=s.charCodeAt(c);if(d===47){if(!h){a=c+1;break}}else f===-1&&(h=!1,f=c+1),u>=0&&(d===o.charCodeAt(u)?--u===-1&&(l=c):(u=-1,l=f))}return a===l?l=f:l===-1&&(l=s.length),s.slice(a,l)}else{for(c=s.length-1;c>=0;--c)if(s.charCodeAt(c)===47){if(!h){a=c+1;break}}else l===-1&&(h=!1,l=c+1);return l===-1?"":s.slice(a,l)}},extname:function(s){t(s);for(var o=-1,a=0,l=-1,h=!0,c=0,u=s.length-1;u>=0;--u){var f=s.charCodeAt(u);if(f===47){if(!h){a=u+1;break}continue}l===-1&&(h=!1,l=u+1),f===46?o===-1?o=u:c!==1&&(c=1):o!==-1&&(c=-1)}return o===-1||l===-1||c===0||c===1&&o===l-1&&o===a+1?"":s.slice(o,l)},format:function(s){if(s===null||typeof s!="object")throw new TypeError('The "pathObject" argument must be of type Object. Received type '+typeof s);return n("/",s)},parse:function(s){t(s);var o={root:"",dir:"",base:"",ext:"",name:""};if(s.length===0)return o;var a=s.charCodeAt(0),l=a===47,h;l?(o.root="/",h=1):h=0;for(var c=-1,u=0,f=-1,d=!0,g=s.length-1,y=0;g>=h;--g){if(a=s.charCodeAt(g),a===47){if(!d){u=g+1;break}continue}f===-1&&(d=!1,f=g+1),a===46?c===-1?c=g:y!==1&&(y=1):c!==-1&&(y=-1)}return c===-1||f===-1||y===0||y===1&&c===f-1&&c===u+1?f!==-1&&(u===0&&l?o.base=o.name=s.slice(1,f):o.base=o.name=s.slice(u,f)):(u===0&&l?(o.name=s.slice(1,c),o.base=s.slice(1,f)):(o.name=s.slice(u,c),o.base=s.slice(u,f)),o.ext=s.slice(c,f)),u>0?o.dir=s.slice(0,u-1):l&&(o.dir="/"),o},sep:"/",delimiter:":",win32:null,posix:null};return r.posix=r,_o=r,_o}function $b(e){if(typeof e=="string")e=new URL(e);else if(!(e instanceof URL))throw new Deno.errors.InvalidData("invalid argument path , must be a string or URL");if(e.protocol!=="file:")throw new Deno.errors.InvalidData("invalid url scheme");return Wo?Gb(e):Kb(e)}function Gb(e){let t=e.hostname,i=e.pathname;for(let n=0;n<i.length;n++)if(i[n]==="%"){let r=i.codePointAt(n+2)||32;if(i[n+1]==="2"&&r===102||i[n+1]==="5"&&r===99)throw new Deno.errors.InvalidData("must not include encoded \\ or / characters")}if(i=i.replace(zp,"\\"),i=decodeURIComponent(i),t!=="")return`\\\\${t}${i}`;{let n=i.codePointAt(1)|32,r=i[2];if(n<Wp||n>Yp||r!==":")throw new Deno.errors.InvalidData("file url path must be absolute");return i.slice(1)}}function Kb(e){if(e.hostname!=="")throw new Deno.errors.InvalidData("invalid file url hostname");let t=e.pathname;for(let i=0;i<t.length;i++)if(t[i]==="%"){let n=t.codePointAt(i+2)||32;if(t[i+1]==="2"&&n===102)throw new Deno.errors.InvalidData("must not include encoded / characters")}return decodeURIComponent(t)}function Qb(e){let t=Ah.resolve(e),i=e.charCodeAt(e.length-1);(i===jp||Wo&&i===Up)&&t[t.length-1]!==Ah.sep&&(t+="/");let n=new URL("file://");return t.includes("%")&&(t=t.replace(Vp,"%25")),!Wo&&t.includes("\\")&&(t=t.replace(Hp,"%5C")),t.includes(`
`)&&(t=t.replace(qp,"%0A")),t.includes("\r")&&(t=t.replace($p,"%0D")),t.includes("	")&&(t=t.replace(Gp,"%09")),n.pathname=t,n}function Np(e){if(typeof e=="string")e=new URL(e);else if(!(e instanceof URL))throw new Deno.errors.InvalidData("invalid argument path , must be a string or URL");if(e.protocol!=="file:")throw new Deno.errors.InvalidData("invalid url scheme");return Yo?Xb(e):Zb(e)}function Xb(e){let t=e.hostname,i=e.pathname;for(let n=0;n<i.length;n++)if(i[n]==="%"){let r=i.codePointAt(n+2)||32;if(i[n+1]==="2"&&r===102||i[n+1]==="5"&&r===99)throw new Deno.errors.InvalidData("must not include encoded \\ or / characters")}if(i=i.replace(sg,"\\"),i=decodeURIComponent(i),t!=="")return`\\\\${t}${i}`;{let n=i.codePointAt(1)|32,r=i[2];if(n<ng||n>rg||r!==":")throw new Deno.errors.InvalidData("file url path must be absolute");return i.slice(1)}}function Zb(e){if(e.hostname!=="")throw new Deno.errors.InvalidData("invalid file url hostname");let t=e.pathname;for(let i=0;i<t.length;i++)if(t[i]==="%"){let n=t.codePointAt(i+2)||32;if(t[i+1]==="2"&&n===102)throw new Deno.errors.InvalidData("must not include encoded / characters")}return decodeURIComponent(t)}function Fp(e){let t=Eh.resolve(e),i=e.charCodeAt(e.length-1);(i===ig||Yo&&i===eg)&&t[t.length-1]!==Eh.sep&&(t+="/");let n=new URL("file://");return t.includes("%")&&(t=t.replace(og,"%25")),!Yo&&t.includes("\\")&&(t=t.replace(ag,"%5C")),t.includes(`
`)&&(t=t.replace(lg,"%0A")),t.includes("\r")&&(t=t.replace(hg,"%0D")),t.includes("	")&&(t=t.replace(cg,"%09")),n.pathname=t,n}var ee,Tu,pi,Ou,Pu,Cu,Iu,Ws,Fa,Ua,ja,Ru,Du,Ys,jn,zs,_o,Mh,Ah,Lu,Up,jp,Wp,Yp,Wo,zp,Vp,Hp,qp,$p,Gp,Bu,Kp,Qp,Xp,Zp,Jp,tg,eg,ig,ng,rg,Yo,sg,og,ag,lg,hg,cg,Jb=je(()=>{dt(),gt(),pt(),Fb(),jb(),Yb(),Hb(),Lp(),ee={},Tu=wn,pi={isString:function(e){return typeof e=="string"},isObject:function(e){return typeof e=="object"&&e!==null},isNull:function(e){return e===null},isNullOrUndefined:function(e){return e==null}},ee.parse=zr,ee.resolve=function(e,t){return zr(e,!1,!0).resolve(t)},ee.resolveObject=function(e,t){return e?zr(e,!1,!0).resolveObject(t):t},ee.format=function(e){return pi.isString(e)&&(e=zr(e)),e instanceof ai?e.format():ai.prototype.format.call(e)},ee.Url=ai,Ou=/^([a-z0-9.+-]+:)/i,Pu=/:[0-9]*$/,Cu=/^(\/\/?(?!\/)[^\?\s]*)(\?[^\s]*)?$/,Iu=["{","}","|","\\","^","`"].concat(["<",">",'"',"`"," ","\r",`
`,"	"]),Ws=["'"].concat(Iu),Fa=["%","/","?",";","#"].concat(Ws),Ua=["/","?","#"],ja=/^[+a-z0-9A-Z_-]{0,63}$/,Ru=/^([+a-z0-9A-Z_-]{0,63})(.*)$/,Du={javascript:!0,"javascript:":!0},Ys={javascript:!0,"javascript:":!0},jn={http:!0,https:!0,ftp:!0,gopher:!0,file:!0,"http:":!0,"https:":!0,"ftp:":!0,"gopher:":!0,"file:":!0},zs=Ei,ai.prototype.parse=function(e,t,i){if(!pi.isString(e))throw new TypeError("Parameter 'url' must be a string, not "+typeof e);var n=e.indexOf("?"),r=n!==-1&&n<e.indexOf("#")?"?":"#",s=e.split(r);s[0]=s[0].replace(/\\/g,"/");var o=e=s.join(r);if(o=o.trim(),!i&&e.split("#").length===1){var a=Cu.exec(o);if(a)return this.path=o,this.href=o,this.pathname=a[1],a[2]?(this.search=a[2],this.query=t?zs.parse(this.search.substr(1)):this.search.substr(1)):t&&(this.search="",this.query={}),this}var l=Ou.exec(o);if(l){var h=(l=l[0]).toLowerCase();this.protocol=h,o=o.substr(l.length)}if(i||l||o.match(/^\/\/[^@\/]+@[^@\/]+/)){var c=o.substr(0,2)==="//";!c||l&&Ys[l]||(o=o.substr(2),this.slashes=!0)}if(!Ys[l]&&(c||l&&!jn[l])){for(var u,f,d=-1,g=0;g<Ua.length;g++)(y=o.indexOf(Ua[g]))!==-1&&(d===-1||y<d)&&(d=y);for((f=d===-1?o.lastIndexOf("@"):o.lastIndexOf("@",d))!==-1&&(u=o.slice(0,f),o=o.slice(f+1),this.auth=decodeURIComponent(u)),d=-1,g=0;g<Fa.length;g++){var y;(y=o.indexOf(Fa[g]))!==-1&&(d===-1||y<d)&&(d=y)}d===-1&&(d=o.length),this.host=o.slice(0,d),o=o.slice(d),this.parseHost(),this.hostname=this.hostname||"";var _=this.hostname[0]==="["&&this.hostname[this.hostname.length-1]==="]";if(!_)for(var w=this.hostname.split(/\./),v=(g=0,w.length);g<v;g++){var S=w[g];if(S&&!S.match(ja)){for(var T="",O=0,k=S.length;O<k;O++)S.charCodeAt(O)>127?T+="x":T+=S[O];if(!T.match(ja)){var M=w.slice(0,g),A=w.slice(g+1),B=S.match(Ru);B&&(M.push(B[1]),A.unshift(B[2])),A.length&&(o="/"+A.join(".")+o),this.hostname=M.join(".");break}}}this.hostname.length>255?this.hostname="":this.hostname=this.hostname.toLowerCase(),_||(this.hostname=Tu.toASCII(this.hostname));var q=this.port?":"+this.port:"",$=this.hostname||"";this.host=$+q,this.href+=this.host,_&&(this.hostname=this.hostname.substr(1,this.hostname.length-2),o[0]!=="/"&&(o="/"+o))}if(!Du[h])for(g=0,v=Ws.length;g<v;g++){var x=Ws[g];if(o.indexOf(x)!==-1){var z=encodeURIComponent(x);z===x&&(z=escape(x)),o=o.split(x).join(z)}}var X=o.indexOf("#");X!==-1&&(this.hash=o.substr(X),o=o.slice(0,X));var V=o.indexOf("?");if(V!==-1?(this.search=o.substr(V),this.query=o.substr(V+1),t&&(this.query=zs.parse(this.query)),o=o.slice(0,V)):t&&(this.search="",this.query={}),o&&(this.pathname=o),jn[h]&&this.hostname&&!this.pathname&&(this.pathname="/"),this.pathname||this.search){q=this.pathname||"";var rt=this.search||"";this.path=q+rt}return this.href=this.format(),this},ai.prototype.format=function(){var e=this.auth||"";e&&(e=(e=encodeURIComponent(e)).replace(/%3A/i,":"),e+="@");var t=this.protocol||"",i=this.pathname||"",n=this.hash||"",r=!1,s="";this.host?r=e+this.host:this.hostname&&(r=e+(this.hostname.indexOf(":")===-1?this.hostname:"["+this.hostname+"]"),this.port&&(r+=":"+this.port)),this.query&&pi.isObject(this.query)&&Object.keys(this.query).length&&(s=zs.stringify(this.query));var o=this.search||s&&"?"+s||"";return t&&t.substr(-1)!==":"&&(t+=":"),this.slashes||(!t||jn[t])&&r!==!1?(r="//"+(r||""),i&&i.charAt(0)!=="/"&&(i="/"+i)):r||(r=""),n&&n.charAt(0)!=="#"&&(n="#"+n),o&&o.charAt(0)!=="?"&&(o="?"+o),t+r+(i=i.replace(/[?#]/g,function(a){return encodeURIComponent(a)}))+(o=o.replace("#","%23"))+n},ai.prototype.resolve=function(e){return this.resolveObject(zr(e,!1,!0)).format()},ai.prototype.resolveObject=function(e){if(pi.isString(e)){var t=new ai;t.parse(e,!1,!0),e=t}for(var i=new ai,n=Object.keys(this),r=0;r<n.length;r++){var s=n[r];i[s]=this[s]}if(i.hash=e.hash,e.href==="")return i.href=i.format(),i;if(e.slashes&&!e.protocol){for(var o=Object.keys(e),a=0;a<o.length;a++){var l=o[a];l!=="protocol"&&(i[l]=e[l])}return jn[i.protocol]&&i.hostname&&!i.pathname&&(i.path=i.pathname="/"),i.href=i.format(),i}if(e.protocol&&e.protocol!==i.protocol){if(!jn[e.protocol]){for(var h=Object.keys(e),c=0;c<h.length;c++){var u=h[c];i[u]=e[u]}return i.href=i.format(),i}if(i.protocol=e.protocol,e.host||Ys[e.protocol])i.pathname=e.pathname;else{for(var f=(e.pathname||"").split("/");f.length&&!(e.host=f.shift()););e.host||(e.host=""),e.hostname||(e.hostname=""),f[0]!==""&&f.unshift(""),f.length<2&&f.unshift(""),i.pathname=f.join("/")}if(i.search=e.search,i.query=e.query,i.host=e.host||"",i.auth=e.auth,i.hostname=e.hostname||e.host,i.port=e.port,i.pathname||i.search){var d=i.pathname||"",g=i.search||"";i.path=d+g}return i.slashes=i.slashes||e.slashes,i.href=i.format(),i}var y=i.pathname&&i.pathname.charAt(0)==="/",_=e.host||e.pathname&&e.pathname.charAt(0)==="/",w=_||y||i.host&&e.pathname,v=w,S=i.pathname&&i.pathname.split("/")||[],T=(f=e.pathname&&e.pathname.split("/")||[],i.protocol&&!jn[i.protocol]);if(T&&(i.hostname="",i.port=null,i.host&&(S[0]===""?S[0]=i.host:S.unshift(i.host)),i.host="",e.protocol&&(e.hostname=null,e.port=null,e.host&&(f[0]===""?f[0]=e.host:f.unshift(e.host)),e.host=null),w=w&&(f[0]===""||S[0]==="")),_)i.host=e.host||e.host===""?e.host:i.host,i.hostname=e.hostname||e.hostname===""?e.hostname:i.hostname,i.search=e.search,i.query=e.query,S=f;else if(f.length)S||(S=[]),S.pop(),S=S.concat(f),i.search=e.search,i.query=e.query;else if(!pi.isNullOrUndefined(e.search))return T&&(i.hostname=i.host=S.shift(),(B=!!(i.host&&i.host.indexOf("@")>0)&&i.host.split("@"))&&(i.auth=B.shift(),i.host=i.hostname=B.shift())),i.search=e.search,i.query=e.query,pi.isNull(i.pathname)&&pi.isNull(i.search)||(i.path=(i.pathname?i.pathname:"")+(i.search?i.search:"")),i.href=i.format(),i;if(!S.length)return i.pathname=null,i.search?i.path="/"+i.search:i.path=null,i.href=i.format(),i;for(var O=S.slice(-1)[0],k=(i.host||e.host||S.length>1)&&(O==="."||O==="..")||O==="",M=0,A=S.length;A>=0;A--)(O=S[A])==="."?S.splice(A,1):O===".."?(S.splice(A,1),M++):M&&(S.splice(A,1),M--);if(!w&&!v)for(;M--;M)S.unshift("..");!w||S[0]===""||S[0]&&S[0].charAt(0)==="/"||S.unshift(""),k&&S.join("/").substr(-1)!=="/"&&S.push("");var B,q=S[0]===""||S[0]&&S[0].charAt(0)==="/";return T&&(i.hostname=i.host=q?"":S.length?S.shift():"",(B=!!(i.host&&i.host.indexOf("@")>0)&&i.host.split("@"))&&(i.auth=B.shift(),i.host=i.hostname=B.shift())),(w=w||i.host&&S.length)&&!q&&S.unshift(""),S.length?i.pathname=S.join("/"):(i.pathname=null,i.path=null),pi.isNull(i.pathname)&&pi.isNull(i.search)||(i.path=(i.pathname?i.pathname:"")+(i.search?i.search:"")),i.auth=e.auth||i.auth,i.slashes=i.slashes||e.slashes,i.href=i.format(),i},ai.prototype.parseHost=function(){var e=this.host,t=Pu.exec(e);t&&((t=t[0])!==":"&&(this.port=t.substr(1)),e=e.substr(0,e.length-t.length)),e&&(this.hostname=e)},ee.Url,ee.format,ee.resolve,ee.resolveObject,_o={},Mh=!1,Ah=qb(),Lu=typeof Deno<"u"?Deno.build.os==="windows"?"win32":Deno.build.os:void 0,ee.URL=typeof URL<"u"?URL:null,ee.pathToFileURL=Qb,ee.fileURLToPath=$b,ee.Url,ee.format,ee.resolve,ee.resolveObject,ee.URL,Up=92,jp=47,Wp=97,Yp=122,Wo=Lu==="win32",zp=/\//g,Vp=/%/g,Hp=/\\/g,qp=/\n/g,$p=/\r/g,Gp=/\t/g,Bu=typeof Deno<"u"?Deno.build.os==="windows"?"win32":Deno.build.os:void 0,ee.URL=typeof URL<"u"?URL:null,ee.pathToFileURL=Fp,ee.fileURLToPath=Np,Kp=ee.Url,Qp=ee.format,Xp=ee.resolve,Zp=ee.resolveObject,Jp=ee.parse,tg=ee.URL,eg=92,ig=47,ng=97,rg=122,Yo=Bu==="win32",sg=/\//g,og=/%/g,ag=/\\/g,lg=/\n/g,hg=/\r/g,cg=/\t/g}),ty=vt((e,t)=>{dt(),gt(),pt(),t.exports=function(){throw new Error("ws does not work in the browser. Browser clients must use the native WebSocket object")}}),lc=vt(e=>{dt(),gt(),pt(),Object.defineProperty(e,"__esModule",{value:!0}),e.BufferedDuplex=e.writev=void 0;var t=pr(),i=(Ye(),ae(We));function n(s,o){let a=new Array(s.length);for(let l=0;l<s.length;l++)typeof s[l].chunk=="string"?a[l]=i.Buffer.from(s[l].chunk,"utf8"):a[l]=s[l].chunk;this._write(i.Buffer.concat(a),"binary",o)}e.writev=n;var r=class extends t.Duplex{constructor(s,o,a){super({objectMode:!0}),this.proxy=o,this.socket=a,this.writeQueue=[],s.objectMode||(this._writev=n.bind(this)),this.isSocketOpen=!1,this.proxy.on("data",l=>{this.destroyed||this.push(l)})}_read(s){this.proxy.read(s)}_write(s,o,a){this.isSocketOpen?this.writeToProxy(s,o,a):this.writeQueue.push({chunk:s,encoding:o,cb:a})}_final(s){this.writeQueue=[],this.proxy.end(s)}_destroy(s,o){this.writeQueue=[],this.proxy.destroy(),o(s)}socketReady(){this.emit("connect"),this.isSocketOpen=!0,this.processWriteQueue()}writeToProxy(s,o,a){this.proxy.write(s,o)===!1?this.proxy.once("drain",a):a()}processWriteQueue(){for(;this.writeQueue.length>0;){let{chunk:s,encoding:o,cb:a}=this.writeQueue.shift();this.writeToProxy(s,o,a)}}};e.BufferedDuplex=r}),Vs=vt(e=>{dt(),gt(),pt();var t=e&&e.__importDefault||function(w){return w&&w.__esModule?w:{default:w}};Object.defineProperty(e,"__esModule",{value:!0}),e.streamBuilder=e.browserStreamBuilder=void 0;var i=(Ye(),ae(We)),n=t(ty()),r=t(hn()),s=pr(),o=t(aa()),a=lc(),l=(0,r.default)("mqttjs:ws"),h=["rejectUnauthorized","ca","cert","key","pfx","passphrase"];function c(w,v){let S=`${w.protocol}://${w.hostname}:${w.port}${w.path}`;return typeof w.transformWsUrl=="function"&&(S=w.transformWsUrl(S,w,v)),S}function u(w){let v=w;return w.port||(w.protocol==="wss"?v.port=443:v.port=80),w.path||(v.path="/"),w.wsOptions||(v.wsOptions={}),!o.default&&!w.forceNativeWebSocket&&w.protocol==="wss"&&h.forEach(S=>{Object.prototype.hasOwnProperty.call(w,S)&&!Object.prototype.hasOwnProperty.call(w.wsOptions,S)&&(v.wsOptions[S]=w[S])}),v}function f(w){let v=u(w);if(v.hostname||(v.hostname=v.host),!v.hostname){if(typeof document>"u")throw new Error("Could not determine host. Specify host manually.");let S=new URL(document.URL);v.hostname=S.hostname,v.port||(v.port=Number(S.port))}return v.objectMode===void 0&&(v.objectMode=!(v.binary===!0||v.binary===void 0)),v}function d(w,v,S){l("createWebSocket"),l(`protocol: ${S.protocolId} ${S.protocolVersion}`);let T=S.protocolId==="MQIsdp"&&S.protocolVersion===3?"mqttv3.1":"mqtt";l(`creating new Websocket for url: ${v} and protocol: ${T}`);let O;return S.createWebsocket?O=S.createWebsocket(v,[T],S):O=new n.default(v,[T],S.wsOptions),O}function g(w,v){let S=v.protocolId==="MQIsdp"&&v.protocolVersion===3?"mqttv3.1":"mqtt",T=c(v,w),O;return v.createWebsocket?O=v.createWebsocket(T,[S],v):O=new WebSocket(T,[S]),O.binaryType="arraybuffer",O}var y=(w,v)=>{l("streamBuilder");let S=u(v);S.hostname=S.hostname||S.host||"localhost";let T=c(S,w),O=d(w,T,S),k=n.default.createWebSocketStream(O,S.wsOptions);return k.url=T,O.on("close",()=>{k.destroy()}),k};e.streamBuilder=y;var _=(w,v)=>{l("browserStreamBuilder");let S,T=f(v).browserBufferSize||1024*512,O=v.browserBufferTimeout||1e3,k=!v.objectMode,M=g(w,v),A=q(v,V,rt);v.objectMode||(A._writev=a.writev.bind(A)),A.on("close",()=>{M.close()});let B=typeof M.addEventListener<"u";M.readyState===M.OPEN?(S=A,S.socket=M):(S=new a.BufferedDuplex(v,A,M),B?M.addEventListener("open",$):M.onopen=$),B?(M.addEventListener("close",x),M.addEventListener("error",z),M.addEventListener("message",X)):(M.onclose=x,M.onerror=z,M.onmessage=X);function q(J,H,ht){let nt=new s.Transform({objectMode:J.objectMode});return nt._write=H,nt._flush=ht,nt}function $(){l("WebSocket onOpen"),S instanceof a.BufferedDuplex&&S.socketReady()}function x(J){l("WebSocket onClose",J),S.end(),S.destroy()}function z(J){l("WebSocket onError",J);let H=new Error("WebSocket error");H.event=J,S.destroy(H)}async function X(J){let{data:H}=J;H instanceof ArrayBuffer?H=i.Buffer.from(H):H instanceof Blob?H=i.Buffer.from(await new Response(H).arrayBuffer()):H=i.Buffer.from(H,"utf8"),A&&!A.destroyed&&A.push(H)}function V(J,H,ht){if(M.bufferedAmount>T){setTimeout(V,O,J,H,ht);return}k&&typeof J=="string"&&(J=i.Buffer.from(J,"utf8"));try{M.send(J)}catch(nt){return ht(nt)}ht()}function rt(J){M.close(),J()}return S};e.browserStreamBuilder=_}),hc={};ur(hc,{Server:()=>_e,Socket:()=>_e,Stream:()=>_e,_createServerHandle:()=>_e,_normalizeArgs:()=>_e,_setSimultaneousAccepts:()=>_e,connect:()=>_e,createConnection:()=>_e,createServer:()=>_e,default:()=>ug,isIP:()=>_e,isIPv4:()=>_e,isIPv6:()=>_e});function _e(){throw new Error("Node.js net module is not supported by JSPM core outside of Node.js")}var ug,fg=je(()=>{dt(),gt(),pt(),ug={_createServerHandle:_e,_normalizeArgs:_e,_setSimultaneousAccepts:_e,connect:_e,createConnection:_e,createServer:_e,isIP:_e,isIPv4:_e,isIPv6:_e,Server:_e,Socket:_e,Stream:_e}}),Nu=vt(e=>{dt(),gt(),pt();var t=e&&e.__importDefault||function(o){return o&&o.__esModule?o:{default:o}};Object.defineProperty(e,"__esModule",{value:!0});var i=t((fg(),ae(hc))),n=t(hn()),r=(0,n.default)("mqttjs:tcp"),s=(o,a)=>{a.port=a.port||1883,a.hostname=a.hostname||a.host||"localhost";let{port:l,path:h}=a,c=a.hostname;return r("port %d and host %s",l,c),i.default.createConnection({port:l,host:c,path:h})};e.default=s}),dg={};ur(dg,{default:()=>pg});var pg,ey=je(()=>{dt(),gt(),pt(),pg={}}),Fu=vt(e=>{dt(),gt(),pt();var t=e&&e.__importDefault||function(a){return a&&a.__esModule?a:{default:a}};Object.defineProperty(e,"__esModule",{value:!0});var i=t((ey(),ae(dg))),n=t((fg(),ae(hc))),r=t(hn()),s=(0,r.default)("mqttjs:tls"),o=(a,l)=>{l.port=l.port||8883,l.host=l.hostname||l.host||"localhost",n.default.isIP(l.host)===0&&(l.servername=l.host),l.rejectUnauthorized=l.rejectUnauthorized!==!1,delete l.path,s("port %d host %s rejectUnauthorized %b",l.port,l.host,l.rejectUnauthorized);let h=i.default.connect(l);h.on("secureConnect",()=>{l.rejectUnauthorized&&!h.authorized?h.emit("error",new Error("TLS not authorized")):h.removeListener("error",c)});function c(u){l.rejectUnauthorized&&a.emit("error",u),h.end()}return h.on("error",c),h};e.default=o}),Uu=vt(e=>{dt(),gt(),pt(),Object.defineProperty(e,"__esModule",{value:!0});var t=(Ye(),ae(We)),i=pr(),n=lc(),r,s,o;function a(){let f=new i.Transform;return f._write=(d,g,y)=>{r.send({data:d.buffer,success(){y()},fail(_){y(new Error(_))}})},f._flush=d=>{r.close({success(){d()}})},f}function l(f){f.hostname||(f.hostname="localhost"),f.path||(f.path="/"),f.wsOptions||(f.wsOptions={})}function h(f,d){let g=f.protocol==="wxs"?"wss":"ws",y=`${g}://${f.hostname}${f.path}`;return f.port&&f.port!==80&&f.port!==443&&(y=`${g}://${f.hostname}:${f.port}${f.path}`),typeof f.transformWsUrl=="function"&&(y=f.transformWsUrl(y,f,d)),y}function c(){r.onOpen(()=>{o.socketReady()}),r.onMessage(f=>{let{data:d}=f;d instanceof ArrayBuffer?d=t.Buffer.from(d):d=t.Buffer.from(d,"utf8"),s.push(d)}),r.onClose(()=>{o.emit("close"),o.end(),o.destroy()}),r.onError(f=>{let d=new Error(f.errMsg);o.destroy(d)})}var u=(f,d)=>{if(d.hostname=d.hostname||d.host,!d.hostname)throw new Error("Could not determine host. Specify host manually.");let g=d.protocolId==="MQIsdp"&&d.protocolVersion===3?"mqttv3.1":"mqtt";l(d);let y=h(d,f);r=wx.connectSocket({url:y,protocols:[g]}),s=a(),o=new n.BufferedDuplex(d,s,r),o._destroy=(w,v)=>{r.close({success(){v&&v(w)}})};let _=o.destroy;return o.destroy=(w,v)=>(o.destroy=_,setTimeout(()=>{r.close({fail(){o._destroy(w,v)}})},0),o),c(),o};e.default=u}),ju=vt(e=>{dt(),gt(),pt(),Object.defineProperty(e,"__esModule",{value:!0});var t=(Ye(),ae(We)),i=pr(),n=lc(),r,s,o,a=!1;function l(){let d=new i.Transform;return d._write=(g,y,_)=>{r.sendSocketMessage({data:g.buffer,success(){_()},fail(){_(new Error)}})},d._flush=g=>{r.closeSocket({success(){g()}})},d}function h(d){d.hostname||(d.hostname="localhost"),d.path||(d.path="/"),d.wsOptions||(d.wsOptions={})}function c(d,g){let y=d.protocol==="alis"?"wss":"ws",_=`${y}://${d.hostname}${d.path}`;return d.port&&d.port!==80&&d.port!==443&&(_=`${y}://${d.hostname}:${d.port}${d.path}`),typeof d.transformWsUrl=="function"&&(_=d.transformWsUrl(_,d,g)),_}function u(){a||(a=!0,r.onSocketOpen(()=>{o.socketReady()}),r.onSocketMessage(d=>{if(typeof d.data=="string"){let g=t.Buffer.from(d.data,"base64");s.push(g)}else{let g=new FileReader;g.addEventListener("load",()=>{let y=g.result;y instanceof ArrayBuffer?y=t.Buffer.from(y):y=t.Buffer.from(y,"utf8"),s.push(y)}),g.readAsArrayBuffer(d.data)}}),r.onSocketClose(()=>{o.end(),o.destroy()}),r.onSocketError(d=>{o.destroy(d)}))}var f=(d,g)=>{if(g.hostname=g.hostname||g.host,!g.hostname)throw new Error("Could not determine host. Specify host manually.");let y=g.protocolId==="MQIsdp"&&g.protocolVersion===3?"mqttv3.1":"mqtt";h(g);let _=c(g,d);return r=g.my,r.connectSocket({url:_,protocols:y}),s=l(),o=new n.BufferedDuplex(g,s,r),u(),o};e.default=f}),iy=vt(e=>{dt(),gt(),pt();var t=e&&e.__importDefault||function(u){return u&&u.__esModule?u:{default:u}};Object.defineProperty(e,"__esModule",{value:!0}),e.connectAsync=void 0;var i=t(hn()),n=t((Jb(),ae(Bp))),r=t(_h()),s=t(aa());typeof(Zt==null?void 0:Zt.nextTick)!="function"&&(Zt.nextTick=setImmediate);var o=(0,i.default)("mqttjs"),a=null;function l(u){let f;u.auth&&(f=u.auth.match(/^(.+):(.+)$/),f?(u.username=f[1],u.password=f[2]):u.username=u.auth)}function h(u,f){var d,g,y,_;if(o("connecting to an MQTT broker..."),typeof u=="object"&&!f&&(f=u,u=""),f=f||{},u&&typeof u=="string"){let S=n.default.parse(u,!0),T={};if(S.port!=null&&(T.port=Number(S.port)),T.host=S.hostname,T.query=S.query,T.auth=S.auth,T.protocol=S.protocol,T.path=S.path,T.protocol=(d=T.protocol)===null||d===void 0?void 0:d.replace(/:$/,""),f=Object.assign(Object.assign({},T),f),!f.protocol)throw new Error("Missing protocol")}if(f.unixSocket=f.unixSocket||((g=f.protocol)===null||g===void 0?void 0:g.includes("+unix")),f.unixSocket?f.protocol=f.protocol.replace("+unix",""):!(!((y=f.protocol)===null||y===void 0)&&y.startsWith("ws"))&&!(!((_=f.protocol)===null||_===void 0)&&_.startsWith("wx"))&&delete f.path,l(f),f.query&&typeof f.query.clientId=="string"&&(f.clientId=f.query.clientId),f.cert&&f.key)if(f.protocol){if(["mqtts","wss","wxs","alis"].indexOf(f.protocol)===-1)switch(f.protocol){case"mqtt":f.protocol="mqtts";break;case"ws":f.protocol="wss";break;case"wx":f.protocol="wxs";break;case"ali":f.protocol="alis";break;default:throw new Error(`Unknown protocol for secure connection: "${f.protocol}"!`)}}else throw new Error("Missing secure protocol key");if(a||(a={},!s.default&&!f.forceNativeWebSocket?(a.ws=Vs().streamBuilder,a.wss=Vs().streamBuilder,a.mqtt=Nu().default,a.tcp=Nu().default,a.ssl=Fu().default,a.tls=a.ssl,a.mqtts=Fu().default):(a.ws=Vs().browserStreamBuilder,a.wss=Vs().browserStreamBuilder,a.wx=Uu().default,a.wxs=Uu().default,a.ali=ju().default,a.alis=ju().default)),!a[f.protocol]){let S=["mqtts","wss"].indexOf(f.protocol)!==-1;f.protocol=["mqtt","mqtts","ws","wss","wx","wxs","ali","alis"].filter((T,O)=>S&&O%2===0?!1:typeof a[T]=="function")[0]}if(f.clean===!1&&!f.clientId)throw new Error("Missing clientId for unclean clients");f.protocol&&(f.defaultProtocol=f.protocol);function w(S){return f.servers&&((!S._reconnectCount||S._reconnectCount===f.servers.length)&&(S._reconnectCount=0),f.host=f.servers[S._reconnectCount].host,f.port=f.servers[S._reconnectCount].port,f.protocol=f.servers[S._reconnectCount].protocol?f.servers[S._reconnectCount].protocol:f.defaultProtocol,f.hostname=f.host,S._reconnectCount++),o("calling streambuilder for",f.protocol),a[f.protocol](S,f)}let v=new r.default(w,f);return v.on("error",()=>{}),v}function c(u,f,d=!0){return new Promise((g,y)=>{let _=h(u,f),w={connect:S=>{v(),g(_)},end:()=>{v(),g(_)},error:S=>{v(),_.end(),y(S)}};d===!1&&(w.close=()=>{w.error(new Error("Couldn't connect to server"))});function v(){Object.keys(w).forEach(S=>{_.off(S,w[S])})}Object.keys(w).forEach(S=>{_.on(S,w[S])})})}e.connectAsync=c,e.default=h}),Wu=vt(e=>{dt(),gt(),pt();var t=e&&e.__createBinding||(Object.create?function(d,g,y,_){_===void 0&&(_=y);var w=Object.getOwnPropertyDescriptor(g,y);(!w||("get"in w?!g.__esModule:w.writable||w.configurable))&&(w={enumerable:!0,get:function(){return g[y]}}),Object.defineProperty(d,_,w)}:function(d,g,y,_){_===void 0&&(_=y),d[_]=g[y]}),i=e&&e.__setModuleDefault||(Object.create?function(d,g){Object.defineProperty(d,"default",{enumerable:!0,value:g})}:function(d,g){d.default=g}),n=e&&e.__importStar||function(d){if(d&&d.__esModule)return d;var g={};if(d!=null)for(var y in d)y!=="default"&&Object.prototype.hasOwnProperty.call(d,y)&&t(g,d,y);return i(g,d),g},r=e&&e.__exportStar||function(d,g){for(var y in d)y!=="default"&&!Object.prototype.hasOwnProperty.call(g,y)&&t(g,d,y)},s=e&&e.__importDefault||function(d){return d&&d.__esModule?d:{default:d}};Object.defineProperty(e,"__esModule",{value:!0}),e.ReasonCodes=e.KeepaliveManager=e.UniqueMessageIdProvider=e.DefaultMessageIdProvider=e.Store=e.MqttClient=e.connectAsync=e.connect=e.Client=void 0;var o=s(_h());e.MqttClient=o.default;var a=s(dp());e.DefaultMessageIdProvider=a.default;var l=s(Nb());e.UniqueMessageIdProvider=l.default;var h=s(pp());e.Store=h.default;var c=n(iy());e.connect=c.default,Object.defineProperty(e,"connectAsync",{enumerable:!0,get:function(){return c.connectAsync}});var u=s(Pp());e.KeepaliveManager=u.default,e.Client=o.default,r(_h(),e),r(Br(),e);var f=oa();Object.defineProperty(e,"ReasonCodes",{enumerable:!0,get:function(){return f.ReasonCodes}})}),ny=vt(e=>{dt(),gt(),pt();var t=e&&e.__createBinding||(Object.create?function(o,a,l,h){h===void 0&&(h=l);var c=Object.getOwnPropertyDescriptor(a,l);(!c||("get"in c?!a.__esModule:c.writable||c.configurable))&&(c={enumerable:!0,get:function(){return a[l]}}),Object.defineProperty(o,h,c)}:function(o,a,l,h){h===void 0&&(h=l),o[h]=a[l]}),i=e&&e.__setModuleDefault||(Object.create?function(o,a){Object.defineProperty(o,"default",{enumerable:!0,value:a})}:function(o,a){o.default=a}),n=e&&e.__importStar||function(o){if(o&&o.__esModule)return o;var a={};if(o!=null)for(var l in o)l!=="default"&&Object.prototype.hasOwnProperty.call(o,l)&&t(a,o,l);return i(a,o),a},r=e&&e.__exportStar||function(o,a){for(var l in o)l!=="default"&&!Object.prototype.hasOwnProperty.call(a,l)&&t(a,o,l)};Object.defineProperty(e,"__esModule",{value:!0});var s=n(Wu());e.default=s,r(Wu(),e)});const ry=ny();/*! Bundled license information:

@jspm/core/nodelibs/browser/buffer.js:
  (*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> *)
*/let Pe,ts=Ed(!1),gg=Ed("");async function sy(){let e=(await rl()).accessToken,t=await sl(e);try{Pe=ry.connect("wss://mqtt.melo.se:2096/mqtt",{username:t.sub,password:e})}catch(n){console.log("catch!"),ts.set(n.toString()),console.error(n)}Pe.on("connect",()=>{Pe.subscribe("heatpump/received"),Pe.subscribe("heatpump/temperature/concat"),ts.set("")});let i=!1;Pe.on("message",(n,r)=>{n=="heatpump/temperature/concat"&&!i&&(console.log(new TextDecoder().decode(r)),gg.set(new TextDecoder().decode(r)),i=!0)}),Pe.on("error",async n=>{if(n.code==4)try{let r=(await rl()).accessToken,s=await sl(r);Pe.connect("wss://mqtt.melo.se:2096/mqtt",{username:s.sub,password:r}).catch(o=>{console.error(`Faild to reconnect to MQTT, using token ${r} and sub ${s.sub}`,o)})}catch(r){console.log("catch!"),ts.set(r.toString()),console.error(r)}ts.set(n.toString()),console.error(n)})}const wo=new Map;function oy(e,t){if(!Pe||!Pe.connected)throw new Error("MQTT client is not connected");Pe.publish(e,t,i=>{i&&console.error(`Error publishing to topic ${e}:`,i)})}function mg(e,t){if(!Pe||!Pe.connected)throw new Error("MQTT client is not connected");Pe.subscribe(e,i=>{i&&console.error(`Error subscribing to topic ${e}:`,i)}),wo.has(e)||wo.set(e,[]),wo.get(e).push(t),Pe.on("message",(i,n)=>{i===e&&t(n.toString())})}function ay(e,t){if(!Pe||!Pe.connected)throw new Error("MQTT client is not connected");const i=wo.get(e);if(i){const n=i.indexOf(t);n!==-1&&(i.splice(n,1),i.length===0&&Pe.unsubscribe(e,r=>{r&&console.error(`Error unsubscribing from topic ${e}:`,r)}))}}function ly(){return Pe&&Pe.connected}function Yu(e){let t,i,n,r,s,o,a,l=e[0].power?"PÃ¥":"Av",h,c,u,f,d,g,y,_="High <br/>Power",w,v,S,T,O="10Â° <br/>LÃ¤ge",k,M,A,B,q,$,x="FlÃ¤kt",z,X,V,rt,J,H="<span>|</span> <span>|</span> <span>|</span> <span>|</span>",ht,nt,xt="<span>Auto</span> <span>LÃ¥g</span> <span>Med</span> <span>HÃ¶g</span>",I,K,st,Et,lt="LÃ¤ge",N,C,G,ct,it,et="<span>|</span> <span>|</span> <span>|</span> <span>|</span>",ft,ut,L="<span>Auto</span> <span>VÃ¤rme</span> <span>Kylning</span> <span>Avfukt</span>",Y,W,ot,Z,j="Skicka till vÃ¤rmepumpen",Q,_t,Mt,Ot,zt,m;function p(U){e[7](U)}function b(U){e[8](U)}function P(U){e[9](U)}let R={updateSetting:vr};e[0].temp!==void 0&&(R.temp=e[0].temp),e[1].temp!==void 0&&(R.disabled=e[1].temp),e[0].mode!==void 0&&(R.mode=e[0].mode),i=new g0({props:R}),as.push(()=>Ma(i,"temp",p)),as.push(()=>Ma(i,"disabled",b)),as.push(()=>Ma(i,"mode",P));let E=(e[2]||e[3])&&zu(e),D=e[4]&&Vu(e);return{c(){t=Ct("div"),ao(i.$$.fragment),o=ne(),a=Ct("button"),h=Ii(l),u=ne(),f=Ct("div"),d=Ct("div"),g=Ct("button"),y=Ct("span"),y.innerHTML=_,v=ne(),S=Ct("button"),T=Ct("span"),T.innerHTML=O,M=ne(),A=Ct("div"),B=Ct("div"),q=Ct("div"),$=Ct("span"),$.textContent=x,z=ne(),X=Ct("div"),V=Ct("input"),rt=ne(),J=Ct("div"),J.innerHTML=H,ht=ne(),nt=Ct("div"),nt.innerHTML=xt,K=ne(),st=Ct("div"),Et=Ct("span"),Et.textContent=lt,N=ne(),C=Ct("div"),G=Ct("input"),ct=ne(),it=Ct("div"),it.innerHTML=et,ft=ne(),ut=Ct("div"),ut.innerHTML=L,W=ne(),ot=Ct("div"),Z=Ct("button"),Z.textContent=j,Q=ne(),E&&E.c(),_t=ne(),D&&D.c(),Mt=Pr(),this.h()},l(U){t=It(U,"DIV",{class:!0});var tt=Vt(t);lo(i.$$.fragment,tt),tt.forEach(kt),o=re(U),a=It(U,"BUTTON",{class:!0});var at=Vt(a);h=Ri(at,l),at.forEach(kt),u=re(U),f=It(U,"DIV",{class:!0});var wt=Vt(f);d=It(wt,"DIV",{class:!0});var Tt=Vt(d);g=It(Tt,"BUTTON",{class:!0});var Bt=Vt(g);y=It(Bt,"SPAN",{class:!0,"data-svelte-h":!0}),we(y)!=="svelte-13r8rb7"&&(y.innerHTML=_),Bt.forEach(kt),v=re(Tt),S=It(Tt,"BUTTON",{class:!0});var ge=Vt(S);T=It(ge,"SPAN",{class:!0,"data-svelte-h":!0}),we(T)!=="svelte-2l1hj3"&&(T.innerHTML=O),ge.forEach(kt),Tt.forEach(kt),wt.forEach(kt),M=re(U),A=It(U,"DIV",{class:!0});var Ne=Vt(A);B=It(Ne,"DIV",{class:!0});var Kt=Vt(B);q=It(Kt,"DIV",{class:!0});var Te=Vt(q);$=It(Te,"SPAN",{class:!0,"data-svelte-h":!0}),we($)!=="svelte-fgsbr8"&&($.textContent=x),z=re(Te),X=It(Te,"DIV",{class:!0});var oe=Vt(X);V=It(oe,"INPUT",{class:!0,type:!0,min:!0,max:!0,step:!0}),rt=re(oe),J=It(oe,"DIV",{class:!0,"data-svelte-h":!0}),we(J)!=="svelte-522o26"&&(J.innerHTML=H),ht=re(oe),nt=It(oe,"DIV",{class:!0,"data-svelte-h":!0}),we(nt)!=="svelte-1pm26hw"&&(nt.innerHTML=xt),oe.forEach(kt),Te.forEach(kt),K=re(Kt),st=It(Kt,"DIV",{class:!0});var he=Vt(st);Et=It(he,"SPAN",{class:!0,"data-svelte-h":!0}),we(Et)!=="svelte-1ymgcin"&&(Et.textContent=lt),N=re(he),C=It(he,"DIV",{class:!0});var te=Vt(C);G=It(te,"INPUT",{class:!0,type:!0,min:!0,max:!0,step:!0}),ct=re(te),it=It(te,"DIV",{class:!0,"data-svelte-h":!0}),we(it)!=="svelte-522o26"&&(it.innerHTML=et),ft=re(te),ut=It(te,"DIV",{class:!0,"data-svelte-h":!0}),we(ut)!=="svelte-nb2cha"&&(ut.innerHTML=L),te.forEach(kt),he.forEach(kt),Kt.forEach(kt),Ne.forEach(kt),W=re(U),ot=It(U,"DIV",{class:!0});var Oe=Vt(ot);Z=It(Oe,"BUTTON",{class:!0,"data-svelte-h":!0}),we(Z)!=="svelte-1cq2vu0"&&(Z.textContent=j),Oe.forEach(kt),Q=re(U),E&&E.l(U),_t=re(U),D&&D.l(U),Mt=Pr(),this.h()},h(){mt(t,"class","mt-10"),mt(a,"class",c="btn "+(e[0].power?"btn-success":"btn-error")+" mt-10 w-8/12 rounded"),mt(y,"class","p-4"),mt(g,"class",w="btn btn-primary h-full rounded "+(e[1].highPower?"opacity-20 pointer-events-none":"")),mt(T,"class","p-4"),mt(S,"class",k="btn btn-primary h-full rounded "+(e[1].tenDegreeMode?"opacity-20 pointer-events-none":"")),mt(d,"class","w-full grid grid-flow-col grid-cols-2 justify-between drop-shadow-sm gap-4"),mt(f,"class","mt-4 w-8/12 flex"),mt($,"class","mb-2 w-full text-center"),mt(V,"class","range range-sm"),mt(V,"type","range"),mt(V,"min","0"),mt(V,"max","3"),mt(V,"step","1"),mt(J,"class","w-full flex justify-between text-xs px-2"),mt(nt,"class","w-full flex justify-between text-xs px-2"),mt(X,"class","mx-3"),mt(q,"class",I="w-9/12 flex flex-col "+(e[1].fan?"opacity-20 pointer-events-none":"")),mt(Et,"class","mb-2 w-full text-center"),mt(G,"class","range range-sm"),mt(G,"type","range"),mt(G,"min","0"),mt(G,"max","3"),mt(G,"step","1"),mt(it,"class","w-full flex justify-between text-xs px-2"),mt(ut,"class","w-full flex justify-between text-xs px-2"),mt(C,"class","mx-3"),mt(st,"class",Y="mt-6 w-9/12 flex flex-col "+(e[1].mode?"opacity-20 pointer-events-none":"")),mt(B,"class","flex flex-col w-full items-center"),mt(A,"class","mt-6 w-full"),mt(Z,"class","btn btn-primary mt-3 mb-8 w-full rounded"),mt(ot,"class","w-8/12 mt-6")},m(U,tt){Nt(U,t,tt),ho(i,t,null),Nt(U,o,tt),Nt(U,a,tt),Lt(a,h),Nt(U,u,tt),Nt(U,f,tt),Lt(f,d),Lt(d,g),Lt(g,y),Lt(d,v),Lt(d,S),Lt(S,T),Nt(U,M,tt),Nt(U,A,tt),Lt(A,B),Lt(B,q),Lt(q,$),Lt(q,z),Lt(q,X),Lt(X,V),Fs(V,e[0].fan),Lt(X,rt),Lt(X,J),Lt(X,ht),Lt(X,nt),Lt(B,K),Lt(B,st),Lt(st,Et),Lt(st,N),Lt(st,C),Lt(C,G),Fs(G,e[0].mode),Lt(C,ct),Lt(C,it),Lt(C,ft),Lt(C,ut),Nt(U,W,tt),Nt(U,ot,tt),Lt(ot,Z),Nt(U,Q,tt),E&&E.m(U,tt),Nt(U,_t,tt),D&&D.m(U,tt),Nt(U,Mt,tt),Ot=!0,zt||(m=[Ue(a,"click",e[10]),Ue(g,"click",e[11]),Ue(S,"click",e[12]),Ue(V,"change",e[13]),Ue(V,"change",e[14]),Ue(V,"input",e[14]),Ue(G,"change",e[15]),Ue(G,"change",e[16]),Ue(G,"input",e[16]),Ue(Z,"click",e[5])],zt=!0)},p(U,tt){const at={};!n&&tt&1&&(n=!0,at.temp=U[0].temp,Ea(()=>n=!1)),!r&&tt&2&&(r=!0,at.disabled=U[1].temp,Ea(()=>r=!1)),!s&&tt&1&&(s=!0,at.mode=U[0].mode,Ea(()=>s=!1)),i.$set(at),(!Ot||tt&1)&&l!==(l=U[0].power?"PÃ¥":"Av")&&Cn(h,l),(!Ot||tt&1&&c!==(c="btn "+(U[0].power?"btn-success":"btn-error")+" mt-10 w-8/12 rounded"))&&mt(a,"class",c),(!Ot||tt&2&&w!==(w="btn btn-primary h-full rounded "+(U[1].highPower?"opacity-20 pointer-events-none":"")))&&mt(g,"class",w),(!Ot||tt&2&&k!==(k="btn btn-primary h-full rounded "+(U[1].tenDegreeMode?"opacity-20 pointer-events-none":"")))&&mt(S,"class",k),tt&1&&Fs(V,U[0].fan),(!Ot||tt&2&&I!==(I="w-9/12 flex flex-col "+(U[1].fan?"opacity-20 pointer-events-none":"")))&&mt(q,"class",I),tt&1&&Fs(G,U[0].mode),(!Ot||tt&2&&Y!==(Y="mt-6 w-9/12 flex flex-col "+(U[1].mode?"opacity-20 pointer-events-none":"")))&&mt(st,"class",Y),U[2]||U[3]?E?E.p(U,tt):(E=zu(U),E.c(),E.m(_t.parentNode,_t)):E&&(E.d(1),E=null),U[4]?D?D.p(U,tt):(D=Vu(U),D.c(),D.m(Mt.parentNode,Mt)):D&&(D.d(1),D=null)},i(U){Ot||(yi(i.$$.fragment,U),Ot=!0)},o(U){Ci(i.$$.fragment,U),Ot=!1},d(U){U&&(kt(t),kt(o),kt(a),kt(u),kt(f),kt(M),kt(A),kt(W),kt(ot),kt(Q),kt(_t),kt(Mt)),co(i),E&&E.d(U),D&&D.d(U),zt=!1,Sd(m)}}}function zu(e){let t,i,n,r='<div class="loading h-8 w-8"></div>',s,o;function a(c,u){return c[3]?cy:hy}let l=a(e),h=l(e);return{c(){t=Ct("div"),i=Ct("div"),n=Ct("div"),n.innerHTML=r,s=ne(),o=Ct("div"),h.c(),this.h()},l(c){t=It(c,"DIV",{class:!0});var u=Vt(t);i=It(u,"DIV",{class:!0});var f=Vt(i);n=It(f,"DIV",{class:!0,"data-svelte-h":!0}),we(n)!=="svelte-gaidlx"&&(n.innerHTML=r),s=re(f),o=It(f,"DIV",{class:!0});var d=Vt(o);h.l(d),d.forEach(kt),f.forEach(kt),u.forEach(kt),this.h()},h(){mt(n,"class","flex justify-center mb-4"),mt(o,"class","text-center"),mt(i,"class","bg-white p-6 rounded-lg shadow-lg w-8/12"),mt(t,"class","fixed inset-0 bg-gray-500 bg-opacity-50 flex justify-center items-center")},m(c,u){Nt(c,t,u),Lt(t,i),Lt(i,n),Lt(i,s),Lt(i,o),h.m(o,null)},p(c,u){l===(l=a(c))&&h?h.p(c,u):(h.d(1),h=l(c),h&&(h.c(),h.m(o,null)))},d(c){c&&kt(t),h.d()}}}function hy(e){let t,i="VÃ¤ntar pÃ¥ bekrÃ¤ftelse frÃ¥n vÃ¤rmepumpen...";return{c(){t=Ct("p"),t.textContent=i},l(n){t=It(n,"P",{"data-svelte-h":!0}),we(t)!=="svelte-82w1zj"&&(t.textContent=i)},m(n,r){Nt(n,t,r)},p:Re,d(n){n&&kt(t)}}}function cy(e){let t,i,n,r,s="Ok",o,a;return{c(){t=Ct("p"),i=Ii(e[3]),n=ne(),r=Ct("button"),r.textContent=s,this.h()},l(l){t=It(l,"P",{class:!0});var h=Vt(t);i=Ri(h,e[3]),h.forEach(kt),n=re(l),r=It(l,"BUTTON",{class:!0,"data-svelte-h":!0}),we(r)!=="svelte-13hnb89"&&(r.textContent=s),this.h()},h(){mt(t,"class","text-red-500 mt-4"),mt(r,"class","mt-8 btn btn-primary rounded w-full")},m(l,h){Nt(l,t,h),Lt(t,i),Nt(l,n,h),Nt(l,r,h),o||(a=Ue(r,"click",e[17]),o=!0)},p(l,h){h&8&&Cn(i,l[3])},d(l){l&&(kt(t),kt(n),kt(r)),o=!1,a()}}}function Vu(e){let t,i,n,r,s="Datan Ã¤r skickad till vÃ¤rmepumpen!",o,a,l="Ok",h,c;return{c(){t=Ct("div"),i=Ct("div"),n=Ct("div"),r=Ct("p"),r.textContent=s,o=ne(),a=Ct("button"),a.textContent=l,this.h()},l(u){t=It(u,"DIV",{class:!0});var f=Vt(t);i=It(f,"DIV",{class:!0});var d=Vt(i);n=It(d,"DIV",{class:!0});var g=Vt(n);r=It(g,"P",{class:!0,"data-svelte-h":!0}),we(r)!=="svelte-10jrpo0"&&(r.textContent=s),o=re(g),a=It(g,"BUTTON",{class:!0,"data-svelte-h":!0}),we(a)!=="svelte-1uhfzt3"&&(a.textContent=l),g.forEach(kt),d.forEach(kt),f.forEach(kt),this.h()},h(){mt(r,"class","text-green-500 font-bold"),mt(a,"class","mt-8 btn btn-primary rounded w-full"),mt(n,"class","text-center"),mt(i,"class","bg-white p-6 rounded-lg shadow-lg"),mt(t,"class","fixed inset-0 bg-gray-500 bg-opacity-50 flex justify-center items-center")},m(u,f){Nt(u,t,f),Lt(t,i),Lt(i,n),Lt(n,r),Lt(n,o),Lt(n,a),h||(c=Ue(a,"click",e[18]),h=!0)},p:Re,d(u){u&&kt(t),h=!1,c()}}}function uy(e){let t,i,n=e[0]&&Yu(e);return{c(){n&&n.c(),t=Pr()},l(r){n&&n.l(r),t=Pr()},m(r,s){n&&n.m(r,s),Nt(r,t,s),i=!0},p(r,[s]){r[0]?n?(n.p(r,s),s&1&&yi(n,1)):(n=Yu(r),n.c(),yi(n,1),n.m(t.parentNode,t)):n&&(Ro(),Ci(n,1,1,()=>{n=null}),Do())},i(r){i||(yi(n),i=!0)},o(r){Ci(n),i=!1},d(r){r&&kt(t),n&&n.d(r)}}}function fy(e,t,i){let n;Xh(e,h0,k=>i(6,n=k));let r,s,o=!1,a="",l=!1;async function h(){let k={temp:r.temp,mode:r.mode,fan:r.fan,power:r.power,highPower:r.highPower,tenDegreeMode:r.tenDegreeMode,id:Math.floor(Math.random()*99999)};try{i(2,o=!0),i(3,a=""),i(4,l=!1),console.log("Sending data to heatpump"),oy("heatpump/data",JSON.stringify(k));let M;console.log("Waiting to hear back from heatpump");let A=B=>{B==k.id&&(clearTimeout(M),console.log("Received back the right id!"),i(2,o=!1),i(4,l=!0))};mg("heatpump/received",A),M=setTimeout(()=>{ay("heatpump/received",A),console.error("Error waiting for heatpump/received"),i(2,o=!1),i(3,a="Timeout: No response from heatpump")},60*1e3)}catch(M){console.error("Error whilst sending to heatpump",M),i(2,o=!1),i(3,a="Error while sending data to heatpump")}}function c(k){e.$$.not_equal(r.temp,k)&&(r.temp=k,i(0,r),i(6,n))}function u(k){e.$$.not_equal(s.temp,k)&&(s.temp=k,i(1,s),i(6,n))}function f(k){e.$$.not_equal(r.mode,k)&&(r.mode=k,i(0,r),i(6,n))}const d=()=>{vr("power",!r.power)},g=()=>{vr("highPower",!r.highPower)},y=()=>{vr("tenDegreeMode",!r.tenDegreeMode)},_=k=>vr("fan",parseInt(k.target.value));function w(){r.fan=Xc(this.value),i(0,r),i(6,n)}const v=k=>vr("mode",parseInt(k.target.value));function S(){r.mode=Xc(this.value),i(0,r),i(6,n)}const T=()=>{i(2,o=!1),i(3,a="")},O=()=>{i(4,l=!1)};return e.$$.update=()=>{e.$$.dirty&64&&(i(0,r=n),i(1,s=n.disabledSettings))},[r,s,o,a,l,h,n,c,u,f,d,g,y,_,w,v,S,T,O]}class dy extends Ts{constructor(t){super(),Os(this,t,fy,uy,lr,{})}}function py(e,t){t&&t!=="lg"&&t!=="sm"&&t!=="xs"?e.style.fontSize=t.replace("x","em"):e.style.fontSize=""}function gy(e,t,i,n,r,s=1,o="",a=""){let l=1,h=1;r&&(r=="horizontal"?l=-1:r=="vertical"?h=-1:l=h=-1),typeof e=="string"&&(e=parseFloat(e)),typeof t=="string"&&(t=parseFloat(t)),typeof i=="string"&&(i=parseFloat(i));const c=`${t*s}${o}`,u=`${i*s}${o}`;let f=`translate(${c},${u}) scale(${l*e},${h*e})`;return n&&(f+=` rotate(${n}${a})`),f}function Hu(e){let t,i,n,r,s,o,a,l=e[3]&&qu(e);function h(f,d){return typeof f[17][4]=="string"?by:my}let c=h(e),u=c(e);return{c(){t=tr("svg"),l&&l.c(),i=tr("g"),n=tr("g"),u.c(),this.h()},l(f){t=er(f,"svg",{id:!0,class:!0,style:!0,viewBox:!0,"aria-hidden":!0,role:!0,xmlns:!0});var d=Vt(t);l&&l.l(d),i=er(d,"g",{transform:!0,"transform-origin":!0});var g=Vt(i);n=er(g,"g",{transform:!0});var y=Vt(n);u.l(y),y.forEach(kt),g.forEach(kt),d.forEach(kt),this.h()},h(){mt(n,"transform",e[16]),mt(i,"transform",r="translate("+e[17][0]/2+" "+e[17][1]/2+")"),mt(i,"transform-origin",s=e[17][0]/4+" 0"),mt(t,"id",e[1]),mt(t,"class",o="svelte-fa svelte-fa-base "+e[0]+" svelte-bvo74f"),mt(t,"style",e[2]),mt(t,"viewBox",a="0 0 "+e[17][0]+" "+e[17][1]),mt(t,"aria-hidden","true"),mt(t,"role","img"),mt(t,"xmlns","http://www.w3.org/2000/svg"),ze(t,"pulse",e[9]),ze(t,"svelte-fa-size-lg",e[4]==="lg"),ze(t,"svelte-fa-size-sm",e[4]==="sm"),ze(t,"svelte-fa-size-xs",e[4]==="xs"),ze(t,"svelte-fa-fw",e[6]),ze(t,"svelte-fa-pull-left",e[7]==="left"),ze(t,"svelte-fa-pull-right",e[7]==="right"),ze(t,"spin",e[8])},m(f,d){Nt(f,t,d),l&&l.m(t,null),Lt(t,i),Lt(i,n),u.m(n,null),e[24](t)},p(f,d){f[3]?l?l.p(f,d):(l=qu(f),l.c(),l.m(t,i)):l&&(l.d(1),l=null),c===(c=h(f))&&u?u.p(f,d):(u.d(1),u=c(f),u&&(u.c(),u.m(n,null))),d&65536&&mt(n,"transform",f[16]),d&131072&&r!==(r="translate("+f[17][0]/2+" "+f[17][1]/2+")")&&mt(i,"transform",r),d&131072&&s!==(s=f[17][0]/4+" 0")&&mt(i,"transform-origin",s),d&2&&mt(t,"id",f[1]),d&1&&o!==(o="svelte-fa svelte-fa-base "+f[0]+" svelte-bvo74f")&&mt(t,"class",o),d&4&&mt(t,"style",f[2]),d&131072&&a!==(a="0 0 "+f[17][0]+" "+f[17][1])&&mt(t,"viewBox",a),d&513&&ze(t,"pulse",f[9]),d&17&&ze(t,"svelte-fa-size-lg",f[4]==="lg"),d&17&&ze(t,"svelte-fa-size-sm",f[4]==="sm"),d&17&&ze(t,"svelte-fa-size-xs",f[4]==="xs"),d&65&&ze(t,"svelte-fa-fw",f[6]),d&129&&ze(t,"svelte-fa-pull-left",f[7]==="left"),d&129&&ze(t,"svelte-fa-pull-right",f[7]==="right"),d&257&&ze(t,"spin",f[8])},d(f){f&&kt(t),l&&l.d(),u.d(),e[24](null)}}}function qu(e){let t,i;return{c(){t=tr("title"),i=Ii(e[3])},l(n){t=er(n,"title",{});var r=Vt(t);i=Ri(r,e[3]),r.forEach(kt)},m(n,r){Nt(n,t,r),Lt(t,i)},p(n,r){r&8&&Cn(i,n[3])},d(n){n&&kt(t)}}}function my(e){let t,i,n,r,s,o,a,l,h,c;return{c(){t=tr("path"),o=tr("path"),this.h()},l(u){t=er(u,"path",{d:!0,fill:!0,"fill-opacity":!0,transform:!0}),Vt(t).forEach(kt),o=er(u,"path",{d:!0,fill:!0,"fill-opacity":!0,transform:!0}),Vt(o).forEach(kt),this.h()},h(){mt(t,"d",i=e[17][4][0]),mt(t,"fill",n=e[11]||e[5]||"currentColor"),mt(t,"fill-opacity",r=e[14]!=!1?e[12]:e[13]),mt(t,"transform",s="translate("+e[17][0]/-2+" "+e[17][1]/-2+")"),mt(o,"d",a=e[17][4][1]),mt(o,"fill",l=e[10]||e[5]||"currentColor"),mt(o,"fill-opacity",h=e[14]!=!1?e[13]:e[12]),mt(o,"transform",c="translate("+e[17][0]/-2+" "+e[17][1]/-2+")")},m(u,f){Nt(u,t,f),Nt(u,o,f)},p(u,f){f&131072&&i!==(i=u[17][4][0])&&mt(t,"d",i),f&2080&&n!==(n=u[11]||u[5]||"currentColor")&&mt(t,"fill",n),f&28672&&r!==(r=u[14]!=!1?u[12]:u[13])&&mt(t,"fill-opacity",r),f&131072&&s!==(s="translate("+u[17][0]/-2+" "+u[17][1]/-2+")")&&mt(t,"transform",s),f&131072&&a!==(a=u[17][4][1])&&mt(o,"d",a),f&1056&&l!==(l=u[10]||u[5]||"currentColor")&&mt(o,"fill",l),f&28672&&h!==(h=u[14]!=!1?u[13]:u[12])&&mt(o,"fill-opacity",h),f&131072&&c!==(c="translate("+u[17][0]/-2+" "+u[17][1]/-2+")")&&mt(o,"transform",c)},d(u){u&&(kt(t),kt(o))}}}function by(e){let t,i,n,r;return{c(){t=tr("path"),this.h()},l(s){t=er(s,"path",{d:!0,fill:!0,transform:!0}),Vt(t).forEach(kt),this.h()},h(){mt(t,"d",i=e[17][4]),mt(t,"fill",n=e[5]||e[10]||"currentColor"),mt(t,"transform",r="translate("+e[17][0]/-2+" "+e[17][1]/-2+")")},m(s,o){Nt(s,t,o)},p(s,o){o&131072&&i!==(i=s[17][4])&&mt(t,"d",i),o&1056&&n!==(n=s[5]||s[10]||"currentColor")&&mt(t,"fill",n),o&131072&&r!==(r="translate("+s[17][0]/-2+" "+s[17][1]/-2+")")&&mt(t,"transform",r)},d(s){s&&kt(t)}}}function yy(e){let t,i=e[17][4]&&Hu(e);return{c(){i&&i.c(),t=Pr()},l(n){i&&i.l(n),t=Pr()},m(n,r){i&&i.m(n,r),Nt(n,t,r)},p(n,[r]){n[17][4]?i?i.p(n,r):(i=Hu(n),i.c(),i.m(t.parentNode,t)):i&&(i.d(1),i=null)},i:Re,o:Re,d(n){n&&kt(t),i&&i.d(n)}}}function _y(e,t,i){let n,r,{class:s=void 0}=t,{id:o=void 0}=t,{style:a=void 0}=t,{icon:l}=t,{title:h=void 0}=t,{size:c=void 0}=t,{color:u=void 0}=t,{fw:f=!1}=t,{pull:d=void 0}=t,{scale:g=1}=t,{translateX:y=0}=t,{translateY:_=0}=t,{rotate:w=void 0}=t,{flip:v=void 0}=t,{spin:S=!1}=t,{pulse:T=!1}=t,{primaryColor:O=""}=t,{secondaryColor:k=""}=t,{primaryOpacity:M=1}=t,{secondaryOpacity:A=.4}=t,{swapOpacity:B=!1}=t,q;function $(x){as[x?"unshift":"push"](()=>{q=x,i(15,q)})}return e.$$set=x=>{"class"in x&&i(0,s=x.class),"id"in x&&i(1,o=x.id),"style"in x&&i(2,a=x.style),"icon"in x&&i(18,l=x.icon),"title"in x&&i(3,h=x.title),"size"in x&&i(4,c=x.size),"color"in x&&i(5,u=x.color),"fw"in x&&i(6,f=x.fw),"pull"in x&&i(7,d=x.pull),"scale"in x&&i(19,g=x.scale),"translateX"in x&&i(20,y=x.translateX),"translateY"in x&&i(21,_=x.translateY),"rotate"in x&&i(22,w=x.rotate),"flip"in x&&i(23,v=x.flip),"spin"in x&&i(8,S=x.spin),"pulse"in x&&i(9,T=x.pulse),"primaryColor"in x&&i(10,O=x.primaryColor),"secondaryColor"in x&&i(11,k=x.secondaryColor),"primaryOpacity"in x&&i(12,M=x.primaryOpacity),"secondaryOpacity"in x&&i(13,A=x.secondaryOpacity),"swapOpacity"in x&&i(14,B=x.swapOpacity)},e.$$.update=()=>{e.$$.dirty&32784&&q&&c&&py(q,c),e.$$.dirty&262144&&i(17,n=l&&l.icon||[0,0,"",[],""]),e.$$.dirty&16252928&&i(16,r=gy(g,y,_,w,v,512))},[s,o,a,h,c,u,f,d,S,T,O,k,M,A,B,q,r,n,l,g,y,_,w,v,$]}class wy extends Ts{constructor(t){super(),Os(this,t,_y,yy,lr,{class:0,id:1,style:2,icon:18,title:3,size:4,color:5,fw:6,pull:7,scale:19,translateX:20,translateY:21,rotate:22,flip:23,spin:8,pulse:9,primaryColor:10,secondaryColor:11,primaryOpacity:12,secondaryOpacity:13,swapOpacity:14})}}/*!
 * Font Awesome Free 6.7.1 by @fontawesome - https://fontawesome.com
 * License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License)
 * Copyright 2024 Fonticons, Inc.
 */const vy={prefix:"fas",iconName:"arrow-right-from-bracket",icon:[512,512,["sign-out"],"f08b","M502.6 278.6c12.5-12.5 12.5-32.8 0-45.3l-128-128c-12.5-12.5-32.8-12.5-45.3 0s-12.5 32.8 0 45.3L402.7 224 192 224c-17.7 0-32 14.3-32 32s14.3 32 32 32l210.7 0-73.4 73.4c-12.5 12.5-12.5 32.8 0 45.3s32.8 12.5 45.3 0l128-128zM160 96c17.7 0 32-14.3 32-32s-14.3-32-32-32L96 32C43 32 0 75 0 128L0 384c0 53 43 96 96 96l64 0c17.7 0 32-14.3 32-32s-14.3-32-32-32l-64 0c-17.7 0-32-14.3-32-32l0-256c0-17.7 14.3-32 32-32l64 0z"]},Sy=vy;/*!
 * @kurkle/color v0.3.4
 * https://github.com/kurkle/color#readme
 * (c) 2024 Jukka Kurkela
 * Released under the MIT License
 */function Ps(e){return e+.5|0}const vn=(e,t,i)=>Math.max(Math.min(e,i),t);function es(e){return vn(Ps(e*2.55),0,255)}function An(e){return vn(Ps(e*255),0,255)}function Ki(e){return vn(Ps(e/2.55)/100,0,1)}function $u(e){return vn(Ps(e*100),0,100)}const oi={0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,A:10,B:11,C:12,D:13,E:14,F:15,a:10,b:11,c:12,d:13,e:14,f:15},Th=[..."0123456789ABCDEF"],xy=e=>Th[e&15],ky=e=>Th[(e&240)>>4]+Th[e&15],Hs=e=>(e&240)>>4===(e&15),Ey=e=>Hs(e.r)&&Hs(e.g)&&Hs(e.b)&&Hs(e.a);function My(e){var t=e.length,i;return e[0]==="#"&&(t===4||t===5?i={r:255&oi[e[1]]*17,g:255&oi[e[2]]*17,b:255&oi[e[3]]*17,a:t===5?oi[e[4]]*17:255}:(t===7||t===9)&&(i={r:oi[e[1]]<<4|oi[e[2]],g:oi[e[3]]<<4|oi[e[4]],b:oi[e[5]]<<4|oi[e[6]],a:t===9?oi[e[7]]<<4|oi[e[8]]:255})),i}const Ay=(e,t)=>e<255?t(e):"";function Ty(e){var t=Ey(e)?xy:ky;return e?"#"+t(e.r)+t(e.g)+t(e.b)+Ay(e.a,t):void 0}const Oy=/^(hsla?|hwb|hsv)\(\s*([-+.e\d]+)(?:deg)?[\s,]+([-+.e\d]+)%[\s,]+([-+.e\d]+)%(?:[\s,]+([-+.e\d]+)(%)?)?\s*\)$/;function bg(e,t,i){const n=t*Math.min(i,1-i),r=(s,o=(s+e/30)%12)=>i-n*Math.max(Math.min(o-3,9-o,1),-1);return[r(0),r(8),r(4)]}function Py(e,t,i){const n=(r,s=(r+e/60)%6)=>i-i*t*Math.max(Math.min(s,4-s,1),0);return[n(5),n(3),n(1)]}function Cy(e,t,i){const n=bg(e,1,.5);let r;for(t+i>1&&(r=1/(t+i),t*=r,i*=r),r=0;r<3;r++)n[r]*=1-t-i,n[r]+=t;return n}function Iy(e,t,i,n,r){return e===r?(t-i)/n+(t<i?6:0):t===r?(i-e)/n+2:(e-t)/n+4}function cc(e){const i=e.r/255,n=e.g/255,r=e.b/255,s=Math.max(i,n,r),o=Math.min(i,n,r),a=(s+o)/2;let l,h,c;return s!==o&&(c=s-o,h=a>.5?c/(2-s-o):c/(s+o),l=Iy(i,n,r,c,s),l=l*60+.5),[l|0,h||0,a]}function uc(e,t,i,n){return(Array.isArray(t)?e(t[0],t[1],t[2]):e(t,i,n)).map(An)}function fc(e,t,i){return uc(bg,e,t,i)}function Ry(e,t,i){return uc(Cy,e,t,i)}function Dy(e,t,i){return uc(Py,e,t,i)}function yg(e){return(e%360+360)%360}function Ly(e){const t=Oy.exec(e);let i=255,n;if(!t)return;t[5]!==n&&(i=t[6]?es(+t[5]):An(+t[5]));const r=yg(+t[2]),s=+t[3]/100,o=+t[4]/100;return t[1]==="hwb"?n=Ry(r,s,o):t[1]==="hsv"?n=Dy(r,s,o):n=fc(r,s,o),{r:n[0],g:n[1],b:n[2],a:i}}function By(e,t){var i=cc(e);i[0]=yg(i[0]+t),i=fc(i),e.r=i[0],e.g=i[1],e.b=i[2]}function Ny(e){if(!e)return;const t=cc(e),i=t[0],n=$u(t[1]),r=$u(t[2]);return e.a<255?`hsla(${i}, ${n}%, ${r}%, ${Ki(e.a)})`:`hsl(${i}, ${n}%, ${r}%)`}const Gu={x:"dark",Z:"light",Y:"re",X:"blu",W:"gr",V:"medium",U:"slate",A:"ee",T:"ol",S:"or",B:"ra",C:"lateg",D:"ights",R:"in",Q:"turquois",E:"hi",P:"ro",O:"al",N:"le",M:"de",L:"yello",F:"en",K:"ch",G:"arks",H:"ea",I:"ightg",J:"wh"},Ku={OiceXe:"f0f8ff",antiquewEte:"faebd7",aqua:"ffff",aquamarRe:"7fffd4",azuY:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"0",blanKedOmond:"ffebcd",Xe:"ff",XeviTet:"8a2be2",bPwn:"a52a2a",burlywood:"deb887",caMtXe:"5f9ea0",KartYuse:"7fff00",KocTate:"d2691e",cSO:"ff7f50",cSnflowerXe:"6495ed",cSnsilk:"fff8dc",crimson:"dc143c",cyan:"ffff",xXe:"8b",xcyan:"8b8b",xgTMnPd:"b8860b",xWay:"a9a9a9",xgYF:"6400",xgYy:"a9a9a9",xkhaki:"bdb76b",xmagFta:"8b008b",xTivegYF:"556b2f",xSange:"ff8c00",xScEd:"9932cc",xYd:"8b0000",xsOmon:"e9967a",xsHgYF:"8fbc8f",xUXe:"483d8b",xUWay:"2f4f4f",xUgYy:"2f4f4f",xQe:"ced1",xviTet:"9400d3",dAppRk:"ff1493",dApskyXe:"bfff",dimWay:"696969",dimgYy:"696969",dodgerXe:"1e90ff",fiYbrick:"b22222",flSOwEte:"fffaf0",foYstWAn:"228b22",fuKsia:"ff00ff",gaRsbSo:"dcdcdc",ghostwEte:"f8f8ff",gTd:"ffd700",gTMnPd:"daa520",Way:"808080",gYF:"8000",gYFLw:"adff2f",gYy:"808080",honeyMw:"f0fff0",hotpRk:"ff69b4",RdianYd:"cd5c5c",Rdigo:"4b0082",ivSy:"fffff0",khaki:"f0e68c",lavFMr:"e6e6fa",lavFMrXsh:"fff0f5",lawngYF:"7cfc00",NmoncEffon:"fffacd",ZXe:"add8e6",ZcSO:"f08080",Zcyan:"e0ffff",ZgTMnPdLw:"fafad2",ZWay:"d3d3d3",ZgYF:"90ee90",ZgYy:"d3d3d3",ZpRk:"ffb6c1",ZsOmon:"ffa07a",ZsHgYF:"20b2aa",ZskyXe:"87cefa",ZUWay:"778899",ZUgYy:"778899",ZstAlXe:"b0c4de",ZLw:"ffffe0",lime:"ff00",limegYF:"32cd32",lRF:"faf0e6",magFta:"ff00ff",maPon:"800000",VaquamarRe:"66cdaa",VXe:"cd",VScEd:"ba55d3",VpurpN:"9370db",VsHgYF:"3cb371",VUXe:"7b68ee",VsprRggYF:"fa9a",VQe:"48d1cc",VviTetYd:"c71585",midnightXe:"191970",mRtcYam:"f5fffa",mistyPse:"ffe4e1",moccasR:"ffe4b5",navajowEte:"ffdead",navy:"80",Tdlace:"fdf5e6",Tive:"808000",TivedBb:"6b8e23",Sange:"ffa500",SangeYd:"ff4500",ScEd:"da70d6",pOegTMnPd:"eee8aa",pOegYF:"98fb98",pOeQe:"afeeee",pOeviTetYd:"db7093",papayawEp:"ffefd5",pHKpuff:"ffdab9",peru:"cd853f",pRk:"ffc0cb",plum:"dda0dd",powMrXe:"b0e0e6",purpN:"800080",YbeccapurpN:"663399",Yd:"ff0000",Psybrown:"bc8f8f",PyOXe:"4169e1",saddNbPwn:"8b4513",sOmon:"fa8072",sandybPwn:"f4a460",sHgYF:"2e8b57",sHshell:"fff5ee",siFna:"a0522d",silver:"c0c0c0",skyXe:"87ceeb",UXe:"6a5acd",UWay:"708090",UgYy:"708090",snow:"fffafa",sprRggYF:"ff7f",stAlXe:"4682b4",tan:"d2b48c",teO:"8080",tEstN:"d8bfd8",tomato:"ff6347",Qe:"40e0d0",viTet:"ee82ee",JHt:"f5deb3",wEte:"ffffff",wEtesmoke:"f5f5f5",Lw:"ffff00",LwgYF:"9acd32"};function Fy(){const e={},t=Object.keys(Ku),i=Object.keys(Gu);let n,r,s,o,a;for(n=0;n<t.length;n++){for(o=a=t[n],r=0;r<i.length;r++)s=i[r],a=a.replace(s,Gu[s]);s=parseInt(Ku[o],16),e[a]=[s>>16&255,s>>8&255,s&255]}return e}let qs;function Uy(e){qs||(qs=Fy(),qs.transparent=[0,0,0,0]);const t=qs[e.toLowerCase()];return t&&{r:t[0],g:t[1],b:t[2],a:t.length===4?t[3]:255}}const jy=/^rgba?\(\s*([-+.\d]+)(%)?[\s,]+([-+.e\d]+)(%)?[\s,]+([-+.e\d]+)(%)?(?:[\s,/]+([-+.e\d]+)(%)?)?\s*\)$/;function Wy(e){const t=jy.exec(e);let i=255,n,r,s;if(t){if(t[7]!==n){const o=+t[7];i=t[8]?es(o):vn(o*255,0,255)}return n=+t[1],r=+t[3],s=+t[5],n=255&(t[2]?es(n):vn(n,0,255)),r=255&(t[4]?es(r):vn(r,0,255)),s=255&(t[6]?es(s):vn(s,0,255)),{r:n,g:r,b:s,a:i}}}function Yy(e){return e&&(e.a<255?`rgba(${e.r}, ${e.g}, ${e.b}, ${Ki(e.a)})`:`rgb(${e.r}, ${e.g}, ${e.b})`)}const Wa=e=>e<=.0031308?e*12.92:Math.pow(e,1/2.4)*1.055-.055,yr=e=>e<=.04045?e/12.92:Math.pow((e+.055)/1.055,2.4);function zy(e,t,i){const n=yr(Ki(e.r)),r=yr(Ki(e.g)),s=yr(Ki(e.b));return{r:An(Wa(n+i*(yr(Ki(t.r))-n))),g:An(Wa(r+i*(yr(Ki(t.g))-r))),b:An(Wa(s+i*(yr(Ki(t.b))-s))),a:e.a+i*(t.a-e.a)}}function $s(e,t,i){if(e){let n=cc(e);n[t]=Math.max(0,Math.min(n[t]+n[t]*i,t===0?360:1)),n=fc(n),e.r=n[0],e.g=n[1],e.b=n[2]}}function _g(e,t){return e&&Object.assign(t||{},e)}function Qu(e){var t={r:0,g:0,b:0,a:255};return Array.isArray(e)?e.length>=3&&(t={r:e[0],g:e[1],b:e[2],a:255},e.length>3&&(t.a=An(e[3]))):(t=_g(e,{r:0,g:0,b:0,a:1}),t.a=An(t.a)),t}function Vy(e){return e.charAt(0)==="r"?Wy(e):Ly(e)}class ms{constructor(t){if(t instanceof ms)return t;const i=typeof t;let n;i==="object"?n=Qu(t):i==="string"&&(n=My(t)||Uy(t)||Vy(t)),this._rgb=n,this._valid=!!n}get valid(){return this._valid}get rgb(){var t=_g(this._rgb);return t&&(t.a=Ki(t.a)),t}set rgb(t){this._rgb=Qu(t)}rgbString(){return this._valid?Yy(this._rgb):void 0}hexString(){return this._valid?Ty(this._rgb):void 0}hslString(){return this._valid?Ny(this._rgb):void 0}mix(t,i){if(t){const n=this.rgb,r=t.rgb;let s;const o=i===s?.5:i,a=2*o-1,l=n.a-r.a,h=((a*l===-1?a:(a+l)/(1+a*l))+1)/2;s=1-h,n.r=255&h*n.r+s*r.r+.5,n.g=255&h*n.g+s*r.g+.5,n.b=255&h*n.b+s*r.b+.5,n.a=o*n.a+(1-o)*r.a,this.rgb=n}return this}interpolate(t,i){return t&&(this._rgb=zy(this._rgb,t._rgb,i)),this}clone(){return new ms(this.rgb)}alpha(t){return this._rgb.a=An(t),this}clearer(t){const i=this._rgb;return i.a*=1-t,this}greyscale(){const t=this._rgb,i=Ps(t.r*.3+t.g*.59+t.b*.11);return t.r=t.g=t.b=i,this}opaquer(t){const i=this._rgb;return i.a*=1+t,this}negate(){const t=this._rgb;return t.r=255-t.r,t.g=255-t.g,t.b=255-t.b,this}lighten(t){return $s(this._rgb,2,t),this}darken(t){return $s(this._rgb,2,-t),this}saturate(t){return $s(this._rgb,1,t),this}desaturate(t){return $s(this._rgb,1,-t),this}rotate(t){return By(this._rgb,t),this}}/*!
 * Chart.js v4.4.7
 * https://www.chartjs.org
 * (c) 2024 Chart.js Contributors
 * Released under the MIT License
 */function Ui(){}const Hy=(()=>{let e=0;return()=>e++})();function Gt(e){return e==null}function ce(e){if(Array.isArray&&Array.isArray(e))return!0;const t=Object.prototype.toString.call(e);return t.slice(0,7)==="[object"&&t.slice(-6)==="Array]"}function Ht(e){return e!==null&&Object.prototype.toString.call(e)==="[object Object]"}function Ee(e){return(typeof e=="number"||e instanceof Number)&&isFinite(+e)}function ii(e,t){return Ee(e)?e:t}function jt(e,t){return typeof e>"u"?t:e}const qy=(e,t)=>typeof e=="string"&&e.endsWith("%")?parseFloat(e)/100:+e/t,wg=(e,t)=>typeof e=="string"&&e.endsWith("%")?parseFloat(e)/100*t:+e;function le(e,t,i){if(e&&typeof e.call=="function")return e.apply(i,t)}function Jt(e,t,i,n){let r,s,o;if(ce(e))if(s=e.length,n)for(r=s-1;r>=0;r--)t.call(i,e[r],r);else for(r=0;r<s;r++)t.call(i,e[r],r);else if(Ht(e))for(o=Object.keys(e),s=o.length,r=0;r<s;r++)t.call(i,e[o[r]],o[r])}function zo(e,t){let i,n,r,s;if(!e||!t||e.length!==t.length)return!1;for(i=0,n=e.length;i<n;++i)if(r=e[i],s=t[i],r.datasetIndex!==s.datasetIndex||r.index!==s.index)return!1;return!0}function Vo(e){if(ce(e))return e.map(Vo);if(Ht(e)){const t=Object.create(null),i=Object.keys(e),n=i.length;let r=0;for(;r<n;++r)t[i[r]]=Vo(e[i[r]]);return t}return e}function vg(e){return["__proto__","prototype","constructor"].indexOf(e)===-1}function $y(e,t,i,n){if(!vg(e))return;const r=t[e],s=i[e];Ht(r)&&Ht(s)?bs(r,s,n):t[e]=Vo(s)}function bs(e,t,i){const n=ce(t)?t:[t],r=n.length;if(!Ht(e))return e;i=i||{};const s=i.merger||$y;let o;for(let a=0;a<r;++a){if(o=n[a],!Ht(o))continue;const l=Object.keys(o);for(let h=0,c=l.length;h<c;++h)s(l[h],e,o,i)}return e}function cs(e,t){return bs(e,t,{merger:Gy})}function Gy(e,t,i){if(!vg(e))return;const n=t[e],r=i[e];Ht(n)&&Ht(r)?cs(n,r):Object.prototype.hasOwnProperty.call(t,e)||(t[e]=Vo(r))}const Xu={"":e=>e,x:e=>e.x,y:e=>e.y};function Ky(e){const t=e.split("."),i=[];let n="";for(const r of t)n+=r,n.endsWith("\\")?n=n.slice(0,-1)+".":(i.push(n),n="");return i}function Qy(e){const t=Ky(e);return i=>{for(const n of t){if(n==="")break;i=i&&i[n]}return i}}function On(e,t){return(Xu[t]||(Xu[t]=Qy(t)))(e)}function dc(e){return e.charAt(0).toUpperCase()+e.slice(1)}const ys=e=>typeof e<"u",Pn=e=>typeof e=="function",Zu=(e,t)=>{if(e.size!==t.size)return!1;for(const i of e)if(!t.has(i))return!1;return!0};function Xy(e){return e.type==="mouseup"||e.type==="click"||e.type==="contextmenu"}const fe=Math.PI,ue=2*fe,Zy=ue+fe,Ho=Number.POSITIVE_INFINITY,Jy=fe/180,Ae=fe/2,Wn=fe/4,Ju=fe*2/3,Sn=Math.log10,Di=Math.sign;function us(e,t,i){return Math.abs(e-t)<i}function tf(e){const t=Math.round(e);e=us(e,t,e/1e3)?t:e;const i=Math.pow(10,Math.floor(Sn(e))),n=e/i;return(n<=1?1:n<=2?2:n<=5?5:10)*i}function t_(e){const t=[],i=Math.sqrt(e);let n;for(n=1;n<i;n++)e%n===0&&(t.push(n),t.push(e/n));return i===(i|0)&&t.push(i),t.sort((r,s)=>r-s).pop(),t}function Cr(e){return!isNaN(parseFloat(e))&&isFinite(e)}function e_(e,t){const i=Math.round(e);return i-t<=e&&i+t>=e}function Sg(e,t,i){let n,r,s;for(n=0,r=e.length;n<r;n++)s=e[n][i],isNaN(s)||(t.min=Math.min(t.min,s),t.max=Math.max(t.max,s))}function mi(e){return e*(fe/180)}function pc(e){return e*(180/fe)}function ef(e){if(!Ee(e))return;let t=1,i=0;for(;Math.round(e*t)/t!==e;)t*=10,i++;return i}function xg(e,t){const i=t.x-e.x,n=t.y-e.y,r=Math.sqrt(i*i+n*n);let s=Math.atan2(n,i);return s<-.5*fe&&(s+=ue),{angle:s,distance:r}}function Oh(e,t){return Math.sqrt(Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2))}function i_(e,t){return(e-t+Zy)%ue-fe}function ri(e){return(e%ue+ue)%ue}function _s(e,t,i,n){const r=ri(e),s=ri(t),o=ri(i),a=ri(s-r),l=ri(o-r),h=ri(r-s),c=ri(r-o);return r===s||r===o||n&&s===o||a>l&&h<c}function Be(e,t,i){return Math.max(t,Math.min(i,e))}function n_(e){return Be(e,-32768,32767)}function Ji(e,t,i,n=1e-6){return e>=Math.min(t,i)-n&&e<=Math.max(t,i)+n}function gc(e,t,i){i=i||(o=>e[o]<t);let n=e.length-1,r=0,s;for(;n-r>1;)s=r+n>>1,i(s)?r=s:n=s;return{lo:r,hi:n}}const tn=(e,t,i,n)=>gc(e,i,n?r=>{const s=e[r][t];return s<i||s===i&&e[r+1][t]===i}:r=>e[r][t]<i),r_=(e,t,i)=>gc(e,i,n=>e[n][t]>=i);function s_(e,t,i){let n=0,r=e.length;for(;n<r&&e[n]<t;)n++;for(;r>n&&e[r-1]>i;)r--;return n>0||r<e.length?e.slice(n,r):e}const kg=["push","pop","shift","splice","unshift"];function o_(e,t){if(e._chartjs){e._chartjs.listeners.push(t);return}Object.defineProperty(e,"_chartjs",{configurable:!0,enumerable:!1,value:{listeners:[t]}}),kg.forEach(i=>{const n="_onData"+dc(i),r=e[i];Object.defineProperty(e,i,{configurable:!0,enumerable:!1,value(...s){const o=r.apply(this,s);return e._chartjs.listeners.forEach(a=>{typeof a[n]=="function"&&a[n](...s)}),o}})})}function nf(e,t){const i=e._chartjs;if(!i)return;const n=i.listeners,r=n.indexOf(t);r!==-1&&n.splice(r,1),!(n.length>0)&&(kg.forEach(s=>{delete e[s]}),delete e._chartjs)}function Eg(e){const t=new Set(e);return t.size===e.length?e:Array.from(t)}const Mg=function(){return typeof window>"u"?function(e){return e()}:window.requestAnimationFrame}();function Ag(e,t){let i=[],n=!1;return function(...r){i=r,n||(n=!0,Mg.call(window,()=>{n=!1,e.apply(t,i)}))}}function a_(e,t){let i;return function(...n){return t?(clearTimeout(i),i=setTimeout(e,t,n)):e.apply(this,n),t}}const mc=e=>e==="start"?"left":e==="end"?"right":"center",He=(e,t,i)=>e==="start"?t:e==="end"?i:(t+i)/2,l_=(e,t,i,n)=>e===(n?"left":"right")?i:e==="center"?(t+i)/2:t;function Tg(e,t,i){const n=t.length;let r=0,s=n;if(e._sorted){const{iScale:o,_parsed:a}=e,l=o.axis,{min:h,max:c,minDefined:u,maxDefined:f}=o.getUserBounds();u&&(r=Be(Math.min(tn(a,l,h).lo,i?n:tn(t,l,o.getPixelForValue(h)).lo),0,n-1)),f?s=Be(Math.max(tn(a,o.axis,c,!0).hi+1,i?0:tn(t,l,o.getPixelForValue(c),!0).hi+1),r,n)-r:s=n-r}return{start:r,count:s}}function Og(e){const{xScale:t,yScale:i,_scaleRanges:n}=e,r={xmin:t.min,xmax:t.max,ymin:i.min,ymax:i.max};if(!n)return e._scaleRanges=r,!0;const s=n.xmin!==t.min||n.xmax!==t.max||n.ymin!==i.min||n.ymax!==i.max;return Object.assign(n,r),s}const Gs=e=>e===0||e===1,rf=(e,t,i)=>-(Math.pow(2,10*(e-=1))*Math.sin((e-t)*ue/i)),sf=(e,t,i)=>Math.pow(2,-10*e)*Math.sin((e-t)*ue/i)+1,fs={linear:e=>e,easeInQuad:e=>e*e,easeOutQuad:e=>-e*(e-2),easeInOutQuad:e=>(e/=.5)<1?.5*e*e:-.5*(--e*(e-2)-1),easeInCubic:e=>e*e*e,easeOutCubic:e=>(e-=1)*e*e+1,easeInOutCubic:e=>(e/=.5)<1?.5*e*e*e:.5*((e-=2)*e*e+2),easeInQuart:e=>e*e*e*e,easeOutQuart:e=>-((e-=1)*e*e*e-1),easeInOutQuart:e=>(e/=.5)<1?.5*e*e*e*e:-.5*((e-=2)*e*e*e-2),easeInQuint:e=>e*e*e*e*e,easeOutQuint:e=>(e-=1)*e*e*e*e+1,easeInOutQuint:e=>(e/=.5)<1?.5*e*e*e*e*e:.5*((e-=2)*e*e*e*e+2),easeInSine:e=>-Math.cos(e*Ae)+1,easeOutSine:e=>Math.sin(e*Ae),easeInOutSine:e=>-.5*(Math.cos(fe*e)-1),easeInExpo:e=>e===0?0:Math.pow(2,10*(e-1)),easeOutExpo:e=>e===1?1:-Math.pow(2,-10*e)+1,easeInOutExpo:e=>Gs(e)?e:e<.5?.5*Math.pow(2,10*(e*2-1)):.5*(-Math.pow(2,-10*(e*2-1))+2),easeInCirc:e=>e>=1?e:-(Math.sqrt(1-e*e)-1),easeOutCirc:e=>Math.sqrt(1-(e-=1)*e),easeInOutCirc:e=>(e/=.5)<1?-.5*(Math.sqrt(1-e*e)-1):.5*(Math.sqrt(1-(e-=2)*e)+1),easeInElastic:e=>Gs(e)?e:rf(e,.075,.3),easeOutElastic:e=>Gs(e)?e:sf(e,.075,.3),easeInOutElastic(e){return Gs(e)?e:e<.5?.5*rf(e*2,.1125,.45):.5+.5*sf(e*2-1,.1125,.45)},easeInBack(e){return e*e*((1.70158+1)*e-1.70158)},easeOutBack(e){return(e-=1)*e*((1.70158+1)*e+1.70158)+1},easeInOutBack(e){let t=1.70158;return(e/=.5)<1?.5*(e*e*(((t*=1.525)+1)*e-t)):.5*((e-=2)*e*(((t*=1.525)+1)*e+t)+2)},easeInBounce:e=>1-fs.easeOutBounce(1-e),easeOutBounce(e){return e<1/2.75?7.5625*e*e:e<2/2.75?7.5625*(e-=1.5/2.75)*e+.75:e<2.5/2.75?7.5625*(e-=2.25/2.75)*e+.9375:7.5625*(e-=2.625/2.75)*e+.984375},easeInOutBounce:e=>e<.5?fs.easeInBounce(e*2)*.5:fs.easeOutBounce(e*2-1)*.5+.5};function bc(e){if(e&&typeof e=="object"){const t=e.toString();return t==="[object CanvasPattern]"||t==="[object CanvasGradient]"}return!1}function of(e){return bc(e)?e:new ms(e)}function Ya(e){return bc(e)?e:new ms(e).saturate(.5).darken(.1).hexString()}const h_=["x","y","borderWidth","radius","tension"],c_=["color","borderColor","backgroundColor"];function u_(e){e.set("animation",{delay:void 0,duration:1e3,easing:"easeOutQuart",fn:void 0,from:void 0,loop:void 0,to:void 0,type:void 0}),e.describe("animation",{_fallback:!1,_indexable:!1,_scriptable:t=>t!=="onProgress"&&t!=="onComplete"&&t!=="fn"}),e.set("animations",{colors:{type:"color",properties:c_},numbers:{type:"number",properties:h_}}),e.describe("animations",{_fallback:"animation"}),e.set("transitions",{active:{animation:{duration:400}},resize:{animation:{duration:0}},show:{animations:{colors:{from:"transparent"},visible:{type:"boolean",duration:0}}},hide:{animations:{colors:{to:"transparent"},visible:{type:"boolean",easing:"linear",fn:t=>t|0}}}})}function f_(e){e.set("layout",{autoPadding:!0,padding:{top:0,right:0,bottom:0,left:0}})}const af=new Map;function d_(e,t){t=t||{};const i=e+JSON.stringify(t);let n=af.get(i);return n||(n=new Intl.NumberFormat(e,t),af.set(i,n)),n}function Cs(e,t,i){return d_(t,i).format(e)}const Pg={values(e){return ce(e)?e:""+e},numeric(e,t,i){if(e===0)return"0";const n=this.chart.options.locale;let r,s=e;if(i.length>1){const h=Math.max(Math.abs(i[0].value),Math.abs(i[i.length-1].value));(h<1e-4||h>1e15)&&(r="scientific"),s=p_(e,i)}const o=Sn(Math.abs(s)),a=isNaN(o)?1:Math.max(Math.min(-1*Math.floor(o),20),0),l={notation:r,minimumFractionDigits:a,maximumFractionDigits:a};return Object.assign(l,this.options.ticks.format),Cs(e,n,l)},logarithmic(e,t,i){if(e===0)return"0";const n=i[t].significand||e/Math.pow(10,Math.floor(Sn(e)));return[1,2,3,5,10,15].includes(n)||t>.8*i.length?Pg.numeric.call(this,e,t,i):""}};function p_(e,t){let i=t.length>3?t[2].value-t[1].value:t[1].value-t[0].value;return Math.abs(i)>=1&&e!==Math.floor(e)&&(i=e-Math.floor(e)),i}var la={formatters:Pg};function g_(e){e.set("scale",{display:!0,offset:!1,reverse:!1,beginAtZero:!1,bounds:"ticks",clip:!0,grace:0,grid:{display:!0,lineWidth:1,drawOnChartArea:!0,drawTicks:!0,tickLength:8,tickWidth:(t,i)=>i.lineWidth,tickColor:(t,i)=>i.color,offset:!1},border:{display:!0,dash:[],dashOffset:0,width:1},title:{display:!1,text:"",padding:{top:4,bottom:4}},ticks:{minRotation:0,maxRotation:50,mirror:!1,textStrokeWidth:0,textStrokeColor:"",padding:3,display:!0,autoSkip:!0,autoSkipPadding:3,labelOffset:0,callback:la.formatters.values,minor:{},major:{},align:"center",crossAlign:"near",showLabelBackdrop:!1,backdropColor:"rgba(255, 255, 255, 0.75)",backdropPadding:2}}),e.route("scale.ticks","color","","color"),e.route("scale.grid","color","","borderColor"),e.route("scale.border","color","","borderColor"),e.route("scale.title","color","","color"),e.describe("scale",{_fallback:!1,_scriptable:t=>!t.startsWith("before")&&!t.startsWith("after")&&t!=="callback"&&t!=="parser",_indexable:t=>t!=="borderDash"&&t!=="tickBorderDash"&&t!=="dash"}),e.describe("scales",{_fallback:"scale"}),e.describe("scale.ticks",{_scriptable:t=>t!=="backdropPadding"&&t!=="callback",_indexable:t=>t!=="backdropPadding"})}const hr=Object.create(null),Ph=Object.create(null);function ds(e,t){if(!t)return e;const i=t.split(".");for(let n=0,r=i.length;n<r;++n){const s=i[n];e=e[s]||(e[s]=Object.create(null))}return e}function za(e,t,i){return typeof t=="string"?bs(ds(e,t),i):bs(ds(e,""),t)}class m_{constructor(t,i){this.animation=void 0,this.backgroundColor="rgba(0,0,0,0.1)",this.borderColor="rgba(0,0,0,0.1)",this.color="#666",this.datasets={},this.devicePixelRatio=n=>n.chart.platform.getDevicePixelRatio(),this.elements={},this.events=["mousemove","mouseout","click","touchstart","touchmove"],this.font={family:"'Helvetica Neue', 'Helvetica', 'Arial', sans-serif",size:12,style:"normal",lineHeight:1.2,weight:null},this.hover={},this.hoverBackgroundColor=(n,r)=>Ya(r.backgroundColor),this.hoverBorderColor=(n,r)=>Ya(r.borderColor),this.hoverColor=(n,r)=>Ya(r.color),this.indexAxis="x",this.interaction={mode:"nearest",intersect:!0,includeInvisible:!1},this.maintainAspectRatio=!0,this.onHover=null,this.onClick=null,this.parsing=!0,this.plugins={},this.responsive=!0,this.scale=void 0,this.scales={},this.showLine=!0,this.drawActiveElementsOnTop=!0,this.describe(t),this.apply(i)}set(t,i){return za(this,t,i)}get(t){return ds(this,t)}describe(t,i){return za(Ph,t,i)}override(t,i){return za(hr,t,i)}route(t,i,n,r){const s=ds(this,t),o=ds(this,n),a="_"+i;Object.defineProperties(s,{[a]:{value:s[i],writable:!0},[i]:{enumerable:!0,get(){const l=this[a],h=o[r];return Ht(l)?Object.assign({},h,l):jt(l,h)},set(l){this[a]=l}}})}apply(t){t.forEach(i=>i(this))}}var ve=new m_({_scriptable:e=>!e.startsWith("on"),_indexable:e=>e!=="events",hover:{_fallback:"interaction"},interaction:{_scriptable:!1,_indexable:!1}},[u_,f_,g_]);function b_(e){return!e||Gt(e.size)||Gt(e.family)?null:(e.style?e.style+" ":"")+(e.weight?e.weight+" ":"")+e.size+"px "+e.family}function qo(e,t,i,n,r){let s=t[r];return s||(s=t[r]=e.measureText(r).width,i.push(r)),s>n&&(n=s),n}function y_(e,t,i,n){n=n||{};let r=n.data=n.data||{},s=n.garbageCollect=n.garbageCollect||[];n.font!==t&&(r=n.data={},s=n.garbageCollect=[],n.font=t),e.save(),e.font=t;let o=0;const a=i.length;let l,h,c,u,f;for(l=0;l<a;l++)if(u=i[l],u!=null&&!ce(u))o=qo(e,r,s,o,u);else if(ce(u))for(h=0,c=u.length;h<c;h++)f=u[h],f!=null&&!ce(f)&&(o=qo(e,r,s,o,f));e.restore();const d=s.length/2;if(d>i.length){for(l=0;l<d;l++)delete r[s[l]];s.splice(0,d)}return o}function Yn(e,t,i){const n=e.currentDevicePixelRatio,r=i!==0?Math.max(i/2,.5):0;return Math.round((t-r)*n)/n+r}function lf(e,t){!t&&!e||(t=t||e.getContext("2d"),t.save(),t.resetTransform(),t.clearRect(0,0,e.width,e.height),t.restore())}function Ch(e,t,i,n){Cg(e,t,i,n,null)}function Cg(e,t,i,n,r){let s,o,a,l,h,c,u,f;const d=t.pointStyle,g=t.rotation,y=t.radius;let _=(g||0)*Jy;if(d&&typeof d=="object"&&(s=d.toString(),s==="[object HTMLImageElement]"||s==="[object HTMLCanvasElement]")){e.save(),e.translate(i,n),e.rotate(_),e.drawImage(d,-d.width/2,-d.height/2,d.width,d.height),e.restore();return}if(!(isNaN(y)||y<=0)){switch(e.beginPath(),d){default:r?e.ellipse(i,n,r/2,y,0,0,ue):e.arc(i,n,y,0,ue),e.closePath();break;case"triangle":c=r?r/2:y,e.moveTo(i+Math.sin(_)*c,n-Math.cos(_)*y),_+=Ju,e.lineTo(i+Math.sin(_)*c,n-Math.cos(_)*y),_+=Ju,e.lineTo(i+Math.sin(_)*c,n-Math.cos(_)*y),e.closePath();break;case"rectRounded":h=y*.516,l=y-h,o=Math.cos(_+Wn)*l,u=Math.cos(_+Wn)*(r?r/2-h:l),a=Math.sin(_+Wn)*l,f=Math.sin(_+Wn)*(r?r/2-h:l),e.arc(i-u,n-a,h,_-fe,_-Ae),e.arc(i+f,n-o,h,_-Ae,_),e.arc(i+u,n+a,h,_,_+Ae),e.arc(i-f,n+o,h,_+Ae,_+fe),e.closePath();break;case"rect":if(!g){l=Math.SQRT1_2*y,c=r?r/2:l,e.rect(i-c,n-l,2*c,2*l);break}_+=Wn;case"rectRot":u=Math.cos(_)*(r?r/2:y),o=Math.cos(_)*y,a=Math.sin(_)*y,f=Math.sin(_)*(r?r/2:y),e.moveTo(i-u,n-a),e.lineTo(i+f,n-o),e.lineTo(i+u,n+a),e.lineTo(i-f,n+o),e.closePath();break;case"crossRot":_+=Wn;case"cross":u=Math.cos(_)*(r?r/2:y),o=Math.cos(_)*y,a=Math.sin(_)*y,f=Math.sin(_)*(r?r/2:y),e.moveTo(i-u,n-a),e.lineTo(i+u,n+a),e.moveTo(i+f,n-o),e.lineTo(i-f,n+o);break;case"star":u=Math.cos(_)*(r?r/2:y),o=Math.cos(_)*y,a=Math.sin(_)*y,f=Math.sin(_)*(r?r/2:y),e.moveTo(i-u,n-a),e.lineTo(i+u,n+a),e.moveTo(i+f,n-o),e.lineTo(i-f,n+o),_+=Wn,u=Math.cos(_)*(r?r/2:y),o=Math.cos(_)*y,a=Math.sin(_)*y,f=Math.sin(_)*(r?r/2:y),e.moveTo(i-u,n-a),e.lineTo(i+u,n+a),e.moveTo(i+f,n-o),e.lineTo(i-f,n+o);break;case"line":o=r?r/2:Math.cos(_)*y,a=Math.sin(_)*y,e.moveTo(i-o,n-a),e.lineTo(i+o,n+a);break;case"dash":e.moveTo(i,n),e.lineTo(i+Math.cos(_)*(r?r/2:y),n+Math.sin(_)*y);break;case!1:e.closePath();break}e.fill(),t.borderWidth>0&&e.stroke()}}function en(e,t,i){return i=i||.5,!t||e&&e.x>t.left-i&&e.x<t.right+i&&e.y>t.top-i&&e.y<t.bottom+i}function ha(e,t){e.save(),e.beginPath(),e.rect(t.left,t.top,t.right-t.left,t.bottom-t.top),e.clip()}function ca(e){e.restore()}function __(e,t,i,n,r){if(!t)return e.lineTo(i.x,i.y);if(r==="middle"){const s=(t.x+i.x)/2;e.lineTo(s,t.y),e.lineTo(s,i.y)}else r==="after"!=!!n?e.lineTo(t.x,i.y):e.lineTo(i.x,t.y);e.lineTo(i.x,i.y)}function w_(e,t,i,n){if(!t)return e.lineTo(i.x,i.y);e.bezierCurveTo(n?t.cp1x:t.cp2x,n?t.cp1y:t.cp2y,n?i.cp2x:i.cp1x,n?i.cp2y:i.cp1y,i.x,i.y)}function v_(e,t){t.translation&&e.translate(t.translation[0],t.translation[1]),Gt(t.rotation)||e.rotate(t.rotation),t.color&&(e.fillStyle=t.color),t.textAlign&&(e.textAlign=t.textAlign),t.textBaseline&&(e.textBaseline=t.textBaseline)}function S_(e,t,i,n,r){if(r.strikethrough||r.underline){const s=e.measureText(n),o=t-s.actualBoundingBoxLeft,a=t+s.actualBoundingBoxRight,l=i-s.actualBoundingBoxAscent,h=i+s.actualBoundingBoxDescent,c=r.strikethrough?(l+h)/2:h;e.strokeStyle=e.fillStyle,e.beginPath(),e.lineWidth=r.decorationWidth||2,e.moveTo(o,c),e.lineTo(a,c),e.stroke()}}function x_(e,t){const i=e.fillStyle;e.fillStyle=t.color,e.fillRect(t.left,t.top,t.width,t.height),e.fillStyle=i}function cr(e,t,i,n,r,s={}){const o=ce(t)?t:[t],a=s.strokeWidth>0&&s.strokeColor!=="";let l,h;for(e.save(),e.font=r.string,v_(e,s),l=0;l<o.length;++l)h=o[l],s.backdrop&&x_(e,s.backdrop),a&&(s.strokeColor&&(e.strokeStyle=s.strokeColor),Gt(s.strokeWidth)||(e.lineWidth=s.strokeWidth),e.strokeText(h,i,n,s.maxWidth)),e.fillText(h,i,n,s.maxWidth),S_(e,i,n,h,s),n+=Number(r.lineHeight);e.restore()}function ws(e,t){const{x:i,y:n,w:r,h:s,radius:o}=t;e.arc(i+o.topLeft,n+o.topLeft,o.topLeft,1.5*fe,fe,!0),e.lineTo(i,n+s-o.bottomLeft),e.arc(i+o.bottomLeft,n+s-o.bottomLeft,o.bottomLeft,fe,Ae,!0),e.lineTo(i+r-o.bottomRight,n+s),e.arc(i+r-o.bottomRight,n+s-o.bottomRight,o.bottomRight,Ae,0,!0),e.lineTo(i+r,n+o.topRight),e.arc(i+r-o.topRight,n+o.topRight,o.topRight,0,-Ae,!0),e.lineTo(i+o.topLeft,n)}const k_=/^(normal|(\d+(?:\.\d+)?)(px|em|%)?)$/,E_=/^(normal|italic|initial|inherit|unset|(oblique( -?[0-9]?[0-9]deg)?))$/;function M_(e,t){const i=(""+e).match(k_);if(!i||i[1]==="normal")return t*1.2;switch(e=+i[2],i[3]){case"px":return e;case"%":e/=100;break}return t*e}const A_=e=>+e||0;function yc(e,t){const i={},n=Ht(t),r=n?Object.keys(t):t,s=Ht(e)?n?o=>jt(e[o],e[t[o]]):o=>e[o]:()=>e;for(const o of r)i[o]=A_(s(o));return i}function Ig(e){return yc(e,{top:"y",right:"x",bottom:"y",left:"x"})}function sr(e){return yc(e,["topLeft","topRight","bottomLeft","bottomRight"])}function Ge(e){const t=Ig(e);return t.width=t.left+t.right,t.height=t.top+t.bottom,t}function Ce(e,t){e=e||{},t=t||ve.font;let i=jt(e.size,t.size);typeof i=="string"&&(i=parseInt(i,10));let n=jt(e.style,t.style);n&&!(""+n).match(E_)&&(console.warn('Invalid font style specified: "'+n+'"'),n=void 0);const r={family:jt(e.family,t.family),lineHeight:M_(jt(e.lineHeight,t.lineHeight),i),size:i,style:n,weight:jt(e.weight,t.weight),string:""};return r.string=b_(r),r}function is(e,t,i,n){let r=!0,s,o,a;for(s=0,o=e.length;s<o;++s)if(a=e[s],a!==void 0&&(t!==void 0&&typeof a=="function"&&(a=a(t),r=!1),i!==void 0&&ce(a)&&(a=a[i%a.length],r=!1),a!==void 0))return n&&!r&&(n.cacheable=!1),a}function T_(e,t,i){const{min:n,max:r}=e,s=wg(t,(r-n)/2),o=(a,l)=>i&&a===0?0:a+l;return{min:o(n,-Math.abs(s)),max:o(r,s)}}function Rn(e,t){return Object.assign(Object.create(e),t)}function _c(e,t=[""],i,n,r=()=>e[0]){const s=i||e;typeof n>"u"&&(n=Bg("_fallback",e));const o={[Symbol.toStringTag]:"Object",_cacheable:!0,_scopes:e,_rootScopes:s,_fallback:n,_getTarget:r,override:a=>_c([a,...e],t,s,n)};return new Proxy(o,{deleteProperty(a,l){return delete a[l],delete a._keys,delete e[0][l],!0},get(a,l){return Dg(a,l,()=>B_(l,t,e,a))},getOwnPropertyDescriptor(a,l){return Reflect.getOwnPropertyDescriptor(a._scopes[0],l)},getPrototypeOf(){return Reflect.getPrototypeOf(e[0])},has(a,l){return cf(a).includes(l)},ownKeys(a){return cf(a)},set(a,l,h){const c=a._storage||(a._storage=r());return a[l]=c[l]=h,delete a._keys,!0}})}function Ir(e,t,i,n){const r={_cacheable:!1,_proxy:e,_context:t,_subProxy:i,_stack:new Set,_descriptors:Rg(e,n),setContext:s=>Ir(e,s,i,n),override:s=>Ir(e.override(s),t,i,n)};return new Proxy(r,{deleteProperty(s,o){return delete s[o],delete e[o],!0},get(s,o,a){return Dg(s,o,()=>P_(s,o,a))},getOwnPropertyDescriptor(s,o){return s._descriptors.allKeys?Reflect.has(e,o)?{enumerable:!0,configurable:!0}:void 0:Reflect.getOwnPropertyDescriptor(e,o)},getPrototypeOf(){return Reflect.getPrototypeOf(e)},has(s,o){return Reflect.has(e,o)},ownKeys(){return Reflect.ownKeys(e)},set(s,o,a){return e[o]=a,delete s[o],!0}})}function Rg(e,t={scriptable:!0,indexable:!0}){const{_scriptable:i=t.scriptable,_indexable:n=t.indexable,_allKeys:r=t.allKeys}=e;return{allKeys:r,scriptable:i,indexable:n,isScriptable:Pn(i)?i:()=>i,isIndexable:Pn(n)?n:()=>n}}const O_=(e,t)=>e?e+dc(t):t,wc=(e,t)=>Ht(t)&&e!=="adapters"&&(Object.getPrototypeOf(t)===null||t.constructor===Object);function Dg(e,t,i){if(Object.prototype.hasOwnProperty.call(e,t)||t==="constructor")return e[t];const n=i();return e[t]=n,n}function P_(e,t,i){const{_proxy:n,_context:r,_subProxy:s,_descriptors:o}=e;let a=n[t];return Pn(a)&&o.isScriptable(t)&&(a=C_(t,a,e,i)),ce(a)&&a.length&&(a=I_(t,a,e,o.isIndexable)),wc(t,a)&&(a=Ir(a,r,s&&s[t],o)),a}function C_(e,t,i,n){const{_proxy:r,_context:s,_subProxy:o,_stack:a}=i;if(a.has(e))throw new Error("Recursion detected: "+Array.from(a).join("->")+"->"+e);a.add(e);let l=t(s,o||n);return a.delete(e),wc(e,l)&&(l=vc(r._scopes,r,e,l)),l}function I_(e,t,i,n){const{_proxy:r,_context:s,_subProxy:o,_descriptors:a}=i;if(typeof s.index<"u"&&n(e))return t[s.index%t.length];if(Ht(t[0])){const l=t,h=r._scopes.filter(c=>c!==l);t=[];for(const c of l){const u=vc(h,r,e,c);t.push(Ir(u,s,o&&o[e],a))}}return t}function Lg(e,t,i){return Pn(e)?e(t,i):e}const R_=(e,t)=>e===!0?t:typeof e=="string"?On(t,e):void 0;function D_(e,t,i,n,r){for(const s of t){const o=R_(i,s);if(o){e.add(o);const a=Lg(o._fallback,i,r);if(typeof a<"u"&&a!==i&&a!==n)return a}else if(o===!1&&typeof n<"u"&&i!==n)return null}return!1}function vc(e,t,i,n){const r=t._rootScopes,s=Lg(t._fallback,i,n),o=[...e,...r],a=new Set;a.add(n);let l=hf(a,o,i,s||i,n);return l===null||typeof s<"u"&&s!==i&&(l=hf(a,o,s,l,n),l===null)?!1:_c(Array.from(a),[""],r,s,()=>L_(t,i,n))}function hf(e,t,i,n,r){for(;i;)i=D_(e,t,i,n,r);return i}function L_(e,t,i){const n=e._getTarget();t in n||(n[t]={});const r=n[t];return ce(r)&&Ht(i)?i:r||{}}function B_(e,t,i,n){let r;for(const s of t)if(r=Bg(O_(s,e),i),typeof r<"u")return wc(e,r)?vc(i,n,e,r):r}function Bg(e,t){for(const i of t){if(!i)continue;const n=i[e];if(typeof n<"u")return n}}function cf(e){let t=e._keys;return t||(t=e._keys=N_(e._scopes)),t}function N_(e){const t=new Set;for(const i of e)for(const n of Object.keys(i).filter(r=>!r.startsWith("_")))t.add(n);return Array.from(t)}function Ng(e,t,i,n){const{iScale:r}=e,{key:s="r"}=this._parsing,o=new Array(n);let a,l,h,c;for(a=0,l=n;a<l;++a)h=a+i,c=t[h],o[a]={r:r.parse(On(c,s),h)};return o}const F_=Number.EPSILON||1e-14,Rr=(e,t)=>t<e.length&&!e[t].skip&&e[t],Fg=e=>e==="x"?"y":"x";function U_(e,t,i,n){const r=e.skip?t:e,s=t,o=i.skip?t:i,a=Oh(s,r),l=Oh(o,s);let h=a/(a+l),c=l/(a+l);h=isNaN(h)?0:h,c=isNaN(c)?0:c;const u=n*h,f=n*c;return{previous:{x:s.x-u*(o.x-r.x),y:s.y-u*(o.y-r.y)},next:{x:s.x+f*(o.x-r.x),y:s.y+f*(o.y-r.y)}}}function j_(e,t,i){const n=e.length;let r,s,o,a,l,h=Rr(e,0);for(let c=0;c<n-1;++c)if(l=h,h=Rr(e,c+1),!(!l||!h)){if(us(t[c],0,F_)){i[c]=i[c+1]=0;continue}r=i[c]/t[c],s=i[c+1]/t[c],a=Math.pow(r,2)+Math.pow(s,2),!(a<=9)&&(o=3/Math.sqrt(a),i[c]=r*o*t[c],i[c+1]=s*o*t[c])}}function W_(e,t,i="x"){const n=Fg(i),r=e.length;let s,o,a,l=Rr(e,0);for(let h=0;h<r;++h){if(o=a,a=l,l=Rr(e,h+1),!a)continue;const c=a[i],u=a[n];o&&(s=(c-o[i])/3,a[`cp1${i}`]=c-s,a[`cp1${n}`]=u-s*t[h]),l&&(s=(l[i]-c)/3,a[`cp2${i}`]=c+s,a[`cp2${n}`]=u+s*t[h])}}function Y_(e,t="x"){const i=Fg(t),n=e.length,r=Array(n).fill(0),s=Array(n);let o,a,l,h=Rr(e,0);for(o=0;o<n;++o)if(a=l,l=h,h=Rr(e,o+1),!!l){if(h){const c=h[t]-l[t];r[o]=c!==0?(h[i]-l[i])/c:0}s[o]=a?h?Di(r[o-1])!==Di(r[o])?0:(r[o-1]+r[o])/2:r[o-1]:r[o]}j_(e,r,s),W_(e,s,t)}function Ks(e,t,i){return Math.max(Math.min(e,i),t)}function z_(e,t){let i,n,r,s,o,a=en(e[0],t);for(i=0,n=e.length;i<n;++i)o=s,s=a,a=i<n-1&&en(e[i+1],t),s&&(r=e[i],o&&(r.cp1x=Ks(r.cp1x,t.left,t.right),r.cp1y=Ks(r.cp1y,t.top,t.bottom)),a&&(r.cp2x=Ks(r.cp2x,t.left,t.right),r.cp2y=Ks(r.cp2y,t.top,t.bottom)))}function V_(e,t,i,n,r){let s,o,a,l;if(t.spanGaps&&(e=e.filter(h=>!h.skip)),t.cubicInterpolationMode==="monotone")Y_(e,r);else{let h=n?e[e.length-1]:e[0];for(s=0,o=e.length;s<o;++s)a=e[s],l=U_(h,a,e[Math.min(s+1,o-(n?0:1))%o],t.tension),a.cp1x=l.previous.x,a.cp1y=l.previous.y,a.cp2x=l.next.x,a.cp2y=l.next.y,h=a}t.capBezierPoints&&z_(e,i)}function Sc(){return typeof window<"u"&&typeof document<"u"}function xc(e){let t=e.parentNode;return t&&t.toString()==="[object ShadowRoot]"&&(t=t.host),t}function $o(e,t,i){let n;return typeof e=="string"?(n=parseInt(e,10),e.indexOf("%")!==-1&&(n=n/100*t.parentNode[i])):n=e,n}const ua=e=>e.ownerDocument.defaultView.getComputedStyle(e,null);function H_(e,t){return ua(e).getPropertyValue(t)}const q_=["top","right","bottom","left"];function or(e,t,i){const n={};i=i?"-"+i:"";for(let r=0;r<4;r++){const s=q_[r];n[s]=parseFloat(e[t+"-"+s+i])||0}return n.width=n.left+n.right,n.height=n.top+n.bottom,n}const $_=(e,t,i)=>(e>0||t>0)&&(!i||!i.shadowRoot);function G_(e,t){const i=e.touches,n=i&&i.length?i[0]:e,{offsetX:r,offsetY:s}=n;let o=!1,a,l;if($_(r,s,e.target))a=r,l=s;else{const h=t.getBoundingClientRect();a=n.clientX-h.left,l=n.clientY-h.top,o=!0}return{x:a,y:l,box:o}}function $n(e,t){if("native"in e)return e;const{canvas:i,currentDevicePixelRatio:n}=t,r=ua(i),s=r.boxSizing==="border-box",o=or(r,"padding"),a=or(r,"border","width"),{x:l,y:h,box:c}=G_(e,i),u=o.left+(c&&a.left),f=o.top+(c&&a.top);let{width:d,height:g}=t;return s&&(d-=o.width+a.width,g-=o.height+a.height),{x:Math.round((l-u)/d*i.width/n),y:Math.round((h-f)/g*i.height/n)}}function K_(e,t,i){let n,r;if(t===void 0||i===void 0){const s=e&&xc(e);if(!s)t=e.clientWidth,i=e.clientHeight;else{const o=s.getBoundingClientRect(),a=ua(s),l=or(a,"border","width"),h=or(a,"padding");t=o.width-h.width-l.width,i=o.height-h.height-l.height,n=$o(a.maxWidth,s,"clientWidth"),r=$o(a.maxHeight,s,"clientHeight")}}return{width:t,height:i,maxWidth:n||Ho,maxHeight:r||Ho}}const Qs=e=>Math.round(e*10)/10;function Q_(e,t,i,n){const r=ua(e),s=or(r,"margin"),o=$o(r.maxWidth,e,"clientWidth")||Ho,a=$o(r.maxHeight,e,"clientHeight")||Ho,l=K_(e,t,i);let{width:h,height:c}=l;if(r.boxSizing==="content-box"){const f=or(r,"border","width"),d=or(r,"padding");h-=d.width+f.width,c-=d.height+f.height}return h=Math.max(0,h-s.width),c=Math.max(0,n?h/n:c-s.height),h=Qs(Math.min(h,o,l.maxWidth)),c=Qs(Math.min(c,a,l.maxHeight)),h&&!c&&(c=Qs(h/2)),(t!==void 0||i!==void 0)&&n&&l.height&&c>l.height&&(c=l.height,h=Qs(Math.floor(c*n))),{width:h,height:c}}function uf(e,t,i){const n=t||1,r=Math.floor(e.height*n),s=Math.floor(e.width*n);e.height=Math.floor(e.height),e.width=Math.floor(e.width);const o=e.canvas;return o.style&&(i||!o.style.height&&!o.style.width)&&(o.style.height=`${e.height}px`,o.style.width=`${e.width}px`),e.currentDevicePixelRatio!==n||o.height!==r||o.width!==s?(e.currentDevicePixelRatio=n,o.height=r,o.width=s,e.ctx.setTransform(n,0,0,n,0,0),!0):!1}const X_=function(){let e=!1;try{const t={get passive(){return e=!0,!1}};Sc()&&(window.addEventListener("test",null,t),window.removeEventListener("test",null,t))}catch{}return e}();function ff(e,t){const i=H_(e,t),n=i&&i.match(/^(\d+)(\.\d+)?px$/);return n?+n[1]:void 0}function Gn(e,t,i,n){return{x:e.x+i*(t.x-e.x),y:e.y+i*(t.y-e.y)}}function Z_(e,t,i,n){return{x:e.x+i*(t.x-e.x),y:n==="middle"?i<.5?e.y:t.y:n==="after"?i<1?e.y:t.y:i>0?t.y:e.y}}function J_(e,t,i,n){const r={x:e.cp2x,y:e.cp2y},s={x:t.cp1x,y:t.cp1y},o=Gn(e,r,i),a=Gn(r,s,i),l=Gn(s,t,i),h=Gn(o,a,i),c=Gn(a,l,i);return Gn(h,c,i)}const tw=function(e,t){return{x(i){return e+e+t-i},setWidth(i){t=i},textAlign(i){return i==="center"?i:i==="right"?"left":"right"},xPlus(i,n){return i-n},leftForLtr(i,n){return i-n}}},ew=function(){return{x(e){return e},setWidth(e){},textAlign(e){return e},xPlus(e,t){return e+t},leftForLtr(e,t){return e}}};function Mr(e,t,i){return e?tw(t,i):ew()}function Ug(e,t){let i,n;(t==="ltr"||t==="rtl")&&(i=e.canvas.style,n=[i.getPropertyValue("direction"),i.getPropertyPriority("direction")],i.setProperty("direction",t,"important"),e.prevTextDirection=n)}function jg(e,t){t!==void 0&&(delete e.prevTextDirection,e.canvas.style.setProperty("direction",t[0],t[1]))}function Wg(e){return e==="angle"?{between:_s,compare:i_,normalize:ri}:{between:Ji,compare:(t,i)=>t-i,normalize:t=>t}}function df({start:e,end:t,count:i,loop:n,style:r}){return{start:e%i,end:t%i,loop:n&&(t-e+1)%i===0,style:r}}function iw(e,t,i){const{property:n,start:r,end:s}=i,{between:o,normalize:a}=Wg(n),l=t.length;let{start:h,end:c,loop:u}=e,f,d;if(u){for(h+=l,c+=l,f=0,d=l;f<d&&o(a(t[h%l][n]),r,s);++f)h--,c--;h%=l,c%=l}return c<h&&(c+=l),{start:h,end:c,loop:u,style:e.style}}function Yg(e,t,i){if(!i)return[e];const{property:n,start:r,end:s}=i,o=t.length,{compare:a,between:l,normalize:h}=Wg(n),{start:c,end:u,loop:f,style:d}=iw(e,t,i),g=[];let y=!1,_=null,w,v,S;const T=()=>l(r,S,w)&&a(r,S)!==0,O=()=>a(s,w)===0||l(s,S,w),k=()=>y||T(),M=()=>!y||O();for(let A=c,B=c;A<=u;++A)v=t[A%o],!v.skip&&(w=h(v[n]),w!==S&&(y=l(w,r,s),_===null&&k()&&(_=a(w,r)===0?A:B),_!==null&&M()&&(g.push(df({start:_,end:A,loop:f,count:o,style:d})),_=null),B=A,S=w));return _!==null&&g.push(df({start:_,end:u,loop:f,count:o,style:d})),g}function zg(e,t){const i=[],n=e.segments;for(let r=0;r<n.length;r++){const s=Yg(n[r],e.points,t);s.length&&i.push(...s)}return i}function nw(e,t,i,n){let r=0,s=t-1;if(i&&!n)for(;r<t&&!e[r].skip;)r++;for(;r<t&&e[r].skip;)r++;for(r%=t,i&&(s+=r);s>r&&e[s%t].skip;)s--;return s%=t,{start:r,end:s}}function rw(e,t,i,n){const r=e.length,s=[];let o=t,a=e[t],l;for(l=t+1;l<=i;++l){const h=e[l%r];h.skip||h.stop?a.skip||(n=!1,s.push({start:t%r,end:(l-1)%r,loop:n}),t=o=h.stop?l:null):(o=l,a.skip&&(t=l)),a=h}return o!==null&&s.push({start:t%r,end:o%r,loop:n}),s}function sw(e,t){const i=e.points,n=e.options.spanGaps,r=i.length;if(!r)return[];const s=!!e._loop,{start:o,end:a}=nw(i,r,s,n);if(n===!0)return pf(e,[{start:o,end:a,loop:s}],i,t);const l=a<o?a+r:a,h=!!e._fullLoop&&o===0&&a===r-1;return pf(e,rw(i,o,l,h),i,t)}function pf(e,t,i,n){return!n||!n.setContext||!i?t:ow(e,t,i,n)}function ow(e,t,i,n){const r=e._chart.getContext(),s=gf(e.options),{_datasetIndex:o,options:{spanGaps:a}}=e,l=i.length,h=[];let c=s,u=t[0].start,f=u;function d(g,y,_,w){const v=a?-1:1;if(g!==y){for(g+=l;i[g%l].skip;)g-=v;for(;i[y%l].skip;)y+=v;g%l!==y%l&&(h.push({start:g%l,end:y%l,loop:_,style:w}),c=w,u=y%l)}}for(const g of t){u=a?u:g.start;let y=i[u%l],_;for(f=u+1;f<=g.end;f++){const w=i[f%l];_=gf(n.setContext(Rn(r,{type:"segment",p0:y,p1:w,p0DataIndex:(f-1)%l,p1DataIndex:f%l,datasetIndex:o}))),aw(_,c)&&d(u,f-1,g.loop,c),y=w,c=_}u<f-1&&d(u,f-1,g.loop,c)}return h}function gf(e){return{backgroundColor:e.backgroundColor,borderCapStyle:e.borderCapStyle,borderDash:e.borderDash,borderDashOffset:e.borderDashOffset,borderJoinStyle:e.borderJoinStyle,borderWidth:e.borderWidth,borderColor:e.borderColor}}function aw(e,t){if(!t)return!1;const i=[],n=function(r,s){return bc(s)?(i.includes(s)||i.push(s),i.indexOf(s)):s};return JSON.stringify(e,n)!==JSON.stringify(t,n)}/*!
 * Chart.js v4.4.7
 * https://www.chartjs.org
 * (c) 2024 Chart.js Contributors
 * Released under the MIT License
 */class lw{constructor(){this._request=null,this._charts=new Map,this._running=!1,this._lastDate=void 0}_notify(t,i,n,r){const s=i.listeners[r],o=i.duration;s.forEach(a=>a({chart:t,initial:i.initial,numSteps:o,currentStep:Math.min(n-i.start,o)}))}_refresh(){this._request||(this._running=!0,this._request=Mg.call(window,()=>{this._update(),this._request=null,this._running&&this._refresh()}))}_update(t=Date.now()){let i=0;this._charts.forEach((n,r)=>{if(!n.running||!n.items.length)return;const s=n.items;let o=s.length-1,a=!1,l;for(;o>=0;--o)l=s[o],l._active?(l._total>n.duration&&(n.duration=l._total),l.tick(t),a=!0):(s[o]=s[s.length-1],s.pop());a&&(r.draw(),this._notify(r,n,t,"progress")),s.length||(n.running=!1,this._notify(r,n,t,"complete"),n.initial=!1),i+=s.length}),this._lastDate=t,i===0&&(this._running=!1)}_getAnims(t){const i=this._charts;let n=i.get(t);return n||(n={running:!1,initial:!0,items:[],listeners:{complete:[],progress:[]}},i.set(t,n)),n}listen(t,i,n){this._getAnims(t).listeners[i].push(n)}add(t,i){!i||!i.length||this._getAnims(t).items.push(...i)}has(t){return this._getAnims(t).items.length>0}start(t){const i=this._charts.get(t);i&&(i.running=!0,i.start=Date.now(),i.duration=i.items.reduce((n,r)=>Math.max(n,r._duration),0),this._refresh())}running(t){if(!this._running)return!1;const i=this._charts.get(t);return!(!i||!i.running||!i.items.length)}stop(t){const i=this._charts.get(t);if(!i||!i.items.length)return;const n=i.items;let r=n.length-1;for(;r>=0;--r)n[r].cancel();i.items=[],this._notify(t,i,Date.now(),"complete")}remove(t){return this._charts.delete(t)}}var zi=new lw;const mf="transparent",hw={boolean(e,t,i){return i>.5?t:e},color(e,t,i){const n=of(e||mf),r=n.valid&&of(t||mf);return r&&r.valid?r.mix(n,i).hexString():t},number(e,t,i){return e+(t-e)*i}};class cw{constructor(t,i,n,r){const s=i[n];r=is([t.to,r,s,t.from]);const o=is([t.from,s,r]);this._active=!0,this._fn=t.fn||hw[t.type||typeof o],this._easing=fs[t.easing]||fs.linear,this._start=Math.floor(Date.now()+(t.delay||0)),this._duration=this._total=Math.floor(t.duration),this._loop=!!t.loop,this._target=i,this._prop=n,this._from=o,this._to=r,this._promises=void 0}active(){return this._active}update(t,i,n){if(this._active){this._notify(!1);const r=this._target[this._prop],s=n-this._start,o=this._duration-s;this._start=n,this._duration=Math.floor(Math.max(o,t.duration)),this._total+=s,this._loop=!!t.loop,this._to=is([t.to,i,r,t.from]),this._from=is([t.from,r,i])}}cancel(){this._active&&(this.tick(Date.now()),this._active=!1,this._notify(!1))}tick(t){const i=t-this._start,n=this._duration,r=this._prop,s=this._from,o=this._loop,a=this._to;let l;if(this._active=s!==a&&(o||i<n),!this._active){this._target[r]=a,this._notify(!0);return}if(i<0){this._target[r]=s;return}l=i/n%2,l=o&&l>1?2-l:l,l=this._easing(Math.min(1,Math.max(0,l))),this._target[r]=this._fn(s,a,l)}wait(){const t=this._promises||(this._promises=[]);return new Promise((i,n)=>{t.push({res:i,rej:n})})}_notify(t){const i=t?"res":"rej",n=this._promises||[];for(let r=0;r<n.length;r++)n[r][i]()}}class Vg{constructor(t,i){this._chart=t,this._properties=new Map,this.configure(i)}configure(t){if(!Ht(t))return;const i=Object.keys(ve.animation),n=this._properties;Object.getOwnPropertyNames(t).forEach(r=>{const s=t[r];if(!Ht(s))return;const o={};for(const a of i)o[a]=s[a];(ce(s.properties)&&s.properties||[r]).forEach(a=>{(a===r||!n.has(a))&&n.set(a,o)})})}_animateOptions(t,i){const n=i.options,r=fw(t,n);if(!r)return[];const s=this._createAnimations(r,n);return n.$shared&&uw(t.options.$animations,n).then(()=>{t.options=n},()=>{}),s}_createAnimations(t,i){const n=this._properties,r=[],s=t.$animations||(t.$animations={}),o=Object.keys(i),a=Date.now();let l;for(l=o.length-1;l>=0;--l){const h=o[l];if(h.charAt(0)==="$")continue;if(h==="options"){r.push(...this._animateOptions(t,i));continue}const c=i[h];let u=s[h];const f=n.get(h);if(u)if(f&&u.active()){u.update(f,c,a);continue}else u.cancel();if(!f||!f.duration){t[h]=c;continue}s[h]=u=new cw(f,t,h,c),r.push(u)}return r}update(t,i){if(this._properties.size===0){Object.assign(t,i);return}const n=this._createAnimations(t,i);if(n.length)return zi.add(this._chart,n),!0}}function uw(e,t){const i=[],n=Object.keys(t);for(let r=0;r<n.length;r++){const s=e[n[r]];s&&s.active()&&i.push(s.wait())}return Promise.all(i)}function fw(e,t){if(!t)return;let i=e.options;if(!i){e.options=t;return}return i.$shared&&(e.options=i=Object.assign({},i,{$shared:!1,$animations:{}})),i}function bf(e,t){const i=e&&e.options||{},n=i.reverse,r=i.min===void 0?t:0,s=i.max===void 0?t:0;return{start:n?s:r,end:n?r:s}}function dw(e,t,i){if(i===!1)return!1;const n=bf(e,i),r=bf(t,i);return{top:r.end,right:n.end,bottom:r.start,left:n.start}}function pw(e){let t,i,n,r;return Ht(e)?(t=e.top,i=e.right,n=e.bottom,r=e.left):t=i=n=r=e,{top:t,right:i,bottom:n,left:r,disabled:e===!1}}function Hg(e,t){const i=[],n=e._getSortedDatasetMetas(t);let r,s;for(r=0,s=n.length;r<s;++r)i.push(n[r].index);return i}function yf(e,t,i,n={}){const r=e.keys,s=n.mode==="single";let o,a,l,h;if(t===null)return;let c=!1;for(o=0,a=r.length;o<a;++o){if(l=+r[o],l===i){if(c=!0,n.all)continue;break}h=e.values[l],Ee(h)&&(s||t===0||Di(t)===Di(h))&&(t+=h)}return!c&&!n.all?0:t}function gw(e,t){const{iScale:i,vScale:n}=t,r=i.axis==="x"?"x":"y",s=n.axis==="x"?"x":"y",o=Object.keys(e),a=new Array(o.length);let l,h,c;for(l=0,h=o.length;l<h;++l)c=o[l],a[l]={[r]:c,[s]:e[c]};return a}function Va(e,t){const i=e&&e.options.stacked;return i||i===void 0&&t.stack!==void 0}function mw(e,t,i){return`${e.id}.${t.id}.${i.stack||i.type}`}function bw(e){const{min:t,max:i,minDefined:n,maxDefined:r}=e.getUserBounds();return{min:n?t:Number.NEGATIVE_INFINITY,max:r?i:Number.POSITIVE_INFINITY}}function yw(e,t,i){const n=e[t]||(e[t]={});return n[i]||(n[i]={})}function _f(e,t,i,n){for(const r of t.getMatchingVisibleMetas(n).reverse()){const s=e[r.index];if(i&&s>0||!i&&s<0)return r.index}return null}function wf(e,t){const{chart:i,_cachedMeta:n}=e,r=i._stacks||(i._stacks={}),{iScale:s,vScale:o,index:a}=n,l=s.axis,h=o.axis,c=mw(s,o,n),u=t.length;let f;for(let d=0;d<u;++d){const g=t[d],{[l]:y,[h]:_}=g,w=g._stacks||(g._stacks={});f=w[h]=yw(r,c,y),f[a]=_,f._top=_f(f,o,!0,n.type),f._bottom=_f(f,o,!1,n.type);const v=f._visualValues||(f._visualValues={});v[a]=_}}function Ha(e,t){const i=e.scales;return Object.keys(i).filter(n=>i[n].axis===t).shift()}function _w(e,t){return Rn(e,{active:!1,dataset:void 0,datasetIndex:t,index:t,mode:"default",type:"dataset"})}function ww(e,t,i){return Rn(e,{active:!1,dataIndex:t,parsed:void 0,raw:void 0,element:i,index:t,mode:"default",type:"data"})}function Vr(e,t){const i=e.controller.index,n=e.vScale&&e.vScale.axis;if(n){t=t||e._parsed;for(const r of t){const s=r._stacks;if(!s||s[n]===void 0||s[n][i]===void 0)return;delete s[n][i],s[n]._visualValues!==void 0&&s[n]._visualValues[i]!==void 0&&delete s[n]._visualValues[i]}}}const qa=e=>e==="reset"||e==="none",vf=(e,t)=>t?e:Object.assign({},e),vw=(e,t,i)=>e&&!t.hidden&&t._stacked&&{keys:Hg(i,!0),values:null};class _i{constructor(t,i){this.chart=t,this._ctx=t.ctx,this.index=i,this._cachedDataOpts={},this._cachedMeta=this.getMeta(),this._type=this._cachedMeta.type,this.options=void 0,this._parsing=!1,this._data=void 0,this._objectData=void 0,this._sharedOptions=void 0,this._drawStart=void 0,this._drawCount=void 0,this.enableOptionSharing=!1,this.supportsDecimation=!1,this.$context=void 0,this._syncList=[],this.datasetElementType=new.target.datasetElementType,this.dataElementType=new.target.dataElementType,this.initialize()}initialize(){const t=this._cachedMeta;this.configure(),this.linkScales(),t._stacked=Va(t.vScale,t),this.addElements(),this.options.fill&&!this.chart.isPluginEnabled("filler")&&console.warn("Tried to use the 'fill' option without the 'Filler' plugin enabled. Please import and register the 'Filler' plugin and make sure it is not disabled in the options")}updateIndex(t){this.index!==t&&Vr(this._cachedMeta),this.index=t}linkScales(){const t=this.chart,i=this._cachedMeta,n=this.getDataset(),r=(u,f,d,g)=>u==="x"?f:u==="r"?g:d,s=i.xAxisID=jt(n.xAxisID,Ha(t,"x")),o=i.yAxisID=jt(n.yAxisID,Ha(t,"y")),a=i.rAxisID=jt(n.rAxisID,Ha(t,"r")),l=i.indexAxis,h=i.iAxisID=r(l,s,o,a),c=i.vAxisID=r(l,o,s,a);i.xScale=this.getScaleForId(s),i.yScale=this.getScaleForId(o),i.rScale=this.getScaleForId(a),i.iScale=this.getScaleForId(h),i.vScale=this.getScaleForId(c)}getDataset(){return this.chart.data.datasets[this.index]}getMeta(){return this.chart.getDatasetMeta(this.index)}getScaleForId(t){return this.chart.scales[t]}_getOtherScale(t){const i=this._cachedMeta;return t===i.iScale?i.vScale:i.iScale}reset(){this._update("reset")}_destroy(){const t=this._cachedMeta;this._data&&nf(this._data,this),t._stacked&&Vr(t)}_dataCheck(){const t=this.getDataset(),i=t.data||(t.data=[]),n=this._data;if(Ht(i)){const r=this._cachedMeta;this._data=gw(i,r)}else if(n!==i){if(n){nf(n,this);const r=this._cachedMeta;Vr(r),r._parsed=[]}i&&Object.isExtensible(i)&&o_(i,this),this._syncList=[],this._data=i}}addElements(){const t=this._cachedMeta;this._dataCheck(),this.datasetElementType&&(t.dataset=new this.datasetElementType)}buildOrUpdateElements(t){const i=this._cachedMeta,n=this.getDataset();let r=!1;this._dataCheck();const s=i._stacked;i._stacked=Va(i.vScale,i),i.stack!==n.stack&&(r=!0,Vr(i),i.stack=n.stack),this._resyncElements(t),(r||s!==i._stacked)&&(wf(this,i._parsed),i._stacked=Va(i.vScale,i))}configure(){const t=this.chart.config,i=t.datasetScopeKeys(this._type),n=t.getOptionScopes(this.getDataset(),i,!0);this.options=t.createResolver(n,this.getContext()),this._parsing=this.options.parsing,this._cachedDataOpts={}}parse(t,i){const{_cachedMeta:n,_data:r}=this,{iScale:s,_stacked:o}=n,a=s.axis;let l=t===0&&i===r.length?!0:n._sorted,h=t>0&&n._parsed[t-1],c,u,f;if(this._parsing===!1)n._parsed=r,n._sorted=!0,f=r;else{ce(r[t])?f=this.parseArrayData(n,r,t,i):Ht(r[t])?f=this.parseObjectData(n,r,t,i):f=this.parsePrimitiveData(n,r,t,i);const d=()=>u[a]===null||h&&u[a]<h[a];for(c=0;c<i;++c)n._parsed[c+t]=u=f[c],l&&(d()&&(l=!1),h=u);n._sorted=l}o&&wf(this,f)}parsePrimitiveData(t,i,n,r){const{iScale:s,vScale:o}=t,a=s.axis,l=o.axis,h=s.getLabels(),c=s===o,u=new Array(r);let f,d,g;for(f=0,d=r;f<d;++f)g=f+n,u[f]={[a]:c||s.parse(h[g],g),[l]:o.parse(i[g],g)};return u}parseArrayData(t,i,n,r){const{xScale:s,yScale:o}=t,a=new Array(r);let l,h,c,u;for(l=0,h=r;l<h;++l)c=l+n,u=i[c],a[l]={x:s.parse(u[0],c),y:o.parse(u[1],c)};return a}parseObjectData(t,i,n,r){const{xScale:s,yScale:o}=t,{xAxisKey:a="x",yAxisKey:l="y"}=this._parsing,h=new Array(r);let c,u,f,d;for(c=0,u=r;c<u;++c)f=c+n,d=i[f],h[c]={x:s.parse(On(d,a),f),y:o.parse(On(d,l),f)};return h}getParsed(t){return this._cachedMeta._parsed[t]}getDataElement(t){return this._cachedMeta.data[t]}applyStack(t,i,n){const r=this.chart,s=this._cachedMeta,o=i[t.axis],a={keys:Hg(r,!0),values:i._stacks[t.axis]._visualValues};return yf(a,o,s.index,{mode:n})}updateRangeFromParsed(t,i,n,r){const s=n[i.axis];let o=s===null?NaN:s;const a=r&&n._stacks[i.axis];r&&a&&(r.values=a,o=yf(r,s,this._cachedMeta.index)),t.min=Math.min(t.min,o),t.max=Math.max(t.max,o)}getMinMax(t,i){const n=this._cachedMeta,r=n._parsed,s=n._sorted&&t===n.iScale,o=r.length,a=this._getOtherScale(t),l=vw(i,n,this.chart),h={min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY},{min:c,max:u}=bw(a);let f,d;function g(){d=r[f];const y=d[a.axis];return!Ee(d[t.axis])||c>y||u<y}for(f=0;f<o&&!(!g()&&(this.updateRangeFromParsed(h,t,d,l),s));++f);if(s){for(f=o-1;f>=0;--f)if(!g()){this.updateRangeFromParsed(h,t,d,l);break}}return h}getAllParsedValues(t){const i=this._cachedMeta._parsed,n=[];let r,s,o;for(r=0,s=i.length;r<s;++r)o=i[r][t.axis],Ee(o)&&n.push(o);return n}getMaxOverflow(){return!1}getLabelAndValue(t){const i=this._cachedMeta,n=i.iScale,r=i.vScale,s=this.getParsed(t);return{label:n?""+n.getLabelForValue(s[n.axis]):"",value:r?""+r.getLabelForValue(s[r.axis]):""}}_update(t){const i=this._cachedMeta;this.update(t||"default"),i._clip=pw(jt(this.options.clip,dw(i.xScale,i.yScale,this.getMaxOverflow())))}update(t){}draw(){const t=this._ctx,i=this.chart,n=this._cachedMeta,r=n.data||[],s=i.chartArea,o=[],a=this._drawStart||0,l=this._drawCount||r.length-a,h=this.options.drawActiveElementsOnTop;let c;for(n.dataset&&n.dataset.draw(t,s,a,l),c=a;c<a+l;++c){const u=r[c];u.hidden||(u.active&&h?o.push(u):u.draw(t,s))}for(c=0;c<o.length;++c)o[c].draw(t,s)}getStyle(t,i){const n=i?"active":"default";return t===void 0&&this._cachedMeta.dataset?this.resolveDatasetElementOptions(n):this.resolveDataElementOptions(t||0,n)}getContext(t,i,n){const r=this.getDataset();let s;if(t>=0&&t<this._cachedMeta.data.length){const o=this._cachedMeta.data[t];s=o.$context||(o.$context=ww(this.getContext(),t,o)),s.parsed=this.getParsed(t),s.raw=r.data[t],s.index=s.dataIndex=t}else s=this.$context||(this.$context=_w(this.chart.getContext(),this.index)),s.dataset=r,s.index=s.datasetIndex=this.index;return s.active=!!i,s.mode=n,s}resolveDatasetElementOptions(t){return this._resolveElementOptions(this.datasetElementType.id,t)}resolveDataElementOptions(t,i){return this._resolveElementOptions(this.dataElementType.id,i,t)}_resolveElementOptions(t,i="default",n){const r=i==="active",s=this._cachedDataOpts,o=t+"-"+i,a=s[o],l=this.enableOptionSharing&&ys(n);if(a)return vf(a,l);const h=this.chart.config,c=h.datasetElementScopeKeys(this._type,t),u=r?[`${t}Hover`,"hover",t,""]:[t,""],f=h.getOptionScopes(this.getDataset(),c),d=Object.keys(ve.elements[t]),g=()=>this.getContext(n,r,i),y=h.resolveNamedOptions(f,d,g,u);return y.$shared&&(y.$shared=l,s[o]=Object.freeze(vf(y,l))),y}_resolveAnimations(t,i,n){const r=this.chart,s=this._cachedDataOpts,o=`animation-${i}`,a=s[o];if(a)return a;let l;if(r.options.animation!==!1){const c=this.chart.config,u=c.datasetAnimationScopeKeys(this._type,i),f=c.getOptionScopes(this.getDataset(),u);l=c.createResolver(f,this.getContext(t,n,i))}const h=new Vg(r,l&&l.animations);return l&&l._cacheable&&(s[o]=Object.freeze(h)),h}getSharedOptions(t){if(t.$shared)return this._sharedOptions||(this._sharedOptions=Object.assign({},t))}includeOptions(t,i){return!i||qa(t)||this.chart._animationsDisabled}_getSharedOptions(t,i){const n=this.resolveDataElementOptions(t,i),r=this._sharedOptions,s=this.getSharedOptions(n),o=this.includeOptions(i,s)||s!==r;return this.updateSharedOptions(s,i,n),{sharedOptions:s,includeOptions:o}}updateElement(t,i,n,r){qa(r)?Object.assign(t,n):this._resolveAnimations(i,r).update(t,n)}updateSharedOptions(t,i,n){t&&!qa(i)&&this._resolveAnimations(void 0,i).update(t,n)}_setStyle(t,i,n,r){t.active=r;const s=this.getStyle(i,r);this._resolveAnimations(i,n,r).update(t,{options:!r&&this.getSharedOptions(s)||s})}removeHoverStyle(t,i,n){this._setStyle(t,n,"active",!1)}setHoverStyle(t,i,n){this._setStyle(t,n,"active",!0)}_removeDatasetHoverStyle(){const t=this._cachedMeta.dataset;t&&this._setStyle(t,void 0,"active",!1)}_setDatasetHoverStyle(){const t=this._cachedMeta.dataset;t&&this._setStyle(t,void 0,"active",!0)}_resyncElements(t){const i=this._data,n=this._cachedMeta.data;for(const[a,l,h]of this._syncList)this[a](l,h);this._syncList=[];const r=n.length,s=i.length,o=Math.min(s,r);o&&this.parse(0,o),s>r?this._insertElements(r,s-r,t):s<r&&this._removeElements(s,r-s)}_insertElements(t,i,n=!0){const r=this._cachedMeta,s=r.data,o=t+i;let a;const l=h=>{for(h.length+=i,a=h.length-1;a>=o;a--)h[a]=h[a-i]};for(l(s),a=t;a<o;++a)s[a]=new this.dataElementType;this._parsing&&l(r._parsed),this.parse(t,i),n&&this.updateElements(s,t,i,"reset")}updateElements(t,i,n,r){}_removeElements(t,i){const n=this._cachedMeta;if(this._parsing){const r=n._parsed.splice(t,i);n._stacked&&Vr(n,r)}n.data.splice(t,i)}_sync(t){if(this._parsing)this._syncList.push(t);else{const[i,n,r]=t;this[i](n,r)}this.chart._dataChanges.push([this.index,...t])}_onDataPush(){const t=arguments.length;this._sync(["_insertElements",this.getDataset().data.length-t,t])}_onDataPop(){this._sync(["_removeElements",this._cachedMeta.data.length-1,1])}_onDataShift(){this._sync(["_removeElements",0,1])}_onDataSplice(t,i){i&&this._sync(["_removeElements",t,i]);const n=arguments.length-2;n&&this._sync(["_insertElements",t,n])}_onDataUnshift(){this._sync(["_insertElements",0,arguments.length])}}yt(_i,"defaults",{}),yt(_i,"datasetElementType",null),yt(_i,"dataElementType",null);function Sw(e,t){if(!e._cache.$bar){const i=e.getMatchingVisibleMetas(t);let n=[];for(let r=0,s=i.length;r<s;r++)n=n.concat(i[r].controller.getAllParsedValues(e));e._cache.$bar=Eg(n.sort((r,s)=>r-s))}return e._cache.$bar}function xw(e){const t=e.iScale,i=Sw(t,e.type);let n=t._length,r,s,o,a;const l=()=>{o===32767||o===-32768||(ys(a)&&(n=Math.min(n,Math.abs(o-a)||n)),a=o)};for(r=0,s=i.length;r<s;++r)o=t.getPixelForValue(i[r]),l();for(a=void 0,r=0,s=t.ticks.length;r<s;++r)o=t.getPixelForTick(r),l();return n}function kw(e,t,i,n){const r=i.barThickness;let s,o;return Gt(r)?(s=t.min*i.categoryPercentage,o=i.barPercentage):(s=r*n,o=1),{chunk:s/n,ratio:o,start:t.pixels[e]-s/2}}function Ew(e,t,i,n){const r=t.pixels,s=r[e];let o=e>0?r[e-1]:null,a=e<r.length-1?r[e+1]:null;const l=i.categoryPercentage;o===null&&(o=s-(a===null?t.end-t.start:a-s)),a===null&&(a=s+s-o);const h=s-(s-Math.min(o,a))/2*l;return{chunk:Math.abs(a-o)/2*l/n,ratio:i.barPercentage,start:h}}function Mw(e,t,i,n){const r=i.parse(e[0],n),s=i.parse(e[1],n),o=Math.min(r,s),a=Math.max(r,s);let l=o,h=a;Math.abs(o)>Math.abs(a)&&(l=a,h=o),t[i.axis]=h,t._custom={barStart:l,barEnd:h,start:r,end:s,min:o,max:a}}function qg(e,t,i,n){return ce(e)?Mw(e,t,i,n):t[i.axis]=i.parse(e,n),t}function Sf(e,t,i,n){const r=e.iScale,s=e.vScale,o=r.getLabels(),a=r===s,l=[];let h,c,u,f;for(h=i,c=i+n;h<c;++h)f=t[h],u={},u[r.axis]=a||r.parse(o[h],h),l.push(qg(f,u,s,h));return l}function $a(e){return e&&e.barStart!==void 0&&e.barEnd!==void 0}function Aw(e,t,i){return e!==0?Di(e):(t.isHorizontal()?1:-1)*(t.min>=i?1:-1)}function Tw(e){let t,i,n,r,s;return e.horizontal?(t=e.base>e.x,i="left",n="right"):(t=e.base<e.y,i="bottom",n="top"),t?(r="end",s="start"):(r="start",s="end"),{start:i,end:n,reverse:t,top:r,bottom:s}}function Ow(e,t,i,n){let r=t.borderSkipped;const s={};if(!r){e.borderSkipped=s;return}if(r===!0){e.borderSkipped={top:!0,right:!0,bottom:!0,left:!0};return}const{start:o,end:a,reverse:l,top:h,bottom:c}=Tw(e);r==="middle"&&i&&(e.enableBorderRadius=!0,(i._top||0)===n?r=h:(i._bottom||0)===n?r=c:(s[xf(c,o,a,l)]=!0,r=h)),s[xf(r,o,a,l)]=!0,e.borderSkipped=s}function xf(e,t,i,n){return n?(e=Pw(e,t,i),e=kf(e,i,t)):e=kf(e,t,i),e}function Pw(e,t,i){return e===t?i:e===i?t:e}function kf(e,t,i){return e==="start"?t:e==="end"?i:e}function Cw(e,{inflateAmount:t},i){e.inflateAmount=t==="auto"?i===1?.33:0:t}class vo extends _i{parsePrimitiveData(t,i,n,r){return Sf(t,i,n,r)}parseArrayData(t,i,n,r){return Sf(t,i,n,r)}parseObjectData(t,i,n,r){const{iScale:s,vScale:o}=t,{xAxisKey:a="x",yAxisKey:l="y"}=this._parsing,h=s.axis==="x"?a:l,c=o.axis==="x"?a:l,u=[];let f,d,g,y;for(f=n,d=n+r;f<d;++f)y=i[f],g={},g[s.axis]=s.parse(On(y,h),f),u.push(qg(On(y,c),g,o,f));return u}updateRangeFromParsed(t,i,n,r){super.updateRangeFromParsed(t,i,n,r);const s=n._custom;s&&i===this._cachedMeta.vScale&&(t.min=Math.min(t.min,s.min),t.max=Math.max(t.max,s.max))}getMaxOverflow(){return 0}getLabelAndValue(t){const i=this._cachedMeta,{iScale:n,vScale:r}=i,s=this.getParsed(t),o=s._custom,a=$a(o)?"["+o.start+", "+o.end+"]":""+r.getLabelForValue(s[r.axis]);return{label:""+n.getLabelForValue(s[n.axis]),value:a}}initialize(){this.enableOptionSharing=!0,super.initialize();const t=this._cachedMeta;t.stack=this.getDataset().stack}update(t){const i=this._cachedMeta;this.updateElements(i.data,0,i.data.length,t)}updateElements(t,i,n,r){const s=r==="reset",{index:o,_cachedMeta:{vScale:a}}=this,l=a.getBasePixel(),h=a.isHorizontal(),c=this._getRuler(),{sharedOptions:u,includeOptions:f}=this._getSharedOptions(i,r);for(let d=i;d<i+n;d++){const g=this.getParsed(d),y=s||Gt(g[a.axis])?{base:l,head:l}:this._calculateBarValuePixels(d),_=this._calculateBarIndexPixels(d,c),w=(g._stacks||{})[a.axis],v={horizontal:h,base:y.base,enableBorderRadius:!w||$a(g._custom)||o===w._top||o===w._bottom,x:h?y.head:_.center,y:h?_.center:y.head,height:h?_.size:Math.abs(y.size),width:h?Math.abs(y.size):_.size};f&&(v.options=u||this.resolveDataElementOptions(d,t[d].active?"active":r));const S=v.options||t[d].options;Ow(v,S,w,o),Cw(v,S,c.ratio),this.updateElement(t[d],d,v,r)}}_getStacks(t,i){const{iScale:n}=this._cachedMeta,r=n.getMatchingVisibleMetas(this._type).filter(c=>c.controller.options.grouped),s=n.options.stacked,o=[],a=this._cachedMeta.controller.getParsed(i),l=a&&a[n.axis],h=c=>{const u=c._parsed.find(d=>d[n.axis]===l),f=u&&u[c.vScale.axis];if(Gt(f)||isNaN(f))return!0};for(const c of r)if(!(i!==void 0&&h(c))&&((s===!1||o.indexOf(c.stack)===-1||s===void 0&&c.stack===void 0)&&o.push(c.stack),c.index===t))break;return o.length||o.push(void 0),o}_getStackCount(t){return this._getStacks(void 0,t).length}_getStackIndex(t,i,n){const r=this._getStacks(t,n),s=i!==void 0?r.indexOf(i):-1;return s===-1?r.length-1:s}_getRuler(){const t=this.options,i=this._cachedMeta,n=i.iScale,r=[];let s,o;for(s=0,o=i.data.length;s<o;++s)r.push(n.getPixelForValue(this.getParsed(s)[n.axis],s));const a=t.barThickness;return{min:a||xw(i),pixels:r,start:n._startPixel,end:n._endPixel,stackCount:this._getStackCount(),scale:n,grouped:t.grouped,ratio:a?1:t.categoryPercentage*t.barPercentage}}_calculateBarValuePixels(t){const{_cachedMeta:{vScale:i,_stacked:n,index:r},options:{base:s,minBarLength:o}}=this,a=s||0,l=this.getParsed(t),h=l._custom,c=$a(h);let u=l[i.axis],f=0,d=n?this.applyStack(i,l,n):u,g,y;d!==u&&(f=d-u,d=u),c&&(u=h.barStart,d=h.barEnd-h.barStart,u!==0&&Di(u)!==Di(h.barEnd)&&(f=0),f+=u);const _=!Gt(s)&&!c?s:f;let w=i.getPixelForValue(_);if(this.chart.getDataVisibility(t)?g=i.getPixelForValue(f+d):g=w,y=g-w,Math.abs(y)<o){y=Aw(y,i,a)*o,u===a&&(w-=y/2);const v=i.getPixelForDecimal(0),S=i.getPixelForDecimal(1),T=Math.min(v,S),O=Math.max(v,S);w=Math.max(Math.min(w,O),T),g=w+y,n&&!c&&(l._stacks[i.axis]._visualValues[r]=i.getValueForPixel(g)-i.getValueForPixel(w))}if(w===i.getPixelForValue(a)){const v=Di(y)*i.getLineWidthForValue(a)/2;w+=v,y-=v}return{size:y,base:w,head:g,center:g+y/2}}_calculateBarIndexPixels(t,i){const n=i.scale,r=this.options,s=r.skipNull,o=jt(r.maxBarThickness,1/0);let a,l;if(i.grouped){const h=s?this._getStackCount(t):i.stackCount,c=r.barThickness==="flex"?Ew(t,i,r,h):kw(t,i,r,h),u=this._getStackIndex(this.index,this._cachedMeta.stack,s?t:void 0);a=c.start+c.chunk*u+c.chunk/2,l=Math.min(o,c.chunk*c.ratio)}else a=n.getPixelForValue(this.getParsed(t)[n.axis],t),l=Math.min(o,i.min*i.ratio);return{base:a-l/2,head:a+l/2,center:a,size:l}}draw(){const t=this._cachedMeta,i=t.vScale,n=t.data,r=n.length;let s=0;for(;s<r;++s)this.getParsed(s)[i.axis]!==null&&!n[s].hidden&&n[s].draw(this._ctx)}}yt(vo,"id","bar"),yt(vo,"defaults",{datasetElementType:!1,dataElementType:"bar",categoryPercentage:.8,barPercentage:.9,grouped:!0,animations:{numbers:{type:"number",properties:["x","y","base","width","height"]}}}),yt(vo,"overrides",{scales:{_index_:{type:"category",offset:!0,grid:{offset:!0}},_value_:{type:"linear",beginAtZero:!0}}});class So extends _i{initialize(){this.enableOptionSharing=!0,super.initialize()}parsePrimitiveData(t,i,n,r){const s=super.parsePrimitiveData(t,i,n,r);for(let o=0;o<s.length;o++)s[o]._custom=this.resolveDataElementOptions(o+n).radius;return s}parseArrayData(t,i,n,r){const s=super.parseArrayData(t,i,n,r);for(let o=0;o<s.length;o++){const a=i[n+o];s[o]._custom=jt(a[2],this.resolveDataElementOptions(o+n).radius)}return s}parseObjectData(t,i,n,r){const s=super.parseObjectData(t,i,n,r);for(let o=0;o<s.length;o++){const a=i[n+o];s[o]._custom=jt(a&&a.r&&+a.r,this.resolveDataElementOptions(o+n).radius)}return s}getMaxOverflow(){const t=this._cachedMeta.data;let i=0;for(let n=t.length-1;n>=0;--n)i=Math.max(i,t[n].size(this.resolveDataElementOptions(n))/2);return i>0&&i}getLabelAndValue(t){const i=this._cachedMeta,n=this.chart.data.labels||[],{xScale:r,yScale:s}=i,o=this.getParsed(t),a=r.getLabelForValue(o.x),l=s.getLabelForValue(o.y),h=o._custom;return{label:n[t]||"",value:"("+a+", "+l+(h?", "+h:"")+")"}}update(t){const i=this._cachedMeta.data;this.updateElements(i,0,i.length,t)}updateElements(t,i,n,r){const s=r==="reset",{iScale:o,vScale:a}=this._cachedMeta,{sharedOptions:l,includeOptions:h}=this._getSharedOptions(i,r),c=o.axis,u=a.axis;for(let f=i;f<i+n;f++){const d=t[f],g=!s&&this.getParsed(f),y={},_=y[c]=s?o.getPixelForDecimal(.5):o.getPixelForValue(g[c]),w=y[u]=s?a.getBasePixel():a.getPixelForValue(g[u]);y.skip=isNaN(_)||isNaN(w),h&&(y.options=l||this.resolveDataElementOptions(f,d.active?"active":r),s&&(y.options.radius=0)),this.updateElement(d,f,y,r)}}resolveDataElementOptions(t,i){const n=this.getParsed(t);let r=super.resolveDataElementOptions(t,i);r.$shared&&(r=Object.assign({},r,{$shared:!1}));const s=r.radius;return i!=="active"&&(r.radius=0),r.radius+=jt(n&&n._custom,s),r}}yt(So,"id","bubble"),yt(So,"defaults",{datasetElementType:!1,dataElementType:"point",animations:{numbers:{type:"number",properties:["x","y","borderWidth","radius"]}}}),yt(So,"overrides",{scales:{x:{type:"linear"},y:{type:"linear"}}});function Iw(e,t,i){let n=1,r=1,s=0,o=0;if(t<ue){const a=e,l=a+t,h=Math.cos(a),c=Math.sin(a),u=Math.cos(l),f=Math.sin(l),d=(S,T,O)=>_s(S,a,l,!0)?1:Math.max(T,T*i,O,O*i),g=(S,T,O)=>_s(S,a,l,!0)?-1:Math.min(T,T*i,O,O*i),y=d(0,h,u),_=d(Ae,c,f),w=g(fe,h,u),v=g(fe+Ae,c,f);n=(y-w)/2,r=(_-v)/2,s=-(y+w)/2,o=-(_+v)/2}return{ratioX:n,ratioY:r,offsetX:s,offsetY:o}}class Zn extends _i{constructor(t,i){super(t,i),this.enableOptionSharing=!0,this.innerRadius=void 0,this.outerRadius=void 0,this.offsetX=void 0,this.offsetY=void 0}linkScales(){}parse(t,i){const n=this.getDataset().data,r=this._cachedMeta;if(this._parsing===!1)r._parsed=n;else{let s=l=>+n[l];if(Ht(n[t])){const{key:l="value"}=this._parsing;s=h=>+On(n[h],l)}let o,a;for(o=t,a=t+i;o<a;++o)r._parsed[o]=s(o)}}_getRotation(){return mi(this.options.rotation-90)}_getCircumference(){return mi(this.options.circumference)}_getRotationExtents(){let t=ue,i=-ue;for(let n=0;n<this.chart.data.datasets.length;++n)if(this.chart.isDatasetVisible(n)&&this.chart.getDatasetMeta(n).type===this._type){const r=this.chart.getDatasetMeta(n).controller,s=r._getRotation(),o=r._getCircumference();t=Math.min(t,s),i=Math.max(i,s+o)}return{rotation:t,circumference:i-t}}update(t){const i=this.chart,{chartArea:n}=i,r=this._cachedMeta,s=r.data,o=this.getMaxBorderWidth()+this.getMaxOffset(s)+this.options.spacing,a=Math.max((Math.min(n.width,n.height)-o)/2,0),l=Math.min(qy(this.options.cutout,a),1),h=this._getRingWeight(this.index),{circumference:c,rotation:u}=this._getRotationExtents(),{ratioX:f,ratioY:d,offsetX:g,offsetY:y}=Iw(u,c,l),_=(n.width-o)/f,w=(n.height-o)/d,v=Math.max(Math.min(_,w)/2,0),S=wg(this.options.radius,v),T=Math.max(S*l,0),O=(S-T)/this._getVisibleDatasetWeightTotal();this.offsetX=g*S,this.offsetY=y*S,r.total=this.calculateTotal(),this.outerRadius=S-O*this._getRingWeightOffset(this.index),this.innerRadius=Math.max(this.outerRadius-O*h,0),this.updateElements(s,0,s.length,t)}_circumference(t,i){const n=this.options,r=this._cachedMeta,s=this._getCircumference();return i&&n.animation.animateRotate||!this.chart.getDataVisibility(t)||r._parsed[t]===null||r.data[t].hidden?0:this.calculateCircumference(r._parsed[t]*s/ue)}updateElements(t,i,n,r){const s=r==="reset",o=this.chart,a=o.chartArea,h=o.options.animation,c=(a.left+a.right)/2,u=(a.top+a.bottom)/2,f=s&&h.animateScale,d=f?0:this.innerRadius,g=f?0:this.outerRadius,{sharedOptions:y,includeOptions:_}=this._getSharedOptions(i,r);let w=this._getRotation(),v;for(v=0;v<i;++v)w+=this._circumference(v,s);for(v=i;v<i+n;++v){const S=this._circumference(v,s),T=t[v],O={x:c+this.offsetX,y:u+this.offsetY,startAngle:w,endAngle:w+S,circumference:S,outerRadius:g,innerRadius:d};_&&(O.options=y||this.resolveDataElementOptions(v,T.active?"active":r)),w+=S,this.updateElement(T,v,O,r)}}calculateTotal(){const t=this._cachedMeta,i=t.data;let n=0,r;for(r=0;r<i.length;r++){const s=t._parsed[r];s!==null&&!isNaN(s)&&this.chart.getDataVisibility(r)&&!i[r].hidden&&(n+=Math.abs(s))}return n}calculateCircumference(t){const i=this._cachedMeta.total;return i>0&&!isNaN(t)?ue*(Math.abs(t)/i):0}getLabelAndValue(t){const i=this._cachedMeta,n=this.chart,r=n.data.labels||[],s=Cs(i._parsed[t],n.options.locale);return{label:r[t]||"",value:s}}getMaxBorderWidth(t){let i=0;const n=this.chart;let r,s,o,a,l;if(!t){for(r=0,s=n.data.datasets.length;r<s;++r)if(n.isDatasetVisible(r)){o=n.getDatasetMeta(r),t=o.data,a=o.controller;break}}if(!t)return 0;for(r=0,s=t.length;r<s;++r)l=a.resolveDataElementOptions(r),l.borderAlign!=="inner"&&(i=Math.max(i,l.borderWidth||0,l.hoverBorderWidth||0));return i}getMaxOffset(t){let i=0;for(let n=0,r=t.length;n<r;++n){const s=this.resolveDataElementOptions(n);i=Math.max(i,s.offset||0,s.hoverOffset||0)}return i}_getRingWeightOffset(t){let i=0;for(let n=0;n<t;++n)this.chart.isDatasetVisible(n)&&(i+=this._getRingWeight(n));return i}_getRingWeight(t){return Math.max(jt(this.chart.data.datasets[t].weight,1),0)}_getVisibleDatasetWeightTotal(){return this._getRingWeightOffset(this.chart.data.datasets.length)||1}}yt(Zn,"id","doughnut"),yt(Zn,"defaults",{datasetElementType:!1,dataElementType:"arc",animation:{animateRotate:!0,animateScale:!1},animations:{numbers:{type:"number",properties:["circumference","endAngle","innerRadius","outerRadius","startAngle","x","y","offset","borderWidth","spacing"]}},cutout:"50%",rotation:0,circumference:360,radius:"100%",spacing:0,indexAxis:"r"}),yt(Zn,"descriptors",{_scriptable:t=>t!=="spacing",_indexable:t=>t!=="spacing"&&!t.startsWith("borderDash")&&!t.startsWith("hoverBorderDash")}),yt(Zn,"overrides",{aspectRatio:1,plugins:{legend:{labels:{generateLabels(t){const i=t.data;if(i.labels.length&&i.datasets.length){const{labels:{pointStyle:n,color:r}}=t.legend.options;return i.labels.map((s,o)=>{const l=t.getDatasetMeta(0).controller.getStyle(o);return{text:s,fillStyle:l.backgroundColor,strokeStyle:l.borderColor,fontColor:r,lineWidth:l.borderWidth,pointStyle:n,hidden:!t.getDataVisibility(o),index:o}})}return[]}},onClick(t,i,n){n.chart.toggleDataVisibility(i.index),n.chart.update()}}}});class xo extends _i{initialize(){this.enableOptionSharing=!0,this.supportsDecimation=!0,super.initialize()}update(t){const i=this._cachedMeta,{dataset:n,data:r=[],_dataset:s}=i,o=this.chart._animationsDisabled;let{start:a,count:l}=Tg(i,r,o);this._drawStart=a,this._drawCount=l,Og(i)&&(a=0,l=r.length),n._chart=this.chart,n._datasetIndex=this.index,n._decimated=!!s._decimated,n.points=r;const h=this.resolveDatasetElementOptions(t);this.options.showLine||(h.borderWidth=0),h.segment=this.options.segment,this.updateElement(n,void 0,{animated:!o,options:h},t),this.updateElements(r,a,l,t)}updateElements(t,i,n,r){const s=r==="reset",{iScale:o,vScale:a,_stacked:l,_dataset:h}=this._cachedMeta,{sharedOptions:c,includeOptions:u}=this._getSharedOptions(i,r),f=o.axis,d=a.axis,{spanGaps:g,segment:y}=this.options,_=Cr(g)?g:Number.POSITIVE_INFINITY,w=this.chart._animationsDisabled||s||r==="none",v=i+n,S=t.length;let T=i>0&&this.getParsed(i-1);for(let O=0;O<S;++O){const k=t[O],M=w?k:{};if(O<i||O>=v){M.skip=!0;continue}const A=this.getParsed(O),B=Gt(A[d]),q=M[f]=o.getPixelForValue(A[f],O),$=M[d]=s||B?a.getBasePixel():a.getPixelForValue(l?this.applyStack(a,A,l):A[d],O);M.skip=isNaN(q)||isNaN($)||B,M.stop=O>0&&Math.abs(A[f]-T[f])>_,y&&(M.parsed=A,M.raw=h.data[O]),u&&(M.options=c||this.resolveDataElementOptions(O,k.active?"active":r)),w||this.updateElement(k,O,M,r),T=A}}getMaxOverflow(){const t=this._cachedMeta,i=t.dataset,n=i.options&&i.options.borderWidth||0,r=t.data||[];if(!r.length)return n;const s=r[0].size(this.resolveDataElementOptions(0)),o=r[r.length-1].size(this.resolveDataElementOptions(r.length-1));return Math.max(n,s,o)/2}draw(){const t=this._cachedMeta;t.dataset.updateControlPoints(this.chart.chartArea,t.iScale.axis),super.draw()}}yt(xo,"id","line"),yt(xo,"defaults",{datasetElementType:"line",dataElementType:"point",showLine:!0,spanGaps:!1}),yt(xo,"overrides",{scales:{_index_:{type:"category"},_value_:{type:"linear"}}});class ps extends _i{constructor(t,i){super(t,i),this.innerRadius=void 0,this.outerRadius=void 0}getLabelAndValue(t){const i=this._cachedMeta,n=this.chart,r=n.data.labels||[],s=Cs(i._parsed[t].r,n.options.locale);return{label:r[t]||"",value:s}}parseObjectData(t,i,n,r){return Ng.bind(this)(t,i,n,r)}update(t){const i=this._cachedMeta.data;this._updateRadius(),this.updateElements(i,0,i.length,t)}getMinMax(){const t=this._cachedMeta,i={min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY};return t.data.forEach((n,r)=>{const s=this.getParsed(r).r;!isNaN(s)&&this.chart.getDataVisibility(r)&&(s<i.min&&(i.min=s),s>i.max&&(i.max=s))}),i}_updateRadius(){const t=this.chart,i=t.chartArea,n=t.options,r=Math.min(i.right-i.left,i.bottom-i.top),s=Math.max(r/2,0),o=Math.max(n.cutoutPercentage?s/100*n.cutoutPercentage:1,0),a=(s-o)/t.getVisibleDatasetCount();this.outerRadius=s-a*this.index,this.innerRadius=this.outerRadius-a}updateElements(t,i,n,r){const s=r==="reset",o=this.chart,l=o.options.animation,h=this._cachedMeta.rScale,c=h.xCenter,u=h.yCenter,f=h.getIndexAngle(0)-.5*fe;let d=f,g;const y=360/this.countVisibleElements();for(g=0;g<i;++g)d+=this._computeAngle(g,r,y);for(g=i;g<i+n;g++){const _=t[g];let w=d,v=d+this._computeAngle(g,r,y),S=o.getDataVisibility(g)?h.getDistanceFromCenterForValue(this.getParsed(g).r):0;d=v,s&&(l.animateScale&&(S=0),l.animateRotate&&(w=v=f));const T={x:c,y:u,innerRadius:0,outerRadius:S,startAngle:w,endAngle:v,options:this.resolveDataElementOptions(g,_.active?"active":r)};this.updateElement(_,g,T,r)}}countVisibleElements(){const t=this._cachedMeta;let i=0;return t.data.forEach((n,r)=>{!isNaN(this.getParsed(r).r)&&this.chart.getDataVisibility(r)&&i++}),i}_computeAngle(t,i,n){return this.chart.getDataVisibility(t)?mi(this.resolveDataElementOptions(t,i).angle||n):0}}yt(ps,"id","polarArea"),yt(ps,"defaults",{dataElementType:"arc",animation:{animateRotate:!0,animateScale:!0},animations:{numbers:{type:"number",properties:["x","y","startAngle","endAngle","innerRadius","outerRadius"]}},indexAxis:"r",startAngle:0}),yt(ps,"overrides",{aspectRatio:1,plugins:{legend:{labels:{generateLabels(t){const i=t.data;if(i.labels.length&&i.datasets.length){const{labels:{pointStyle:n,color:r}}=t.legend.options;return i.labels.map((s,o)=>{const l=t.getDatasetMeta(0).controller.getStyle(o);return{text:s,fillStyle:l.backgroundColor,strokeStyle:l.borderColor,fontColor:r,lineWidth:l.borderWidth,pointStyle:n,hidden:!t.getDataVisibility(o),index:o}})}return[]}},onClick(t,i,n){n.chart.toggleDataVisibility(i.index),n.chart.update()}}},scales:{r:{type:"radialLinear",angleLines:{display:!1},beginAtZero:!0,grid:{circular:!0},pointLabels:{display:!1},startAngle:0}}});class Ih extends Zn{}yt(Ih,"id","pie"),yt(Ih,"defaults",{cutout:0,rotation:0,circumference:360,radius:"100%"});class ko extends _i{getLabelAndValue(t){const i=this._cachedMeta.vScale,n=this.getParsed(t);return{label:i.getLabels()[t],value:""+i.getLabelForValue(n[i.axis])}}parseObjectData(t,i,n,r){return Ng.bind(this)(t,i,n,r)}update(t){const i=this._cachedMeta,n=i.dataset,r=i.data||[],s=i.iScale.getLabels();if(n.points=r,t!=="resize"){const o=this.resolveDatasetElementOptions(t);this.options.showLine||(o.borderWidth=0);const a={_loop:!0,_fullLoop:s.length===r.length,options:o};this.updateElement(n,void 0,a,t)}this.updateElements(r,0,r.length,t)}updateElements(t,i,n,r){const s=this._cachedMeta.rScale,o=r==="reset";for(let a=i;a<i+n;a++){const l=t[a],h=this.resolveDataElementOptions(a,l.active?"active":r),c=s.getPointPositionForValue(a,this.getParsed(a).r),u=o?s.xCenter:c.x,f=o?s.yCenter:c.y,d={x:u,y:f,angle:c.angle,skip:isNaN(u)||isNaN(f),options:h};this.updateElement(l,a,d,r)}}}yt(ko,"id","radar"),yt(ko,"defaults",{datasetElementType:"line",dataElementType:"point",indexAxis:"r",showLine:!0,elements:{line:{fill:"start"}}}),yt(ko,"overrides",{aspectRatio:1,scales:{r:{type:"radialLinear"}}});class Eo extends _i{getLabelAndValue(t){const i=this._cachedMeta,n=this.chart.data.labels||[],{xScale:r,yScale:s}=i,o=this.getParsed(t),a=r.getLabelForValue(o.x),l=s.getLabelForValue(o.y);return{label:n[t]||"",value:"("+a+", "+l+")"}}update(t){const i=this._cachedMeta,{data:n=[]}=i,r=this.chart._animationsDisabled;let{start:s,count:o}=Tg(i,n,r);if(this._drawStart=s,this._drawCount=o,Og(i)&&(s=0,o=n.length),this.options.showLine){this.datasetElementType||this.addElements();const{dataset:a,_dataset:l}=i;a._chart=this.chart,a._datasetIndex=this.index,a._decimated=!!l._decimated,a.points=n;const h=this.resolveDatasetElementOptions(t);h.segment=this.options.segment,this.updateElement(a,void 0,{animated:!r,options:h},t)}else this.datasetElementType&&(delete i.dataset,this.datasetElementType=!1);this.updateElements(n,s,o,t)}addElements(){const{showLine:t}=this.options;!this.datasetElementType&&t&&(this.datasetElementType=this.chart.registry.getElement("line")),super.addElements()}updateElements(t,i,n,r){const s=r==="reset",{iScale:o,vScale:a,_stacked:l,_dataset:h}=this._cachedMeta,c=this.resolveDataElementOptions(i,r),u=this.getSharedOptions(c),f=this.includeOptions(r,u),d=o.axis,g=a.axis,{spanGaps:y,segment:_}=this.options,w=Cr(y)?y:Number.POSITIVE_INFINITY,v=this.chart._animationsDisabled||s||r==="none";let S=i>0&&this.getParsed(i-1);for(let T=i;T<i+n;++T){const O=t[T],k=this.getParsed(T),M=v?O:{},A=Gt(k[g]),B=M[d]=o.getPixelForValue(k[d],T),q=M[g]=s||A?a.getBasePixel():a.getPixelForValue(l?this.applyStack(a,k,l):k[g],T);M.skip=isNaN(B)||isNaN(q)||A,M.stop=T>0&&Math.abs(k[d]-S[d])>w,_&&(M.parsed=k,M.raw=h.data[T]),f&&(M.options=u||this.resolveDataElementOptions(T,O.active?"active":r)),v||this.updateElement(O,T,M,r),S=k}this.updateSharedOptions(u,r,c)}getMaxOverflow(){const t=this._cachedMeta,i=t.data||[];if(!this.options.showLine){let a=0;for(let l=i.length-1;l>=0;--l)a=Math.max(a,i[l].size(this.resolveDataElementOptions(l))/2);return a>0&&a}const n=t.dataset,r=n.options&&n.options.borderWidth||0;if(!i.length)return r;const s=i[0].size(this.resolveDataElementOptions(0)),o=i[i.length-1].size(this.resolveDataElementOptions(i.length-1));return Math.max(r,s,o)/2}}yt(Eo,"id","scatter"),yt(Eo,"defaults",{datasetElementType:!1,dataElementType:"point",showLine:!1,fill:!1}),yt(Eo,"overrides",{interaction:{mode:"point"},scales:{x:{type:"linear"},y:{type:"linear"}}});var Rw=Object.freeze({__proto__:null,BarController:vo,BubbleController:So,DoughnutController:Zn,LineController:xo,PieController:Ih,PolarAreaController:ps,RadarController:ko,ScatterController:Eo});function zn(){throw new Error("This method is not implemented: Check that a complete date adapter is provided.")}class kc{constructor(t){yt(this,"options");this.options=t||{}}static override(t){Object.assign(kc.prototype,t)}init(){}formats(){return zn()}parse(){return zn()}format(){return zn()}add(){return zn()}diff(){return zn()}startOf(){return zn()}endOf(){return zn()}}var $g={_date:kc};function Dw(e,t,i,n){const{controller:r,data:s,_sorted:o}=e,a=r._cachedMeta.iScale;if(a&&t===a.axis&&t!=="r"&&o&&s.length){const l=a._reversePixels?r_:tn;if(n){if(r._sharedOptions){const h=s[0],c=typeof h.getRange=="function"&&h.getRange(t);if(c){const u=l(s,t,i-c),f=l(s,t,i+c);return{lo:u.lo,hi:f.hi}}}}else return l(s,t,i)}return{lo:0,hi:s.length-1}}function Is(e,t,i,n,r){const s=e.getSortedVisibleDatasetMetas(),o=i[t];for(let a=0,l=s.length;a<l;++a){const{index:h,data:c}=s[a],{lo:u,hi:f}=Dw(s[a],t,o,r);for(let d=u;d<=f;++d){const g=c[d];g.skip||n(g,h,d)}}}function Lw(e){const t=e.indexOf("x")!==-1,i=e.indexOf("y")!==-1;return function(n,r){const s=t?Math.abs(n.x-r.x):0,o=i?Math.abs(n.y-r.y):0;return Math.sqrt(Math.pow(s,2)+Math.pow(o,2))}}function Ga(e,t,i,n,r){const s=[];return!r&&!e.isPointInArea(t)||Is(e,i,t,function(a,l,h){!r&&!en(a,e.chartArea,0)||a.inRange(t.x,t.y,n)&&s.push({element:a,datasetIndex:l,index:h})},!0),s}function Bw(e,t,i,n){let r=[];function s(o,a,l){const{startAngle:h,endAngle:c}=o.getProps(["startAngle","endAngle"],n),{angle:u}=xg(o,{x:t.x,y:t.y});_s(u,h,c)&&r.push({element:o,datasetIndex:a,index:l})}return Is(e,i,t,s),r}function Nw(e,t,i,n,r,s){let o=[];const a=Lw(i);let l=Number.POSITIVE_INFINITY;function h(c,u,f){const d=c.inRange(t.x,t.y,r);if(n&&!d)return;const g=c.getCenterPoint(r);if(!(!!s||e.isPointInArea(g))&&!d)return;const _=a(t,g);_<l?(o=[{element:c,datasetIndex:u,index:f}],l=_):_===l&&o.push({element:c,datasetIndex:u,index:f})}return Is(e,i,t,h),o}function Ka(e,t,i,n,r,s){return!s&&!e.isPointInArea(t)?[]:i==="r"&&!n?Bw(e,t,i,r):Nw(e,t,i,n,r,s)}function Ef(e,t,i,n,r){const s=[],o=i==="x"?"inXRange":"inYRange";let a=!1;return Is(e,i,t,(l,h,c)=>{l[o]&&l[o](t[i],r)&&(s.push({element:l,datasetIndex:h,index:c}),a=a||l.inRange(t.x,t.y,r))}),n&&!a?[]:s}var Fw={evaluateInteractionItems:Is,modes:{index(e,t,i,n){const r=$n(t,e),s=i.axis||"x",o=i.includeInvisible||!1,a=i.intersect?Ga(e,r,s,n,o):Ka(e,r,s,!1,n,o),l=[];return a.length?(e.getSortedVisibleDatasetMetas().forEach(h=>{const c=a[0].index,u=h.data[c];u&&!u.skip&&l.push({element:u,datasetIndex:h.index,index:c})}),l):[]},dataset(e,t,i,n){const r=$n(t,e),s=i.axis||"xy",o=i.includeInvisible||!1;let a=i.intersect?Ga(e,r,s,n,o):Ka(e,r,s,!1,n,o);if(a.length>0){const l=a[0].datasetIndex,h=e.getDatasetMeta(l).data;a=[];for(let c=0;c<h.length;++c)a.push({element:h[c],datasetIndex:l,index:c})}return a},point(e,t,i,n){const r=$n(t,e),s=i.axis||"xy",o=i.includeInvisible||!1;return Ga(e,r,s,n,o)},nearest(e,t,i,n){const r=$n(t,e),s=i.axis||"xy",o=i.includeInvisible||!1;return Ka(e,r,s,i.intersect,n,o)},x(e,t,i,n){const r=$n(t,e);return Ef(e,r,"x",i.intersect,n)},y(e,t,i,n){const r=$n(t,e);return Ef(e,r,"y",i.intersect,n)}}};const Gg=["left","top","right","bottom"];function Hr(e,t){return e.filter(i=>i.pos===t)}function Mf(e,t){return e.filter(i=>Gg.indexOf(i.pos)===-1&&i.box.axis===t)}function qr(e,t){return e.sort((i,n)=>{const r=t?n:i,s=t?i:n;return r.weight===s.weight?r.index-s.index:r.weight-s.weight})}function Uw(e){const t=[];let i,n,r,s,o,a;for(i=0,n=(e||[]).length;i<n;++i)r=e[i],{position:s,options:{stack:o,stackWeight:a=1}}=r,t.push({index:i,box:r,pos:s,horizontal:r.isHorizontal(),weight:r.weight,stack:o&&s+o,stackWeight:a});return t}function jw(e){const t={};for(const i of e){const{stack:n,pos:r,stackWeight:s}=i;if(!n||!Gg.includes(r))continue;const o=t[n]||(t[n]={count:0,placed:0,weight:0,size:0});o.count++,o.weight+=s}return t}function Ww(e,t){const i=jw(e),{vBoxMaxWidth:n,hBoxMaxHeight:r}=t;let s,o,a;for(s=0,o=e.length;s<o;++s){a=e[s];const{fullSize:l}=a.box,h=i[a.stack],c=h&&a.stackWeight/h.weight;a.horizontal?(a.width=c?c*n:l&&t.availableWidth,a.height=r):(a.width=n,a.height=c?c*r:l&&t.availableHeight)}return i}function Yw(e){const t=Uw(e),i=qr(t.filter(h=>h.box.fullSize),!0),n=qr(Hr(t,"left"),!0),r=qr(Hr(t,"right")),s=qr(Hr(t,"top"),!0),o=qr(Hr(t,"bottom")),a=Mf(t,"x"),l=Mf(t,"y");return{fullSize:i,leftAndTop:n.concat(s),rightAndBottom:r.concat(l).concat(o).concat(a),chartArea:Hr(t,"chartArea"),vertical:n.concat(r).concat(l),horizontal:s.concat(o).concat(a)}}function Af(e,t,i,n){return Math.max(e[i],t[i])+Math.max(e[n],t[n])}function Kg(e,t){e.top=Math.max(e.top,t.top),e.left=Math.max(e.left,t.left),e.bottom=Math.max(e.bottom,t.bottom),e.right=Math.max(e.right,t.right)}function zw(e,t,i,n){const{pos:r,box:s}=i,o=e.maxPadding;if(!Ht(r)){i.size&&(e[r]-=i.size);const u=n[i.stack]||{size:0,count:1};u.size=Math.max(u.size,i.horizontal?s.height:s.width),i.size=u.size/u.count,e[r]+=i.size}s.getPadding&&Kg(o,s.getPadding());const a=Math.max(0,t.outerWidth-Af(o,e,"left","right")),l=Math.max(0,t.outerHeight-Af(o,e,"top","bottom")),h=a!==e.w,c=l!==e.h;return e.w=a,e.h=l,i.horizontal?{same:h,other:c}:{same:c,other:h}}function Vw(e){const t=e.maxPadding;function i(n){const r=Math.max(t[n]-e[n],0);return e[n]+=r,r}e.y+=i("top"),e.x+=i("left"),i("right"),i("bottom")}function Hw(e,t){const i=t.maxPadding;function n(r){const s={left:0,top:0,right:0,bottom:0};return r.forEach(o=>{s[o]=Math.max(t[o],i[o])}),s}return n(e?["left","right"]:["top","bottom"])}function ns(e,t,i,n){const r=[];let s,o,a,l,h,c;for(s=0,o=e.length,h=0;s<o;++s){a=e[s],l=a.box,l.update(a.width||t.w,a.height||t.h,Hw(a.horizontal,t));const{same:u,other:f}=zw(t,i,a,n);h|=u&&r.length,c=c||f,l.fullSize||r.push(a)}return h&&ns(r,t,i,n)||c}function Xs(e,t,i,n,r){e.top=i,e.left=t,e.right=t+n,e.bottom=i+r,e.width=n,e.height=r}function Tf(e,t,i,n){const r=i.padding;let{x:s,y:o}=t;for(const a of e){const l=a.box,h=n[a.stack]||{count:1,placed:0,weight:1},c=a.stackWeight/h.weight||1;if(a.horizontal){const u=t.w*c,f=h.size||l.height;ys(h.start)&&(o=h.start),l.fullSize?Xs(l,r.left,o,i.outerWidth-r.right-r.left,f):Xs(l,t.left+h.placed,o,u,f),h.start=o,h.placed+=u,o=l.bottom}else{const u=t.h*c,f=h.size||l.width;ys(h.start)&&(s=h.start),l.fullSize?Xs(l,s,r.top,f,i.outerHeight-r.bottom-r.top):Xs(l,s,t.top+h.placed,f,u),h.start=s,h.placed+=u,s=l.right}}t.x=s,t.y=o}var qe={addBox(e,t){e.boxes||(e.boxes=[]),t.fullSize=t.fullSize||!1,t.position=t.position||"top",t.weight=t.weight||0,t._layers=t._layers||function(){return[{z:0,draw(i){t.draw(i)}}]},e.boxes.push(t)},removeBox(e,t){const i=e.boxes?e.boxes.indexOf(t):-1;i!==-1&&e.boxes.splice(i,1)},configure(e,t,i){t.fullSize=i.fullSize,t.position=i.position,t.weight=i.weight},update(e,t,i,n){if(!e)return;const r=Ge(e.options.layout.padding),s=Math.max(t-r.width,0),o=Math.max(i-r.height,0),a=Yw(e.boxes),l=a.vertical,h=a.horizontal;Jt(e.boxes,y=>{typeof y.beforeLayout=="function"&&y.beforeLayout()});const c=l.reduce((y,_)=>_.box.options&&_.box.options.display===!1?y:y+1,0)||1,u=Object.freeze({outerWidth:t,outerHeight:i,padding:r,availableWidth:s,availableHeight:o,vBoxMaxWidth:s/2/c,hBoxMaxHeight:o/2}),f=Object.assign({},r);Kg(f,Ge(n));const d=Object.assign({maxPadding:f,w:s,h:o,x:r.left,y:r.top},r),g=Ww(l.concat(h),u);ns(a.fullSize,d,u,g),ns(l,d,u,g),ns(h,d,u,g)&&ns(l,d,u,g),Vw(d),Tf(a.leftAndTop,d,u,g),d.x+=d.w,d.y+=d.h,Tf(a.rightAndBottom,d,u,g),e.chartArea={left:d.left,top:d.top,right:d.left+d.w,bottom:d.top+d.h,height:d.h,width:d.w},Jt(a.chartArea,y=>{const _=y.box;Object.assign(_,e.chartArea),_.update(d.w,d.h,{left:0,top:0,right:0,bottom:0})})}};class Qg{acquireContext(t,i){}releaseContext(t){return!1}addEventListener(t,i,n){}removeEventListener(t,i,n){}getDevicePixelRatio(){return 1}getMaximumSize(t,i,n,r){return i=Math.max(0,i||t.width),n=n||t.height,{width:i,height:Math.max(0,r?Math.floor(i/r):n)}}isAttached(t){return!0}updateConfig(t){}}class qw extends Qg{acquireContext(t){return t&&t.getContext&&t.getContext("2d")||null}updateConfig(t){t.options.animation=!1}}const Mo="$chartjs",$w={touchstart:"mousedown",touchmove:"mousemove",touchend:"mouseup",pointerenter:"mouseenter",pointerdown:"mousedown",pointermove:"mousemove",pointerup:"mouseup",pointerleave:"mouseout",pointerout:"mouseout"},Of=e=>e===null||e==="";function Gw(e,t){const i=e.style,n=e.getAttribute("height"),r=e.getAttribute("width");if(e[Mo]={initial:{height:n,width:r,style:{display:i.display,height:i.height,width:i.width}}},i.display=i.display||"block",i.boxSizing=i.boxSizing||"border-box",Of(r)){const s=ff(e,"width");s!==void 0&&(e.width=s)}if(Of(n))if(e.style.height==="")e.height=e.width/(t||2);else{const s=ff(e,"height");s!==void 0&&(e.height=s)}return e}const Xg=X_?{passive:!0}:!1;function Kw(e,t,i){e&&e.addEventListener(t,i,Xg)}function Qw(e,t,i){e&&e.canvas&&e.canvas.removeEventListener(t,i,Xg)}function Xw(e,t){const i=$w[e.type]||e.type,{x:n,y:r}=$n(e,t);return{type:i,chart:t,native:e,x:n!==void 0?n:null,y:r!==void 0?r:null}}function Go(e,t){for(const i of e)if(i===t||i.contains(t))return!0}function Zw(e,t,i){const n=e.canvas,r=new MutationObserver(s=>{let o=!1;for(const a of s)o=o||Go(a.addedNodes,n),o=o&&!Go(a.removedNodes,n);o&&i()});return r.observe(document,{childList:!0,subtree:!0}),r}function Jw(e,t,i){const n=e.canvas,r=new MutationObserver(s=>{let o=!1;for(const a of s)o=o||Go(a.removedNodes,n),o=o&&!Go(a.addedNodes,n);o&&i()});return r.observe(document,{childList:!0,subtree:!0}),r}const vs=new Map;let Pf=0;function Zg(){const e=window.devicePixelRatio;e!==Pf&&(Pf=e,vs.forEach((t,i)=>{i.currentDevicePixelRatio!==e&&t()}))}function t1(e,t){vs.size||window.addEventListener("resize",Zg),vs.set(e,t)}function e1(e){vs.delete(e),vs.size||window.removeEventListener("resize",Zg)}function i1(e,t,i){const n=e.canvas,r=n&&xc(n);if(!r)return;const s=Ag((a,l)=>{const h=r.clientWidth;i(a,l),h<r.clientWidth&&i()},window),o=new ResizeObserver(a=>{const l=a[0],h=l.contentRect.width,c=l.contentRect.height;h===0&&c===0||s(h,c)});return o.observe(r),t1(e,s),o}function Qa(e,t,i){i&&i.disconnect(),t==="resize"&&e1(e)}function n1(e,t,i){const n=e.canvas,r=Ag(s=>{e.ctx!==null&&i(Xw(s,e))},e);return Kw(n,t,r),r}class r1 extends Qg{acquireContext(t,i){const n=t&&t.getContext&&t.getContext("2d");return n&&n.canvas===t?(Gw(t,i),n):null}releaseContext(t){const i=t.canvas;if(!i[Mo])return!1;const n=i[Mo].initial;["height","width"].forEach(s=>{const o=n[s];Gt(o)?i.removeAttribute(s):i.setAttribute(s,o)});const r=n.style||{};return Object.keys(r).forEach(s=>{i.style[s]=r[s]}),i.width=i.width,delete i[Mo],!0}addEventListener(t,i,n){this.removeEventListener(t,i);const r=t.$proxies||(t.$proxies={}),o={attach:Zw,detach:Jw,resize:i1}[i]||n1;r[i]=o(t,i,n)}removeEventListener(t,i){const n=t.$proxies||(t.$proxies={}),r=n[i];if(!r)return;({attach:Qa,detach:Qa,resize:Qa}[i]||Qw)(t,i,r),n[i]=void 0}getDevicePixelRatio(){return window.devicePixelRatio}getMaximumSize(t,i,n,r){return Q_(t,i,n,r)}isAttached(t){const i=t&&xc(t);return!!(i&&i.isConnected)}}function s1(e){return!Sc()||typeof OffscreenCanvas<"u"&&e instanceof OffscreenCanvas?qw:r1}class wi{constructor(){yt(this,"x");yt(this,"y");yt(this,"active",!1);yt(this,"options");yt(this,"$animations")}tooltipPosition(t){const{x:i,y:n}=this.getProps(["x","y"],t);return{x:i,y:n}}hasValue(){return Cr(this.x)&&Cr(this.y)}getProps(t,i){const n=this.$animations;if(!i||!n)return this;const r={};return t.forEach(s=>{r[s]=n[s]&&n[s].active()?n[s]._to:this[s]}),r}}yt(wi,"defaults",{}),yt(wi,"defaultRoutes");function o1(e,t){const i=e.options.ticks,n=a1(e),r=Math.min(i.maxTicksLimit||n,n),s=i.major.enabled?h1(t):[],o=s.length,a=s[0],l=s[o-1],h=[];if(o>r)return c1(t,h,s,o/r),h;const c=l1(s,t,r);if(o>0){let u,f;const d=o>1?Math.round((l-a)/(o-1)):null;for(Zs(t,h,c,Gt(d)?0:a-d,a),u=0,f=o-1;u<f;u++)Zs(t,h,c,s[u],s[u+1]);return Zs(t,h,c,l,Gt(d)?t.length:l+d),h}return Zs(t,h,c),h}function a1(e){const t=e.options.offset,i=e._tickSize(),n=e._length/i+(t?0:1),r=e._maxLength/i;return Math.floor(Math.min(n,r))}function l1(e,t,i){const n=u1(e),r=t.length/i;if(!n)return Math.max(r,1);const s=t_(n);for(let o=0,a=s.length-1;o<a;o++){const l=s[o];if(l>r)return l}return Math.max(r,1)}function h1(e){const t=[];let i,n;for(i=0,n=e.length;i<n;i++)e[i].major&&t.push(i);return t}function c1(e,t,i,n){let r=0,s=i[0],o;for(n=Math.ceil(n),o=0;o<e.length;o++)o===s&&(t.push(e[o]),r++,s=i[r*n])}function Zs(e,t,i,n,r){const s=jt(n,0),o=Math.min(jt(r,e.length),e.length);let a=0,l,h,c;for(i=Math.ceil(i),r&&(l=r-n,i=l/Math.floor(l/i)),c=s;c<0;)a++,c=Math.round(s+a*i);for(h=Math.max(s,0);h<o;h++)h===c&&(t.push(e[h]),a++,c=Math.round(s+a*i))}function u1(e){const t=e.length;let i,n;if(t<2)return!1;for(n=e[0],i=1;i<t;++i)if(e[i]-e[i-1]!==n)return!1;return n}const f1=e=>e==="left"?"right":e==="right"?"left":e,Cf=(e,t,i)=>t==="top"||t==="left"?e[t]+i:e[t]-i,If=(e,t)=>Math.min(t||e,e);function Rf(e,t){const i=[],n=e.length/t,r=e.length;let s=0;for(;s<r;s+=n)i.push(e[Math.floor(s)]);return i}function d1(e,t,i){const n=e.ticks.length,r=Math.min(t,n-1),s=e._startPixel,o=e._endPixel,a=1e-6;let l=e.getPixelForTick(r),h;if(!(i&&(n===1?h=Math.max(l-s,o-l):t===0?h=(e.getPixelForTick(1)-l)/2:h=(l-e.getPixelForTick(r-1))/2,l+=r<t?h:-h,l<s-a||l>o+a)))return l}function p1(e,t){Jt(e,i=>{const n=i.gc,r=n.length/2;let s;if(r>t){for(s=0;s<r;++s)delete i.data[n[s]];n.splice(0,r)}})}function $r(e){return e.drawTicks?e.tickLength:0}function Df(e,t){if(!e.display)return 0;const i=Ce(e.font,t),n=Ge(e.padding);return(ce(e.text)?e.text.length:1)*i.lineHeight+n.height}function g1(e,t){return Rn(e,{scale:t,type:"scale"})}function m1(e,t,i){return Rn(e,{tick:i,index:t,type:"tick"})}function b1(e,t,i){let n=mc(e);return(i&&t!=="right"||!i&&t==="right")&&(n=f1(n)),n}function y1(e,t,i,n){const{top:r,left:s,bottom:o,right:a,chart:l}=e,{chartArea:h,scales:c}=l;let u=0,f,d,g;const y=o-r,_=a-s;if(e.isHorizontal()){if(d=He(n,s,a),Ht(i)){const w=Object.keys(i)[0],v=i[w];g=c[w].getPixelForValue(v)+y-t}else i==="center"?g=(h.bottom+h.top)/2+y-t:g=Cf(e,i,t);f=a-s}else{if(Ht(i)){const w=Object.keys(i)[0],v=i[w];d=c[w].getPixelForValue(v)-_+t}else i==="center"?d=(h.left+h.right)/2-_+t:d=Cf(e,i,t);g=He(n,o,r),u=i==="left"?-Ae:Ae}return{titleX:d,titleY:g,maxWidth:f,rotation:u}}class gr extends wi{constructor(t){super(),this.id=t.id,this.type=t.type,this.options=void 0,this.ctx=t.ctx,this.chart=t.chart,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this._margins={left:0,right:0,top:0,bottom:0},this.maxWidth=void 0,this.maxHeight=void 0,this.paddingTop=void 0,this.paddingBottom=void 0,this.paddingLeft=void 0,this.paddingRight=void 0,this.axis=void 0,this.labelRotation=void 0,this.min=void 0,this.max=void 0,this._range=void 0,this.ticks=[],this._gridLineItems=null,this._labelItems=null,this._labelSizes=null,this._length=0,this._maxLength=0,this._longestTextCache={},this._startPixel=void 0,this._endPixel=void 0,this._reversePixels=!1,this._userMax=void 0,this._userMin=void 0,this._suggestedMax=void 0,this._suggestedMin=void 0,this._ticksLength=0,this._borderValue=0,this._cache={},this._dataLimitsCached=!1,this.$context=void 0}init(t){this.options=t.setContext(this.getContext()),this.axis=t.axis,this._userMin=this.parse(t.min),this._userMax=this.parse(t.max),this._suggestedMin=this.parse(t.suggestedMin),this._suggestedMax=this.parse(t.suggestedMax)}parse(t,i){return t}getUserBounds(){let{_userMin:t,_userMax:i,_suggestedMin:n,_suggestedMax:r}=this;return t=ii(t,Number.POSITIVE_INFINITY),i=ii(i,Number.NEGATIVE_INFINITY),n=ii(n,Number.POSITIVE_INFINITY),r=ii(r,Number.NEGATIVE_INFINITY),{min:ii(t,n),max:ii(i,r),minDefined:Ee(t),maxDefined:Ee(i)}}getMinMax(t){let{min:i,max:n,minDefined:r,maxDefined:s}=this.getUserBounds(),o;if(r&&s)return{min:i,max:n};const a=this.getMatchingVisibleMetas();for(let l=0,h=a.length;l<h;++l)o=a[l].controller.getMinMax(this,t),r||(i=Math.min(i,o.min)),s||(n=Math.max(n,o.max));return i=s&&i>n?n:i,n=r&&i>n?i:n,{min:ii(i,ii(n,i)),max:ii(n,ii(i,n))}}getPadding(){return{left:this.paddingLeft||0,top:this.paddingTop||0,right:this.paddingRight||0,bottom:this.paddingBottom||0}}getTicks(){return this.ticks}getLabels(){const t=this.chart.data;return this.options.labels||(this.isHorizontal()?t.xLabels:t.yLabels)||t.labels||[]}getLabelItems(t=this.chart.chartArea){return this._labelItems||(this._labelItems=this._computeLabelItems(t))}beforeLayout(){this._cache={},this._dataLimitsCached=!1}beforeUpdate(){le(this.options.beforeUpdate,[this])}update(t,i,n){const{beginAtZero:r,grace:s,ticks:o}=this.options,a=o.sampleSize;this.beforeUpdate(),this.maxWidth=t,this.maxHeight=i,this._margins=n=Object.assign({left:0,right:0,top:0,bottom:0},n),this.ticks=null,this._labelSizes=null,this._gridLineItems=null,this._labelItems=null,this.beforeSetDimensions(),this.setDimensions(),this.afterSetDimensions(),this._maxLength=this.isHorizontal()?this.width+n.left+n.right:this.height+n.top+n.bottom,this._dataLimitsCached||(this.beforeDataLimits(),this.determineDataLimits(),this.afterDataLimits(),this._range=T_(this,s,r),this._dataLimitsCached=!0),this.beforeBuildTicks(),this.ticks=this.buildTicks()||[],this.afterBuildTicks();const l=a<this.ticks.length;this._convertTicksToLabels(l?Rf(this.ticks,a):this.ticks),this.configure(),this.beforeCalculateLabelRotation(),this.calculateLabelRotation(),this.afterCalculateLabelRotation(),o.display&&(o.autoSkip||o.source==="auto")&&(this.ticks=o1(this,this.ticks),this._labelSizes=null,this.afterAutoSkip()),l&&this._convertTicksToLabels(this.ticks),this.beforeFit(),this.fit(),this.afterFit(),this.afterUpdate()}configure(){let t=this.options.reverse,i,n;this.isHorizontal()?(i=this.left,n=this.right):(i=this.top,n=this.bottom,t=!t),this._startPixel=i,this._endPixel=n,this._reversePixels=t,this._length=n-i,this._alignToPixels=this.options.alignToPixels}afterUpdate(){le(this.options.afterUpdate,[this])}beforeSetDimensions(){le(this.options.beforeSetDimensions,[this])}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=0,this.right=this.width):(this.height=this.maxHeight,this.top=0,this.bottom=this.height),this.paddingLeft=0,this.paddingTop=0,this.paddingRight=0,this.paddingBottom=0}afterSetDimensions(){le(this.options.afterSetDimensions,[this])}_callHooks(t){this.chart.notifyPlugins(t,this.getContext()),le(this.options[t],[this])}beforeDataLimits(){this._callHooks("beforeDataLimits")}determineDataLimits(){}afterDataLimits(){this._callHooks("afterDataLimits")}beforeBuildTicks(){this._callHooks("beforeBuildTicks")}buildTicks(){return[]}afterBuildTicks(){this._callHooks("afterBuildTicks")}beforeTickToLabelConversion(){le(this.options.beforeTickToLabelConversion,[this])}generateTickLabels(t){const i=this.options.ticks;let n,r,s;for(n=0,r=t.length;n<r;n++)s=t[n],s.label=le(i.callback,[s.value,n,t],this)}afterTickToLabelConversion(){le(this.options.afterTickToLabelConversion,[this])}beforeCalculateLabelRotation(){le(this.options.beforeCalculateLabelRotation,[this])}calculateLabelRotation(){const t=this.options,i=t.ticks,n=If(this.ticks.length,t.ticks.maxTicksLimit),r=i.minRotation||0,s=i.maxRotation;let o=r,a,l,h;if(!this._isVisible()||!i.display||r>=s||n<=1||!this.isHorizontal()){this.labelRotation=r;return}const c=this._getLabelSizes(),u=c.widest.width,f=c.highest.height,d=Be(this.chart.width-u,0,this.maxWidth);a=t.offset?this.maxWidth/n:d/(n-1),u+6>a&&(a=d/(n-(t.offset?.5:1)),l=this.maxHeight-$r(t.grid)-i.padding-Df(t.title,this.chart.options.font),h=Math.sqrt(u*u+f*f),o=pc(Math.min(Math.asin(Be((c.highest.height+6)/a,-1,1)),Math.asin(Be(l/h,-1,1))-Math.asin(Be(f/h,-1,1)))),o=Math.max(r,Math.min(s,o))),this.labelRotation=o}afterCalculateLabelRotation(){le(this.options.afterCalculateLabelRotation,[this])}afterAutoSkip(){}beforeFit(){le(this.options.beforeFit,[this])}fit(){const t={width:0,height:0},{chart:i,options:{ticks:n,title:r,grid:s}}=this,o=this._isVisible(),a=this.isHorizontal();if(o){const l=Df(r,i.options.font);if(a?(t.width=this.maxWidth,t.height=$r(s)+l):(t.height=this.maxHeight,t.width=$r(s)+l),n.display&&this.ticks.length){const{first:h,last:c,widest:u,highest:f}=this._getLabelSizes(),d=n.padding*2,g=mi(this.labelRotation),y=Math.cos(g),_=Math.sin(g);if(a){const w=n.mirror?0:_*u.width+y*f.height;t.height=Math.min(this.maxHeight,t.height+w+d)}else{const w=n.mirror?0:y*u.width+_*f.height;t.width=Math.min(this.maxWidth,t.width+w+d)}this._calculatePadding(h,c,_,y)}}this._handleMargins(),a?(this.width=this._length=i.width-this._margins.left-this._margins.right,this.height=t.height):(this.width=t.width,this.height=this._length=i.height-this._margins.top-this._margins.bottom)}_calculatePadding(t,i,n,r){const{ticks:{align:s,padding:o},position:a}=this.options,l=this.labelRotation!==0,h=a!=="top"&&this.axis==="x";if(this.isHorizontal()){const c=this.getPixelForTick(0)-this.left,u=this.right-this.getPixelForTick(this.ticks.length-1);let f=0,d=0;l?h?(f=r*t.width,d=n*i.height):(f=n*t.height,d=r*i.width):s==="start"?d=i.width:s==="end"?f=t.width:s!=="inner"&&(f=t.width/2,d=i.width/2),this.paddingLeft=Math.max((f-c+o)*this.width/(this.width-c),0),this.paddingRight=Math.max((d-u+o)*this.width/(this.width-u),0)}else{let c=i.height/2,u=t.height/2;s==="start"?(c=0,u=t.height):s==="end"&&(c=i.height,u=0),this.paddingTop=c+o,this.paddingBottom=u+o}}_handleMargins(){this._margins&&(this._margins.left=Math.max(this.paddingLeft,this._margins.left),this._margins.top=Math.max(this.paddingTop,this._margins.top),this._margins.right=Math.max(this.paddingRight,this._margins.right),this._margins.bottom=Math.max(this.paddingBottom,this._margins.bottom))}afterFit(){le(this.options.afterFit,[this])}isHorizontal(){const{axis:t,position:i}=this.options;return i==="top"||i==="bottom"||t==="x"}isFullSize(){return this.options.fullSize}_convertTicksToLabels(t){this.beforeTickToLabelConversion(),this.generateTickLabels(t);let i,n;for(i=0,n=t.length;i<n;i++)Gt(t[i].label)&&(t.splice(i,1),n--,i--);this.afterTickToLabelConversion()}_getLabelSizes(){let t=this._labelSizes;if(!t){const i=this.options.ticks.sampleSize;let n=this.ticks;i<n.length&&(n=Rf(n,i)),this._labelSizes=t=this._computeLabelSizes(n,n.length,this.options.ticks.maxTicksLimit)}return t}_computeLabelSizes(t,i,n){const{ctx:r,_longestTextCache:s}=this,o=[],a=[],l=Math.floor(i/If(i,n));let h=0,c=0,u,f,d,g,y,_,w,v,S,T,O;for(u=0;u<i;u+=l){if(g=t[u].label,y=this._resolveTickFontOptions(u),r.font=_=y.string,w=s[_]=s[_]||{data:{},gc:[]},v=y.lineHeight,S=T=0,!Gt(g)&&!ce(g))S=qo(r,w.data,w.gc,S,g),T=v;else if(ce(g))for(f=0,d=g.length;f<d;++f)O=g[f],!Gt(O)&&!ce(O)&&(S=qo(r,w.data,w.gc,S,O),T+=v);o.push(S),a.push(T),h=Math.max(S,h),c=Math.max(T,c)}p1(s,i);const k=o.indexOf(h),M=a.indexOf(c),A=B=>({width:o[B]||0,height:a[B]||0});return{first:A(0),last:A(i-1),widest:A(k),highest:A(M),widths:o,heights:a}}getLabelForValue(t){return t}getPixelForValue(t,i){return NaN}getValueForPixel(t){}getPixelForTick(t){const i=this.ticks;return t<0||t>i.length-1?null:this.getPixelForValue(i[t].value)}getPixelForDecimal(t){this._reversePixels&&(t=1-t);const i=this._startPixel+t*this._length;return n_(this._alignToPixels?Yn(this.chart,i,0):i)}getDecimalForPixel(t){const i=(t-this._startPixel)/this._length;return this._reversePixels?1-i:i}getBasePixel(){return this.getPixelForValue(this.getBaseValue())}getBaseValue(){const{min:t,max:i}=this;return t<0&&i<0?i:t>0&&i>0?t:0}getContext(t){const i=this.ticks||[];if(t>=0&&t<i.length){const n=i[t];return n.$context||(n.$context=m1(this.getContext(),t,n))}return this.$context||(this.$context=g1(this.chart.getContext(),this))}_tickSize(){const t=this.options.ticks,i=mi(this.labelRotation),n=Math.abs(Math.cos(i)),r=Math.abs(Math.sin(i)),s=this._getLabelSizes(),o=t.autoSkipPadding||0,a=s?s.widest.width+o:0,l=s?s.highest.height+o:0;return this.isHorizontal()?l*n>a*r?a/n:l/r:l*r<a*n?l/n:a/r}_isVisible(){const t=this.options.display;return t!=="auto"?!!t:this.getMatchingVisibleMetas().length>0}_computeGridLineItems(t){const i=this.axis,n=this.chart,r=this.options,{grid:s,position:o,border:a}=r,l=s.offset,h=this.isHorizontal(),u=this.ticks.length+(l?1:0),f=$r(s),d=[],g=a.setContext(this.getContext()),y=g.display?g.width:0,_=y/2,w=function(rt){return Yn(n,rt,y)};let v,S,T,O,k,M,A,B,q,$,x,z;if(o==="top")v=w(this.bottom),M=this.bottom-f,B=v-_,$=w(t.top)+_,z=t.bottom;else if(o==="bottom")v=w(this.top),$=t.top,z=w(t.bottom)-_,M=v+_,B=this.top+f;else if(o==="left")v=w(this.right),k=this.right-f,A=v-_,q=w(t.left)+_,x=t.right;else if(o==="right")v=w(this.left),q=t.left,x=w(t.right)-_,k=v+_,A=this.left+f;else if(i==="x"){if(o==="center")v=w((t.top+t.bottom)/2+.5);else if(Ht(o)){const rt=Object.keys(o)[0],J=o[rt];v=w(this.chart.scales[rt].getPixelForValue(J))}$=t.top,z=t.bottom,M=v+_,B=M+f}else if(i==="y"){if(o==="center")v=w((t.left+t.right)/2);else if(Ht(o)){const rt=Object.keys(o)[0],J=o[rt];v=w(this.chart.scales[rt].getPixelForValue(J))}k=v-_,A=k-f,q=t.left,x=t.right}const X=jt(r.ticks.maxTicksLimit,u),V=Math.max(1,Math.ceil(u/X));for(S=0;S<u;S+=V){const rt=this.getContext(S),J=s.setContext(rt),H=a.setContext(rt),ht=J.lineWidth,nt=J.color,xt=H.dash||[],I=H.dashOffset,K=J.tickWidth,st=J.tickColor,Et=J.tickBorderDash||[],lt=J.tickBorderDashOffset;T=d1(this,S,l),T!==void 0&&(O=Yn(n,T,ht),h?k=A=q=x=O:M=B=$=z=O,d.push({tx1:k,ty1:M,tx2:A,ty2:B,x1:q,y1:$,x2:x,y2:z,width:ht,color:nt,borderDash:xt,borderDashOffset:I,tickWidth:K,tickColor:st,tickBorderDash:Et,tickBorderDashOffset:lt}))}return this._ticksLength=u,this._borderValue=v,d}_computeLabelItems(t){const i=this.axis,n=this.options,{position:r,ticks:s}=n,o=this.isHorizontal(),a=this.ticks,{align:l,crossAlign:h,padding:c,mirror:u}=s,f=$r(n.grid),d=f+c,g=u?-c:d,y=-mi(this.labelRotation),_=[];let w,v,S,T,O,k,M,A,B,q,$,x,z="middle";if(r==="top")k=this.bottom-g,M=this._getXAxisLabelAlignment();else if(r==="bottom")k=this.top+g,M=this._getXAxisLabelAlignment();else if(r==="left"){const V=this._getYAxisLabelAlignment(f);M=V.textAlign,O=V.x}else if(r==="right"){const V=this._getYAxisLabelAlignment(f);M=V.textAlign,O=V.x}else if(i==="x"){if(r==="center")k=(t.top+t.bottom)/2+d;else if(Ht(r)){const V=Object.keys(r)[0],rt=r[V];k=this.chart.scales[V].getPixelForValue(rt)+d}M=this._getXAxisLabelAlignment()}else if(i==="y"){if(r==="center")O=(t.left+t.right)/2-d;else if(Ht(r)){const V=Object.keys(r)[0],rt=r[V];O=this.chart.scales[V].getPixelForValue(rt)}M=this._getYAxisLabelAlignment(f).textAlign}i==="y"&&(l==="start"?z="top":l==="end"&&(z="bottom"));const X=this._getLabelSizes();for(w=0,v=a.length;w<v;++w){S=a[w],T=S.label;const V=s.setContext(this.getContext(w));A=this.getPixelForTick(w)+s.labelOffset,B=this._resolveTickFontOptions(w),q=B.lineHeight,$=ce(T)?T.length:1;const rt=$/2,J=V.color,H=V.textStrokeColor,ht=V.textStrokeWidth;let nt=M;o?(O=A,M==="inner"&&(w===v-1?nt=this.options.reverse?"left":"right":w===0?nt=this.options.reverse?"right":"left":nt="center"),r==="top"?h==="near"||y!==0?x=-$*q+q/2:h==="center"?x=-X.highest.height/2-rt*q+q:x=-X.highest.height+q/2:h==="near"||y!==0?x=q/2:h==="center"?x=X.highest.height/2-rt*q:x=X.highest.height-$*q,u&&(x*=-1),y!==0&&!V.showLabelBackdrop&&(O+=q/2*Math.sin(y))):(k=A,x=(1-$)*q/2);let xt;if(V.showLabelBackdrop){const I=Ge(V.backdropPadding),K=X.heights[w],st=X.widths[w];let Et=x-I.top,lt=0-I.left;switch(z){case"middle":Et-=K/2;break;case"bottom":Et-=K;break}switch(M){case"center":lt-=st/2;break;case"right":lt-=st;break;case"inner":w===v-1?lt-=st:w>0&&(lt-=st/2);break}xt={left:lt,top:Et,width:st+I.width,height:K+I.height,color:V.backdropColor}}_.push({label:T,font:B,textOffset:x,options:{rotation:y,color:J,strokeColor:H,strokeWidth:ht,textAlign:nt,textBaseline:z,translation:[O,k],backdrop:xt}})}return _}_getXAxisLabelAlignment(){const{position:t,ticks:i}=this.options;if(-mi(this.labelRotation))return t==="top"?"left":"right";let r="center";return i.align==="start"?r="left":i.align==="end"?r="right":i.align==="inner"&&(r="inner"),r}_getYAxisLabelAlignment(t){const{position:i,ticks:{crossAlign:n,mirror:r,padding:s}}=this.options,o=this._getLabelSizes(),a=t+s,l=o.widest.width;let h,c;return i==="left"?r?(c=this.right+s,n==="near"?h="left":n==="center"?(h="center",c+=l/2):(h="right",c+=l)):(c=this.right-a,n==="near"?h="right":n==="center"?(h="center",c-=l/2):(h="left",c=this.left)):i==="right"?r?(c=this.left+s,n==="near"?h="right":n==="center"?(h="center",c-=l/2):(h="left",c-=l)):(c=this.left+a,n==="near"?h="left":n==="center"?(h="center",c+=l/2):(h="right",c=this.right)):h="right",{textAlign:h,x:c}}_computeLabelArea(){if(this.options.ticks.mirror)return;const t=this.chart,i=this.options.position;if(i==="left"||i==="right")return{top:0,left:this.left,bottom:t.height,right:this.right};if(i==="top"||i==="bottom")return{top:this.top,left:0,bottom:this.bottom,right:t.width}}drawBackground(){const{ctx:t,options:{backgroundColor:i},left:n,top:r,width:s,height:o}=this;i&&(t.save(),t.fillStyle=i,t.fillRect(n,r,s,o),t.restore())}getLineWidthForValue(t){const i=this.options.grid;if(!this._isVisible()||!i.display)return 0;const r=this.ticks.findIndex(s=>s.value===t);return r>=0?i.setContext(this.getContext(r)).lineWidth:0}drawGrid(t){const i=this.options.grid,n=this.ctx,r=this._gridLineItems||(this._gridLineItems=this._computeGridLineItems(t));let s,o;const a=(l,h,c)=>{!c.width||!c.color||(n.save(),n.lineWidth=c.width,n.strokeStyle=c.color,n.setLineDash(c.borderDash||[]),n.lineDashOffset=c.borderDashOffset,n.beginPath(),n.moveTo(l.x,l.y),n.lineTo(h.x,h.y),n.stroke(),n.restore())};if(i.display)for(s=0,o=r.length;s<o;++s){const l=r[s];i.drawOnChartArea&&a({x:l.x1,y:l.y1},{x:l.x2,y:l.y2},l),i.drawTicks&&a({x:l.tx1,y:l.ty1},{x:l.tx2,y:l.ty2},{color:l.tickColor,width:l.tickWidth,borderDash:l.tickBorderDash,borderDashOffset:l.tickBorderDashOffset})}}drawBorder(){const{chart:t,ctx:i,options:{border:n,grid:r}}=this,s=n.setContext(this.getContext()),o=n.display?s.width:0;if(!o)return;const a=r.setContext(this.getContext(0)).lineWidth,l=this._borderValue;let h,c,u,f;this.isHorizontal()?(h=Yn(t,this.left,o)-o/2,c=Yn(t,this.right,a)+a/2,u=f=l):(u=Yn(t,this.top,o)-o/2,f=Yn(t,this.bottom,a)+a/2,h=c=l),i.save(),i.lineWidth=s.width,i.strokeStyle=s.color,i.beginPath(),i.moveTo(h,u),i.lineTo(c,f),i.stroke(),i.restore()}drawLabels(t){if(!this.options.ticks.display)return;const n=this.ctx,r=this._computeLabelArea();r&&ha(n,r);const s=this.getLabelItems(t);for(const o of s){const a=o.options,l=o.font,h=o.label,c=o.textOffset;cr(n,h,0,c,l,a)}r&&ca(n)}drawTitle(){const{ctx:t,options:{position:i,title:n,reverse:r}}=this;if(!n.display)return;const s=Ce(n.font),o=Ge(n.padding),a=n.align;let l=s.lineHeight/2;i==="bottom"||i==="center"||Ht(i)?(l+=o.bottom,ce(n.text)&&(l+=s.lineHeight*(n.text.length-1))):l+=o.top;const{titleX:h,titleY:c,maxWidth:u,rotation:f}=y1(this,l,i,a);cr(t,n.text,0,0,s,{color:n.color,maxWidth:u,rotation:f,textAlign:b1(a,i,r),textBaseline:"middle",translation:[h,c]})}draw(t){this._isVisible()&&(this.drawBackground(),this.drawGrid(t),this.drawBorder(),this.drawTitle(),this.drawLabels(t))}_layers(){const t=this.options,i=t.ticks&&t.ticks.z||0,n=jt(t.grid&&t.grid.z,-1),r=jt(t.border&&t.border.z,0);return!this._isVisible()||this.draw!==gr.prototype.draw?[{z:i,draw:s=>{this.draw(s)}}]:[{z:n,draw:s=>{this.drawBackground(),this.drawGrid(s),this.drawTitle()}},{z:r,draw:()=>{this.drawBorder()}},{z:i,draw:s=>{this.drawLabels(s)}}]}getMatchingVisibleMetas(t){const i=this.chart.getSortedVisibleDatasetMetas(),n=this.axis+"AxisID",r=[];let s,o;for(s=0,o=i.length;s<o;++s){const a=i[s];a[n]===this.id&&(!t||a.type===t)&&r.push(a)}return r}_resolveTickFontOptions(t){const i=this.options.ticks.setContext(this.getContext(t));return Ce(i.font)}_maxDigits(){const t=this._resolveTickFontOptions(0).lineHeight;return(this.isHorizontal()?this.width:this.height)/t}}class Js{constructor(t,i,n){this.type=t,this.scope=i,this.override=n,this.items=Object.create(null)}isForType(t){return Object.prototype.isPrototypeOf.call(this.type.prototype,t.prototype)}register(t){const i=Object.getPrototypeOf(t);let n;v1(i)&&(n=this.register(i));const r=this.items,s=t.id,o=this.scope+"."+s;if(!s)throw new Error("class does not have id: "+t);return s in r||(r[s]=t,_1(t,o,n),this.override&&ve.override(t.id,t.overrides)),o}get(t){return this.items[t]}unregister(t){const i=this.items,n=t.id,r=this.scope;n in i&&delete i[n],r&&n in ve[r]&&(delete ve[r][n],this.override&&delete hr[n])}}function _1(e,t,i){const n=bs(Object.create(null),[i?ve.get(i):{},ve.get(t),e.defaults]);ve.set(t,n),e.defaultRoutes&&w1(t,e.defaultRoutes),e.descriptors&&ve.describe(t,e.descriptors)}function w1(e,t){Object.keys(t).forEach(i=>{const n=i.split("."),r=n.pop(),s=[e].concat(n).join("."),o=t[i].split("."),a=o.pop(),l=o.join(".");ve.route(s,r,l,a)})}function v1(e){return"id"in e&&"defaults"in e}class S1{constructor(){this.controllers=new Js(_i,"datasets",!0),this.elements=new Js(wi,"elements"),this.plugins=new Js(Object,"plugins"),this.scales=new Js(gr,"scales"),this._typedRegistries=[this.controllers,this.scales,this.elements]}add(...t){this._each("register",t)}remove(...t){this._each("unregister",t)}addControllers(...t){this._each("register",t,this.controllers)}addElements(...t){this._each("register",t,this.elements)}addPlugins(...t){this._each("register",t,this.plugins)}addScales(...t){this._each("register",t,this.scales)}getController(t){return this._get(t,this.controllers,"controller")}getElement(t){return this._get(t,this.elements,"element")}getPlugin(t){return this._get(t,this.plugins,"plugin")}getScale(t){return this._get(t,this.scales,"scale")}removeControllers(...t){this._each("unregister",t,this.controllers)}removeElements(...t){this._each("unregister",t,this.elements)}removePlugins(...t){this._each("unregister",t,this.plugins)}removeScales(...t){this._each("unregister",t,this.scales)}_each(t,i,n){[...i].forEach(r=>{const s=n||this._getRegistryForType(r);n||s.isForType(r)||s===this.plugins&&r.id?this._exec(t,s,r):Jt(r,o=>{const a=n||this._getRegistryForType(o);this._exec(t,a,o)})})}_exec(t,i,n){const r=dc(t);le(n["before"+r],[],n),i[t](n),le(n["after"+r],[],n)}_getRegistryForType(t){for(let i=0;i<this._typedRegistries.length;i++){const n=this._typedRegistries[i];if(n.isForType(t))return n}return this.plugins}_get(t,i,n){const r=i.get(t);if(r===void 0)throw new Error('"'+t+'" is not a registered '+n+".");return r}}var Ai=new S1;class x1{constructor(){this._init=[]}notify(t,i,n,r){i==="beforeInit"&&(this._init=this._createDescriptors(t,!0),this._notify(this._init,t,"install"));const s=r?this._descriptors(t).filter(r):this._descriptors(t),o=this._notify(s,t,i,n);return i==="afterDestroy"&&(this._notify(s,t,"stop"),this._notify(this._init,t,"uninstall")),o}_notify(t,i,n,r){r=r||{};for(const s of t){const o=s.plugin,a=o[n],l=[i,r,s.options];if(le(a,l,o)===!1&&r.cancelable)return!1}return!0}invalidate(){Gt(this._cache)||(this._oldCache=this._cache,this._cache=void 0)}_descriptors(t){if(this._cache)return this._cache;const i=this._cache=this._createDescriptors(t);return this._notifyStateChanges(t),i}_createDescriptors(t,i){const n=t&&t.config,r=jt(n.options&&n.options.plugins,{}),s=k1(n);return r===!1&&!i?[]:M1(t,s,r,i)}_notifyStateChanges(t){const i=this._oldCache||[],n=this._cache,r=(s,o)=>s.filter(a=>!o.some(l=>a.plugin.id===l.plugin.id));this._notify(r(i,n),t,"stop"),this._notify(r(n,i),t,"start")}}function k1(e){const t={},i=[],n=Object.keys(Ai.plugins.items);for(let s=0;s<n.length;s++)i.push(Ai.getPlugin(n[s]));const r=e.plugins||[];for(let s=0;s<r.length;s++){const o=r[s];i.indexOf(o)===-1&&(i.push(o),t[o.id]=!0)}return{plugins:i,localIds:t}}function E1(e,t){return!t&&e===!1?null:e===!0?{}:e}function M1(e,{plugins:t,localIds:i},n,r){const s=[],o=e.getContext();for(const a of t){const l=a.id,h=E1(n[l],r);h!==null&&s.push({plugin:a,options:A1(e.config,{plugin:a,local:i[l]},h,o)})}return s}function A1(e,{plugin:t,local:i},n,r){const s=e.pluginScopeKeys(t),o=e.getOptionScopes(n,s);return i&&t.defaults&&o.push(t.defaults),e.createResolver(o,r,[""],{scriptable:!1,indexable:!1,allKeys:!0})}function Rh(e,t){const i=ve.datasets[e]||{};return((t.datasets||{})[e]||{}).indexAxis||t.indexAxis||i.indexAxis||"x"}function T1(e,t){let i=e;return e==="_index_"?i=t:e==="_value_"&&(i=t==="x"?"y":"x"),i}function O1(e,t){return e===t?"_index_":"_value_"}function Lf(e){if(e==="x"||e==="y"||e==="r")return e}function P1(e){if(e==="top"||e==="bottom")return"x";if(e==="left"||e==="right")return"y"}function Dh(e,...t){if(Lf(e))return e;for(const i of t){const n=i.axis||P1(i.position)||e.length>1&&Lf(e[0].toLowerCase());if(n)return n}throw new Error(`Cannot determine type of '${e}' axis. Please provide 'axis' or 'position' option.`)}function Bf(e,t,i){if(i[t+"AxisID"]===e)return{axis:t}}function C1(e,t){if(t.data&&t.data.datasets){const i=t.data.datasets.filter(n=>n.xAxisID===e||n.yAxisID===e);if(i.length)return Bf(e,"x",i[0])||Bf(e,"y",i[0])}return{}}function I1(e,t){const i=hr[e.type]||{scales:{}},n=t.scales||{},r=Rh(e.type,t),s=Object.create(null);return Object.keys(n).forEach(o=>{const a=n[o];if(!Ht(a))return console.error(`Invalid scale configuration for scale: ${o}`);if(a._proxy)return console.warn(`Ignoring resolver passed as options for scale: ${o}`);const l=Dh(o,a,C1(o,e),ve.scales[a.type]),h=O1(l,r),c=i.scales||{};s[o]=cs(Object.create(null),[{axis:l},a,c[l],c[h]])}),e.data.datasets.forEach(o=>{const a=o.type||e.type,l=o.indexAxis||Rh(a,t),c=(hr[a]||{}).scales||{};Object.keys(c).forEach(u=>{const f=T1(u,l),d=o[f+"AxisID"]||f;s[d]=s[d]||Object.create(null),cs(s[d],[{axis:f},n[d],c[u]])})}),Object.keys(s).forEach(o=>{const a=s[o];cs(a,[ve.scales[a.type],ve.scale])}),s}function Jg(e){const t=e.options||(e.options={});t.plugins=jt(t.plugins,{}),t.scales=I1(e,t)}function tm(e){return e=e||{},e.datasets=e.datasets||[],e.labels=e.labels||[],e}function R1(e){return e=e||{},e.data=tm(e.data),Jg(e),e}const Nf=new Map,em=new Set;function to(e,t){let i=Nf.get(e);return i||(i=t(),Nf.set(e,i),em.add(i)),i}const Gr=(e,t,i)=>{const n=On(t,i);n!==void 0&&e.add(n)};class D1{constructor(t){this._config=R1(t),this._scopeCache=new Map,this._resolverCache=new Map}get platform(){return this._config.platform}get type(){return this._config.type}set type(t){this._config.type=t}get data(){return this._config.data}set data(t){this._config.data=tm(t)}get options(){return this._config.options}set options(t){this._config.options=t}get plugins(){return this._config.plugins}update(){const t=this._config;this.clearCache(),Jg(t)}clearCache(){this._scopeCache.clear(),this._resolverCache.clear()}datasetScopeKeys(t){return to(t,()=>[[`datasets.${t}`,""]])}datasetAnimationScopeKeys(t,i){return to(`${t}.transition.${i}`,()=>[[`datasets.${t}.transitions.${i}`,`transitions.${i}`],[`datasets.${t}`,""]])}datasetElementScopeKeys(t,i){return to(`${t}-${i}`,()=>[[`datasets.${t}.elements.${i}`,`datasets.${t}`,`elements.${i}`,""]])}pluginScopeKeys(t){const i=t.id,n=this.type;return to(`${n}-plugin-${i}`,()=>[[`plugins.${i}`,...t.additionalOptionScopes||[]]])}_cachedScopes(t,i){const n=this._scopeCache;let r=n.get(t);return(!r||i)&&(r=new Map,n.set(t,r)),r}getOptionScopes(t,i,n){const{options:r,type:s}=this,o=this._cachedScopes(t,n),a=o.get(i);if(a)return a;const l=new Set;i.forEach(c=>{t&&(l.add(t),c.forEach(u=>Gr(l,t,u))),c.forEach(u=>Gr(l,r,u)),c.forEach(u=>Gr(l,hr[s]||{},u)),c.forEach(u=>Gr(l,ve,u)),c.forEach(u=>Gr(l,Ph,u))});const h=Array.from(l);return h.length===0&&h.push(Object.create(null)),em.has(i)&&o.set(i,h),h}chartOptionScopes(){const{options:t,type:i}=this;return[t,hr[i]||{},ve.datasets[i]||{},{type:i},ve,Ph]}resolveNamedOptions(t,i,n,r=[""]){const s={$shared:!0},{resolver:o,subPrefixes:a}=Ff(this._resolverCache,t,r);let l=o;if(B1(o,i)){s.$shared=!1,n=Pn(n)?n():n;const h=this.createResolver(t,n,a);l=Ir(o,n,h)}for(const h of i)s[h]=l[h];return s}createResolver(t,i,n=[""],r){const{resolver:s}=Ff(this._resolverCache,t,n);return Ht(i)?Ir(s,i,void 0,r):s}}function Ff(e,t,i){let n=e.get(t);n||(n=new Map,e.set(t,n));const r=i.join();let s=n.get(r);return s||(s={resolver:_c(t,i),subPrefixes:i.filter(a=>!a.toLowerCase().includes("hover"))},n.set(r,s)),s}const L1=e=>Ht(e)&&Object.getOwnPropertyNames(e).some(t=>Pn(e[t]));function B1(e,t){const{isScriptable:i,isIndexable:n}=Rg(e);for(const r of t){const s=i(r),o=n(r),a=(o||s)&&e[r];if(s&&(Pn(a)||L1(a))||o&&ce(a))return!0}return!1}var N1="4.4.7";const F1=["top","bottom","left","right","chartArea"];function Uf(e,t){return e==="top"||e==="bottom"||F1.indexOf(e)===-1&&t==="x"}function jf(e,t){return function(i,n){return i[e]===n[e]?i[t]-n[t]:i[e]-n[e]}}function Wf(e){const t=e.chart,i=t.options.animation;t.notifyPlugins("afterRender"),le(i&&i.onComplete,[e],t)}function U1(e){const t=e.chart,i=t.options.animation;le(i&&i.onProgress,[e],t)}function im(e){return Sc()&&typeof e=="string"?e=document.getElementById(e):e&&e.length&&(e=e[0]),e&&e.canvas&&(e=e.canvas),e}const Ao={},Yf=e=>{const t=im(e);return Object.values(Ao).filter(i=>i.canvas===t).pop()};function j1(e,t,i){const n=Object.keys(e);for(const r of n){const s=+r;if(s>=t){const o=e[r];delete e[r],(i>0||s>t)&&(e[s+i]=o)}}}function W1(e,t,i,n){return!i||e.type==="mouseout"?null:n?t:e}function eo(e,t,i){return e.options.clip?e[i]:t[i]}function Y1(e,t){const{xScale:i,yScale:n}=e;return i&&n?{left:eo(i,t,"left"),right:eo(i,t,"right"),top:eo(n,t,"top"),bottom:eo(n,t,"bottom")}:t}class Qi{static register(...t){Ai.add(...t),zf()}static unregister(...t){Ai.remove(...t),zf()}constructor(t,i){const n=this.config=new D1(i),r=im(t),s=Yf(r);if(s)throw new Error("Canvas is already in use. Chart with ID '"+s.id+"' must be destroyed before the canvas with ID '"+s.canvas.id+"' can be reused.");const o=n.createResolver(n.chartOptionScopes(),this.getContext());this.platform=new(n.platform||s1(r)),this.platform.updateConfig(n);const a=this.platform.acquireContext(r,o.aspectRatio),l=a&&a.canvas,h=l&&l.height,c=l&&l.width;if(this.id=Hy(),this.ctx=a,this.canvas=l,this.width=c,this.height=h,this._options=o,this._aspectRatio=this.aspectRatio,this._layers=[],this._metasets=[],this._stacks=void 0,this.boxes=[],this.currentDevicePixelRatio=void 0,this.chartArea=void 0,this._active=[],this._lastEvent=void 0,this._listeners={},this._responsiveListeners=void 0,this._sortedMetasets=[],this.scales={},this._plugins=new x1,this.$proxies={},this._hiddenIndices={},this.attached=!1,this._animationsDisabled=void 0,this.$context=void 0,this._doResize=a_(u=>this.update(u),o.resizeDelay||0),this._dataChanges=[],Ao[this.id]=this,!a||!l){console.error("Failed to create chart: can't acquire context from the given item");return}zi.listen(this,"complete",Wf),zi.listen(this,"progress",U1),this._initialize(),this.attached&&this.update()}get aspectRatio(){const{options:{aspectRatio:t,maintainAspectRatio:i},width:n,height:r,_aspectRatio:s}=this;return Gt(t)?i&&s?s:r?n/r:null:t}get data(){return this.config.data}set data(t){this.config.data=t}get options(){return this._options}set options(t){this.config.options=t}get registry(){return Ai}_initialize(){return this.notifyPlugins("beforeInit"),this.options.responsive?this.resize():uf(this,this.options.devicePixelRatio),this.bindEvents(),this.notifyPlugins("afterInit"),this}clear(){return lf(this.canvas,this.ctx),this}stop(){return zi.stop(this),this}resize(t,i){zi.running(this)?this._resizeBeforeDraw={width:t,height:i}:this._resize(t,i)}_resize(t,i){const n=this.options,r=this.canvas,s=n.maintainAspectRatio&&this.aspectRatio,o=this.platform.getMaximumSize(r,t,i,s),a=n.devicePixelRatio||this.platform.getDevicePixelRatio(),l=this.width?"resize":"attach";this.width=o.width,this.height=o.height,this._aspectRatio=this.aspectRatio,uf(this,a,!0)&&(this.notifyPlugins("resize",{size:o}),le(n.onResize,[this,o],this),this.attached&&this._doResize(l)&&this.render())}ensureScalesHaveIDs(){const i=this.options.scales||{};Jt(i,(n,r)=>{n.id=r})}buildOrUpdateScales(){const t=this.options,i=t.scales,n=this.scales,r=Object.keys(n).reduce((o,a)=>(o[a]=!1,o),{});let s=[];i&&(s=s.concat(Object.keys(i).map(o=>{const a=i[o],l=Dh(o,a),h=l==="r",c=l==="x";return{options:a,dposition:h?"chartArea":c?"bottom":"left",dtype:h?"radialLinear":c?"category":"linear"}}))),Jt(s,o=>{const a=o.options,l=a.id,h=Dh(l,a),c=jt(a.type,o.dtype);(a.position===void 0||Uf(a.position,h)!==Uf(o.dposition))&&(a.position=o.dposition),r[l]=!0;let u=null;if(l in n&&n[l].type===c)u=n[l];else{const f=Ai.getScale(c);u=new f({id:l,type:c,ctx:this.ctx,chart:this}),n[u.id]=u}u.init(a,t)}),Jt(r,(o,a)=>{o||delete n[a]}),Jt(n,o=>{qe.configure(this,o,o.options),qe.addBox(this,o)})}_updateMetasets(){const t=this._metasets,i=this.data.datasets.length,n=t.length;if(t.sort((r,s)=>r.index-s.index),n>i){for(let r=i;r<n;++r)this._destroyDatasetMeta(r);t.splice(i,n-i)}this._sortedMetasets=t.slice(0).sort(jf("order","index"))}_removeUnreferencedMetasets(){const{_metasets:t,data:{datasets:i}}=this;t.length>i.length&&delete this._stacks,t.forEach((n,r)=>{i.filter(s=>s===n._dataset).length===0&&this._destroyDatasetMeta(r)})}buildOrUpdateControllers(){const t=[],i=this.data.datasets;let n,r;for(this._removeUnreferencedMetasets(),n=0,r=i.length;n<r;n++){const s=i[n];let o=this.getDatasetMeta(n);const a=s.type||this.config.type;if(o.type&&o.type!==a&&(this._destroyDatasetMeta(n),o=this.getDatasetMeta(n)),o.type=a,o.indexAxis=s.indexAxis||Rh(a,this.options),o.order=s.order||0,o.index=n,o.label=""+s.label,o.visible=this.isDatasetVisible(n),o.controller)o.controller.updateIndex(n),o.controller.linkScales();else{const l=Ai.getController(a),{datasetElementType:h,dataElementType:c}=ve.datasets[a];Object.assign(l,{dataElementType:Ai.getElement(c),datasetElementType:h&&Ai.getElement(h)}),o.controller=new l(this,n),t.push(o.controller)}}return this._updateMetasets(),t}_resetElements(){Jt(this.data.datasets,(t,i)=>{this.getDatasetMeta(i).controller.reset()},this)}reset(){this._resetElements(),this.notifyPlugins("reset")}update(t){const i=this.config;i.update();const n=this._options=i.createResolver(i.chartOptionScopes(),this.getContext()),r=this._animationsDisabled=!n.animation;if(this._updateScales(),this._checkEventBindings(),this._updateHiddenIndices(),this._plugins.invalidate(),this.notifyPlugins("beforeUpdate",{mode:t,cancelable:!0})===!1)return;const s=this.buildOrUpdateControllers();this.notifyPlugins("beforeElementsUpdate");let o=0;for(let h=0,c=this.data.datasets.length;h<c;h++){const{controller:u}=this.getDatasetMeta(h),f=!r&&s.indexOf(u)===-1;u.buildOrUpdateElements(f),o=Math.max(+u.getMaxOverflow(),o)}o=this._minPadding=n.layout.autoPadding?o:0,this._updateLayout(o),r||Jt(s,h=>{h.reset()}),this._updateDatasets(t),this.notifyPlugins("afterUpdate",{mode:t}),this._layers.sort(jf("z","_idx"));const{_active:a,_lastEvent:l}=this;l?this._eventHandler(l,!0):a.length&&this._updateHoverStyles(a,a,!0),this.render()}_updateScales(){Jt(this.scales,t=>{qe.removeBox(this,t)}),this.ensureScalesHaveIDs(),this.buildOrUpdateScales()}_checkEventBindings(){const t=this.options,i=new Set(Object.keys(this._listeners)),n=new Set(t.events);(!Zu(i,n)||!!this._responsiveListeners!==t.responsive)&&(this.unbindEvents(),this.bindEvents())}_updateHiddenIndices(){const{_hiddenIndices:t}=this,i=this._getUniformDataChanges()||[];for(const{method:n,start:r,count:s}of i){const o=n==="_removeElements"?-s:s;j1(t,r,o)}}_getUniformDataChanges(){const t=this._dataChanges;if(!t||!t.length)return;this._dataChanges=[];const i=this.data.datasets.length,n=s=>new Set(t.filter(o=>o[0]===s).map((o,a)=>a+","+o.splice(1).join(","))),r=n(0);for(let s=1;s<i;s++)if(!Zu(r,n(s)))return;return Array.from(r).map(s=>s.split(",")).map(s=>({method:s[1],start:+s[2],count:+s[3]}))}_updateLayout(t){if(this.notifyPlugins("beforeLayout",{cancelable:!0})===!1)return;qe.update(this,this.width,this.height,t);const i=this.chartArea,n=i.width<=0||i.height<=0;this._layers=[],Jt(this.boxes,r=>{n&&r.position==="chartArea"||(r.configure&&r.configure(),this._layers.push(...r._layers()))},this),this._layers.forEach((r,s)=>{r._idx=s}),this.notifyPlugins("afterLayout")}_updateDatasets(t){if(this.notifyPlugins("beforeDatasetsUpdate",{mode:t,cancelable:!0})!==!1){for(let i=0,n=this.data.datasets.length;i<n;++i)this.getDatasetMeta(i).controller.configure();for(let i=0,n=this.data.datasets.length;i<n;++i)this._updateDataset(i,Pn(t)?t({datasetIndex:i}):t);this.notifyPlugins("afterDatasetsUpdate",{mode:t})}}_updateDataset(t,i){const n=this.getDatasetMeta(t),r={meta:n,index:t,mode:i,cancelable:!0};this.notifyPlugins("beforeDatasetUpdate",r)!==!1&&(n.controller._update(i),r.cancelable=!1,this.notifyPlugins("afterDatasetUpdate",r))}render(){this.notifyPlugins("beforeRender",{cancelable:!0})!==!1&&(zi.has(this)?this.attached&&!zi.running(this)&&zi.start(this):(this.draw(),Wf({chart:this})))}draw(){let t;if(this._resizeBeforeDraw){const{width:n,height:r}=this._resizeBeforeDraw;this._resizeBeforeDraw=null,this._resize(n,r)}if(this.clear(),this.width<=0||this.height<=0||this.notifyPlugins("beforeDraw",{cancelable:!0})===!1)return;const i=this._layers;for(t=0;t<i.length&&i[t].z<=0;++t)i[t].draw(this.chartArea);for(this._drawDatasets();t<i.length;++t)i[t].draw(this.chartArea);this.notifyPlugins("afterDraw")}_getSortedDatasetMetas(t){const i=this._sortedMetasets,n=[];let r,s;for(r=0,s=i.length;r<s;++r){const o=i[r];(!t||o.visible)&&n.push(o)}return n}getSortedVisibleDatasetMetas(){return this._getSortedDatasetMetas(!0)}_drawDatasets(){if(this.notifyPlugins("beforeDatasetsDraw",{cancelable:!0})===!1)return;const t=this.getSortedVisibleDatasetMetas();for(let i=t.length-1;i>=0;--i)this._drawDataset(t[i]);this.notifyPlugins("afterDatasetsDraw")}_drawDataset(t){const i=this.ctx,n=t._clip,r=!n.disabled,s=Y1(t,this.chartArea),o={meta:t,index:t.index,cancelable:!0};this.notifyPlugins("beforeDatasetDraw",o)!==!1&&(r&&ha(i,{left:n.left===!1?0:s.left-n.left,right:n.right===!1?this.width:s.right+n.right,top:n.top===!1?0:s.top-n.top,bottom:n.bottom===!1?this.height:s.bottom+n.bottom}),t.controller.draw(),r&&ca(i),o.cancelable=!1,this.notifyPlugins("afterDatasetDraw",o))}isPointInArea(t){return en(t,this.chartArea,this._minPadding)}getElementsAtEventForMode(t,i,n,r){const s=Fw.modes[i];return typeof s=="function"?s(this,t,n,r):[]}getDatasetMeta(t){const i=this.data.datasets[t],n=this._metasets;let r=n.filter(s=>s&&s._dataset===i).pop();return r||(r={type:null,data:[],dataset:null,controller:null,hidden:null,xAxisID:null,yAxisID:null,order:i&&i.order||0,index:t,_dataset:i,_parsed:[],_sorted:!1},n.push(r)),r}getContext(){return this.$context||(this.$context=Rn(null,{chart:this,type:"chart"}))}getVisibleDatasetCount(){return this.getSortedVisibleDatasetMetas().length}isDatasetVisible(t){const i=this.data.datasets[t];if(!i)return!1;const n=this.getDatasetMeta(t);return typeof n.hidden=="boolean"?!n.hidden:!i.hidden}setDatasetVisibility(t,i){const n=this.getDatasetMeta(t);n.hidden=!i}toggleDataVisibility(t){this._hiddenIndices[t]=!this._hiddenIndices[t]}getDataVisibility(t){return!this._hiddenIndices[t]}_updateVisibility(t,i,n){const r=n?"show":"hide",s=this.getDatasetMeta(t),o=s.controller._resolveAnimations(void 0,r);ys(i)?(s.data[i].hidden=!n,this.update()):(this.setDatasetVisibility(t,n),o.update(s,{visible:n}),this.update(a=>a.datasetIndex===t?r:void 0))}hide(t,i){this._updateVisibility(t,i,!1)}show(t,i){this._updateVisibility(t,i,!0)}_destroyDatasetMeta(t){const i=this._metasets[t];i&&i.controller&&i.controller._destroy(),delete this._metasets[t]}_stop(){let t,i;for(this.stop(),zi.remove(this),t=0,i=this.data.datasets.length;t<i;++t)this._destroyDatasetMeta(t)}destroy(){this.notifyPlugins("beforeDestroy");const{canvas:t,ctx:i}=this;this._stop(),this.config.clearCache(),t&&(this.unbindEvents(),lf(t,i),this.platform.releaseContext(i),this.canvas=null,this.ctx=null),delete Ao[this.id],this.notifyPlugins("afterDestroy")}toBase64Image(...t){return this.canvas.toDataURL(...t)}bindEvents(){this.bindUserEvents(),this.options.responsive?this.bindResponsiveEvents():this.attached=!0}bindUserEvents(){const t=this._listeners,i=this.platform,n=(s,o)=>{i.addEventListener(this,s,o),t[s]=o},r=(s,o,a)=>{s.offsetX=o,s.offsetY=a,this._eventHandler(s)};Jt(this.options.events,s=>n(s,r))}bindResponsiveEvents(){this._responsiveListeners||(this._responsiveListeners={});const t=this._responsiveListeners,i=this.platform,n=(l,h)=>{i.addEventListener(this,l,h),t[l]=h},r=(l,h)=>{t[l]&&(i.removeEventListener(this,l,h),delete t[l])},s=(l,h)=>{this.canvas&&this.resize(l,h)};let o;const a=()=>{r("attach",a),this.attached=!0,this.resize(),n("resize",s),n("detach",o)};o=()=>{this.attached=!1,r("resize",s),this._stop(),this._resize(0,0),n("attach",a)},i.isAttached(this.canvas)?a():o()}unbindEvents(){Jt(this._listeners,(t,i)=>{this.platform.removeEventListener(this,i,t)}),this._listeners={},Jt(this._responsiveListeners,(t,i)=>{this.platform.removeEventListener(this,i,t)}),this._responsiveListeners=void 0}updateHoverStyle(t,i,n){const r=n?"set":"remove";let s,o,a,l;for(i==="dataset"&&(s=this.getDatasetMeta(t[0].datasetIndex),s.controller["_"+r+"DatasetHoverStyle"]()),a=0,l=t.length;a<l;++a){o=t[a];const h=o&&this.getDatasetMeta(o.datasetIndex).controller;h&&h[r+"HoverStyle"](o.element,o.datasetIndex,o.index)}}getActiveElements(){return this._active||[]}setActiveElements(t){const i=this._active||[],n=t.map(({datasetIndex:s,index:o})=>{const a=this.getDatasetMeta(s);if(!a)throw new Error("No dataset found at index "+s);return{datasetIndex:s,element:a.data[o],index:o}});!zo(n,i)&&(this._active=n,this._lastEvent=null,this._updateHoverStyles(n,i))}notifyPlugins(t,i,n){return this._plugins.notify(this,t,i,n)}isPluginEnabled(t){return this._plugins._cache.filter(i=>i.plugin.id===t).length===1}_updateHoverStyles(t,i,n){const r=this.options.hover,s=(l,h)=>l.filter(c=>!h.some(u=>c.datasetIndex===u.datasetIndex&&c.index===u.index)),o=s(i,t),a=n?t:s(t,i);o.length&&this.updateHoverStyle(o,r.mode,!1),a.length&&r.mode&&this.updateHoverStyle(a,r.mode,!0)}_eventHandler(t,i){const n={event:t,replay:i,cancelable:!0,inChartArea:this.isPointInArea(t)},r=o=>(o.options.events||this.options.events).includes(t.native.type);if(this.notifyPlugins("beforeEvent",n,r)===!1)return;const s=this._handleEvent(t,i,n.inChartArea);return n.cancelable=!1,this.notifyPlugins("afterEvent",n,r),(s||n.changed)&&this.render(),this}_handleEvent(t,i,n){const{_active:r=[],options:s}=this,o=i,a=this._getActiveElements(t,r,n,o),l=Xy(t),h=W1(t,this._lastEvent,n,l);n&&(this._lastEvent=null,le(s.onHover,[t,a,this],this),l&&le(s.onClick,[t,a,this],this));const c=!zo(a,r);return(c||i)&&(this._active=a,this._updateHoverStyles(a,r,i)),this._lastEvent=h,c}_getActiveElements(t,i,n,r){if(t.type==="mouseout")return[];if(!n)return i;const s=this.options.hover;return this.getElementsAtEventForMode(t,s.mode,s,r)}}yt(Qi,"defaults",ve),yt(Qi,"instances",Ao),yt(Qi,"overrides",hr),yt(Qi,"registry",Ai),yt(Qi,"version",N1),yt(Qi,"getChart",Yf);function zf(){return Jt(Qi.instances,e=>e._plugins.invalidate())}function z1(e,t,i){const{startAngle:n,pixelMargin:r,x:s,y:o,outerRadius:a,innerRadius:l}=t;let h=r/a;e.beginPath(),e.arc(s,o,a,n-h,i+h),l>r?(h=r/l,e.arc(s,o,l,i+h,n-h,!0)):e.arc(s,o,r,i+Ae,n-Ae),e.closePath(),e.clip()}function V1(e){return yc(e,["outerStart","outerEnd","innerStart","innerEnd"])}function H1(e,t,i,n){const r=V1(e.options.borderRadius),s=(i-t)/2,o=Math.min(s,n*t/2),a=l=>{const h=(i-Math.min(s,l))*n/2;return Be(l,0,Math.min(s,h))};return{outerStart:a(r.outerStart),outerEnd:a(r.outerEnd),innerStart:Be(r.innerStart,0,o),innerEnd:Be(r.innerEnd,0,o)}}function _r(e,t,i,n){return{x:i+e*Math.cos(t),y:n+e*Math.sin(t)}}function Ko(e,t,i,n,r,s){const{x:o,y:a,startAngle:l,pixelMargin:h,innerRadius:c}=t,u=Math.max(t.outerRadius+n+i-h,0),f=c>0?c+n+i+h:0;let d=0;const g=r-l;if(n){const V=c>0?c-n:0,rt=u>0?u-n:0,J=(V+rt)/2,H=J!==0?g*J/(J+n):g;d=(g-H)/2}const y=Math.max(.001,g*u-i/fe)/u,_=(g-y)/2,w=l+_+d,v=r-_-d,{outerStart:S,outerEnd:T,innerStart:O,innerEnd:k}=H1(t,f,u,v-w),M=u-S,A=u-T,B=w+S/M,q=v-T/A,$=f+O,x=f+k,z=w+O/$,X=v-k/x;if(e.beginPath(),s){const V=(B+q)/2;if(e.arc(o,a,u,B,V),e.arc(o,a,u,V,q),T>0){const ht=_r(A,q,o,a);e.arc(ht.x,ht.y,T,q,v+Ae)}const rt=_r(x,v,o,a);if(e.lineTo(rt.x,rt.y),k>0){const ht=_r(x,X,o,a);e.arc(ht.x,ht.y,k,v+Ae,X+Math.PI)}const J=(v-k/f+(w+O/f))/2;if(e.arc(o,a,f,v-k/f,J,!0),e.arc(o,a,f,J,w+O/f,!0),O>0){const ht=_r($,z,o,a);e.arc(ht.x,ht.y,O,z+Math.PI,w-Ae)}const H=_r(M,w,o,a);if(e.lineTo(H.x,H.y),S>0){const ht=_r(M,B,o,a);e.arc(ht.x,ht.y,S,w-Ae,B)}}else{e.moveTo(o,a);const V=Math.cos(B)*u+o,rt=Math.sin(B)*u+a;e.lineTo(V,rt);const J=Math.cos(q)*u+o,H=Math.sin(q)*u+a;e.lineTo(J,H)}e.closePath()}function q1(e,t,i,n,r){const{fullCircles:s,startAngle:o,circumference:a}=t;let l=t.endAngle;if(s){Ko(e,t,i,n,l,r);for(let h=0;h<s;++h)e.fill();isNaN(a)||(l=o+(a%ue||ue))}return Ko(e,t,i,n,l,r),e.fill(),l}function $1(e,t,i,n,r){const{fullCircles:s,startAngle:o,circumference:a,options:l}=t,{borderWidth:h,borderJoinStyle:c,borderDash:u,borderDashOffset:f}=l,d=l.borderAlign==="inner";if(!h)return;e.setLineDash(u||[]),e.lineDashOffset=f,d?(e.lineWidth=h*2,e.lineJoin=c||"round"):(e.lineWidth=h,e.lineJoin=c||"bevel");let g=t.endAngle;if(s){Ko(e,t,i,n,g,r);for(let y=0;y<s;++y)e.stroke();isNaN(a)||(g=o+(a%ue||ue))}d&&z1(e,t,g),s||(Ko(e,t,i,n,g,r),e.stroke())}class rs extends wi{constructor(i){super();yt(this,"circumference");yt(this,"endAngle");yt(this,"fullCircles");yt(this,"innerRadius");yt(this,"outerRadius");yt(this,"pixelMargin");yt(this,"startAngle");this.options=void 0,this.circumference=void 0,this.startAngle=void 0,this.endAngle=void 0,this.innerRadius=void 0,this.outerRadius=void 0,this.pixelMargin=0,this.fullCircles=0,i&&Object.assign(this,i)}inRange(i,n,r){const s=this.getProps(["x","y"],r),{angle:o,distance:a}=xg(s,{x:i,y:n}),{startAngle:l,endAngle:h,innerRadius:c,outerRadius:u,circumference:f}=this.getProps(["startAngle","endAngle","innerRadius","outerRadius","circumference"],r),d=(this.options.spacing+this.options.borderWidth)/2,g=jt(f,h-l),y=_s(o,l,h)&&l!==h,_=g>=ue||y,w=Ji(a,c+d,u+d);return _&&w}getCenterPoint(i){const{x:n,y:r,startAngle:s,endAngle:o,innerRadius:a,outerRadius:l}=this.getProps(["x","y","startAngle","endAngle","innerRadius","outerRadius"],i),{offset:h,spacing:c}=this.options,u=(s+o)/2,f=(a+l+c+h)/2;return{x:n+Math.cos(u)*f,y:r+Math.sin(u)*f}}tooltipPosition(i){return this.getCenterPoint(i)}draw(i){const{options:n,circumference:r}=this,s=(n.offset||0)/4,o=(n.spacing||0)/2,a=n.circular;if(this.pixelMargin=n.borderAlign==="inner"?.33:0,this.fullCircles=r>ue?Math.floor(r/ue):0,r===0||this.innerRadius<0||this.outerRadius<0)return;i.save();const l=(this.startAngle+this.endAngle)/2;i.translate(Math.cos(l)*s,Math.sin(l)*s);const h=1-Math.sin(Math.min(fe,r||0)),c=s*h;i.fillStyle=n.backgroundColor,i.strokeStyle=n.borderColor,q1(i,this,c,o,a),$1(i,this,c,o,a),i.restore()}}yt(rs,"id","arc"),yt(rs,"defaults",{borderAlign:"center",borderColor:"#fff",borderDash:[],borderDashOffset:0,borderJoinStyle:void 0,borderRadius:0,borderWidth:2,offset:0,spacing:0,angle:void 0,circular:!0}),yt(rs,"defaultRoutes",{backgroundColor:"backgroundColor"}),yt(rs,"descriptors",{_scriptable:!0,_indexable:i=>i!=="borderDash"});function nm(e,t,i=t){e.lineCap=jt(i.borderCapStyle,t.borderCapStyle),e.setLineDash(jt(i.borderDash,t.borderDash)),e.lineDashOffset=jt(i.borderDashOffset,t.borderDashOffset),e.lineJoin=jt(i.borderJoinStyle,t.borderJoinStyle),e.lineWidth=jt(i.borderWidth,t.borderWidth),e.strokeStyle=jt(i.borderColor,t.borderColor)}function G1(e,t,i){e.lineTo(i.x,i.y)}function K1(e){return e.stepped?__:e.tension||e.cubicInterpolationMode==="monotone"?w_:G1}function rm(e,t,i={}){const n=e.length,{start:r=0,end:s=n-1}=i,{start:o,end:a}=t,l=Math.max(r,o),h=Math.min(s,a),c=r<o&&s<o||r>a&&s>a;return{count:n,start:l,loop:t.loop,ilen:h<l&&!c?n+h-l:h-l}}function Q1(e,t,i,n){const{points:r,options:s}=t,{count:o,start:a,loop:l,ilen:h}=rm(r,i,n),c=K1(s);let{move:u=!0,reverse:f}=n||{},d,g,y;for(d=0;d<=h;++d)g=r[(a+(f?h-d:d))%o],!g.skip&&(u?(e.moveTo(g.x,g.y),u=!1):c(e,y,g,f,s.stepped),y=g);return l&&(g=r[(a+(f?h:0))%o],c(e,y,g,f,s.stepped)),!!l}function X1(e,t,i,n){const r=t.points,{count:s,start:o,ilen:a}=rm(r,i,n),{move:l=!0,reverse:h}=n||{};let c=0,u=0,f,d,g,y,_,w;const v=T=>(o+(h?a-T:T))%s,S=()=>{y!==_&&(e.lineTo(c,_),e.lineTo(c,y),e.lineTo(c,w))};for(l&&(d=r[v(0)],e.moveTo(d.x,d.y)),f=0;f<=a;++f){if(d=r[v(f)],d.skip)continue;const T=d.x,O=d.y,k=T|0;k===g?(O<y?y=O:O>_&&(_=O),c=(u*c+T)/++u):(S(),e.lineTo(T,O),g=k,u=0,y=_=O),w=O}S()}function Lh(e){const t=e.options,i=t.borderDash&&t.borderDash.length;return!e._decimated&&!e._loop&&!t.tension&&t.cubicInterpolationMode!=="monotone"&&!t.stepped&&!i?X1:Q1}function Z1(e){return e.stepped?Z_:e.tension||e.cubicInterpolationMode==="monotone"?J_:Gn}function J1(e,t,i,n){let r=t._path;r||(r=t._path=new Path2D,t.path(r,i,n)&&r.closePath()),nm(e,t.options),e.stroke(r)}function tv(e,t,i,n){const{segments:r,options:s}=t,o=Lh(t);for(const a of r)nm(e,s,a.style),e.beginPath(),o(e,t,a,{start:i,end:i+n-1})&&e.closePath(),e.stroke()}const ev=typeof Path2D=="function";function iv(e,t,i,n){ev&&!t.options.segment?J1(e,t,i,n):tv(e,t,i,n)}class xn extends wi{constructor(t){super(),this.animated=!0,this.options=void 0,this._chart=void 0,this._loop=void 0,this._fullLoop=void 0,this._path=void 0,this._points=void 0,this._segments=void 0,this._decimated=!1,this._pointsUpdated=!1,this._datasetIndex=void 0,t&&Object.assign(this,t)}updateControlPoints(t,i){const n=this.options;if((n.tension||n.cubicInterpolationMode==="monotone")&&!n.stepped&&!this._pointsUpdated){const r=n.spanGaps?this._loop:this._fullLoop;V_(this._points,n,t,r,i),this._pointsUpdated=!0}}set points(t){this._points=t,delete this._segments,delete this._path,this._pointsUpdated=!1}get points(){return this._points}get segments(){return this._segments||(this._segments=sw(this,this.options.segment))}first(){const t=this.segments,i=this.points;return t.length&&i[t[0].start]}last(){const t=this.segments,i=this.points,n=t.length;return n&&i[t[n-1].end]}interpolate(t,i){const n=this.options,r=t[i],s=this.points,o=zg(this,{property:i,start:r,end:r});if(!o.length)return;const a=[],l=Z1(n);let h,c;for(h=0,c=o.length;h<c;++h){const{start:u,end:f}=o[h],d=s[u],g=s[f];if(d===g){a.push(d);continue}const y=Math.abs((r-d[i])/(g[i]-d[i])),_=l(d,g,y,n.stepped);_[i]=t[i],a.push(_)}return a.length===1?a[0]:a}pathSegment(t,i,n){return Lh(this)(t,this,i,n)}path(t,i,n){const r=this.segments,s=Lh(this);let o=this._loop;i=i||0,n=n||this.points.length-i;for(const a of r)o&=s(t,this,a,{start:i,end:i+n-1});return!!o}draw(t,i,n,r){const s=this.options||{};(this.points||[]).length&&s.borderWidth&&(t.save(),iv(t,this,n,r),t.restore()),this.animated&&(this._pointsUpdated=!1,this._path=void 0)}}yt(xn,"id","line"),yt(xn,"defaults",{borderCapStyle:"butt",borderDash:[],borderDashOffset:0,borderJoinStyle:"miter",borderWidth:3,capBezierPoints:!0,cubicInterpolationMode:"default",fill:!1,spanGaps:!1,stepped:!1,tension:0}),yt(xn,"defaultRoutes",{backgroundColor:"backgroundColor",borderColor:"borderColor"}),yt(xn,"descriptors",{_scriptable:!0,_indexable:t=>t!=="borderDash"&&t!=="fill"});function Vf(e,t,i,n){const r=e.options,{[i]:s}=e.getProps([i],n);return Math.abs(t-s)<r.radius+r.hitRadius}class To extends wi{constructor(i){super();yt(this,"parsed");yt(this,"skip");yt(this,"stop");this.options=void 0,this.parsed=void 0,this.skip=void 0,this.stop=void 0,i&&Object.assign(this,i)}inRange(i,n,r){const s=this.options,{x:o,y:a}=this.getProps(["x","y"],r);return Math.pow(i-o,2)+Math.pow(n-a,2)<Math.pow(s.hitRadius+s.radius,2)}inXRange(i,n){return Vf(this,i,"x",n)}inYRange(i,n){return Vf(this,i,"y",n)}getCenterPoint(i){const{x:n,y:r}=this.getProps(["x","y"],i);return{x:n,y:r}}size(i){i=i||this.options||{};let n=i.radius||0;n=Math.max(n,n&&i.hoverRadius||0);const r=n&&i.borderWidth||0;return(n+r)*2}draw(i,n){const r=this.options;this.skip||r.radius<.1||!en(this,n,this.size(r)/2)||(i.strokeStyle=r.borderColor,i.lineWidth=r.borderWidth,i.fillStyle=r.backgroundColor,Ch(i,r,this.x,this.y))}getRange(){const i=this.options||{};return i.radius+i.hitRadius}}yt(To,"id","point"),yt(To,"defaults",{borderWidth:1,hitRadius:1,hoverBorderWidth:1,hoverRadius:4,pointStyle:"circle",radius:3,rotation:0}),yt(To,"defaultRoutes",{backgroundColor:"backgroundColor",borderColor:"borderColor"});function sm(e,t){const{x:i,y:n,base:r,width:s,height:o}=e.getProps(["x","y","base","width","height"],t);let a,l,h,c,u;return e.horizontal?(u=o/2,a=Math.min(i,r),l=Math.max(i,r),h=n-u,c=n+u):(u=s/2,a=i-u,l=i+u,h=Math.min(n,r),c=Math.max(n,r)),{left:a,top:h,right:l,bottom:c}}function kn(e,t,i,n){return e?0:Be(t,i,n)}function nv(e,t,i){const n=e.options.borderWidth,r=e.borderSkipped,s=Ig(n);return{t:kn(r.top,s.top,0,i),r:kn(r.right,s.right,0,t),b:kn(r.bottom,s.bottom,0,i),l:kn(r.left,s.left,0,t)}}function rv(e,t,i){const{enableBorderRadius:n}=e.getProps(["enableBorderRadius"]),r=e.options.borderRadius,s=sr(r),o=Math.min(t,i),a=e.borderSkipped,l=n||Ht(r);return{topLeft:kn(!l||a.top||a.left,s.topLeft,0,o),topRight:kn(!l||a.top||a.right,s.topRight,0,o),bottomLeft:kn(!l||a.bottom||a.left,s.bottomLeft,0,o),bottomRight:kn(!l||a.bottom||a.right,s.bottomRight,0,o)}}function sv(e){const t=sm(e),i=t.right-t.left,n=t.bottom-t.top,r=nv(e,i/2,n/2),s=rv(e,i/2,n/2);return{outer:{x:t.left,y:t.top,w:i,h:n,radius:s},inner:{x:t.left+r.l,y:t.top+r.t,w:i-r.l-r.r,h:n-r.t-r.b,radius:{topLeft:Math.max(0,s.topLeft-Math.max(r.t,r.l)),topRight:Math.max(0,s.topRight-Math.max(r.t,r.r)),bottomLeft:Math.max(0,s.bottomLeft-Math.max(r.b,r.l)),bottomRight:Math.max(0,s.bottomRight-Math.max(r.b,r.r))}}}}function Xa(e,t,i,n){const r=t===null,s=i===null,a=e&&!(r&&s)&&sm(e,n);return a&&(r||Ji(t,a.left,a.right))&&(s||Ji(i,a.top,a.bottom))}function ov(e){return e.topLeft||e.topRight||e.bottomLeft||e.bottomRight}function av(e,t){e.rect(t.x,t.y,t.w,t.h)}function Za(e,t,i={}){const n=e.x!==i.x?-t:0,r=e.y!==i.y?-t:0,s=(e.x+e.w!==i.x+i.w?t:0)-n,o=(e.y+e.h!==i.y+i.h?t:0)-r;return{x:e.x+n,y:e.y+r,w:e.w+s,h:e.h+o,radius:e.radius}}class Oo extends wi{constructor(t){super(),this.options=void 0,this.horizontal=void 0,this.base=void 0,this.width=void 0,this.height=void 0,this.inflateAmount=void 0,t&&Object.assign(this,t)}draw(t){const{inflateAmount:i,options:{borderColor:n,backgroundColor:r}}=this,{inner:s,outer:o}=sv(this),a=ov(o.radius)?ws:av;t.save(),(o.w!==s.w||o.h!==s.h)&&(t.beginPath(),a(t,Za(o,i,s)),t.clip(),a(t,Za(s,-i,o)),t.fillStyle=n,t.fill("evenodd")),t.beginPath(),a(t,Za(s,i)),t.fillStyle=r,t.fill(),t.restore()}inRange(t,i,n){return Xa(this,t,i,n)}inXRange(t,i){return Xa(this,t,null,i)}inYRange(t,i){return Xa(this,null,t,i)}getCenterPoint(t){const{x:i,y:n,base:r,horizontal:s}=this.getProps(["x","y","base","horizontal"],t);return{x:s?(i+r)/2:i,y:s?n:(n+r)/2}}getRange(t){return t==="x"?this.width/2:this.height/2}}yt(Oo,"id","bar"),yt(Oo,"defaults",{borderSkipped:"start",borderWidth:0,borderRadius:0,inflateAmount:"auto",pointStyle:void 0}),yt(Oo,"defaultRoutes",{backgroundColor:"backgroundColor",borderColor:"borderColor"});var lv=Object.freeze({__proto__:null,ArcElement:rs,BarElement:Oo,LineElement:xn,PointElement:To});const Bh=["rgb(54, 162, 235)","rgb(255, 99, 132)","rgb(255, 159, 64)","rgb(255, 205, 86)","rgb(75, 192, 192)","rgb(153, 102, 255)","rgb(201, 203, 207)"],Hf=Bh.map(e=>e.replace("rgb(","rgba(").replace(")",", 0.5)"));function om(e){return Bh[e%Bh.length]}function am(e){return Hf[e%Hf.length]}function hv(e,t){return e.borderColor=om(t),e.backgroundColor=am(t),++t}function cv(e,t){return e.backgroundColor=e.data.map(()=>om(t++)),t}function uv(e,t){return e.backgroundColor=e.data.map(()=>am(t++)),t}function fv(e){let t=0;return(i,n)=>{const r=e.getDatasetMeta(n).controller;r instanceof Zn?t=cv(i,t):r instanceof ps?t=uv(i,t):r&&(t=hv(i,t))}}function qf(e){let t;for(t in e)if(e[t].borderColor||e[t].backgroundColor)return!0;return!1}function dv(e){return e&&(e.borderColor||e.backgroundColor)}function pv(){return ve.borderColor!=="rgba(0,0,0,0.1)"||ve.backgroundColor!=="rgba(0,0,0,0.1)"}var gv={id:"colors",defaults:{enabled:!0,forceOverride:!1},beforeLayout(e,t,i){if(!i.enabled)return;const{data:{datasets:n},options:r}=e.config,{elements:s}=r,o=qf(n)||dv(r)||s&&qf(s)||pv();if(!i.forceOverride&&o)return;const a=fv(e);n.forEach(a)}};function mv(e,t,i,n,r){const s=r.samples||n;if(s>=i)return e.slice(t,t+i);const o=[],a=(i-2)/(s-2);let l=0;const h=t+i-1;let c=t,u,f,d,g,y;for(o[l++]=e[c],u=0;u<s-2;u++){let _=0,w=0,v;const S=Math.floor((u+1)*a)+1+t,T=Math.min(Math.floor((u+2)*a)+1,i)+t,O=T-S;for(v=S;v<T;v++)_+=e[v].x,w+=e[v].y;_/=O,w/=O;const k=Math.floor(u*a)+1+t,M=Math.min(Math.floor((u+1)*a)+1,i)+t,{x:A,y:B}=e[c];for(d=g=-1,v=k;v<M;v++)g=.5*Math.abs((A-_)*(e[v].y-B)-(A-e[v].x)*(w-B)),g>d&&(d=g,f=e[v],y=v);o[l++]=f,c=y}return o[l++]=e[h],o}function bv(e,t,i,n){let r=0,s=0,o,a,l,h,c,u,f,d,g,y;const _=[],w=t+i-1,v=e[t].x,T=e[w].x-v;for(o=t;o<t+i;++o){a=e[o],l=(a.x-v)/T*n,h=a.y;const O=l|0;if(O===c)h<g?(g=h,u=o):h>y&&(y=h,f=o),r=(s*r+a.x)/++s;else{const k=o-1;if(!Gt(u)&&!Gt(f)){const M=Math.min(u,f),A=Math.max(u,f);M!==d&&M!==k&&_.push({...e[M],x:r}),A!==d&&A!==k&&_.push({...e[A],x:r})}o>0&&k!==d&&_.push(e[k]),_.push(a),c=O,s=0,g=y=h,u=f=d=o}}return _}function lm(e){if(e._decimated){const t=e._data;delete e._decimated,delete e._data,Object.defineProperty(e,"data",{configurable:!0,enumerable:!0,writable:!0,value:t})}}function $f(e){e.data.datasets.forEach(t=>{lm(t)})}function yv(e,t){const i=t.length;let n=0,r;const{iScale:s}=e,{min:o,max:a,minDefined:l,maxDefined:h}=s.getUserBounds();return l&&(n=Be(tn(t,s.axis,o).lo,0,i-1)),h?r=Be(tn(t,s.axis,a).hi+1,n,i)-n:r=i-n,{start:n,count:r}}var _v={id:"decimation",defaults:{algorithm:"min-max",enabled:!1},beforeElementsUpdate:(e,t,i)=>{if(!i.enabled){$f(e);return}const n=e.width;e.data.datasets.forEach((r,s)=>{const{_data:o,indexAxis:a}=r,l=e.getDatasetMeta(s),h=o||r.data;if(is([a,e.options.indexAxis])==="y"||!l.controller.supportsDecimation)return;const c=e.scales[l.xAxisID];if(c.type!=="linear"&&c.type!=="time"||e.options.parsing)return;let{start:u,count:f}=yv(l,h);const d=i.threshold||4*n;if(f<=d){lm(r);return}Gt(o)&&(r._data=h,delete r.data,Object.defineProperty(r,"data",{configurable:!0,enumerable:!0,get:function(){return this._decimated},set:function(y){this._data=y}}));let g;switch(i.algorithm){case"lttb":g=mv(h,u,f,n,i);break;case"min-max":g=bv(h,u,f,n);break;default:throw new Error(`Unsupported decimation algorithm '${i.algorithm}'`)}r._decimated=g})},destroy(e){$f(e)}};function wv(e,t,i){const n=e.segments,r=e.points,s=t.points,o=[];for(const a of n){let{start:l,end:h}=a;h=Ec(l,h,r);const c=Nh(i,r[l],r[h],a.loop);if(!t.segments){o.push({source:a,target:c,start:r[l],end:r[h]});continue}const u=zg(t,c);for(const f of u){const d=Nh(i,s[f.start],s[f.end],f.loop),g=Yg(a,r,d);for(const y of g)o.push({source:y,target:f,start:{[i]:Gf(c,d,"start",Math.max)},end:{[i]:Gf(c,d,"end",Math.min)}})}}return o}function Nh(e,t,i,n){if(n)return;let r=t[e],s=i[e];return e==="angle"&&(r=ri(r),s=ri(s)),{property:e,start:r,end:s}}function vv(e,t){const{x:i=null,y:n=null}=e||{},r=t.points,s=[];return t.segments.forEach(({start:o,end:a})=>{a=Ec(o,a,r);const l=r[o],h=r[a];n!==null?(s.push({x:l.x,y:n}),s.push({x:h.x,y:n})):i!==null&&(s.push({x:i,y:l.y}),s.push({x:i,y:h.y}))}),s}function Ec(e,t,i){for(;t>e;t--){const n=i[t];if(!isNaN(n.x)&&!isNaN(n.y))break}return t}function Gf(e,t,i,n){return e&&t?n(e[i],t[i]):e?e[i]:t?t[i]:0}function hm(e,t){let i=[],n=!1;return ce(e)?(n=!0,i=e):i=vv(e,t),i.length?new xn({points:i,options:{tension:0},_loop:n,_fullLoop:n}):null}function Kf(e){return e&&e.fill!==!1}function Sv(e,t,i){let r=e[t].fill;const s=[t];let o;if(!i)return r;for(;r!==!1&&s.indexOf(r)===-1;){if(!Ee(r))return r;if(o=e[r],!o)return!1;if(o.visible)return r;s.push(r),r=o.fill}return!1}function xv(e,t,i){const n=Av(e);if(Ht(n))return isNaN(n.value)?!1:n;let r=parseFloat(n);return Ee(r)&&Math.floor(r)===r?kv(n[0],t,r,i):["origin","start","end","stack","shape"].indexOf(n)>=0&&n}function kv(e,t,i,n){return(e==="-"||e==="+")&&(i=t+i),i===t||i<0||i>=n?!1:i}function Ev(e,t){let i=null;return e==="start"?i=t.bottom:e==="end"?i=t.top:Ht(e)?i=t.getPixelForValue(e.value):t.getBasePixel&&(i=t.getBasePixel()),i}function Mv(e,t,i){let n;return e==="start"?n=i:e==="end"?n=t.options.reverse?t.min:t.max:Ht(e)?n=e.value:n=t.getBaseValue(),n}function Av(e){const t=e.options,i=t.fill;let n=jt(i&&i.target,i);return n===void 0&&(n=!!t.backgroundColor),n===!1||n===null?!1:n===!0?"origin":n}function Tv(e){const{scale:t,index:i,line:n}=e,r=[],s=n.segments,o=n.points,a=Ov(t,i);a.push(hm({x:null,y:t.bottom},n));for(let l=0;l<s.length;l++){const h=s[l];for(let c=h.start;c<=h.end;c++)Pv(r,o[c],a)}return new xn({points:r,options:{}})}function Ov(e,t){const i=[],n=e.getMatchingVisibleMetas("line");for(let r=0;r<n.length;r++){const s=n[r];if(s.index===t)break;s.hidden||i.unshift(s.dataset)}return i}function Pv(e,t,i){const n=[];for(let r=0;r<i.length;r++){const s=i[r],{first:o,last:a,point:l}=Cv(s,t,"x");if(!(!l||o&&a)){if(o)n.unshift(l);else if(e.push(l),!a)break}}e.push(...n)}function Cv(e,t,i){const n=e.interpolate(t,i);if(!n)return{};const r=n[i],s=e.segments,o=e.points;let a=!1,l=!1;for(let h=0;h<s.length;h++){const c=s[h],u=o[c.start][i],f=o[c.end][i];if(Ji(r,u,f)){a=r===u,l=r===f;break}}return{first:a,last:l,point:n}}class cm{constructor(t){this.x=t.x,this.y=t.y,this.radius=t.radius}pathSegment(t,i,n){const{x:r,y:s,radius:o}=this;return i=i||{start:0,end:ue},t.arc(r,s,o,i.end,i.start,!0),!n.bounds}interpolate(t){const{x:i,y:n,radius:r}=this,s=t.angle;return{x:i+Math.cos(s)*r,y:n+Math.sin(s)*r,angle:s}}}function Iv(e){const{chart:t,fill:i,line:n}=e;if(Ee(i))return Rv(t,i);if(i==="stack")return Tv(e);if(i==="shape")return!0;const r=Dv(e);return r instanceof cm?r:hm(r,n)}function Rv(e,t){const i=e.getDatasetMeta(t);return i&&e.isDatasetVisible(t)?i.dataset:null}function Dv(e){return(e.scale||{}).getPointPositionForValue?Bv(e):Lv(e)}function Lv(e){const{scale:t={},fill:i}=e,n=Ev(i,t);if(Ee(n)){const r=t.isHorizontal();return{x:r?n:null,y:r?null:n}}return null}function Bv(e){const{scale:t,fill:i}=e,n=t.options,r=t.getLabels().length,s=n.reverse?t.max:t.min,o=Mv(i,t,s),a=[];if(n.grid.circular){const l=t.getPointPositionForValue(0,s);return new cm({x:l.x,y:l.y,radius:t.getDistanceFromCenterForValue(o)})}for(let l=0;l<r;++l)a.push(t.getPointPositionForValue(l,o));return a}function Ja(e,t,i){const n=Iv(t),{line:r,scale:s,axis:o}=t,a=r.options,l=a.fill,h=a.backgroundColor,{above:c=h,below:u=h}=l||{};n&&r.points.length&&(ha(e,i),Nv(e,{line:r,target:n,above:c,below:u,area:i,scale:s,axis:o}),ca(e))}function Nv(e,t){const{line:i,target:n,above:r,below:s,area:o,scale:a}=t,l=i._loop?"angle":t.axis;e.save(),l==="x"&&s!==r&&(Qf(e,n,o.top),Xf(e,{line:i,target:n,color:r,scale:a,property:l}),e.restore(),e.save(),Qf(e,n,o.bottom)),Xf(e,{line:i,target:n,color:s,scale:a,property:l}),e.restore()}function Qf(e,t,i){const{segments:n,points:r}=t;let s=!0,o=!1;e.beginPath();for(const a of n){const{start:l,end:h}=a,c=r[l],u=r[Ec(l,h,r)];s?(e.moveTo(c.x,c.y),s=!1):(e.lineTo(c.x,i),e.lineTo(c.x,c.y)),o=!!t.pathSegment(e,a,{move:o}),o?e.closePath():e.lineTo(u.x,i)}e.lineTo(t.first().x,i),e.closePath(),e.clip()}function Xf(e,t){const{line:i,target:n,property:r,color:s,scale:o}=t,a=wv(i,n,r);for(const{source:l,target:h,start:c,end:u}of a){const{style:{backgroundColor:f=s}={}}=l,d=n!==!0;e.save(),e.fillStyle=f,Fv(e,o,d&&Nh(r,c,u)),e.beginPath();const g=!!i.pathSegment(e,l);let y;if(d){g?e.closePath():Zf(e,n,u,r);const _=!!n.pathSegment(e,h,{move:g,reverse:!0});y=g&&_,y||Zf(e,n,c,r)}e.closePath(),e.fill(y?"evenodd":"nonzero"),e.restore()}}function Fv(e,t,i){const{top:n,bottom:r}=t.chart.chartArea,{property:s,start:o,end:a}=i||{};s==="x"&&(e.beginPath(),e.rect(o,n,a-o,r-n),e.clip())}function Zf(e,t,i,n){const r=t.interpolate(i,n);r&&e.lineTo(r.x,r.y)}var Uv={id:"filler",afterDatasetsUpdate(e,t,i){const n=(e.data.datasets||[]).length,r=[];let s,o,a,l;for(o=0;o<n;++o)s=e.getDatasetMeta(o),a=s.dataset,l=null,a&&a.options&&a instanceof xn&&(l={visible:e.isDatasetVisible(o),index:o,fill:xv(a,o,n),chart:e,axis:s.controller.options.indexAxis,scale:s.vScale,line:a}),s.$filler=l,r.push(l);for(o=0;o<n;++o)l=r[o],!(!l||l.fill===!1)&&(l.fill=Sv(r,o,i.propagate))},beforeDraw(e,t,i){const n=i.drawTime==="beforeDraw",r=e.getSortedVisibleDatasetMetas(),s=e.chartArea;for(let o=r.length-1;o>=0;--o){const a=r[o].$filler;a&&(a.line.updateControlPoints(s,a.axis),n&&a.fill&&Ja(e.ctx,a,s))}},beforeDatasetsDraw(e,t,i){if(i.drawTime!=="beforeDatasetsDraw")return;const n=e.getSortedVisibleDatasetMetas();for(let r=n.length-1;r>=0;--r){const s=n[r].$filler;Kf(s)&&Ja(e.ctx,s,e.chartArea)}},beforeDatasetDraw(e,t,i){const n=t.meta.$filler;!Kf(n)||i.drawTime!=="beforeDatasetDraw"||Ja(e.ctx,n,e.chartArea)},defaults:{propagate:!0,drawTime:"beforeDatasetDraw"}};const Jf=(e,t)=>{let{boxHeight:i=t,boxWidth:n=t}=e;return e.usePointStyle&&(i=Math.min(i,t),n=e.pointStyleWidth||Math.min(n,t)),{boxWidth:n,boxHeight:i,itemHeight:Math.max(t,i)}},jv=(e,t)=>e!==null&&t!==null&&e.datasetIndex===t.datasetIndex&&e.index===t.index;class td extends wi{constructor(t){super(),this._added=!1,this.legendHitBoxes=[],this._hoveredItem=null,this.doughnutMode=!1,this.chart=t.chart,this.options=t.options,this.ctx=t.ctx,this.legendItems=void 0,this.columnSizes=void 0,this.lineWidths=void 0,this.maxHeight=void 0,this.maxWidth=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.height=void 0,this.width=void 0,this._margins=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(t,i,n){this.maxWidth=t,this.maxHeight=i,this._margins=n,this.setDimensions(),this.buildLabels(),this.fit()}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=this._margins.left,this.right=this.width):(this.height=this.maxHeight,this.top=this._margins.top,this.bottom=this.height)}buildLabels(){const t=this.options.labels||{};let i=le(t.generateLabels,[this.chart],this)||[];t.filter&&(i=i.filter(n=>t.filter(n,this.chart.data))),t.sort&&(i=i.sort((n,r)=>t.sort(n,r,this.chart.data))),this.options.reverse&&i.reverse(),this.legendItems=i}fit(){const{options:t,ctx:i}=this;if(!t.display){this.width=this.height=0;return}const n=t.labels,r=Ce(n.font),s=r.size,o=this._computeTitleHeight(),{boxWidth:a,itemHeight:l}=Jf(n,s);let h,c;i.font=r.string,this.isHorizontal()?(h=this.maxWidth,c=this._fitRows(o,s,a,l)+10):(c=this.maxHeight,h=this._fitCols(o,r,a,l)+10),this.width=Math.min(h,t.maxWidth||this.maxWidth),this.height=Math.min(c,t.maxHeight||this.maxHeight)}_fitRows(t,i,n,r){const{ctx:s,maxWidth:o,options:{labels:{padding:a}}}=this,l=this.legendHitBoxes=[],h=this.lineWidths=[0],c=r+a;let u=t;s.textAlign="left",s.textBaseline="middle";let f=-1,d=-c;return this.legendItems.forEach((g,y)=>{const _=n+i/2+s.measureText(g.text).width;(y===0||h[h.length-1]+_+2*a>o)&&(u+=c,h[h.length-(y>0?0:1)]=0,d+=c,f++),l[y]={left:0,top:d,row:f,width:_,height:r},h[h.length-1]+=_+a}),u}_fitCols(t,i,n,r){const{ctx:s,maxHeight:o,options:{labels:{padding:a}}}=this,l=this.legendHitBoxes=[],h=this.columnSizes=[],c=o-t;let u=a,f=0,d=0,g=0,y=0;return this.legendItems.forEach((_,w)=>{const{itemWidth:v,itemHeight:S}=Wv(n,i,s,_,r);w>0&&d+S+2*a>c&&(u+=f+a,h.push({width:f,height:d}),g+=f+a,y++,f=d=0),l[w]={left:g,top:d,col:y,width:v,height:S},f=Math.max(f,v),d+=S+a}),u+=f,h.push({width:f,height:d}),u}adjustHitBoxes(){if(!this.options.display)return;const t=this._computeTitleHeight(),{legendHitBoxes:i,options:{align:n,labels:{padding:r},rtl:s}}=this,o=Mr(s,this.left,this.width);if(this.isHorizontal()){let a=0,l=He(n,this.left+r,this.right-this.lineWidths[a]);for(const h of i)a!==h.row&&(a=h.row,l=He(n,this.left+r,this.right-this.lineWidths[a])),h.top+=this.top+t+r,h.left=o.leftForLtr(o.x(l),h.width),l+=h.width+r}else{let a=0,l=He(n,this.top+t+r,this.bottom-this.columnSizes[a].height);for(const h of i)h.col!==a&&(a=h.col,l=He(n,this.top+t+r,this.bottom-this.columnSizes[a].height)),h.top=l,h.left+=this.left+r,h.left=o.leftForLtr(o.x(h.left),h.width),l+=h.height+r}}isHorizontal(){return this.options.position==="top"||this.options.position==="bottom"}draw(){if(this.options.display){const t=this.ctx;ha(t,this),this._draw(),ca(t)}}_draw(){const{options:t,columnSizes:i,lineWidths:n,ctx:r}=this,{align:s,labels:o}=t,a=ve.color,l=Mr(t.rtl,this.left,this.width),h=Ce(o.font),{padding:c}=o,u=h.size,f=u/2;let d;this.drawTitle(),r.textAlign=l.textAlign("left"),r.textBaseline="middle",r.lineWidth=.5,r.font=h.string;const{boxWidth:g,boxHeight:y,itemHeight:_}=Jf(o,u),w=function(k,M,A){if(isNaN(g)||g<=0||isNaN(y)||y<0)return;r.save();const B=jt(A.lineWidth,1);if(r.fillStyle=jt(A.fillStyle,a),r.lineCap=jt(A.lineCap,"butt"),r.lineDashOffset=jt(A.lineDashOffset,0),r.lineJoin=jt(A.lineJoin,"miter"),r.lineWidth=B,r.strokeStyle=jt(A.strokeStyle,a),r.setLineDash(jt(A.lineDash,[])),o.usePointStyle){const q={radius:y*Math.SQRT2/2,pointStyle:A.pointStyle,rotation:A.rotation,borderWidth:B},$=l.xPlus(k,g/2),x=M+f;Cg(r,q,$,x,o.pointStyleWidth&&g)}else{const q=M+Math.max((u-y)/2,0),$=l.leftForLtr(k,g),x=sr(A.borderRadius);r.beginPath(),Object.values(x).some(z=>z!==0)?ws(r,{x:$,y:q,w:g,h:y,radius:x}):r.rect($,q,g,y),r.fill(),B!==0&&r.stroke()}r.restore()},v=function(k,M,A){cr(r,A.text,k,M+_/2,h,{strikethrough:A.hidden,textAlign:l.textAlign(A.textAlign)})},S=this.isHorizontal(),T=this._computeTitleHeight();S?d={x:He(s,this.left+c,this.right-n[0]),y:this.top+c+T,line:0}:d={x:this.left+c,y:He(s,this.top+T+c,this.bottom-i[0].height),line:0},Ug(this.ctx,t.textDirection);const O=_+c;this.legendItems.forEach((k,M)=>{r.strokeStyle=k.fontColor,r.fillStyle=k.fontColor;const A=r.measureText(k.text).width,B=l.textAlign(k.textAlign||(k.textAlign=o.textAlign)),q=g+f+A;let $=d.x,x=d.y;l.setWidth(this.width),S?M>0&&$+q+c>this.right&&(x=d.y+=O,d.line++,$=d.x=He(s,this.left+c,this.right-n[d.line])):M>0&&x+O>this.bottom&&($=d.x=$+i[d.line].width+c,d.line++,x=d.y=He(s,this.top+T+c,this.bottom-i[d.line].height));const z=l.x($);if(w(z,x,k),$=l_(B,$+g+f,S?$+q:this.right,t.rtl),v(l.x($),x,k),S)d.x+=q+c;else if(typeof k.text!="string"){const X=h.lineHeight;d.y+=um(k,X)+c}else d.y+=O}),jg(this.ctx,t.textDirection)}drawTitle(){const t=this.options,i=t.title,n=Ce(i.font),r=Ge(i.padding);if(!i.display)return;const s=Mr(t.rtl,this.left,this.width),o=this.ctx,a=i.position,l=n.size/2,h=r.top+l;let c,u=this.left,f=this.width;if(this.isHorizontal())f=Math.max(...this.lineWidths),c=this.top+h,u=He(t.align,u,this.right-f);else{const g=this.columnSizes.reduce((y,_)=>Math.max(y,_.height),0);c=h+He(t.align,this.top,this.bottom-g-t.labels.padding-this._computeTitleHeight())}const d=He(a,u,u+f);o.textAlign=s.textAlign(mc(a)),o.textBaseline="middle",o.strokeStyle=i.color,o.fillStyle=i.color,o.font=n.string,cr(o,i.text,d,c,n)}_computeTitleHeight(){const t=this.options.title,i=Ce(t.font),n=Ge(t.padding);return t.display?i.lineHeight+n.height:0}_getLegendItemAt(t,i){let n,r,s;if(Ji(t,this.left,this.right)&&Ji(i,this.top,this.bottom)){for(s=this.legendHitBoxes,n=0;n<s.length;++n)if(r=s[n],Ji(t,r.left,r.left+r.width)&&Ji(i,r.top,r.top+r.height))return this.legendItems[n]}return null}handleEvent(t){const i=this.options;if(!Vv(t.type,i))return;const n=this._getLegendItemAt(t.x,t.y);if(t.type==="mousemove"||t.type==="mouseout"){const r=this._hoveredItem,s=jv(r,n);r&&!s&&le(i.onLeave,[t,r,this],this),this._hoveredItem=n,n&&!s&&le(i.onHover,[t,n,this],this)}else n&&le(i.onClick,[t,n,this],this)}}function Wv(e,t,i,n,r){const s=Yv(n,e,t,i),o=zv(r,n,t.lineHeight);return{itemWidth:s,itemHeight:o}}function Yv(e,t,i,n){let r=e.text;return r&&typeof r!="string"&&(r=r.reduce((s,o)=>s.length>o.length?s:o)),t+i.size/2+n.measureText(r).width}function zv(e,t,i){let n=e;return typeof t.text!="string"&&(n=um(t,i)),n}function um(e,t){const i=e.text?e.text.length:0;return t*i}function Vv(e,t){return!!((e==="mousemove"||e==="mouseout")&&(t.onHover||t.onLeave)||t.onClick&&(e==="click"||e==="mouseup"))}var Hv={id:"legend",_element:td,start(e,t,i){const n=e.legend=new td({ctx:e.ctx,options:i,chart:e});qe.configure(e,n,i),qe.addBox(e,n)},stop(e){qe.removeBox(e,e.legend),delete e.legend},beforeUpdate(e,t,i){const n=e.legend;qe.configure(e,n,i),n.options=i},afterUpdate(e){const t=e.legend;t.buildLabels(),t.adjustHitBoxes()},afterEvent(e,t){t.replay||e.legend.handleEvent(t.event)},defaults:{display:!0,position:"top",align:"center",fullSize:!0,reverse:!1,weight:1e3,onClick(e,t,i){const n=t.datasetIndex,r=i.chart;r.isDatasetVisible(n)?(r.hide(n),t.hidden=!0):(r.show(n),t.hidden=!1)},onHover:null,onLeave:null,labels:{color:e=>e.chart.options.color,boxWidth:40,padding:10,generateLabels(e){const t=e.data.datasets,{labels:{usePointStyle:i,pointStyle:n,textAlign:r,color:s,useBorderRadius:o,borderRadius:a}}=e.legend.options;return e._getSortedDatasetMetas().map(l=>{const h=l.controller.getStyle(i?0:void 0),c=Ge(h.borderWidth);return{text:t[l.index].label,fillStyle:h.backgroundColor,fontColor:s,hidden:!l.visible,lineCap:h.borderCapStyle,lineDash:h.borderDash,lineDashOffset:h.borderDashOffset,lineJoin:h.borderJoinStyle,lineWidth:(c.width+c.height)/4,strokeStyle:h.borderColor,pointStyle:n||h.pointStyle,rotation:h.rotation,textAlign:r||h.textAlign,borderRadius:o&&(a||h.borderRadius),datasetIndex:l.index}},this)}},title:{color:e=>e.chart.options.color,display:!1,position:"center",text:""}},descriptors:{_scriptable:e=>!e.startsWith("on"),labels:{_scriptable:e=>!["generateLabels","filter","sort"].includes(e)}}};class Mc extends wi{constructor(t){super(),this.chart=t.chart,this.options=t.options,this.ctx=t.ctx,this._padding=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(t,i){const n=this.options;if(this.left=0,this.top=0,!n.display){this.width=this.height=this.right=this.bottom=0;return}this.width=this.right=t,this.height=this.bottom=i;const r=ce(n.text)?n.text.length:1;this._padding=Ge(n.padding);const s=r*Ce(n.font).lineHeight+this._padding.height;this.isHorizontal()?this.height=s:this.width=s}isHorizontal(){const t=this.options.position;return t==="top"||t==="bottom"}_drawArgs(t){const{top:i,left:n,bottom:r,right:s,options:o}=this,a=o.align;let l=0,h,c,u;return this.isHorizontal()?(c=He(a,n,s),u=i+t,h=s-n):(o.position==="left"?(c=n+t,u=He(a,r,i),l=fe*-.5):(c=s-t,u=He(a,i,r),l=fe*.5),h=r-i),{titleX:c,titleY:u,maxWidth:h,rotation:l}}draw(){const t=this.ctx,i=this.options;if(!i.display)return;const n=Ce(i.font),s=n.lineHeight/2+this._padding.top,{titleX:o,titleY:a,maxWidth:l,rotation:h}=this._drawArgs(s);cr(t,i.text,0,0,n,{color:i.color,maxWidth:l,rotation:h,textAlign:mc(i.align),textBaseline:"middle",translation:[o,a]})}}function qv(e,t){const i=new Mc({ctx:e.ctx,options:t,chart:e});qe.configure(e,i,t),qe.addBox(e,i),e.titleBlock=i}var $v={id:"title",_element:Mc,start(e,t,i){qv(e,i)},stop(e){const t=e.titleBlock;qe.removeBox(e,t),delete e.titleBlock},beforeUpdate(e,t,i){const n=e.titleBlock;qe.configure(e,n,i),n.options=i},defaults:{align:"center",display:!1,font:{weight:"bold"},fullSize:!0,padding:10,position:"top",text:"",weight:2e3},defaultRoutes:{color:"color"},descriptors:{_scriptable:!0,_indexable:!1}};const io=new WeakMap;var Gv={id:"subtitle",start(e,t,i){const n=new Mc({ctx:e.ctx,options:i,chart:e});qe.configure(e,n,i),qe.addBox(e,n),io.set(e,n)},stop(e){qe.removeBox(e,io.get(e)),io.delete(e)},beforeUpdate(e,t,i){const n=io.get(e);qe.configure(e,n,i),n.options=i},defaults:{align:"center",display:!1,font:{weight:"normal"},fullSize:!0,padding:0,position:"top",text:"",weight:1500},defaultRoutes:{color:"color"},descriptors:{_scriptable:!0,_indexable:!1}};const ss={average(e){if(!e.length)return!1;let t,i,n=new Set,r=0,s=0;for(t=0,i=e.length;t<i;++t){const a=e[t].element;if(a&&a.hasValue()){const l=a.tooltipPosition();n.add(l.x),r+=l.y,++s}}return s===0||n.size===0?!1:{x:[...n].reduce((a,l)=>a+l)/n.size,y:r/s}},nearest(e,t){if(!e.length)return!1;let i=t.x,n=t.y,r=Number.POSITIVE_INFINITY,s,o,a;for(s=0,o=e.length;s<o;++s){const l=e[s].element;if(l&&l.hasValue()){const h=l.getCenterPoint(),c=Oh(t,h);c<r&&(r=c,a=l)}}if(a){const l=a.tooltipPosition();i=l.x,n=l.y}return{x:i,y:n}}};function Mi(e,t){return t&&(ce(t)?Array.prototype.push.apply(e,t):e.push(t)),e}function Vi(e){return(typeof e=="string"||e instanceof String)&&e.indexOf(`
`)>-1?e.split(`
`):e}function Kv(e,t){const{element:i,datasetIndex:n,index:r}=t,s=e.getDatasetMeta(n).controller,{label:o,value:a}=s.getLabelAndValue(r);return{chart:e,label:o,parsed:s.getParsed(r),raw:e.data.datasets[n].data[r],formattedValue:a,dataset:s.getDataset(),dataIndex:r,datasetIndex:n,element:i}}function ed(e,t){const i=e.chart.ctx,{body:n,footer:r,title:s}=e,{boxWidth:o,boxHeight:a}=t,l=Ce(t.bodyFont),h=Ce(t.titleFont),c=Ce(t.footerFont),u=s.length,f=r.length,d=n.length,g=Ge(t.padding);let y=g.height,_=0,w=n.reduce((T,O)=>T+O.before.length+O.lines.length+O.after.length,0);if(w+=e.beforeBody.length+e.afterBody.length,u&&(y+=u*h.lineHeight+(u-1)*t.titleSpacing+t.titleMarginBottom),w){const T=t.displayColors?Math.max(a,l.lineHeight):l.lineHeight;y+=d*T+(w-d)*l.lineHeight+(w-1)*t.bodySpacing}f&&(y+=t.footerMarginTop+f*c.lineHeight+(f-1)*t.footerSpacing);let v=0;const S=function(T){_=Math.max(_,i.measureText(T).width+v)};return i.save(),i.font=h.string,Jt(e.title,S),i.font=l.string,Jt(e.beforeBody.concat(e.afterBody),S),v=t.displayColors?o+2+t.boxPadding:0,Jt(n,T=>{Jt(T.before,S),Jt(T.lines,S),Jt(T.after,S)}),v=0,i.font=c.string,Jt(e.footer,S),i.restore(),_+=g.width,{width:_,height:y}}function Qv(e,t){const{y:i,height:n}=t;return i<n/2?"top":i>e.height-n/2?"bottom":"center"}function Xv(e,t,i,n){const{x:r,width:s}=n,o=i.caretSize+i.caretPadding;if(e==="left"&&r+s+o>t.width||e==="right"&&r-s-o<0)return!0}function Zv(e,t,i,n){const{x:r,width:s}=i,{width:o,chartArea:{left:a,right:l}}=e;let h="center";return n==="center"?h=r<=(a+l)/2?"left":"right":r<=s/2?h="left":r>=o-s/2&&(h="right"),Xv(h,e,t,i)&&(h="center"),h}function id(e,t,i){const n=i.yAlign||t.yAlign||Qv(e,i);return{xAlign:i.xAlign||t.xAlign||Zv(e,t,i,n),yAlign:n}}function Jv(e,t){let{x:i,width:n}=e;return t==="right"?i-=n:t==="center"&&(i-=n/2),i}function tS(e,t,i){let{y:n,height:r}=e;return t==="top"?n+=i:t==="bottom"?n-=r+i:n-=r/2,n}function nd(e,t,i,n){const{caretSize:r,caretPadding:s,cornerRadius:o}=e,{xAlign:a,yAlign:l}=i,h=r+s,{topLeft:c,topRight:u,bottomLeft:f,bottomRight:d}=sr(o);let g=Jv(t,a);const y=tS(t,l,h);return l==="center"?a==="left"?g+=h:a==="right"&&(g-=h):a==="left"?g-=Math.max(c,f)+r:a==="right"&&(g+=Math.max(u,d)+r),{x:Be(g,0,n.width-t.width),y:Be(y,0,n.height-t.height)}}function no(e,t,i){const n=Ge(i.padding);return t==="center"?e.x+e.width/2:t==="right"?e.x+e.width-n.right:e.x+n.left}function rd(e){return Mi([],Vi(e))}function eS(e,t,i){return Rn(e,{tooltip:t,tooltipItems:i,type:"tooltip"})}function sd(e,t){const i=t&&t.dataset&&t.dataset.tooltip&&t.dataset.tooltip.callbacks;return i?e.override(i):e}const fm={beforeTitle:Ui,title(e){if(e.length>0){const t=e[0],i=t.chart.data.labels,n=i?i.length:0;if(this&&this.options&&this.options.mode==="dataset")return t.dataset.label||"";if(t.label)return t.label;if(n>0&&t.dataIndex<n)return i[t.dataIndex]}return""},afterTitle:Ui,beforeBody:Ui,beforeLabel:Ui,label(e){if(this&&this.options&&this.options.mode==="dataset")return e.label+": "+e.formattedValue||e.formattedValue;let t=e.dataset.label||"";t&&(t+=": ");const i=e.formattedValue;return Gt(i)||(t+=i),t},labelColor(e){const i=e.chart.getDatasetMeta(e.datasetIndex).controller.getStyle(e.dataIndex);return{borderColor:i.borderColor,backgroundColor:i.backgroundColor,borderWidth:i.borderWidth,borderDash:i.borderDash,borderDashOffset:i.borderDashOffset,borderRadius:0}},labelTextColor(){return this.options.bodyColor},labelPointStyle(e){const i=e.chart.getDatasetMeta(e.datasetIndex).controller.getStyle(e.dataIndex);return{pointStyle:i.pointStyle,rotation:i.rotation}},afterLabel:Ui,afterBody:Ui,beforeFooter:Ui,footer:Ui,afterFooter:Ui};function Xe(e,t,i,n){const r=e[t].call(i,n);return typeof r>"u"?fm[t].call(i,n):r}class Fh extends wi{constructor(t){super(),this.opacity=0,this._active=[],this._eventPosition=void 0,this._size=void 0,this._cachedAnimations=void 0,this._tooltipItems=[],this.$animations=void 0,this.$context=void 0,this.chart=t.chart,this.options=t.options,this.dataPoints=void 0,this.title=void 0,this.beforeBody=void 0,this.body=void 0,this.afterBody=void 0,this.footer=void 0,this.xAlign=void 0,this.yAlign=void 0,this.x=void 0,this.y=void 0,this.height=void 0,this.width=void 0,this.caretX=void 0,this.caretY=void 0,this.labelColors=void 0,this.labelPointStyles=void 0,this.labelTextColors=void 0}initialize(t){this.options=t,this._cachedAnimations=void 0,this.$context=void 0}_resolveAnimations(){const t=this._cachedAnimations;if(t)return t;const i=this.chart,n=this.options.setContext(this.getContext()),r=n.enabled&&i.options.animation&&n.animations,s=new Vg(this.chart,r);return r._cacheable&&(this._cachedAnimations=Object.freeze(s)),s}getContext(){return this.$context||(this.$context=eS(this.chart.getContext(),this,this._tooltipItems))}getTitle(t,i){const{callbacks:n}=i,r=Xe(n,"beforeTitle",this,t),s=Xe(n,"title",this,t),o=Xe(n,"afterTitle",this,t);let a=[];return a=Mi(a,Vi(r)),a=Mi(a,Vi(s)),a=Mi(a,Vi(o)),a}getBeforeBody(t,i){return rd(Xe(i.callbacks,"beforeBody",this,t))}getBody(t,i){const{callbacks:n}=i,r=[];return Jt(t,s=>{const o={before:[],lines:[],after:[]},a=sd(n,s);Mi(o.before,Vi(Xe(a,"beforeLabel",this,s))),Mi(o.lines,Xe(a,"label",this,s)),Mi(o.after,Vi(Xe(a,"afterLabel",this,s))),r.push(o)}),r}getAfterBody(t,i){return rd(Xe(i.callbacks,"afterBody",this,t))}getFooter(t,i){const{callbacks:n}=i,r=Xe(n,"beforeFooter",this,t),s=Xe(n,"footer",this,t),o=Xe(n,"afterFooter",this,t);let a=[];return a=Mi(a,Vi(r)),a=Mi(a,Vi(s)),a=Mi(a,Vi(o)),a}_createItems(t){const i=this._active,n=this.chart.data,r=[],s=[],o=[];let a=[],l,h;for(l=0,h=i.length;l<h;++l)a.push(Kv(this.chart,i[l]));return t.filter&&(a=a.filter((c,u,f)=>t.filter(c,u,f,n))),t.itemSort&&(a=a.sort((c,u)=>t.itemSort(c,u,n))),Jt(a,c=>{const u=sd(t.callbacks,c);r.push(Xe(u,"labelColor",this,c)),s.push(Xe(u,"labelPointStyle",this,c)),o.push(Xe(u,"labelTextColor",this,c))}),this.labelColors=r,this.labelPointStyles=s,this.labelTextColors=o,this.dataPoints=a,a}update(t,i){const n=this.options.setContext(this.getContext()),r=this._active;let s,o=[];if(!r.length)this.opacity!==0&&(s={opacity:0});else{const a=ss[n.position].call(this,r,this._eventPosition);o=this._createItems(n),this.title=this.getTitle(o,n),this.beforeBody=this.getBeforeBody(o,n),this.body=this.getBody(o,n),this.afterBody=this.getAfterBody(o,n),this.footer=this.getFooter(o,n);const l=this._size=ed(this,n),h=Object.assign({},a,l),c=id(this.chart,n,h),u=nd(n,h,c,this.chart);this.xAlign=c.xAlign,this.yAlign=c.yAlign,s={opacity:1,x:u.x,y:u.y,width:l.width,height:l.height,caretX:a.x,caretY:a.y}}this._tooltipItems=o,this.$context=void 0,s&&this._resolveAnimations().update(this,s),t&&n.external&&n.external.call(this,{chart:this.chart,tooltip:this,replay:i})}drawCaret(t,i,n,r){const s=this.getCaretPosition(t,n,r);i.lineTo(s.x1,s.y1),i.lineTo(s.x2,s.y2),i.lineTo(s.x3,s.y3)}getCaretPosition(t,i,n){const{xAlign:r,yAlign:s}=this,{caretSize:o,cornerRadius:a}=n,{topLeft:l,topRight:h,bottomLeft:c,bottomRight:u}=sr(a),{x:f,y:d}=t,{width:g,height:y}=i;let _,w,v,S,T,O;return s==="center"?(T=d+y/2,r==="left"?(_=f,w=_-o,S=T+o,O=T-o):(_=f+g,w=_+o,S=T-o,O=T+o),v=_):(r==="left"?w=f+Math.max(l,c)+o:r==="right"?w=f+g-Math.max(h,u)-o:w=this.caretX,s==="top"?(S=d,T=S-o,_=w-o,v=w+o):(S=d+y,T=S+o,_=w+o,v=w-o),O=S),{x1:_,x2:w,x3:v,y1:S,y2:T,y3:O}}drawTitle(t,i,n){const r=this.title,s=r.length;let o,a,l;if(s){const h=Mr(n.rtl,this.x,this.width);for(t.x=no(this,n.titleAlign,n),i.textAlign=h.textAlign(n.titleAlign),i.textBaseline="middle",o=Ce(n.titleFont),a=n.titleSpacing,i.fillStyle=n.titleColor,i.font=o.string,l=0;l<s;++l)i.fillText(r[l],h.x(t.x),t.y+o.lineHeight/2),t.y+=o.lineHeight+a,l+1===s&&(t.y+=n.titleMarginBottom-a)}}_drawColorBox(t,i,n,r,s){const o=this.labelColors[n],a=this.labelPointStyles[n],{boxHeight:l,boxWidth:h}=s,c=Ce(s.bodyFont),u=no(this,"left",s),f=r.x(u),d=l<c.lineHeight?(c.lineHeight-l)/2:0,g=i.y+d;if(s.usePointStyle){const y={radius:Math.min(h,l)/2,pointStyle:a.pointStyle,rotation:a.rotation,borderWidth:1},_=r.leftForLtr(f,h)+h/2,w=g+l/2;t.strokeStyle=s.multiKeyBackground,t.fillStyle=s.multiKeyBackground,Ch(t,y,_,w),t.strokeStyle=o.borderColor,t.fillStyle=o.backgroundColor,Ch(t,y,_,w)}else{t.lineWidth=Ht(o.borderWidth)?Math.max(...Object.values(o.borderWidth)):o.borderWidth||1,t.strokeStyle=o.borderColor,t.setLineDash(o.borderDash||[]),t.lineDashOffset=o.borderDashOffset||0;const y=r.leftForLtr(f,h),_=r.leftForLtr(r.xPlus(f,1),h-2),w=sr(o.borderRadius);Object.values(w).some(v=>v!==0)?(t.beginPath(),t.fillStyle=s.multiKeyBackground,ws(t,{x:y,y:g,w:h,h:l,radius:w}),t.fill(),t.stroke(),t.fillStyle=o.backgroundColor,t.beginPath(),ws(t,{x:_,y:g+1,w:h-2,h:l-2,radius:w}),t.fill()):(t.fillStyle=s.multiKeyBackground,t.fillRect(y,g,h,l),t.strokeRect(y,g,h,l),t.fillStyle=o.backgroundColor,t.fillRect(_,g+1,h-2,l-2))}t.fillStyle=this.labelTextColors[n]}drawBody(t,i,n){const{body:r}=this,{bodySpacing:s,bodyAlign:o,displayColors:a,boxHeight:l,boxWidth:h,boxPadding:c}=n,u=Ce(n.bodyFont);let f=u.lineHeight,d=0;const g=Mr(n.rtl,this.x,this.width),y=function(A){i.fillText(A,g.x(t.x+d),t.y+f/2),t.y+=f+s},_=g.textAlign(o);let w,v,S,T,O,k,M;for(i.textAlign=o,i.textBaseline="middle",i.font=u.string,t.x=no(this,_,n),i.fillStyle=n.bodyColor,Jt(this.beforeBody,y),d=a&&_!=="right"?o==="center"?h/2+c:h+2+c:0,T=0,k=r.length;T<k;++T){for(w=r[T],v=this.labelTextColors[T],i.fillStyle=v,Jt(w.before,y),S=w.lines,a&&S.length&&(this._drawColorBox(i,t,T,g,n),f=Math.max(u.lineHeight,l)),O=0,M=S.length;O<M;++O)y(S[O]),f=u.lineHeight;Jt(w.after,y)}d=0,f=u.lineHeight,Jt(this.afterBody,y),t.y-=s}drawFooter(t,i,n){const r=this.footer,s=r.length;let o,a;if(s){const l=Mr(n.rtl,this.x,this.width);for(t.x=no(this,n.footerAlign,n),t.y+=n.footerMarginTop,i.textAlign=l.textAlign(n.footerAlign),i.textBaseline="middle",o=Ce(n.footerFont),i.fillStyle=n.footerColor,i.font=o.string,a=0;a<s;++a)i.fillText(r[a],l.x(t.x),t.y+o.lineHeight/2),t.y+=o.lineHeight+n.footerSpacing}}drawBackground(t,i,n,r){const{xAlign:s,yAlign:o}=this,{x:a,y:l}=t,{width:h,height:c}=n,{topLeft:u,topRight:f,bottomLeft:d,bottomRight:g}=sr(r.cornerRadius);i.fillStyle=r.backgroundColor,i.strokeStyle=r.borderColor,i.lineWidth=r.borderWidth,i.beginPath(),i.moveTo(a+u,l),o==="top"&&this.drawCaret(t,i,n,r),i.lineTo(a+h-f,l),i.quadraticCurveTo(a+h,l,a+h,l+f),o==="center"&&s==="right"&&this.drawCaret(t,i,n,r),i.lineTo(a+h,l+c-g),i.quadraticCurveTo(a+h,l+c,a+h-g,l+c),o==="bottom"&&this.drawCaret(t,i,n,r),i.lineTo(a+d,l+c),i.quadraticCurveTo(a,l+c,a,l+c-d),o==="center"&&s==="left"&&this.drawCaret(t,i,n,r),i.lineTo(a,l+u),i.quadraticCurveTo(a,l,a+u,l),i.closePath(),i.fill(),r.borderWidth>0&&i.stroke()}_updateAnimationTarget(t){const i=this.chart,n=this.$animations,r=n&&n.x,s=n&&n.y;if(r||s){const o=ss[t.position].call(this,this._active,this._eventPosition);if(!o)return;const a=this._size=ed(this,t),l=Object.assign({},o,this._size),h=id(i,t,l),c=nd(t,l,h,i);(r._to!==c.x||s._to!==c.y)&&(this.xAlign=h.xAlign,this.yAlign=h.yAlign,this.width=a.width,this.height=a.height,this.caretX=o.x,this.caretY=o.y,this._resolveAnimations().update(this,c))}}_willRender(){return!!this.opacity}draw(t){const i=this.options.setContext(this.getContext());let n=this.opacity;if(!n)return;this._updateAnimationTarget(i);const r={width:this.width,height:this.height},s={x:this.x,y:this.y};n=Math.abs(n)<.001?0:n;const o=Ge(i.padding),a=this.title.length||this.beforeBody.length||this.body.length||this.afterBody.length||this.footer.length;i.enabled&&a&&(t.save(),t.globalAlpha=n,this.drawBackground(s,t,r,i),Ug(t,i.textDirection),s.y+=o.top,this.drawTitle(s,t,i),this.drawBody(s,t,i),this.drawFooter(s,t,i),jg(t,i.textDirection),t.restore())}getActiveElements(){return this._active||[]}setActiveElements(t,i){const n=this._active,r=t.map(({datasetIndex:a,index:l})=>{const h=this.chart.getDatasetMeta(a);if(!h)throw new Error("Cannot find a dataset at index "+a);return{datasetIndex:a,element:h.data[l],index:l}}),s=!zo(n,r),o=this._positionChanged(r,i);(s||o)&&(this._active=r,this._eventPosition=i,this._ignoreReplayEvents=!0,this.update(!0))}handleEvent(t,i,n=!0){if(i&&this._ignoreReplayEvents)return!1;this._ignoreReplayEvents=!1;const r=this.options,s=this._active||[],o=this._getActiveElements(t,s,i,n),a=this._positionChanged(o,t),l=i||!zo(o,s)||a;return l&&(this._active=o,(r.enabled||r.external)&&(this._eventPosition={x:t.x,y:t.y},this.update(!0,i))),l}_getActiveElements(t,i,n,r){const s=this.options;if(t.type==="mouseout")return[];if(!r)return i.filter(a=>this.chart.data.datasets[a.datasetIndex]&&this.chart.getDatasetMeta(a.datasetIndex).controller.getParsed(a.index)!==void 0);const o=this.chart.getElementsAtEventForMode(t,s.mode,s,n);return s.reverse&&o.reverse(),o}_positionChanged(t,i){const{caretX:n,caretY:r,options:s}=this,o=ss[s.position].call(this,t,i);return o!==!1&&(n!==o.x||r!==o.y)}}yt(Fh,"positioners",ss);var iS={id:"tooltip",_element:Fh,positioners:ss,afterInit(e,t,i){i&&(e.tooltip=new Fh({chart:e,options:i}))},beforeUpdate(e,t,i){e.tooltip&&e.tooltip.initialize(i)},reset(e,t,i){e.tooltip&&e.tooltip.initialize(i)},afterDraw(e){const t=e.tooltip;if(t&&t._willRender()){const i={tooltip:t};if(e.notifyPlugins("beforeTooltipDraw",{...i,cancelable:!0})===!1)return;t.draw(e.ctx),e.notifyPlugins("afterTooltipDraw",i)}},afterEvent(e,t){if(e.tooltip){const i=t.replay;e.tooltip.handleEvent(t.event,i,t.inChartArea)&&(t.changed=!0)}},defaults:{enabled:!0,external:null,position:"average",backgroundColor:"rgba(0,0,0,0.8)",titleColor:"#fff",titleFont:{weight:"bold"},titleSpacing:2,titleMarginBottom:6,titleAlign:"left",bodyColor:"#fff",bodySpacing:2,bodyFont:{},bodyAlign:"left",footerColor:"#fff",footerSpacing:2,footerMarginTop:6,footerFont:{weight:"bold"},footerAlign:"left",padding:6,caretPadding:2,caretSize:5,cornerRadius:6,boxHeight:(e,t)=>t.bodyFont.size,boxWidth:(e,t)=>t.bodyFont.size,multiKeyBackground:"#fff",displayColors:!0,boxPadding:0,borderColor:"rgba(0,0,0,0)",borderWidth:0,animation:{duration:400,easing:"easeOutQuart"},animations:{numbers:{type:"number",properties:["x","y","width","height","caretX","caretY"]},opacity:{easing:"linear",duration:200}},callbacks:fm},defaultRoutes:{bodyFont:"font",footerFont:"font",titleFont:"font"},descriptors:{_scriptable:e=>e!=="filter"&&e!=="itemSort"&&e!=="external",_indexable:!1,callbacks:{_scriptable:!1,_indexable:!1},animation:{_fallback:!1},animations:{_fallback:"animation"}},additionalOptionScopes:["interaction"]},nS=Object.freeze({__proto__:null,Colors:gv,Decimation:_v,Filler:Uv,Legend:Hv,SubTitle:Gv,Title:$v,Tooltip:iS});const rS=(e,t,i,n)=>(typeof t=="string"?(i=e.push(t)-1,n.unshift({index:i,label:t})):isNaN(t)&&(i=null),i);function sS(e,t,i,n){const r=e.indexOf(t);if(r===-1)return rS(e,t,i,n);const s=e.lastIndexOf(t);return r!==s?i:r}const oS=(e,t)=>e===null?null:Be(Math.round(e),0,t);function od(e){const t=this.getLabels();return e>=0&&e<t.length?t[e]:e}class Uh extends gr{constructor(t){super(t),this._startValue=void 0,this._valueRange=0,this._addedLabels=[]}init(t){const i=this._addedLabels;if(i.length){const n=this.getLabels();for(const{index:r,label:s}of i)n[r]===s&&n.splice(r,1);this._addedLabels=[]}super.init(t)}parse(t,i){if(Gt(t))return null;const n=this.getLabels();return i=isFinite(i)&&n[i]===t?i:sS(n,t,jt(i,t),this._addedLabels),oS(i,n.length-1)}determineDataLimits(){const{minDefined:t,maxDefined:i}=this.getUserBounds();let{min:n,max:r}=this.getMinMax(!0);this.options.bounds==="ticks"&&(t||(n=0),i||(r=this.getLabels().length-1)),this.min=n,this.max=r}buildTicks(){const t=this.min,i=this.max,n=this.options.offset,r=[];let s=this.getLabels();s=t===0&&i===s.length-1?s:s.slice(t,i+1),this._valueRange=Math.max(s.length-(n?0:1),1),this._startValue=this.min-(n?.5:0);for(let o=t;o<=i;o++)r.push({value:o});return r}getLabelForValue(t){return od.call(this,t)}configure(){super.configure(),this.isHorizontal()||(this._reversePixels=!this._reversePixels)}getPixelForValue(t){return typeof t!="number"&&(t=this.parse(t)),t===null?NaN:this.getPixelForDecimal((t-this._startValue)/this._valueRange)}getPixelForTick(t){const i=this.ticks;return t<0||t>i.length-1?null:this.getPixelForValue(i[t].value)}getValueForPixel(t){return Math.round(this._startValue+this.getDecimalForPixel(t)*this._valueRange)}getBasePixel(){return this.bottom}}yt(Uh,"id","category"),yt(Uh,"defaults",{ticks:{callback:od}});function aS(e,t){const i=[],{bounds:r,step:s,min:o,max:a,precision:l,count:h,maxTicks:c,maxDigits:u,includeBounds:f}=e,d=s||1,g=c-1,{min:y,max:_}=t,w=!Gt(o),v=!Gt(a),S=!Gt(h),T=(_-y)/(u+1);let O=tf((_-y)/g/d)*d,k,M,A,B;if(O<1e-14&&!w&&!v)return[{value:y},{value:_}];B=Math.ceil(_/O)-Math.floor(y/O),B>g&&(O=tf(B*O/g/d)*d),Gt(l)||(k=Math.pow(10,l),O=Math.ceil(O*k)/k),r==="ticks"?(M=Math.floor(y/O)*O,A=Math.ceil(_/O)*O):(M=y,A=_),w&&v&&s&&e_((a-o)/s,O/1e3)?(B=Math.round(Math.min((a-o)/O,c)),O=(a-o)/B,M=o,A=a):S?(M=w?o:M,A=v?a:A,B=h-1,O=(A-M)/B):(B=(A-M)/O,us(B,Math.round(B),O/1e3)?B=Math.round(B):B=Math.ceil(B));const q=Math.max(ef(O),ef(M));k=Math.pow(10,Gt(l)?q:l),M=Math.round(M*k)/k,A=Math.round(A*k)/k;let $=0;for(w&&(f&&M!==o?(i.push({value:o}),M<o&&$++,us(Math.round((M+$*O)*k)/k,o,ad(o,T,e))&&$++):M<o&&$++);$<B;++$){const x=Math.round((M+$*O)*k)/k;if(v&&x>a)break;i.push({value:x})}return v&&f&&A!==a?i.length&&us(i[i.length-1].value,a,ad(a,T,e))?i[i.length-1].value=a:i.push({value:a}):(!v||A===a)&&i.push({value:A}),i}function ad(e,t,{horizontal:i,minRotation:n}){const r=mi(n),s=(i?Math.sin(r):Math.cos(r))||.001,o=.75*t*(""+e).length;return Math.min(t/s,o)}class Qo extends gr{constructor(t){super(t),this.start=void 0,this.end=void 0,this._startValue=void 0,this._endValue=void 0,this._valueRange=0}parse(t,i){return Gt(t)||(typeof t=="number"||t instanceof Number)&&!isFinite(+t)?null:+t}handleTickRangeOptions(){const{beginAtZero:t}=this.options,{minDefined:i,maxDefined:n}=this.getUserBounds();let{min:r,max:s}=this;const o=l=>r=i?r:l,a=l=>s=n?s:l;if(t){const l=Di(r),h=Di(s);l<0&&h<0?a(0):l>0&&h>0&&o(0)}if(r===s){let l=s===0?1:Math.abs(s*.05);a(s+l),t||o(r-l)}this.min=r,this.max=s}getTickLimit(){const t=this.options.ticks;let{maxTicksLimit:i,stepSize:n}=t,r;return n?(r=Math.ceil(this.max/n)-Math.floor(this.min/n)+1,r>1e3&&(console.warn(`scales.${this.id}.ticks.stepSize: ${n} would result generating up to ${r} ticks. Limiting to 1000.`),r=1e3)):(r=this.computeTickLimit(),i=i||11),i&&(r=Math.min(i,r)),r}computeTickLimit(){return Number.POSITIVE_INFINITY}buildTicks(){const t=this.options,i=t.ticks;let n=this.getTickLimit();n=Math.max(2,n);const r={maxTicks:n,bounds:t.bounds,min:t.min,max:t.max,precision:i.precision,step:i.stepSize,count:i.count,maxDigits:this._maxDigits(),horizontal:this.isHorizontal(),minRotation:i.minRotation||0,includeBounds:i.includeBounds!==!1},s=this._range||this,o=aS(r,s);return t.bounds==="ticks"&&Sg(o,this,"value"),t.reverse?(o.reverse(),this.start=this.max,this.end=this.min):(this.start=this.min,this.end=this.max),o}configure(){const t=this.ticks;let i=this.min,n=this.max;if(super.configure(),this.options.offset&&t.length){const r=(n-i)/Math.max(t.length-1,1)/2;i-=r,n+=r}this._startValue=i,this._endValue=n,this._valueRange=n-i}getLabelForValue(t){return Cs(t,this.chart.options.locale,this.options.ticks.format)}}class jh extends Qo{determineDataLimits(){const{min:t,max:i}=this.getMinMax(!0);this.min=Ee(t)?t:0,this.max=Ee(i)?i:1,this.handleTickRangeOptions()}computeTickLimit(){const t=this.isHorizontal(),i=t?this.width:this.height,n=mi(this.options.ticks.minRotation),r=(t?Math.sin(n):Math.cos(n))||.001,s=this._resolveTickFontOptions(0);return Math.ceil(i/Math.min(40,s.lineHeight/r))}getPixelForValue(t){return t===null?NaN:this.getPixelForDecimal((t-this._startValue)/this._valueRange)}getValueForPixel(t){return this._startValue+this.getDecimalForPixel(t)*this._valueRange}}yt(jh,"id","linear"),yt(jh,"defaults",{ticks:{callback:la.formatters.numeric}});const Ss=e=>Math.floor(Sn(e)),Vn=(e,t)=>Math.pow(10,Ss(e)+t);function ld(e){return e/Math.pow(10,Ss(e))===1}function hd(e,t,i){const n=Math.pow(10,i),r=Math.floor(e/n);return Math.ceil(t/n)-r}function lS(e,t){const i=t-e;let n=Ss(i);for(;hd(e,t,n)>10;)n++;for(;hd(e,t,n)<10;)n--;return Math.min(n,Ss(e))}function hS(e,{min:t,max:i}){t=ii(e.min,t);const n=[],r=Ss(t);let s=lS(t,i),o=s<0?Math.pow(10,Math.abs(s)):1;const a=Math.pow(10,s),l=r>s?Math.pow(10,r):0,h=Math.round((t-l)*o)/o,c=Math.floor((t-l)/a/10)*a*10;let u=Math.floor((h-c)/Math.pow(10,s)),f=ii(e.min,Math.round((l+c+u*Math.pow(10,s))*o)/o);for(;f<i;)n.push({value:f,major:ld(f),significand:u}),u>=10?u=u<15?15:20:u++,u>=20&&(s++,u=2,o=s>=0?1:o),f=Math.round((l+c+u*Math.pow(10,s))*o)/o;const d=ii(e.max,f);return n.push({value:d,major:ld(d),significand:u}),n}class Wh extends gr{constructor(t){super(t),this.start=void 0,this.end=void 0,this._startValue=void 0,this._valueRange=0}parse(t,i){const n=Qo.prototype.parse.apply(this,[t,i]);if(n===0){this._zero=!0;return}return Ee(n)&&n>0?n:null}determineDataLimits(){const{min:t,max:i}=this.getMinMax(!0);this.min=Ee(t)?Math.max(0,t):null,this.max=Ee(i)?Math.max(0,i):null,this.options.beginAtZero&&(this._zero=!0),this._zero&&this.min!==this._suggestedMin&&!Ee(this._userMin)&&(this.min=t===Vn(this.min,0)?Vn(this.min,-1):Vn(this.min,0)),this.handleTickRangeOptions()}handleTickRangeOptions(){const{minDefined:t,maxDefined:i}=this.getUserBounds();let n=this.min,r=this.max;const s=a=>n=t?n:a,o=a=>r=i?r:a;n===r&&(n<=0?(s(1),o(10)):(s(Vn(n,-1)),o(Vn(r,1)))),n<=0&&s(Vn(r,-1)),r<=0&&o(Vn(n,1)),this.min=n,this.max=r}buildTicks(){const t=this.options,i={min:this._userMin,max:this._userMax},n=hS(i,this);return t.bounds==="ticks"&&Sg(n,this,"value"),t.reverse?(n.reverse(),this.start=this.max,this.end=this.min):(this.start=this.min,this.end=this.max),n}getLabelForValue(t){return t===void 0?"0":Cs(t,this.chart.options.locale,this.options.ticks.format)}configure(){const t=this.min;super.configure(),this._startValue=Sn(t),this._valueRange=Sn(this.max)-Sn(t)}getPixelForValue(t){return(t===void 0||t===0)&&(t=this.min),t===null||isNaN(t)?NaN:this.getPixelForDecimal(t===this.min?0:(Sn(t)-this._startValue)/this._valueRange)}getValueForPixel(t){const i=this.getDecimalForPixel(t);return Math.pow(10,this._startValue+i*this._valueRange)}}yt(Wh,"id","logarithmic"),yt(Wh,"defaults",{ticks:{callback:la.formatters.logarithmic,major:{enabled:!0}}});function Yh(e){const t=e.ticks;if(t.display&&e.display){const i=Ge(t.backdropPadding);return jt(t.font&&t.font.size,ve.font.size)+i.height}return 0}function cS(e,t,i){return i=ce(i)?i:[i],{w:y_(e,t.string,i),h:i.length*t.lineHeight}}function cd(e,t,i,n,r){return e===n||e===r?{start:t-i/2,end:t+i/2}:e<n||e>r?{start:t-i,end:t}:{start:t,end:t+i}}function uS(e){const t={l:e.left+e._padding.left,r:e.right-e._padding.right,t:e.top+e._padding.top,b:e.bottom-e._padding.bottom},i=Object.assign({},t),n=[],r=[],s=e._pointLabels.length,o=e.options.pointLabels,a=o.centerPointLabels?fe/s:0;for(let l=0;l<s;l++){const h=o.setContext(e.getPointLabelContext(l));r[l]=h.padding;const c=e.getPointPosition(l,e.drawingArea+r[l],a),u=Ce(h.font),f=cS(e.ctx,u,e._pointLabels[l]);n[l]=f;const d=ri(e.getIndexAngle(l)+a),g=Math.round(pc(d)),y=cd(g,c.x,f.w,0,180),_=cd(g,c.y,f.h,90,270);fS(i,t,d,y,_)}e.setCenterPoint(t.l-i.l,i.r-t.r,t.t-i.t,i.b-t.b),e._pointLabelItems=gS(e,n,r)}function fS(e,t,i,n,r){const s=Math.abs(Math.sin(i)),o=Math.abs(Math.cos(i));let a=0,l=0;n.start<t.l?(a=(t.l-n.start)/s,e.l=Math.min(e.l,t.l-a)):n.end>t.r&&(a=(n.end-t.r)/s,e.r=Math.max(e.r,t.r+a)),r.start<t.t?(l=(t.t-r.start)/o,e.t=Math.min(e.t,t.t-l)):r.end>t.b&&(l=(r.end-t.b)/o,e.b=Math.max(e.b,t.b+l))}function dS(e,t,i){const n=e.drawingArea,{extra:r,additionalAngle:s,padding:o,size:a}=i,l=e.getPointPosition(t,n+r+o,s),h=Math.round(pc(ri(l.angle+Ae))),c=yS(l.y,a.h,h),u=mS(h),f=bS(l.x,a.w,u);return{visible:!0,x:l.x,y:c,textAlign:u,left:f,top:c,right:f+a.w,bottom:c+a.h}}function pS(e,t){if(!t)return!0;const{left:i,top:n,right:r,bottom:s}=e;return!(en({x:i,y:n},t)||en({x:i,y:s},t)||en({x:r,y:n},t)||en({x:r,y:s},t))}function gS(e,t,i){const n=[],r=e._pointLabels.length,s=e.options,{centerPointLabels:o,display:a}=s.pointLabels,l={extra:Yh(s)/2,additionalAngle:o?fe/r:0};let h;for(let c=0;c<r;c++){l.padding=i[c],l.size=t[c];const u=dS(e,c,l);n.push(u),a==="auto"&&(u.visible=pS(u,h),u.visible&&(h=u))}return n}function mS(e){return e===0||e===180?"center":e<180?"left":"right"}function bS(e,t,i){return i==="right"?e-=t:i==="center"&&(e-=t/2),e}function yS(e,t,i){return i===90||i===270?e-=t/2:(i>270||i<90)&&(e-=t),e}function _S(e,t,i){const{left:n,top:r,right:s,bottom:o}=i,{backdropColor:a}=t;if(!Gt(a)){const l=sr(t.borderRadius),h=Ge(t.backdropPadding);e.fillStyle=a;const c=n-h.left,u=r-h.top,f=s-n+h.width,d=o-r+h.height;Object.values(l).some(g=>g!==0)?(e.beginPath(),ws(e,{x:c,y:u,w:f,h:d,radius:l}),e.fill()):e.fillRect(c,u,f,d)}}function wS(e,t){const{ctx:i,options:{pointLabels:n}}=e;for(let r=t-1;r>=0;r--){const s=e._pointLabelItems[r];if(!s.visible)continue;const o=n.setContext(e.getPointLabelContext(r));_S(i,o,s);const a=Ce(o.font),{x:l,y:h,textAlign:c}=s;cr(i,e._pointLabels[r],l,h+a.lineHeight/2,a,{color:o.color,textAlign:c,textBaseline:"middle"})}}function dm(e,t,i,n){const{ctx:r}=e;if(i)r.arc(e.xCenter,e.yCenter,t,0,ue);else{let s=e.getPointPosition(0,t);r.moveTo(s.x,s.y);for(let o=1;o<n;o++)s=e.getPointPosition(o,t),r.lineTo(s.x,s.y)}}function vS(e,t,i,n,r){const s=e.ctx,o=t.circular,{color:a,lineWidth:l}=t;!o&&!n||!a||!l||i<0||(s.save(),s.strokeStyle=a,s.lineWidth=l,s.setLineDash(r.dash||[]),s.lineDashOffset=r.dashOffset,s.beginPath(),dm(e,i,o,n),s.closePath(),s.stroke(),s.restore())}function SS(e,t,i){return Rn(e,{label:i,index:t,type:"pointLabel"})}class os extends Qo{constructor(t){super(t),this.xCenter=void 0,this.yCenter=void 0,this.drawingArea=void 0,this._pointLabels=[],this._pointLabelItems=[]}setDimensions(){const t=this._padding=Ge(Yh(this.options)/2),i=this.width=this.maxWidth-t.width,n=this.height=this.maxHeight-t.height;this.xCenter=Math.floor(this.left+i/2+t.left),this.yCenter=Math.floor(this.top+n/2+t.top),this.drawingArea=Math.floor(Math.min(i,n)/2)}determineDataLimits(){const{min:t,max:i}=this.getMinMax(!1);this.min=Ee(t)&&!isNaN(t)?t:0,this.max=Ee(i)&&!isNaN(i)?i:0,this.handleTickRangeOptions()}computeTickLimit(){return Math.ceil(this.drawingArea/Yh(this.options))}generateTickLabels(t){Qo.prototype.generateTickLabels.call(this,t),this._pointLabels=this.getLabels().map((i,n)=>{const r=le(this.options.pointLabels.callback,[i,n],this);return r||r===0?r:""}).filter((i,n)=>this.chart.getDataVisibility(n))}fit(){const t=this.options;t.display&&t.pointLabels.display?uS(this):this.setCenterPoint(0,0,0,0)}setCenterPoint(t,i,n,r){this.xCenter+=Math.floor((t-i)/2),this.yCenter+=Math.floor((n-r)/2),this.drawingArea-=Math.min(this.drawingArea/2,Math.max(t,i,n,r))}getIndexAngle(t){const i=ue/(this._pointLabels.length||1),n=this.options.startAngle||0;return ri(t*i+mi(n))}getDistanceFromCenterForValue(t){if(Gt(t))return NaN;const i=this.drawingArea/(this.max-this.min);return this.options.reverse?(this.max-t)*i:(t-this.min)*i}getValueForDistanceFromCenter(t){if(Gt(t))return NaN;const i=t/(this.drawingArea/(this.max-this.min));return this.options.reverse?this.max-i:this.min+i}getPointLabelContext(t){const i=this._pointLabels||[];if(t>=0&&t<i.length){const n=i[t];return SS(this.getContext(),t,n)}}getPointPosition(t,i,n=0){const r=this.getIndexAngle(t)-Ae+n;return{x:Math.cos(r)*i+this.xCenter,y:Math.sin(r)*i+this.yCenter,angle:r}}getPointPositionForValue(t,i){return this.getPointPosition(t,this.getDistanceFromCenterForValue(i))}getBasePosition(t){return this.getPointPositionForValue(t||0,this.getBaseValue())}getPointLabelPosition(t){const{left:i,top:n,right:r,bottom:s}=this._pointLabelItems[t];return{left:i,top:n,right:r,bottom:s}}drawBackground(){const{backgroundColor:t,grid:{circular:i}}=this.options;if(t){const n=this.ctx;n.save(),n.beginPath(),dm(this,this.getDistanceFromCenterForValue(this._endValue),i,this._pointLabels.length),n.closePath(),n.fillStyle=t,n.fill(),n.restore()}}drawGrid(){const t=this.ctx,i=this.options,{angleLines:n,grid:r,border:s}=i,o=this._pointLabels.length;let a,l,h;if(i.pointLabels.display&&wS(this,o),r.display&&this.ticks.forEach((c,u)=>{if(u!==0||u===0&&this.min<0){l=this.getDistanceFromCenterForValue(c.value);const f=this.getContext(u),d=r.setContext(f),g=s.setContext(f);vS(this,d,l,o,g)}}),n.display){for(t.save(),a=o-1;a>=0;a--){const c=n.setContext(this.getPointLabelContext(a)),{color:u,lineWidth:f}=c;!f||!u||(t.lineWidth=f,t.strokeStyle=u,t.setLineDash(c.borderDash),t.lineDashOffset=c.borderDashOffset,l=this.getDistanceFromCenterForValue(i.reverse?this.min:this.max),h=this.getPointPosition(a,l),t.beginPath(),t.moveTo(this.xCenter,this.yCenter),t.lineTo(h.x,h.y),t.stroke())}t.restore()}}drawBorder(){}drawLabels(){const t=this.ctx,i=this.options,n=i.ticks;if(!n.display)return;const r=this.getIndexAngle(0);let s,o;t.save(),t.translate(this.xCenter,this.yCenter),t.rotate(r),t.textAlign="center",t.textBaseline="middle",this.ticks.forEach((a,l)=>{if(l===0&&this.min>=0&&!i.reverse)return;const h=n.setContext(this.getContext(l)),c=Ce(h.font);if(s=this.getDistanceFromCenterForValue(this.ticks[l].value),h.showLabelBackdrop){t.font=c.string,o=t.measureText(a.label).width,t.fillStyle=h.backdropColor;const u=Ge(h.backdropPadding);t.fillRect(-o/2-u.left,-s-c.size/2-u.top,o+u.width,c.size+u.height)}cr(t,a.label,0,-s,c,{color:h.color,strokeColor:h.textStrokeColor,strokeWidth:h.textStrokeWidth})}),t.restore()}drawTitle(){}}yt(os,"id","radialLinear"),yt(os,"defaults",{display:!0,animate:!0,position:"chartArea",angleLines:{display:!0,lineWidth:1,borderDash:[],borderDashOffset:0},grid:{circular:!1},startAngle:0,ticks:{showLabelBackdrop:!0,callback:la.formatters.numeric},pointLabels:{backdropColor:void 0,backdropPadding:2,display:!0,font:{size:10},callback(t){return t},padding:5,centerPointLabels:!1}}),yt(os,"defaultRoutes",{"angleLines.color":"borderColor","pointLabels.color":"color","ticks.color":"color"}),yt(os,"descriptors",{angleLines:{_fallback:"grid"}});const fa={millisecond:{common:!0,size:1,steps:1e3},second:{common:!0,size:1e3,steps:60},minute:{common:!0,size:6e4,steps:60},hour:{common:!0,size:36e5,steps:24},day:{common:!0,size:864e5,steps:30},week:{common:!1,size:6048e5,steps:4},month:{common:!0,size:2628e6,steps:12},quarter:{common:!1,size:7884e6,steps:4},year:{common:!0,size:3154e7}},Je=Object.keys(fa);function ud(e,t){return e-t}function fd(e,t){if(Gt(t))return null;const i=e._adapter,{parser:n,round:r,isoWeekday:s}=e._parseOpts;let o=t;return typeof n=="function"&&(o=n(o)),Ee(o)||(o=typeof n=="string"?i.parse(o,n):i.parse(o)),o===null?null:(r&&(o=r==="week"&&(Cr(s)||s===!0)?i.startOf(o,"isoWeek",s):i.startOf(o,r)),+o)}function dd(e,t,i,n){const r=Je.length;for(let s=Je.indexOf(e);s<r-1;++s){const o=fa[Je[s]],a=o.steps?o.steps:Number.MAX_SAFE_INTEGER;if(o.common&&Math.ceil((i-t)/(a*o.size))<=n)return Je[s]}return Je[r-1]}function xS(e,t,i,n,r){for(let s=Je.length-1;s>=Je.indexOf(i);s--){const o=Je[s];if(fa[o].common&&e._adapter.diff(r,n,o)>=t-1)return o}return Je[i?Je.indexOf(i):0]}function kS(e){for(let t=Je.indexOf(e)+1,i=Je.length;t<i;++t)if(fa[Je[t]].common)return Je[t]}function pd(e,t,i){if(!i)e[t]=!0;else if(i.length){const{lo:n,hi:r}=gc(i,t),s=i[n]>=t?i[n]:i[r];e[s]=!0}}function ES(e,t,i,n){const r=e._adapter,s=+r.startOf(t[0].value,n),o=t[t.length-1].value;let a,l;for(a=s;a<=o;a=+r.add(a,1,n))l=i[a],l>=0&&(t[l].major=!0);return t}function gd(e,t,i){const n=[],r={},s=t.length;let o,a;for(o=0;o<s;++o)a=t[o],r[a]=o,n.push({value:a,major:!1});return s===0||!i?n:ES(e,n,r,i)}class xs extends gr{constructor(t){super(t),this._cache={data:[],labels:[],all:[]},this._unit="day",this._majorUnit=void 0,this._offsets={},this._normalized=!1,this._parseOpts=void 0}init(t,i={}){const n=t.time||(t.time={}),r=this._adapter=new $g._date(t.adapters.date);r.init(i),cs(n.displayFormats,r.formats()),this._parseOpts={parser:n.parser,round:n.round,isoWeekday:n.isoWeekday},super.init(t),this._normalized=i.normalized}parse(t,i){return t===void 0?null:fd(this,t)}beforeLayout(){super.beforeLayout(),this._cache={data:[],labels:[],all:[]}}determineDataLimits(){const t=this.options,i=this._adapter,n=t.time.unit||"day";let{min:r,max:s,minDefined:o,maxDefined:a}=this.getUserBounds();function l(h){!o&&!isNaN(h.min)&&(r=Math.min(r,h.min)),!a&&!isNaN(h.max)&&(s=Math.max(s,h.max))}(!o||!a)&&(l(this._getLabelBounds()),(t.bounds!=="ticks"||t.ticks.source!=="labels")&&l(this.getMinMax(!1))),r=Ee(r)&&!isNaN(r)?r:+i.startOf(Date.now(),n),s=Ee(s)&&!isNaN(s)?s:+i.endOf(Date.now(),n)+1,this.min=Math.min(r,s-1),this.max=Math.max(r+1,s)}_getLabelBounds(){const t=this.getLabelTimestamps();let i=Number.POSITIVE_INFINITY,n=Number.NEGATIVE_INFINITY;return t.length&&(i=t[0],n=t[t.length-1]),{min:i,max:n}}buildTicks(){const t=this.options,i=t.time,n=t.ticks,r=n.source==="labels"?this.getLabelTimestamps():this._generate();t.bounds==="ticks"&&r.length&&(this.min=this._userMin||r[0],this.max=this._userMax||r[r.length-1]);const s=this.min,o=this.max,a=s_(r,s,o);return this._unit=i.unit||(n.autoSkip?dd(i.minUnit,this.min,this.max,this._getLabelCapacity(s)):xS(this,a.length,i.minUnit,this.min,this.max)),this._majorUnit=!n.major.enabled||this._unit==="year"?void 0:kS(this._unit),this.initOffsets(r),t.reverse&&a.reverse(),gd(this,a,this._majorUnit)}afterAutoSkip(){this.options.offsetAfterAutoskip&&this.initOffsets(this.ticks.map(t=>+t.value))}initOffsets(t=[]){let i=0,n=0,r,s;this.options.offset&&t.length&&(r=this.getDecimalForValue(t[0]),t.length===1?i=1-r:i=(this.getDecimalForValue(t[1])-r)/2,s=this.getDecimalForValue(t[t.length-1]),t.length===1?n=s:n=(s-this.getDecimalForValue(t[t.length-2]))/2);const o=t.length<3?.5:.25;i=Be(i,0,o),n=Be(n,0,o),this._offsets={start:i,end:n,factor:1/(i+1+n)}}_generate(){const t=this._adapter,i=this.min,n=this.max,r=this.options,s=r.time,o=s.unit||dd(s.minUnit,i,n,this._getLabelCapacity(i)),a=jt(r.ticks.stepSize,1),l=o==="week"?s.isoWeekday:!1,h=Cr(l)||l===!0,c={};let u=i,f,d;if(h&&(u=+t.startOf(u,"isoWeek",l)),u=+t.startOf(u,h?"day":o),t.diff(n,i,o)>1e5*a)throw new Error(i+" and "+n+" are too far apart with stepSize of "+a+" "+o);const g=r.ticks.source==="data"&&this.getDataTimestamps();for(f=u,d=0;f<n;f=+t.add(f,a,o),d++)pd(c,f,g);return(f===n||r.bounds==="ticks"||d===1)&&pd(c,f,g),Object.keys(c).sort(ud).map(y=>+y)}getLabelForValue(t){const i=this._adapter,n=this.options.time;return n.tooltipFormat?i.format(t,n.tooltipFormat):i.format(t,n.displayFormats.datetime)}format(t,i){const r=this.options.time.displayFormats,s=this._unit,o=i||r[s];return this._adapter.format(t,o)}_tickFormatFunction(t,i,n,r){const s=this.options,o=s.ticks.callback;if(o)return le(o,[t,i,n],this);const a=s.time.displayFormats,l=this._unit,h=this._majorUnit,c=l&&a[l],u=h&&a[h],f=n[i],d=h&&u&&f&&f.major;return this._adapter.format(t,r||(d?u:c))}generateTickLabels(t){let i,n,r;for(i=0,n=t.length;i<n;++i)r=t[i],r.label=this._tickFormatFunction(r.value,i,t)}getDecimalForValue(t){return t===null?NaN:(t-this.min)/(this.max-this.min)}getPixelForValue(t){const i=this._offsets,n=this.getDecimalForValue(t);return this.getPixelForDecimal((i.start+n)*i.factor)}getValueForPixel(t){const i=this._offsets,n=this.getDecimalForPixel(t)/i.factor-i.end;return this.min+n*(this.max-this.min)}_getLabelSize(t){const i=this.options.ticks,n=this.ctx.measureText(t).width,r=mi(this.isHorizontal()?i.maxRotation:i.minRotation),s=Math.cos(r),o=Math.sin(r),a=this._resolveTickFontOptions(0).size;return{w:n*s+a*o,h:n*o+a*s}}_getLabelCapacity(t){const i=this.options.time,n=i.displayFormats,r=n[i.unit]||n.millisecond,s=this._tickFormatFunction(t,0,gd(this,[t],this._majorUnit),r),o=this._getLabelSize(s),a=Math.floor(this.isHorizontal()?this.width/o.w:this.height/o.h)-1;return a>0?a:1}getDataTimestamps(){let t=this._cache.data||[],i,n;if(t.length)return t;const r=this.getMatchingVisibleMetas();if(this._normalized&&r.length)return this._cache.data=r[0].controller.getAllParsedValues(this);for(i=0,n=r.length;i<n;++i)t=t.concat(r[i].controller.getAllParsedValues(this));return this._cache.data=this.normalize(t)}getLabelTimestamps(){const t=this._cache.labels||[];let i,n;if(t.length)return t;const r=this.getLabels();for(i=0,n=r.length;i<n;++i)t.push(fd(this,r[i]));return this._cache.labels=this._normalized?t:this.normalize(t)}normalize(t){return Eg(t.sort(ud))}}yt(xs,"id","time"),yt(xs,"defaults",{bounds:"data",adapters:{},time:{parser:!1,unit:!1,round:!1,isoWeekday:!1,minUnit:"millisecond",displayFormats:{}},ticks:{source:"auto",callback:!1,major:{enabled:!1}}});function ro(e,t,i){let n=0,r=e.length-1,s,o,a,l;i?(t>=e[n].pos&&t<=e[r].pos&&({lo:n,hi:r}=tn(e,"pos",t)),{pos:s,time:a}=e[n],{pos:o,time:l}=e[r]):(t>=e[n].time&&t<=e[r].time&&({lo:n,hi:r}=tn(e,"time",t)),{time:s,pos:a}=e[n],{time:o,pos:l}=e[r]);const h=o-s;return h?a+(l-a)*(t-s)/h:a}class zh extends xs{constructor(t){super(t),this._table=[],this._minPos=void 0,this._tableRange=void 0}initOffsets(){const t=this._getTimestampsForTable(),i=this._table=this.buildLookupTable(t);this._minPos=ro(i,this.min),this._tableRange=ro(i,this.max)-this._minPos,super.initOffsets(t)}buildLookupTable(t){const{min:i,max:n}=this,r=[],s=[];let o,a,l,h,c;for(o=0,a=t.length;o<a;++o)h=t[o],h>=i&&h<=n&&r.push(h);if(r.length<2)return[{time:i,pos:0},{time:n,pos:1}];for(o=0,a=r.length;o<a;++o)c=r[o+1],l=r[o-1],h=r[o],Math.round((c+l)/2)!==h&&s.push({time:h,pos:o/(a-1)});return s}_generate(){const t=this.min,i=this.max;let n=super.getDataTimestamps();return(!n.includes(t)||!n.length)&&n.splice(0,0,t),(!n.includes(i)||n.length===1)&&n.push(i),n.sort((r,s)=>r-s)}_getTimestampsForTable(){let t=this._cache.all||[];if(t.length)return t;const i=this.getDataTimestamps(),n=this.getLabelTimestamps();return i.length&&n.length?t=this.normalize(i.concat(n)):t=i.length?i:n,t=this._cache.all=t,t}getDecimalForValue(t){return(ro(this._table,t)-this._minPos)/this._tableRange}getValueForPixel(t){const i=this._offsets,n=this.getDecimalForPixel(t)/i.factor-i.end;return ro(this._table,n*this._tableRange+this._minPos,!0)}}yt(zh,"id","timeseries"),yt(zh,"defaults",xs.defaults);var MS=Object.freeze({__proto__:null,CategoryScale:Uh,LinearScale:jh,LogarithmicScale:Wh,RadialLinearScale:os,TimeScale:xs,TimeSeriesScale:zh});const AS=[Rw,lv,nS,MS];Qi.register(...AS);//! moment.js
//! version : 2.30.1
//! authors : Tim Wood, Iskren Chernev, Moment.js contributors
//! license : MIT
//! momentjs.com
var pm;function At(){return pm.apply(null,arguments)}function TS(e){pm=e}function vi(e){return e instanceof Array||Object.prototype.toString.call(e)==="[object Array]"}function ar(e){return e!=null&&Object.prototype.toString.call(e)==="[object Object]"}function Qt(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function Ac(e){if(Object.getOwnPropertyNames)return Object.getOwnPropertyNames(e).length===0;var t;for(t in e)if(Qt(e,t))return!1;return!0}function Ze(e){return e===void 0}function cn(e){return typeof e=="number"||Object.prototype.toString.call(e)==="[object Number]"}function Rs(e){return e instanceof Date||Object.prototype.toString.call(e)==="[object Date]"}function gm(e,t){var i=[],n,r=e.length;for(n=0;n<r;++n)i.push(t(e[n],n));return i}function En(e,t){for(var i in t)Qt(t,i)&&(e[i]=t[i]);return Qt(t,"toString")&&(e.toString=t.toString),Qt(t,"valueOf")&&(e.valueOf=t.valueOf),e}function Bi(e,t,i,n){return Fm(e,t,i,n,!0).utc()}function OS(){return{empty:!1,unusedTokens:[],unusedInput:[],overflow:-2,charsLeftOver:0,nullInput:!1,invalidEra:null,invalidMonth:null,invalidFormat:!1,userInvalidated:!1,iso:!1,parsedDateParts:[],era:null,meridiem:null,rfc2822:!1,weekdayMismatch:!1}}function Yt(e){return e._pf==null&&(e._pf=OS()),e._pf}var Vh;Array.prototype.some?Vh=Array.prototype.some:Vh=function(e){var t=Object(this),i=t.length>>>0,n;for(n=0;n<i;n++)if(n in t&&e.call(this,t[n],n,t))return!0;return!1};function Tc(e){var t=null,i=!1,n=e._d&&!isNaN(e._d.getTime());if(n&&(t=Yt(e),i=Vh.call(t.parsedDateParts,function(r){return r!=null}),n=t.overflow<0&&!t.empty&&!t.invalidEra&&!t.invalidMonth&&!t.invalidWeekday&&!t.weekdayMismatch&&!t.nullInput&&!t.invalidFormat&&!t.userInvalidated&&(!t.meridiem||t.meridiem&&i),e._strict&&(n=n&&t.charsLeftOver===0&&t.unusedTokens.length===0&&t.bigHour===void 0)),Object.isFrozen==null||!Object.isFrozen(e))e._isValid=n;else return n;return e._isValid}function da(e){var t=Bi(NaN);return e!=null?En(Yt(t),e):Yt(t).userInvalidated=!0,t}var md=At.momentProperties=[],tl=!1;function Oc(e,t){var i,n,r,s=md.length;if(Ze(t._isAMomentObject)||(e._isAMomentObject=t._isAMomentObject),Ze(t._i)||(e._i=t._i),Ze(t._f)||(e._f=t._f),Ze(t._l)||(e._l=t._l),Ze(t._strict)||(e._strict=t._strict),Ze(t._tzm)||(e._tzm=t._tzm),Ze(t._isUTC)||(e._isUTC=t._isUTC),Ze(t._offset)||(e._offset=t._offset),Ze(t._pf)||(e._pf=Yt(t)),Ze(t._locale)||(e._locale=t._locale),s>0)for(i=0;i<s;i++)n=md[i],r=t[n],Ze(r)||(e[n]=r);return e}function Ds(e){Oc(this,e),this._d=new Date(e._d!=null?e._d.getTime():NaN),this.isValid()||(this._d=new Date(NaN)),tl===!1&&(tl=!0,At.updateOffset(this),tl=!1)}function Si(e){return e instanceof Ds||e!=null&&e._isAMomentObject!=null}function mm(e){At.suppressDeprecationWarnings===!1&&typeof console<"u"&&console.warn&&console.warn("Deprecation warning: "+e)}function hi(e,t){var i=!0;return En(function(){if(At.deprecationHandler!=null&&At.deprecationHandler(null,e),i){var n=[],r,s,o,a=arguments.length;for(s=0;s<a;s++){if(r="",typeof arguments[s]=="object"){r+=`
[`+s+"] ";for(o in arguments[0])Qt(arguments[0],o)&&(r+=o+": "+arguments[0][o]+", ");r=r.slice(0,-2)}else r=arguments[s];n.push(r)}mm(e+`
Arguments: `+Array.prototype.slice.call(n).join("")+`
`+new Error().stack),i=!1}return t.apply(this,arguments)},t)}var bd={};function bm(e,t){At.deprecationHandler!=null&&At.deprecationHandler(e,t),bd[e]||(mm(t),bd[e]=!0)}At.suppressDeprecationWarnings=!1;At.deprecationHandler=null;function Ni(e){return typeof Function<"u"&&e instanceof Function||Object.prototype.toString.call(e)==="[object Function]"}function PS(e){var t,i;for(i in e)Qt(e,i)&&(t=e[i],Ni(t)?this[i]=t:this["_"+i]=t);this._config=e,this._dayOfMonthOrdinalParseLenient=new RegExp((this._dayOfMonthOrdinalParse.source||this._ordinalParse.source)+"|"+/\d{1,2}/.source)}function Hh(e,t){var i=En({},e),n;for(n in t)Qt(t,n)&&(ar(e[n])&&ar(t[n])?(i[n]={},En(i[n],e[n]),En(i[n],t[n])):t[n]!=null?i[n]=t[n]:delete i[n]);for(n in e)Qt(e,n)&&!Qt(t,n)&&ar(e[n])&&(i[n]=En({},i[n]));return i}function Pc(e){e!=null&&this.set(e)}var qh;Object.keys?qh=Object.keys:qh=function(e){var t,i=[];for(t in e)Qt(e,t)&&i.push(t);return i};var CS={sameDay:"[Today at] LT",nextDay:"[Tomorrow at] LT",nextWeek:"dddd [at] LT",lastDay:"[Yesterday at] LT",lastWeek:"[Last] dddd [at] LT",sameElse:"L"};function IS(e,t,i){var n=this._calendar[e]||this._calendar.sameElse;return Ni(n)?n.call(t,i):n}function Li(e,t,i){var n=""+Math.abs(e),r=t-n.length,s=e>=0;return(s?i?"+":"":"-")+Math.pow(10,Math.max(0,r)).toString().substr(1)+n}var Cc=/(\[[^\[]*\])|(\\)?([Hh]mm(ss)?|Mo|MM?M?M?|Do|DDDo|DD?D?D?|ddd?d?|do?|w[o|w]?|W[o|W]?|Qo?|N{1,5}|YYYYYY|YYYYY|YYYY|YY|y{2,4}|yo?|gg(ggg?)?|GG(GGG?)?|e|E|a|A|hh?|HH?|kk?|mm?|ss?|S{1,9}|x|X|zz?|ZZ?|.)/g,so=/(\[[^\[]*\])|(\\)?(LTS|LT|LL?L?L?|l{1,4})/g,el={},Ar={};function Dt(e,t,i,n){var r=n;typeof n=="string"&&(r=function(){return this[n]()}),e&&(Ar[e]=r),t&&(Ar[t[0]]=function(){return Li(r.apply(this,arguments),t[1],t[2])}),i&&(Ar[i]=function(){return this.localeData().ordinal(r.apply(this,arguments),e)})}function RS(e){return e.match(/\[[\s\S]/)?e.replace(/^\[|\]$/g,""):e.replace(/\\/g,"")}function DS(e){var t=e.match(Cc),i,n;for(i=0,n=t.length;i<n;i++)Ar[t[i]]?t[i]=Ar[t[i]]:t[i]=RS(t[i]);return function(r){var s="",o;for(o=0;o<n;o++)s+=Ni(t[o])?t[o].call(r,e):t[o];return s}}function Po(e,t){return e.isValid()?(t=ym(t,e.localeData()),el[t]=el[t]||DS(t),el[t](e)):e.localeData().invalidDate()}function ym(e,t){var i=5;function n(r){return t.longDateFormat(r)||r}for(so.lastIndex=0;i>=0&&so.test(e);)e=e.replace(so,n),so.lastIndex=0,i-=1;return e}var LS={LTS:"h:mm:ss A",LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D, YYYY",LLL:"MMMM D, YYYY h:mm A",LLLL:"dddd, MMMM D, YYYY h:mm A"};function BS(e){var t=this._longDateFormat[e],i=this._longDateFormat[e.toUpperCase()];return t||!i?t:(this._longDateFormat[e]=i.match(Cc).map(function(n){return n==="MMMM"||n==="MM"||n==="DD"||n==="dddd"?n.slice(1):n}).join(""),this._longDateFormat[e])}var NS="Invalid date";function FS(){return this._invalidDate}var US="%d",jS=/\d{1,2}/;function WS(e){return this._ordinal.replace("%d",e)}var YS={future:"in %s",past:"%s ago",s:"a few seconds",ss:"%d seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",w:"a week",ww:"%d weeks",M:"a month",MM:"%d months",y:"a year",yy:"%d years"};function zS(e,t,i,n){var r=this._relativeTime[i];return Ni(r)?r(e,t,i,n):r.replace(/%d/i,e)}function VS(e,t){var i=this._relativeTime[e>0?"future":"past"];return Ni(i)?i(t):i.replace(/%s/i,t)}var yd={D:"date",dates:"date",date:"date",d:"day",days:"day",day:"day",e:"weekday",weekdays:"weekday",weekday:"weekday",E:"isoWeekday",isoweekdays:"isoWeekday",isoweekday:"isoWeekday",DDD:"dayOfYear",dayofyears:"dayOfYear",dayofyear:"dayOfYear",h:"hour",hours:"hour",hour:"hour",ms:"millisecond",milliseconds:"millisecond",millisecond:"millisecond",m:"minute",minutes:"minute",minute:"minute",M:"month",months:"month",month:"month",Q:"quarter",quarters:"quarter",quarter:"quarter",s:"second",seconds:"second",second:"second",gg:"weekYear",weekyears:"weekYear",weekyear:"weekYear",GG:"isoWeekYear",isoweekyears:"isoWeekYear",isoweekyear:"isoWeekYear",w:"week",weeks:"week",week:"week",W:"isoWeek",isoweeks:"isoWeek",isoweek:"isoWeek",y:"year",years:"year",year:"year"};function ci(e){return typeof e=="string"?yd[e]||yd[e.toLowerCase()]:void 0}function Ic(e){var t={},i,n;for(n in e)Qt(e,n)&&(i=ci(n),i&&(t[i]=e[n]));return t}var HS={date:9,day:11,weekday:11,isoWeekday:11,dayOfYear:4,hour:13,millisecond:16,minute:14,month:8,quarter:7,second:15,weekYear:1,isoWeekYear:1,week:5,isoWeek:5,year:1};function qS(e){var t=[],i;for(i in e)Qt(e,i)&&t.push({unit:i,priority:HS[i]});return t.sort(function(n,r){return n.priority-r.priority}),t}var _m=/\d/,si=/\d\d/,wm=/\d{3}/,Rc=/\d{4}/,pa=/[+-]?\d{6}/,pe=/\d\d?/,vm=/\d\d\d\d?/,Sm=/\d\d\d\d\d\d?/,ga=/\d{1,3}/,Dc=/\d{1,4}/,ma=/[+-]?\d{1,6}/,Nr=/\d+/,ba=/[+-]?\d+/,$S=/Z|[+-]\d\d:?\d\d/gi,ya=/Z|[+-]\d\d(?::?\d\d)?/gi,GS=/[+-]?\d+(\.\d{1,3})?/,Ls=/[0-9]{0,256}['a-z\u00A0-\u05FF\u0700-\uD7FF\uF900-\uFDCF\uFDF0-\uFF07\uFF10-\uFFEF]{1,256}|[\u0600-\u06FF\/]{1,256}(\s*?[\u0600-\u06FF]{1,256}){1,2}/i,Fr=/^[1-9]\d?/,Lc=/^([1-9]\d|\d)/,Xo;Xo={};function Pt(e,t,i){Xo[e]=Ni(t)?t:function(n,r){return n&&i?i:t}}function KS(e,t){return Qt(Xo,e)?Xo[e](t._strict,t._locale):new RegExp(QS(e))}function QS(e){return sn(e.replace("\\","").replace(/\\(\[)|\\(\])|\[([^\]\[]*)\]|\\(.)/g,function(t,i,n,r,s){return i||n||r||s}))}function sn(e){return e.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&")}function li(e){return e<0?Math.ceil(e)||0:Math.floor(e)}function qt(e){var t=+e,i=0;return t!==0&&isFinite(t)&&(i=li(t)),i}var $h={};function se(e,t){var i,n=t,r;for(typeof e=="string"&&(e=[e]),cn(t)&&(n=function(s,o){o[t]=qt(s)}),r=e.length,i=0;i<r;i++)$h[e[i]]=n}function Bs(e,t){se(e,function(i,n,r,s){r._w=r._w||{},t(i,r._w,r,s)})}function XS(e,t,i){t!=null&&Qt($h,e)&&$h[e](t,i._a,i,e)}function _a(e){return e%4===0&&e%100!==0||e%400===0}var $e=0,nn=1,Ti=2,Ie=3,bi=4,rn=5,Jn=6,ZS=7,JS=8;Dt("Y",0,0,function(){var e=this.year();return e<=9999?Li(e,4):"+"+e});Dt(0,["YY",2],0,function(){return this.year()%100});Dt(0,["YYYY",4],0,"year");Dt(0,["YYYYY",5],0,"year");Dt(0,["YYYYYY",6,!0],0,"year");Pt("Y",ba);Pt("YY",pe,si);Pt("YYYY",Dc,Rc);Pt("YYYYY",ma,pa);Pt("YYYYYY",ma,pa);se(["YYYYY","YYYYYY"],$e);se("YYYY",function(e,t){t[$e]=e.length===2?At.parseTwoDigitYear(e):qt(e)});se("YY",function(e,t){t[$e]=At.parseTwoDigitYear(e)});se("Y",function(e,t){t[$e]=parseInt(e,10)});function gs(e){return _a(e)?366:365}At.parseTwoDigitYear=function(e){return qt(e)+(qt(e)>68?1900:2e3)};var xm=Ur("FullYear",!0);function tx(){return _a(this.year())}function Ur(e,t){return function(i){return i!=null?(km(this,e,i),At.updateOffset(this,t),this):ks(this,e)}}function ks(e,t){if(!e.isValid())return NaN;var i=e._d,n=e._isUTC;switch(t){case"Milliseconds":return n?i.getUTCMilliseconds():i.getMilliseconds();case"Seconds":return n?i.getUTCSeconds():i.getSeconds();case"Minutes":return n?i.getUTCMinutes():i.getMinutes();case"Hours":return n?i.getUTCHours():i.getHours();case"Date":return n?i.getUTCDate():i.getDate();case"Day":return n?i.getUTCDay():i.getDay();case"Month":return n?i.getUTCMonth():i.getMonth();case"FullYear":return n?i.getUTCFullYear():i.getFullYear();default:return NaN}}function km(e,t,i){var n,r,s,o,a;if(!(!e.isValid()||isNaN(i))){switch(n=e._d,r=e._isUTC,t){case"Milliseconds":return void(r?n.setUTCMilliseconds(i):n.setMilliseconds(i));case"Seconds":return void(r?n.setUTCSeconds(i):n.setSeconds(i));case"Minutes":return void(r?n.setUTCMinutes(i):n.setMinutes(i));case"Hours":return void(r?n.setUTCHours(i):n.setHours(i));case"Date":return void(r?n.setUTCDate(i):n.setDate(i));case"FullYear":break;default:return}s=i,o=e.month(),a=e.date(),a=a===29&&o===1&&!_a(s)?28:a,r?n.setUTCFullYear(s,o,a):n.setFullYear(s,o,a)}}function ex(e){return e=ci(e),Ni(this[e])?this[e]():this}function ix(e,t){if(typeof e=="object"){e=Ic(e);var i=qS(e),n,r=i.length;for(n=0;n<r;n++)this[i[n].unit](e[i[n].unit])}else if(e=ci(e),Ni(this[e]))return this[e](t);return this}function nx(e,t){return(e%t+t)%t}var Me;Array.prototype.indexOf?Me=Array.prototype.indexOf:Me=function(e){var t;for(t=0;t<this.length;++t)if(this[t]===e)return t;return-1};function Bc(e,t){if(isNaN(e)||isNaN(t))return NaN;var i=nx(t,12);return e+=(t-i)/12,i===1?_a(e)?29:28:31-i%7%2}Dt("M",["MM",2],"Mo",function(){return this.month()+1});Dt("MMM",0,0,function(e){return this.localeData().monthsShort(this,e)});Dt("MMMM",0,0,function(e){return this.localeData().months(this,e)});Pt("M",pe,Fr);Pt("MM",pe,si);Pt("MMM",function(e,t){return t.monthsShortRegex(e)});Pt("MMMM",function(e,t){return t.monthsRegex(e)});se(["M","MM"],function(e,t){t[nn]=qt(e)-1});se(["MMM","MMMM"],function(e,t,i,n){var r=i._locale.monthsParse(e,n,i._strict);r!=null?t[nn]=r:Yt(i).invalidMonth=e});var rx="January_February_March_April_May_June_July_August_September_October_November_December".split("_"),Em="Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_"),Mm=/D[oD]?(\[[^\[\]]*\]|\s)+MMMM?/,sx=Ls,ox=Ls;function ax(e,t){return e?vi(this._months)?this._months[e.month()]:this._months[(this._months.isFormat||Mm).test(t)?"format":"standalone"][e.month()]:vi(this._months)?this._months:this._months.standalone}function lx(e,t){return e?vi(this._monthsShort)?this._monthsShort[e.month()]:this._monthsShort[Mm.test(t)?"format":"standalone"][e.month()]:vi(this._monthsShort)?this._monthsShort:this._monthsShort.standalone}function hx(e,t,i){var n,r,s,o=e.toLocaleLowerCase();if(!this._monthsParse)for(this._monthsParse=[],this._longMonthsParse=[],this._shortMonthsParse=[],n=0;n<12;++n)s=Bi([2e3,n]),this._shortMonthsParse[n]=this.monthsShort(s,"").toLocaleLowerCase(),this._longMonthsParse[n]=this.months(s,"").toLocaleLowerCase();return i?t==="MMM"?(r=Me.call(this._shortMonthsParse,o),r!==-1?r:null):(r=Me.call(this._longMonthsParse,o),r!==-1?r:null):t==="MMM"?(r=Me.call(this._shortMonthsParse,o),r!==-1?r:(r=Me.call(this._longMonthsParse,o),r!==-1?r:null)):(r=Me.call(this._longMonthsParse,o),r!==-1?r:(r=Me.call(this._shortMonthsParse,o),r!==-1?r:null))}function cx(e,t,i){var n,r,s;if(this._monthsParseExact)return hx.call(this,e,t,i);for(this._monthsParse||(this._monthsParse=[],this._longMonthsParse=[],this._shortMonthsParse=[]),n=0;n<12;n++){if(r=Bi([2e3,n]),i&&!this._longMonthsParse[n]&&(this._longMonthsParse[n]=new RegExp("^"+this.months(r,"").replace(".","")+"$","i"),this._shortMonthsParse[n]=new RegExp("^"+this.monthsShort(r,"").replace(".","")+"$","i")),!i&&!this._monthsParse[n]&&(s="^"+this.months(r,"")+"|^"+this.monthsShort(r,""),this._monthsParse[n]=new RegExp(s.replace(".",""),"i")),i&&t==="MMMM"&&this._longMonthsParse[n].test(e))return n;if(i&&t==="MMM"&&this._shortMonthsParse[n].test(e))return n;if(!i&&this._monthsParse[n].test(e))return n}}function Am(e,t){if(!e.isValid())return e;if(typeof t=="string"){if(/^\d+$/.test(t))t=qt(t);else if(t=e.localeData().monthsParse(t),!cn(t))return e}var i=t,n=e.date();return n=n<29?n:Math.min(n,Bc(e.year(),i)),e._isUTC?e._d.setUTCMonth(i,n):e._d.setMonth(i,n),e}function Tm(e){return e!=null?(Am(this,e),At.updateOffset(this,!0),this):ks(this,"Month")}function ux(){return Bc(this.year(),this.month())}function fx(e){return this._monthsParseExact?(Qt(this,"_monthsRegex")||Om.call(this),e?this._monthsShortStrictRegex:this._monthsShortRegex):(Qt(this,"_monthsShortRegex")||(this._monthsShortRegex=sx),this._monthsShortStrictRegex&&e?this._monthsShortStrictRegex:this._monthsShortRegex)}function dx(e){return this._monthsParseExact?(Qt(this,"_monthsRegex")||Om.call(this),e?this._monthsStrictRegex:this._monthsRegex):(Qt(this,"_monthsRegex")||(this._monthsRegex=ox),this._monthsStrictRegex&&e?this._monthsStrictRegex:this._monthsRegex)}function Om(){function e(l,h){return h.length-l.length}var t=[],i=[],n=[],r,s,o,a;for(r=0;r<12;r++)s=Bi([2e3,r]),o=sn(this.monthsShort(s,"")),a=sn(this.months(s,"")),t.push(o),i.push(a),n.push(a),n.push(o);t.sort(e),i.sort(e),n.sort(e),this._monthsRegex=new RegExp("^("+n.join("|")+")","i"),this._monthsShortRegex=this._monthsRegex,this._monthsStrictRegex=new RegExp("^("+i.join("|")+")","i"),this._monthsShortStrictRegex=new RegExp("^("+t.join("|")+")","i")}function px(e,t,i,n,r,s,o){var a;return e<100&&e>=0?(a=new Date(e+400,t,i,n,r,s,o),isFinite(a.getFullYear())&&a.setFullYear(e)):a=new Date(e,t,i,n,r,s,o),a}function Es(e){var t,i;return e<100&&e>=0?(i=Array.prototype.slice.call(arguments),i[0]=e+400,t=new Date(Date.UTC.apply(null,i)),isFinite(t.getUTCFullYear())&&t.setUTCFullYear(e)):t=new Date(Date.UTC.apply(null,arguments)),t}function Zo(e,t,i){var n=7+t-i,r=(7+Es(e,0,n).getUTCDay()-t)%7;return-r+n-1}function Pm(e,t,i,n,r){var s=(7+i-n)%7,o=Zo(e,n,r),a=1+7*(t-1)+s+o,l,h;return a<=0?(l=e-1,h=gs(l)+a):a>gs(e)?(l=e+1,h=a-gs(e)):(l=e,h=a),{year:l,dayOfYear:h}}function Ms(e,t,i){var n=Zo(e.year(),t,i),r=Math.floor((e.dayOfYear()-n-1)/7)+1,s,o;return r<1?(o=e.year()-1,s=r+on(o,t,i)):r>on(e.year(),t,i)?(s=r-on(e.year(),t,i),o=e.year()+1):(o=e.year(),s=r),{week:s,year:o}}function on(e,t,i){var n=Zo(e,t,i),r=Zo(e+1,t,i);return(gs(e)-n+r)/7}Dt("w",["ww",2],"wo","week");Dt("W",["WW",2],"Wo","isoWeek");Pt("w",pe,Fr);Pt("ww",pe,si);Pt("W",pe,Fr);Pt("WW",pe,si);Bs(["w","ww","W","WW"],function(e,t,i,n){t[n.substr(0,1)]=qt(e)});function gx(e){return Ms(e,this._week.dow,this._week.doy).week}var mx={dow:0,doy:6};function bx(){return this._week.dow}function yx(){return this._week.doy}function _x(e){var t=this.localeData().week(this);return e==null?t:this.add((e-t)*7,"d")}function vx(e){var t=Ms(this,1,4).week;return e==null?t:this.add((e-t)*7,"d")}Dt("d",0,"do","day");Dt("dd",0,0,function(e){return this.localeData().weekdaysMin(this,e)});Dt("ddd",0,0,function(e){return this.localeData().weekdaysShort(this,e)});Dt("dddd",0,0,function(e){return this.localeData().weekdays(this,e)});Dt("e",0,0,"weekday");Dt("E",0,0,"isoWeekday");Pt("d",pe);Pt("e",pe);Pt("E",pe);Pt("dd",function(e,t){return t.weekdaysMinRegex(e)});Pt("ddd",function(e,t){return t.weekdaysShortRegex(e)});Pt("dddd",function(e,t){return t.weekdaysRegex(e)});Bs(["dd","ddd","dddd"],function(e,t,i,n){var r=i._locale.weekdaysParse(e,n,i._strict);r!=null?t.d=r:Yt(i).invalidWeekday=e});Bs(["d","e","E"],function(e,t,i,n){t[n]=qt(e)});function Sx(e,t){return typeof e!="string"?e:isNaN(e)?(e=t.weekdaysParse(e),typeof e=="number"?e:null):parseInt(e,10)}function xx(e,t){return typeof e=="string"?t.weekdaysParse(e)%7||7:isNaN(e)?null:e}function Nc(e,t){return e.slice(t,7).concat(e.slice(0,t))}var kx="Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),Cm="Sun_Mon_Tue_Wed_Thu_Fri_Sat".split("_"),Ex="Su_Mo_Tu_We_Th_Fr_Sa".split("_"),Mx=Ls,Ax=Ls,Tx=Ls;function Ox(e,t){var i=vi(this._weekdays)?this._weekdays:this._weekdays[e&&e!==!0&&this._weekdays.isFormat.test(t)?"format":"standalone"];return e===!0?Nc(i,this._week.dow):e?i[e.day()]:i}function Px(e){return e===!0?Nc(this._weekdaysShort,this._week.dow):e?this._weekdaysShort[e.day()]:this._weekdaysShort}function Cx(e){return e===!0?Nc(this._weekdaysMin,this._week.dow):e?this._weekdaysMin[e.day()]:this._weekdaysMin}function Ix(e,t,i){var n,r,s,o=e.toLocaleLowerCase();if(!this._weekdaysParse)for(this._weekdaysParse=[],this._shortWeekdaysParse=[],this._minWeekdaysParse=[],n=0;n<7;++n)s=Bi([2e3,1]).day(n),this._minWeekdaysParse[n]=this.weekdaysMin(s,"").toLocaleLowerCase(),this._shortWeekdaysParse[n]=this.weekdaysShort(s,"").toLocaleLowerCase(),this._weekdaysParse[n]=this.weekdays(s,"").toLocaleLowerCase();return i?t==="dddd"?(r=Me.call(this._weekdaysParse,o),r!==-1?r:null):t==="ddd"?(r=Me.call(this._shortWeekdaysParse,o),r!==-1?r:null):(r=Me.call(this._minWeekdaysParse,o),r!==-1?r:null):t==="dddd"?(r=Me.call(this._weekdaysParse,o),r!==-1||(r=Me.call(this._shortWeekdaysParse,o),r!==-1)?r:(r=Me.call(this._minWeekdaysParse,o),r!==-1?r:null)):t==="ddd"?(r=Me.call(this._shortWeekdaysParse,o),r!==-1||(r=Me.call(this._weekdaysParse,o),r!==-1)?r:(r=Me.call(this._minWeekdaysParse,o),r!==-1?r:null)):(r=Me.call(this._minWeekdaysParse,o),r!==-1||(r=Me.call(this._weekdaysParse,o),r!==-1)?r:(r=Me.call(this._shortWeekdaysParse,o),r!==-1?r:null))}function Rx(e,t,i){var n,r,s;if(this._weekdaysParseExact)return Ix.call(this,e,t,i);for(this._weekdaysParse||(this._weekdaysParse=[],this._minWeekdaysParse=[],this._shortWeekdaysParse=[],this._fullWeekdaysParse=[]),n=0;n<7;n++){if(r=Bi([2e3,1]).day(n),i&&!this._fullWeekdaysParse[n]&&(this._fullWeekdaysParse[n]=new RegExp("^"+this.weekdays(r,"").replace(".","\\.?")+"$","i"),this._shortWeekdaysParse[n]=new RegExp("^"+this.weekdaysShort(r,"").replace(".","\\.?")+"$","i"),this._minWeekdaysParse[n]=new RegExp("^"+this.weekdaysMin(r,"").replace(".","\\.?")+"$","i")),this._weekdaysParse[n]||(s="^"+this.weekdays(r,"")+"|^"+this.weekdaysShort(r,"")+"|^"+this.weekdaysMin(r,""),this._weekdaysParse[n]=new RegExp(s.replace(".",""),"i")),i&&t==="dddd"&&this._fullWeekdaysParse[n].test(e))return n;if(i&&t==="ddd"&&this._shortWeekdaysParse[n].test(e))return n;if(i&&t==="dd"&&this._minWeekdaysParse[n].test(e))return n;if(!i&&this._weekdaysParse[n].test(e))return n}}function Dx(e){if(!this.isValid())return e!=null?this:NaN;var t=ks(this,"Day");return e!=null?(e=Sx(e,this.localeData()),this.add(e-t,"d")):t}function Lx(e){if(!this.isValid())return e!=null?this:NaN;var t=(this.day()+7-this.localeData()._week.dow)%7;return e==null?t:this.add(e-t,"d")}function Bx(e){if(!this.isValid())return e!=null?this:NaN;if(e!=null){var t=xx(e,this.localeData());return this.day(this.day()%7?t:t-7)}else return this.day()||7}function Nx(e){return this._weekdaysParseExact?(Qt(this,"_weekdaysRegex")||Fc.call(this),e?this._weekdaysStrictRegex:this._weekdaysRegex):(Qt(this,"_weekdaysRegex")||(this._weekdaysRegex=Mx),this._weekdaysStrictRegex&&e?this._weekdaysStrictRegex:this._weekdaysRegex)}function Fx(e){return this._weekdaysParseExact?(Qt(this,"_weekdaysRegex")||Fc.call(this),e?this._weekdaysShortStrictRegex:this._weekdaysShortRegex):(Qt(this,"_weekdaysShortRegex")||(this._weekdaysShortRegex=Ax),this._weekdaysShortStrictRegex&&e?this._weekdaysShortStrictRegex:this._weekdaysShortRegex)}function Ux(e){return this._weekdaysParseExact?(Qt(this,"_weekdaysRegex")||Fc.call(this),e?this._weekdaysMinStrictRegex:this._weekdaysMinRegex):(Qt(this,"_weekdaysMinRegex")||(this._weekdaysMinRegex=Tx),this._weekdaysMinStrictRegex&&e?this._weekdaysMinStrictRegex:this._weekdaysMinRegex)}function Fc(){function e(c,u){return u.length-c.length}var t=[],i=[],n=[],r=[],s,o,a,l,h;for(s=0;s<7;s++)o=Bi([2e3,1]).day(s),a=sn(this.weekdaysMin(o,"")),l=sn(this.weekdaysShort(o,"")),h=sn(this.weekdays(o,"")),t.push(a),i.push(l),n.push(h),r.push(a),r.push(l),r.push(h);t.sort(e),i.sort(e),n.sort(e),r.sort(e),this._weekdaysRegex=new RegExp("^("+r.join("|")+")","i"),this._weekdaysShortRegex=this._weekdaysRegex,this._weekdaysMinRegex=this._weekdaysRegex,this._weekdaysStrictRegex=new RegExp("^("+n.join("|")+")","i"),this._weekdaysShortStrictRegex=new RegExp("^("+i.join("|")+")","i"),this._weekdaysMinStrictRegex=new RegExp("^("+t.join("|")+")","i")}function Uc(){return this.hours()%12||12}function jx(){return this.hours()||24}Dt("H",["HH",2],0,"hour");Dt("h",["hh",2],0,Uc);Dt("k",["kk",2],0,jx);Dt("hmm",0,0,function(){return""+Uc.apply(this)+Li(this.minutes(),2)});Dt("hmmss",0,0,function(){return""+Uc.apply(this)+Li(this.minutes(),2)+Li(this.seconds(),2)});Dt("Hmm",0,0,function(){return""+this.hours()+Li(this.minutes(),2)});Dt("Hmmss",0,0,function(){return""+this.hours()+Li(this.minutes(),2)+Li(this.seconds(),2)});function Im(e,t){Dt(e,0,0,function(){return this.localeData().meridiem(this.hours(),this.minutes(),t)})}Im("a",!0);Im("A",!1);function Rm(e,t){return t._meridiemParse}Pt("a",Rm);Pt("A",Rm);Pt("H",pe,Lc);Pt("h",pe,Fr);Pt("k",pe,Fr);Pt("HH",pe,si);Pt("hh",pe,si);Pt("kk",pe,si);Pt("hmm",vm);Pt("hmmss",Sm);Pt("Hmm",vm);Pt("Hmmss",Sm);se(["H","HH"],Ie);se(["k","kk"],function(e,t,i){var n=qt(e);t[Ie]=n===24?0:n});se(["a","A"],function(e,t,i){i._isPm=i._locale.isPM(e),i._meridiem=e});se(["h","hh"],function(e,t,i){t[Ie]=qt(e),Yt(i).bigHour=!0});se("hmm",function(e,t,i){var n=e.length-2;t[Ie]=qt(e.substr(0,n)),t[bi]=qt(e.substr(n)),Yt(i).bigHour=!0});se("hmmss",function(e,t,i){var n=e.length-4,r=e.length-2;t[Ie]=qt(e.substr(0,n)),t[bi]=qt(e.substr(n,2)),t[rn]=qt(e.substr(r)),Yt(i).bigHour=!0});se("Hmm",function(e,t,i){var n=e.length-2;t[Ie]=qt(e.substr(0,n)),t[bi]=qt(e.substr(n))});se("Hmmss",function(e,t,i){var n=e.length-4,r=e.length-2;t[Ie]=qt(e.substr(0,n)),t[bi]=qt(e.substr(n,2)),t[rn]=qt(e.substr(r))});function Wx(e){return(e+"").toLowerCase().charAt(0)==="p"}var Yx=/[ap]\.?m?\.?/i,zx=Ur("Hours",!0);function Vx(e,t,i){return e>11?i?"pm":"PM":i?"am":"AM"}var Dm={calendar:CS,longDateFormat:LS,invalidDate:NS,ordinal:US,dayOfMonthOrdinalParse:jS,relativeTime:YS,months:rx,monthsShort:Em,week:mx,weekdays:kx,weekdaysMin:Ex,weekdaysShort:Cm,meridiemParse:Yx},ye={},Kr={},As;function Hx(e,t){var i,n=Math.min(e.length,t.length);for(i=0;i<n;i+=1)if(e[i]!==t[i])return i;return n}function _d(e){return e&&e.toLowerCase().replace("_","-")}function qx(e){for(var t=0,i,n,r,s;t<e.length;){for(s=_d(e[t]).split("-"),i=s.length,n=_d(e[t+1]),n=n?n.split("-"):null;i>0;){if(r=wa(s.slice(0,i).join("-")),r)return r;if(n&&n.length>=i&&Hx(s,n)>=i-1)break;i--}t++}return As}function $x(e){return!!(e&&e.match("^[^/\\\\]*$"))}function wa(e){var t=null,i;if(ye[e]===void 0&&typeof module<"u"&&module&&module.exports&&$x(e))try{t=As._abbr,i=require,i("./locale/"+e),Tn(t)}catch{ye[e]=null}return ye[e]}function Tn(e,t){var i;return e&&(Ze(t)?i=pn(e):i=jc(e,t),i?As=i:typeof console<"u"&&console.warn&&console.warn("Locale "+e+" not found. Did you forget to load it?")),As._abbr}function jc(e,t){if(t!==null){var i,n=Dm;if(t.abbr=e,ye[e]!=null)bm("defineLocaleOverride","use moment.updateLocale(localeName, config) to change an existing locale. moment.defineLocale(localeName, config) should only be used for creating a new locale See http://momentjs.com/guides/#/warnings/define-locale/ for more info."),n=ye[e]._config;else if(t.parentLocale!=null)if(ye[t.parentLocale]!=null)n=ye[t.parentLocale]._config;else if(i=wa(t.parentLocale),i!=null)n=i._config;else return Kr[t.parentLocale]||(Kr[t.parentLocale]=[]),Kr[t.parentLocale].push({name:e,config:t}),null;return ye[e]=new Pc(Hh(n,t)),Kr[e]&&Kr[e].forEach(function(r){jc(r.name,r.config)}),Tn(e),ye[e]}else return delete ye[e],null}function Gx(e,t){if(t!=null){var i,n,r=Dm;ye[e]!=null&&ye[e].parentLocale!=null?ye[e].set(Hh(ye[e]._config,t)):(n=wa(e),n!=null&&(r=n._config),t=Hh(r,t),n==null&&(t.abbr=e),i=new Pc(t),i.parentLocale=ye[e],ye[e]=i),Tn(e)}else ye[e]!=null&&(ye[e].parentLocale!=null?(ye[e]=ye[e].parentLocale,e===Tn()&&Tn(e)):ye[e]!=null&&delete ye[e]);return ye[e]}function pn(e){var t;if(e&&e._locale&&e._locale._abbr&&(e=e._locale._abbr),!e)return As;if(!vi(e)){if(t=wa(e),t)return t;e=[e]}return qx(e)}function Kx(){return qh(ye)}function Wc(e){var t,i=e._a;return i&&Yt(e).overflow===-2&&(t=i[nn]<0||i[nn]>11?nn:i[Ti]<1||i[Ti]>Bc(i[$e],i[nn])?Ti:i[Ie]<0||i[Ie]>24||i[Ie]===24&&(i[bi]!==0||i[rn]!==0||i[Jn]!==0)?Ie:i[bi]<0||i[bi]>59?bi:i[rn]<0||i[rn]>59?rn:i[Jn]<0||i[Jn]>999?Jn:-1,Yt(e)._overflowDayOfYear&&(t<$e||t>Ti)&&(t=Ti),Yt(e)._overflowWeeks&&t===-1&&(t=ZS),Yt(e)._overflowWeekday&&t===-1&&(t=JS),Yt(e).overflow=t),e}var Qx=/^\s*((?:[+-]\d{6}|\d{4})-(?:\d\d-\d\d|W\d\d-\d|W\d\d|\d\d\d|\d\d))(?:(T| )(\d\d(?::\d\d(?::\d\d(?:[.,]\d+)?)?)?)([+-]\d\d(?::?\d\d)?|\s*Z)?)?$/,Xx=/^\s*((?:[+-]\d{6}|\d{4})(?:\d\d\d\d|W\d\d\d|W\d\d|\d\d\d|\d\d|))(?:(T| )(\d\d(?:\d\d(?:\d\d(?:[.,]\d+)?)?)?)([+-]\d\d(?::?\d\d)?|\s*Z)?)?$/,Zx=/Z|[+-]\d\d(?::?\d\d)?/,oo=[["YYYYYY-MM-DD",/[+-]\d{6}-\d\d-\d\d/],["YYYY-MM-DD",/\d{4}-\d\d-\d\d/],["GGGG-[W]WW-E",/\d{4}-W\d\d-\d/],["GGGG-[W]WW",/\d{4}-W\d\d/,!1],["YYYY-DDD",/\d{4}-\d{3}/],["YYYY-MM",/\d{4}-\d\d/,!1],["YYYYYYMMDD",/[+-]\d{10}/],["YYYYMMDD",/\d{8}/],["GGGG[W]WWE",/\d{4}W\d{3}/],["GGGG[W]WW",/\d{4}W\d{2}/,!1],["YYYYDDD",/\d{7}/],["YYYYMM",/\d{6}/,!1],["YYYY",/\d{4}/,!1]],il=[["HH:mm:ss.SSSS",/\d\d:\d\d:\d\d\.\d+/],["HH:mm:ss,SSSS",/\d\d:\d\d:\d\d,\d+/],["HH:mm:ss",/\d\d:\d\d:\d\d/],["HH:mm",/\d\d:\d\d/],["HHmmss.SSSS",/\d\d\d\d\d\d\.\d+/],["HHmmss,SSSS",/\d\d\d\d\d\d,\d+/],["HHmmss",/\d\d\d\d\d\d/],["HHmm",/\d\d\d\d/],["HH",/\d\d/]],Jx=/^\/?Date\((-?\d+)/i,tk=/^(?:(Mon|Tue|Wed|Thu|Fri|Sat|Sun),?\s)?(\d{1,2})\s(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)\s(\d{2,4})\s(\d\d):(\d\d)(?::(\d\d))?\s(?:(UT|GMT|[ECMP][SD]T)|([Zz])|([+-]\d{4}))$/,ek={UT:0,GMT:0,EDT:-4*60,EST:-5*60,CDT:-5*60,CST:-6*60,MDT:-6*60,MST:-7*60,PDT:-7*60,PST:-8*60};function Lm(e){var t,i,n=e._i,r=Qx.exec(n)||Xx.exec(n),s,o,a,l,h=oo.length,c=il.length;if(r){for(Yt(e).iso=!0,t=0,i=h;t<i;t++)if(oo[t][1].exec(r[1])){o=oo[t][0],s=oo[t][2]!==!1;break}if(o==null){e._isValid=!1;return}if(r[3]){for(t=0,i=c;t<i;t++)if(il[t][1].exec(r[3])){a=(r[2]||" ")+il[t][0];break}if(a==null){e._isValid=!1;return}}if(!s&&a!=null){e._isValid=!1;return}if(r[4])if(Zx.exec(r[4]))l="Z";else{e._isValid=!1;return}e._f=o+(a||"")+(l||""),zc(e)}else e._isValid=!1}function ik(e,t,i,n,r,s){var o=[nk(e),Em.indexOf(t),parseInt(i,10),parseInt(n,10),parseInt(r,10)];return s&&o.push(parseInt(s,10)),o}function nk(e){var t=parseInt(e,10);return t<=49?2e3+t:t<=999?1900+t:t}function rk(e){return e.replace(/\([^()]*\)|[\n\t]/g," ").replace(/(\s\s+)/g," ").replace(/^\s\s*/,"").replace(/\s\s*$/,"")}function sk(e,t,i){if(e){var n=Cm.indexOf(e),r=new Date(t[0],t[1],t[2]).getDay();if(n!==r)return Yt(i).weekdayMismatch=!0,i._isValid=!1,!1}return!0}function ok(e,t,i){if(e)return ek[e];if(t)return 0;var n=parseInt(i,10),r=n%100,s=(n-r)/100;return s*60+r}function Bm(e){var t=tk.exec(rk(e._i)),i;if(t){if(i=ik(t[4],t[3],t[2],t[5],t[6],t[7]),!sk(t[1],i,e))return;e._a=i,e._tzm=ok(t[8],t[9],t[10]),e._d=Es.apply(null,e._a),e._d.setUTCMinutes(e._d.getUTCMinutes()-e._tzm),Yt(e).rfc2822=!0}else e._isValid=!1}function ak(e){var t=Jx.exec(e._i);if(t!==null){e._d=new Date(+t[1]);return}if(Lm(e),e._isValid===!1)delete e._isValid;else return;if(Bm(e),e._isValid===!1)delete e._isValid;else return;e._strict?e._isValid=!1:At.createFromInputFallback(e)}At.createFromInputFallback=hi("value provided is not in a recognized RFC2822 or ISO format. moment construction falls back to js Date(), which is not reliable across all browsers and versions. Non RFC2822/ISO date formats are discouraged. Please refer to http://momentjs.com/guides/#/warnings/js-date/ for more info.",function(e){e._d=new Date(e._i+(e._useUTC?" UTC":""))});function xr(e,t,i){return e??t??i}function lk(e){var t=new Date(At.now());return e._useUTC?[t.getUTCFullYear(),t.getUTCMonth(),t.getUTCDate()]:[t.getFullYear(),t.getMonth(),t.getDate()]}function Yc(e){var t,i,n=[],r,s,o;if(!e._d){for(r=lk(e),e._w&&e._a[Ti]==null&&e._a[nn]==null&&hk(e),e._dayOfYear!=null&&(o=xr(e._a[$e],r[$e]),(e._dayOfYear>gs(o)||e._dayOfYear===0)&&(Yt(e)._overflowDayOfYear=!0),i=Es(o,0,e._dayOfYear),e._a[nn]=i.getUTCMonth(),e._a[Ti]=i.getUTCDate()),t=0;t<3&&e._a[t]==null;++t)e._a[t]=n[t]=r[t];for(;t<7;t++)e._a[t]=n[t]=e._a[t]==null?t===2?1:0:e._a[t];e._a[Ie]===24&&e._a[bi]===0&&e._a[rn]===0&&e._a[Jn]===0&&(e._nextDay=!0,e._a[Ie]=0),e._d=(e._useUTC?Es:px).apply(null,n),s=e._useUTC?e._d.getUTCDay():e._d.getDay(),e._tzm!=null&&e._d.setUTCMinutes(e._d.getUTCMinutes()-e._tzm),e._nextDay&&(e._a[Ie]=24),e._w&&typeof e._w.d<"u"&&e._w.d!==s&&(Yt(e).weekdayMismatch=!0)}}function hk(e){var t,i,n,r,s,o,a,l,h;t=e._w,t.GG!=null||t.W!=null||t.E!=null?(s=1,o=4,i=xr(t.GG,e._a[$e],Ms(de(),1,4).year),n=xr(t.W,1),r=xr(t.E,1),(r<1||r>7)&&(l=!0)):(s=e._locale._week.dow,o=e._locale._week.doy,h=Ms(de(),s,o),i=xr(t.gg,e._a[$e],h.year),n=xr(t.w,h.week),t.d!=null?(r=t.d,(r<0||r>6)&&(l=!0)):t.e!=null?(r=t.e+s,(t.e<0||t.e>6)&&(l=!0)):r=s),n<1||n>on(i,s,o)?Yt(e)._overflowWeeks=!0:l!=null?Yt(e)._overflowWeekday=!0:(a=Pm(i,n,r,s,o),e._a[$e]=a.year,e._dayOfYear=a.dayOfYear)}At.ISO_8601=function(){};At.RFC_2822=function(){};function zc(e){if(e._f===At.ISO_8601){Lm(e);return}if(e._f===At.RFC_2822){Bm(e);return}e._a=[],Yt(e).empty=!0;var t=""+e._i,i,n,r,s,o,a=t.length,l=0,h,c;for(r=ym(e._f,e._locale).match(Cc)||[],c=r.length,i=0;i<c;i++)s=r[i],n=(t.match(KS(s,e))||[])[0],n&&(o=t.substr(0,t.indexOf(n)),o.length>0&&Yt(e).unusedInput.push(o),t=t.slice(t.indexOf(n)+n.length),l+=n.length),Ar[s]?(n?Yt(e).empty=!1:Yt(e).unusedTokens.push(s),XS(s,n,e)):e._strict&&!n&&Yt(e).unusedTokens.push(s);Yt(e).charsLeftOver=a-l,t.length>0&&Yt(e).unusedInput.push(t),e._a[Ie]<=12&&Yt(e).bigHour===!0&&e._a[Ie]>0&&(Yt(e).bigHour=void 0),Yt(e).parsedDateParts=e._a.slice(0),Yt(e).meridiem=e._meridiem,e._a[Ie]=ck(e._locale,e._a[Ie],e._meridiem),h=Yt(e).era,h!==null&&(e._a[$e]=e._locale.erasConvertYear(h,e._a[$e])),Yc(e),Wc(e)}function ck(e,t,i){var n;return i==null?t:e.meridiemHour!=null?e.meridiemHour(t,i):(e.isPM!=null&&(n=e.isPM(i),n&&t<12&&(t+=12),!n&&t===12&&(t=0)),t)}function uk(e){var t,i,n,r,s,o,a=!1,l=e._f.length;if(l===0){Yt(e).invalidFormat=!0,e._d=new Date(NaN);return}for(r=0;r<l;r++)s=0,o=!1,t=Oc({},e),e._useUTC!=null&&(t._useUTC=e._useUTC),t._f=e._f[r],zc(t),Tc(t)&&(o=!0),s+=Yt(t).charsLeftOver,s+=Yt(t).unusedTokens.length*10,Yt(t).score=s,a?s<n&&(n=s,i=t):(n==null||s<n||o)&&(n=s,i=t,o&&(a=!0));En(e,i||t)}function fk(e){if(!e._d){var t=Ic(e._i),i=t.day===void 0?t.date:t.day;e._a=gm([t.year,t.month,i,t.hour,t.minute,t.second,t.millisecond],function(n){return n&&parseInt(n,10)}),Yc(e)}}function dk(e){var t=new Ds(Wc(Nm(e)));return t._nextDay&&(t.add(1,"d"),t._nextDay=void 0),t}function Nm(e){var t=e._i,i=e._f;return e._locale=e._locale||pn(e._l),t===null||i===void 0&&t===""?da({nullInput:!0}):(typeof t=="string"&&(e._i=t=e._locale.preparse(t)),Si(t)?new Ds(Wc(t)):(Rs(t)?e._d=t:vi(i)?uk(e):i?zc(e):pk(e),Tc(e)||(e._d=null),e))}function pk(e){var t=e._i;Ze(t)?e._d=new Date(At.now()):Rs(t)?e._d=new Date(t.valueOf()):typeof t=="string"?ak(e):vi(t)?(e._a=gm(t.slice(0),function(i){return parseInt(i,10)}),Yc(e)):ar(t)?fk(e):cn(t)?e._d=new Date(t):At.createFromInputFallback(e)}function Fm(e,t,i,n,r){var s={};return(t===!0||t===!1)&&(n=t,t=void 0),(i===!0||i===!1)&&(n=i,i=void 0),(ar(e)&&Ac(e)||vi(e)&&e.length===0)&&(e=void 0),s._isAMomentObject=!0,s._useUTC=s._isUTC=r,s._l=i,s._i=e,s._f=t,s._strict=n,dk(s)}function de(e,t,i,n){return Fm(e,t,i,n,!1)}var gk=hi("moment().min is deprecated, use moment.max instead. http://momentjs.com/guides/#/warnings/min-max/",function(){var e=de.apply(null,arguments);return this.isValid()&&e.isValid()?e<this?this:e:da()}),mk=hi("moment().max is deprecated, use moment.min instead. http://momentjs.com/guides/#/warnings/min-max/",function(){var e=de.apply(null,arguments);return this.isValid()&&e.isValid()?e>this?this:e:da()});function Um(e,t){var i,n;if(t.length===1&&vi(t[0])&&(t=t[0]),!t.length)return de();for(i=t[0],n=1;n<t.length;++n)(!t[n].isValid()||t[n][e](i))&&(i=t[n]);return i}function bk(){var e=[].slice.call(arguments,0);return Um("isBefore",e)}function yk(){var e=[].slice.call(arguments,0);return Um("isAfter",e)}var _k=function(){return Date.now?Date.now():+new Date},Qr=["year","quarter","month","week","day","hour","minute","second","millisecond"];function wk(e){var t,i=!1,n,r=Qr.length;for(t in e)if(Qt(e,t)&&!(Me.call(Qr,t)!==-1&&(e[t]==null||!isNaN(e[t]))))return!1;for(n=0;n<r;++n)if(e[Qr[n]]){if(i)return!1;parseFloat(e[Qr[n]])!==qt(e[Qr[n]])&&(i=!0)}return!0}function vk(){return this._isValid}function Sk(){return xi(NaN)}function va(e){var t=Ic(e),i=t.year||0,n=t.quarter||0,r=t.month||0,s=t.week||t.isoWeek||0,o=t.day||0,a=t.hour||0,l=t.minute||0,h=t.second||0,c=t.millisecond||0;this._isValid=wk(t),this._milliseconds=+c+h*1e3+l*6e4+a*1e3*60*60,this._days=+o+s*7,this._months=+r+n*3+i*12,this._data={},this._locale=pn(),this._bubble()}function Co(e){return e instanceof va}function Gh(e){return e<0?Math.round(-1*e)*-1:Math.round(e)}function xk(e,t,i){var n=Math.min(e.length,t.length),r=Math.abs(e.length-t.length),s=0,o;for(o=0;o<n;o++)(i&&e[o]!==t[o]||!i&&qt(e[o])!==qt(t[o]))&&s++;return s+r}function jm(e,t){Dt(e,0,0,function(){var i=this.utcOffset(),n="+";return i<0&&(i=-i,n="-"),n+Li(~~(i/60),2)+t+Li(~~i%60,2)})}jm("Z",":");jm("ZZ","");Pt("Z",ya);Pt("ZZ",ya);se(["Z","ZZ"],function(e,t,i){i._useUTC=!0,i._tzm=Vc(ya,e)});var kk=/([\+\-]|\d\d)/gi;function Vc(e,t){var i=(t||"").match(e),n,r,s;return i===null?null:(n=i[i.length-1]||[],r=(n+"").match(kk)||["-",0,0],s=+(r[1]*60)+qt(r[2]),s===0?0:r[0]==="+"?s:-s)}function Hc(e,t){var i,n;return t._isUTC?(i=t.clone(),n=(Si(e)||Rs(e)?e.valueOf():de(e).valueOf())-i.valueOf(),i._d.setTime(i._d.valueOf()+n),At.updateOffset(i,!1),i):de(e).local()}function Kh(e){return-Math.round(e._d.getTimezoneOffset())}At.updateOffset=function(){};function Ek(e,t,i){var n=this._offset||0,r;if(!this.isValid())return e!=null?this:NaN;if(e!=null){if(typeof e=="string"){if(e=Vc(ya,e),e===null)return this}else Math.abs(e)<16&&!i&&(e=e*60);return!this._isUTC&&t&&(r=Kh(this)),this._offset=e,this._isUTC=!0,r!=null&&this.add(r,"m"),n!==e&&(!t||this._changeInProgress?zm(this,xi(e-n,"m"),1,!1):this._changeInProgress||(this._changeInProgress=!0,At.updateOffset(this,!0),this._changeInProgress=null)),this}else return this._isUTC?n:Kh(this)}function Mk(e,t){return e!=null?(typeof e!="string"&&(e=-e),this.utcOffset(e,t),this):-this.utcOffset()}function Ak(e){return this.utcOffset(0,e)}function Tk(e){return this._isUTC&&(this.utcOffset(0,e),this._isUTC=!1,e&&this.subtract(Kh(this),"m")),this}function Ok(){if(this._tzm!=null)this.utcOffset(this._tzm,!1,!0);else if(typeof this._i=="string"){var e=Vc($S,this._i);e!=null?this.utcOffset(e):this.utcOffset(0,!0)}return this}function Pk(e){return this.isValid()?(e=e?de(e).utcOffset():0,(this.utcOffset()-e)%60===0):!1}function Ck(){return this.utcOffset()>this.clone().month(0).utcOffset()||this.utcOffset()>this.clone().month(5).utcOffset()}function Ik(){if(!Ze(this._isDSTShifted))return this._isDSTShifted;var e={},t;return Oc(e,this),e=Nm(e),e._a?(t=e._isUTC?Bi(e._a):de(e._a),this._isDSTShifted=this.isValid()&&xk(e._a,t.toArray())>0):this._isDSTShifted=!1,this._isDSTShifted}function Rk(){return this.isValid()?!this._isUTC:!1}function Dk(){return this.isValid()?this._isUTC:!1}function Wm(){return this.isValid()?this._isUTC&&this._offset===0:!1}var Lk=/^(-|\+)?(?:(\d*)[. ])?(\d+):(\d+)(?::(\d+)(\.\d*)?)?$/,Bk=/^(-|\+)?P(?:([-+]?[0-9,.]*)Y)?(?:([-+]?[0-9,.]*)M)?(?:([-+]?[0-9,.]*)W)?(?:([-+]?[0-9,.]*)D)?(?:T(?:([-+]?[0-9,.]*)H)?(?:([-+]?[0-9,.]*)M)?(?:([-+]?[0-9,.]*)S)?)?$/;function xi(e,t){var i=e,n=null,r,s,o;return Co(e)?i={ms:e._milliseconds,d:e._days,M:e._months}:cn(e)||!isNaN(+e)?(i={},t?i[t]=+e:i.milliseconds=+e):(n=Lk.exec(e))?(r=n[1]==="-"?-1:1,i={y:0,d:qt(n[Ti])*r,h:qt(n[Ie])*r,m:qt(n[bi])*r,s:qt(n[rn])*r,ms:qt(Gh(n[Jn]*1e3))*r}):(n=Bk.exec(e))?(r=n[1]==="-"?-1:1,i={y:Hn(n[2],r),M:Hn(n[3],r),w:Hn(n[4],r),d:Hn(n[5],r),h:Hn(n[6],r),m:Hn(n[7],r),s:Hn(n[8],r)}):i==null?i={}:typeof i=="object"&&("from"in i||"to"in i)&&(o=Nk(de(i.from),de(i.to)),i={},i.ms=o.milliseconds,i.M=o.months),s=new va(i),Co(e)&&Qt(e,"_locale")&&(s._locale=e._locale),Co(e)&&Qt(e,"_isValid")&&(s._isValid=e._isValid),s}xi.fn=va.prototype;xi.invalid=Sk;function Hn(e,t){var i=e&&parseFloat(e.replace(",","."));return(isNaN(i)?0:i)*t}function wd(e,t){var i={};return i.months=t.month()-e.month()+(t.year()-e.year())*12,e.clone().add(i.months,"M").isAfter(t)&&--i.months,i.milliseconds=+t-+e.clone().add(i.months,"M"),i}function Nk(e,t){var i;return e.isValid()&&t.isValid()?(t=Hc(t,e),e.isBefore(t)?i=wd(e,t):(i=wd(t,e),i.milliseconds=-i.milliseconds,i.months=-i.months),i):{milliseconds:0,months:0}}function Ym(e,t){return function(i,n){var r,s;return n!==null&&!isNaN(+n)&&(bm(t,"moment()."+t+"(period, number) is deprecated. Please use moment()."+t+"(number, period). See http://momentjs.com/guides/#/warnings/add-inverted-param/ for more info."),s=i,i=n,n=s),r=xi(i,n),zm(this,r,e),this}}function zm(e,t,i,n){var r=t._milliseconds,s=Gh(t._days),o=Gh(t._months);e.isValid()&&(n=n??!0,o&&Am(e,ks(e,"Month")+o*i),s&&km(e,"Date",ks(e,"Date")+s*i),r&&e._d.setTime(e._d.valueOf()+r*i),n&&At.updateOffset(e,s||o))}var Fk=Ym(1,"add"),Uk=Ym(-1,"subtract");function Vm(e){return typeof e=="string"||e instanceof String}function jk(e){return Si(e)||Rs(e)||Vm(e)||cn(e)||Yk(e)||Wk(e)||e===null||e===void 0}function Wk(e){var t=ar(e)&&!Ac(e),i=!1,n=["years","year","y","months","month","M","days","day","d","dates","date","D","hours","hour","h","minutes","minute","m","seconds","second","s","milliseconds","millisecond","ms"],r,s,o=n.length;for(r=0;r<o;r+=1)s=n[r],i=i||Qt(e,s);return t&&i}function Yk(e){var t=vi(e),i=!1;return t&&(i=e.filter(function(n){return!cn(n)&&Vm(e)}).length===0),t&&i}function zk(e){var t=ar(e)&&!Ac(e),i=!1,n=["sameDay","nextDay","lastDay","nextWeek","lastWeek","sameElse"],r,s;for(r=0;r<n.length;r+=1)s=n[r],i=i||Qt(e,s);return t&&i}function Vk(e,t){var i=e.diff(t,"days",!0);return i<-6?"sameElse":i<-1?"lastWeek":i<0?"lastDay":i<1?"sameDay":i<2?"nextDay":i<7?"nextWeek":"sameElse"}function Hk(e,t){arguments.length===1&&(arguments[0]?jk(arguments[0])?(e=arguments[0],t=void 0):zk(arguments[0])&&(t=arguments[0],e=void 0):(e=void 0,t=void 0));var i=e||de(),n=Hc(i,this).startOf("day"),r=At.calendarFormat(this,n)||"sameElse",s=t&&(Ni(t[r])?t[r].call(this,i):t[r]);return this.format(s||this.localeData().calendar(r,this,de(i)))}function qk(){return new Ds(this)}function $k(e,t){var i=Si(e)?e:de(e);return this.isValid()&&i.isValid()?(t=ci(t)||"millisecond",t==="millisecond"?this.valueOf()>i.valueOf():i.valueOf()<this.clone().startOf(t).valueOf()):!1}function Gk(e,t){var i=Si(e)?e:de(e);return this.isValid()&&i.isValid()?(t=ci(t)||"millisecond",t==="millisecond"?this.valueOf()<i.valueOf():this.clone().endOf(t).valueOf()<i.valueOf()):!1}function Kk(e,t,i,n){var r=Si(e)?e:de(e),s=Si(t)?t:de(t);return this.isValid()&&r.isValid()&&s.isValid()?(n=n||"()",(n[0]==="("?this.isAfter(r,i):!this.isBefore(r,i))&&(n[1]===")"?this.isBefore(s,i):!this.isAfter(s,i))):!1}function Qk(e,t){var i=Si(e)?e:de(e),n;return this.isValid()&&i.isValid()?(t=ci(t)||"millisecond",t==="millisecond"?this.valueOf()===i.valueOf():(n=i.valueOf(),this.clone().startOf(t).valueOf()<=n&&n<=this.clone().endOf(t).valueOf())):!1}function Xk(e,t){return this.isSame(e,t)||this.isAfter(e,t)}function Zk(e,t){return this.isSame(e,t)||this.isBefore(e,t)}function Jk(e,t,i){var n,r,s;if(!this.isValid())return NaN;if(n=Hc(e,this),!n.isValid())return NaN;switch(r=(n.utcOffset()-this.utcOffset())*6e4,t=ci(t),t){case"year":s=Io(this,n)/12;break;case"month":s=Io(this,n);break;case"quarter":s=Io(this,n)/3;break;case"second":s=(this-n)/1e3;break;case"minute":s=(this-n)/6e4;break;case"hour":s=(this-n)/36e5;break;case"day":s=(this-n-r)/864e5;break;case"week":s=(this-n-r)/6048e5;break;default:s=this-n}return i?s:li(s)}function Io(e,t){if(e.date()<t.date())return-Io(t,e);var i=(t.year()-e.year())*12+(t.month()-e.month()),n=e.clone().add(i,"months"),r,s;return t-n<0?(r=e.clone().add(i-1,"months"),s=(t-n)/(n-r)):(r=e.clone().add(i+1,"months"),s=(t-n)/(r-n)),-(i+s)||0}At.defaultFormat="YYYY-MM-DDTHH:mm:ssZ";At.defaultFormatUtc="YYYY-MM-DDTHH:mm:ss[Z]";function tE(){return this.clone().locale("en").format("ddd MMM DD YYYY HH:mm:ss [GMT]ZZ")}function eE(e){if(!this.isValid())return null;var t=e!==!0,i=t?this.clone().utc():this;return i.year()<0||i.year()>9999?Po(i,t?"YYYYYY-MM-DD[T]HH:mm:ss.SSS[Z]":"YYYYYY-MM-DD[T]HH:mm:ss.SSSZ"):Ni(Date.prototype.toISOString)?t?this.toDate().toISOString():new Date(this.valueOf()+this.utcOffset()*60*1e3).toISOString().replace("Z",Po(i,"Z")):Po(i,t?"YYYY-MM-DD[T]HH:mm:ss.SSS[Z]":"YYYY-MM-DD[T]HH:mm:ss.SSSZ")}function iE(){if(!this.isValid())return"moment.invalid(/* "+this._i+" */)";var e="moment",t="",i,n,r,s;return this.isLocal()||(e=this.utcOffset()===0?"moment.utc":"moment.parseZone",t="Z"),i="["+e+'("]',n=0<=this.year()&&this.year()<=9999?"YYYY":"YYYYYY",r="-MM-DD[T]HH:mm:ss.SSS",s=t+'[")]',this.format(i+n+r+s)}function nE(e){e||(e=this.isUtc()?At.defaultFormatUtc:At.defaultFormat);var t=Po(this,e);return this.localeData().postformat(t)}function rE(e,t){return this.isValid()&&(Si(e)&&e.isValid()||de(e).isValid())?xi({to:this,from:e}).locale(this.locale()).humanize(!t):this.localeData().invalidDate()}function sE(e){return this.from(de(),e)}function oE(e,t){return this.isValid()&&(Si(e)&&e.isValid()||de(e).isValid())?xi({from:this,to:e}).locale(this.locale()).humanize(!t):this.localeData().invalidDate()}function aE(e){return this.to(de(),e)}function Hm(e){var t;return e===void 0?this._locale._abbr:(t=pn(e),t!=null&&(this._locale=t),this)}var qm=hi("moment().lang() is deprecated. Instead, use moment().localeData() to get the language configuration. Use moment().locale() to change languages.",function(e){return e===void 0?this.localeData():this.locale(e)});function $m(){return this._locale}var Jo=1e3,Tr=60*Jo,ta=60*Tr,Gm=(365*400+97)*24*ta;function Or(e,t){return(e%t+t)%t}function Km(e,t,i){return e<100&&e>=0?new Date(e+400,t,i)-Gm:new Date(e,t,i).valueOf()}function Qm(e,t,i){return e<100&&e>=0?Date.UTC(e+400,t,i)-Gm:Date.UTC(e,t,i)}function lE(e){var t,i;if(e=ci(e),e===void 0||e==="millisecond"||!this.isValid())return this;switch(i=this._isUTC?Qm:Km,e){case"year":t=i(this.year(),0,1);break;case"quarter":t=i(this.year(),this.month()-this.month()%3,1);break;case"month":t=i(this.year(),this.month(),1);break;case"week":t=i(this.year(),this.month(),this.date()-this.weekday());break;case"isoWeek":t=i(this.year(),this.month(),this.date()-(this.isoWeekday()-1));break;case"day":case"date":t=i(this.year(),this.month(),this.date());break;case"hour":t=this._d.valueOf(),t-=Or(t+(this._isUTC?0:this.utcOffset()*Tr),ta);break;case"minute":t=this._d.valueOf(),t-=Or(t,Tr);break;case"second":t=this._d.valueOf(),t-=Or(t,Jo);break}return this._d.setTime(t),At.updateOffset(this,!0),this}function hE(e){var t,i;if(e=ci(e),e===void 0||e==="millisecond"||!this.isValid())return this;switch(i=this._isUTC?Qm:Km,e){case"year":t=i(this.year()+1,0,1)-1;break;case"quarter":t=i(this.year(),this.month()-this.month()%3+3,1)-1;break;case"month":t=i(this.year(),this.month()+1,1)-1;break;case"week":t=i(this.year(),this.month(),this.date()-this.weekday()+7)-1;break;case"isoWeek":t=i(this.year(),this.month(),this.date()-(this.isoWeekday()-1)+7)-1;break;case"day":case"date":t=i(this.year(),this.month(),this.date()+1)-1;break;case"hour":t=this._d.valueOf(),t+=ta-Or(t+(this._isUTC?0:this.utcOffset()*Tr),ta)-1;break;case"minute":t=this._d.valueOf(),t+=Tr-Or(t,Tr)-1;break;case"second":t=this._d.valueOf(),t+=Jo-Or(t,Jo)-1;break}return this._d.setTime(t),At.updateOffset(this,!0),this}function cE(){return this._d.valueOf()-(this._offset||0)*6e4}function uE(){return Math.floor(this.valueOf()/1e3)}function fE(){return new Date(this.valueOf())}function dE(){var e=this;return[e.year(),e.month(),e.date(),e.hour(),e.minute(),e.second(),e.millisecond()]}function pE(){var e=this;return{years:e.year(),months:e.month(),date:e.date(),hours:e.hours(),minutes:e.minutes(),seconds:e.seconds(),milliseconds:e.milliseconds()}}function gE(){return this.isValid()?this.toISOString():null}function mE(){return Tc(this)}function bE(){return En({},Yt(this))}function yE(){return Yt(this).overflow}function _E(){return{input:this._i,format:this._f,locale:this._locale,isUTC:this._isUTC,strict:this._strict}}Dt("N",0,0,"eraAbbr");Dt("NN",0,0,"eraAbbr");Dt("NNN",0,0,"eraAbbr");Dt("NNNN",0,0,"eraName");Dt("NNNNN",0,0,"eraNarrow");Dt("y",["y",1],"yo","eraYear");Dt("y",["yy",2],0,"eraYear");Dt("y",["yyy",3],0,"eraYear");Dt("y",["yyyy",4],0,"eraYear");Pt("N",qc);Pt("NN",qc);Pt("NNN",qc);Pt("NNNN",PE);Pt("NNNNN",CE);se(["N","NN","NNN","NNNN","NNNNN"],function(e,t,i,n){var r=i._locale.erasParse(e,n,i._strict);r?Yt(i).era=r:Yt(i).invalidEra=e});Pt("y",Nr);Pt("yy",Nr);Pt("yyy",Nr);Pt("yyyy",Nr);Pt("yo",IE);se(["y","yy","yyy","yyyy"],$e);se(["yo"],function(e,t,i,n){var r;i._locale._eraYearOrdinalRegex&&(r=e.match(i._locale._eraYearOrdinalRegex)),i._locale.eraYearOrdinalParse?t[$e]=i._locale.eraYearOrdinalParse(e,r):t[$e]=parseInt(e,10)});function wE(e,t){var i,n,r,s=this._eras||pn("en")._eras;for(i=0,n=s.length;i<n;++i){switch(typeof s[i].since){case"string":r=At(s[i].since).startOf("day"),s[i].since=r.valueOf();break}switch(typeof s[i].until){case"undefined":s[i].until=1/0;break;case"string":r=At(s[i].until).startOf("day").valueOf(),s[i].until=r.valueOf();break}}return s}function vE(e,t,i){var n,r,s=this.eras(),o,a,l;for(e=e.toUpperCase(),n=0,r=s.length;n<r;++n)if(o=s[n].name.toUpperCase(),a=s[n].abbr.toUpperCase(),l=s[n].narrow.toUpperCase(),i)switch(t){case"N":case"NN":case"NNN":if(a===e)return s[n];break;case"NNNN":if(o===e)return s[n];break;case"NNNNN":if(l===e)return s[n];break}else if([o,a,l].indexOf(e)>=0)return s[n]}function SE(e,t){var i=e.since<=e.until?1:-1;return t===void 0?At(e.since).year():At(e.since).year()+(t-e.offset)*i}function xE(){var e,t,i,n=this.localeData().eras();for(e=0,t=n.length;e<t;++e)if(i=this.clone().startOf("day").valueOf(),n[e].since<=i&&i<=n[e].until||n[e].until<=i&&i<=n[e].since)return n[e].name;return""}function kE(){var e,t,i,n=this.localeData().eras();for(e=0,t=n.length;e<t;++e)if(i=this.clone().startOf("day").valueOf(),n[e].since<=i&&i<=n[e].until||n[e].until<=i&&i<=n[e].since)return n[e].narrow;return""}function EE(){var e,t,i,n=this.localeData().eras();for(e=0,t=n.length;e<t;++e)if(i=this.clone().startOf("day").valueOf(),n[e].since<=i&&i<=n[e].until||n[e].until<=i&&i<=n[e].since)return n[e].abbr;return""}function ME(){var e,t,i,n,r=this.localeData().eras();for(e=0,t=r.length;e<t;++e)if(i=r[e].since<=r[e].until?1:-1,n=this.clone().startOf("day").valueOf(),r[e].since<=n&&n<=r[e].until||r[e].until<=n&&n<=r[e].since)return(this.year()-At(r[e].since).year())*i+r[e].offset;return this.year()}function AE(e){return Qt(this,"_erasNameRegex")||$c.call(this),e?this._erasNameRegex:this._erasRegex}function TE(e){return Qt(this,"_erasAbbrRegex")||$c.call(this),e?this._erasAbbrRegex:this._erasRegex}function OE(e){return Qt(this,"_erasNarrowRegex")||$c.call(this),e?this._erasNarrowRegex:this._erasRegex}function qc(e,t){return t.erasAbbrRegex(e)}function PE(e,t){return t.erasNameRegex(e)}function CE(e,t){return t.erasNarrowRegex(e)}function IE(e,t){return t._eraYearOrdinalRegex||Nr}function $c(){var e=[],t=[],i=[],n=[],r,s,o,a,l,h=this.eras();for(r=0,s=h.length;r<s;++r)o=sn(h[r].name),a=sn(h[r].abbr),l=sn(h[r].narrow),t.push(o),e.push(a),i.push(l),n.push(o),n.push(a),n.push(l);this._erasRegex=new RegExp("^("+n.join("|")+")","i"),this._erasNameRegex=new RegExp("^("+t.join("|")+")","i"),this._erasAbbrRegex=new RegExp("^("+e.join("|")+")","i"),this._erasNarrowRegex=new RegExp("^("+i.join("|")+")","i")}Dt(0,["gg",2],0,function(){return this.weekYear()%100});Dt(0,["GG",2],0,function(){return this.isoWeekYear()%100});function Sa(e,t){Dt(0,[e,e.length],0,t)}Sa("gggg","weekYear");Sa("ggggg","weekYear");Sa("GGGG","isoWeekYear");Sa("GGGGG","isoWeekYear");Pt("G",ba);Pt("g",ba);Pt("GG",pe,si);Pt("gg",pe,si);Pt("GGGG",Dc,Rc);Pt("gggg",Dc,Rc);Pt("GGGGG",ma,pa);Pt("ggggg",ma,pa);Bs(["gggg","ggggg","GGGG","GGGGG"],function(e,t,i,n){t[n.substr(0,2)]=qt(e)});Bs(["gg","GG"],function(e,t,i,n){t[n]=At.parseTwoDigitYear(e)});function RE(e){return Xm.call(this,e,this.week(),this.weekday()+this.localeData()._week.dow,this.localeData()._week.dow,this.localeData()._week.doy)}function DE(e){return Xm.call(this,e,this.isoWeek(),this.isoWeekday(),1,4)}function LE(){return on(this.year(),1,4)}function BE(){return on(this.isoWeekYear(),1,4)}function NE(){var e=this.localeData()._week;return on(this.year(),e.dow,e.doy)}function FE(){var e=this.localeData()._week;return on(this.weekYear(),e.dow,e.doy)}function Xm(e,t,i,n,r){var s;return e==null?Ms(this,n,r).year:(s=on(e,n,r),t>s&&(t=s),UE.call(this,e,t,i,n,r))}function UE(e,t,i,n,r){var s=Pm(e,t,i,n,r),o=Es(s.year,0,s.dayOfYear);return this.year(o.getUTCFullYear()),this.month(o.getUTCMonth()),this.date(o.getUTCDate()),this}Dt("Q",0,"Qo","quarter");Pt("Q",_m);se("Q",function(e,t){t[nn]=(qt(e)-1)*3});function jE(e){return e==null?Math.ceil((this.month()+1)/3):this.month((e-1)*3+this.month()%3)}Dt("D",["DD",2],"Do","date");Pt("D",pe,Fr);Pt("DD",pe,si);Pt("Do",function(e,t){return e?t._dayOfMonthOrdinalParse||t._ordinalParse:t._dayOfMonthOrdinalParseLenient});se(["D","DD"],Ti);se("Do",function(e,t){t[Ti]=qt(e.match(pe)[0])});var Zm=Ur("Date",!0);Dt("DDD",["DDDD",3],"DDDo","dayOfYear");Pt("DDD",ga);Pt("DDDD",wm);se(["DDD","DDDD"],function(e,t,i){i._dayOfYear=qt(e)});function WE(e){var t=Math.round((this.clone().startOf("day")-this.clone().startOf("year"))/864e5)+1;return e==null?t:this.add(e-t,"d")}Dt("m",["mm",2],0,"minute");Pt("m",pe,Lc);Pt("mm",pe,si);se(["m","mm"],bi);var YE=Ur("Minutes",!1);Dt("s",["ss",2],0,"second");Pt("s",pe,Lc);Pt("ss",pe,si);se(["s","ss"],rn);var zE=Ur("Seconds",!1);Dt("S",0,0,function(){return~~(this.millisecond()/100)});Dt(0,["SS",2],0,function(){return~~(this.millisecond()/10)});Dt(0,["SSS",3],0,"millisecond");Dt(0,["SSSS",4],0,function(){return this.millisecond()*10});Dt(0,["SSSSS",5],0,function(){return this.millisecond()*100});Dt(0,["SSSSSS",6],0,function(){return this.millisecond()*1e3});Dt(0,["SSSSSSS",7],0,function(){return this.millisecond()*1e4});Dt(0,["SSSSSSSS",8],0,function(){return this.millisecond()*1e5});Dt(0,["SSSSSSSSS",9],0,function(){return this.millisecond()*1e6});Pt("S",ga,_m);Pt("SS",ga,si);Pt("SSS",ga,wm);var Mn,Jm;for(Mn="SSSS";Mn.length<=9;Mn+="S")Pt(Mn,Nr);function VE(e,t){t[Jn]=qt(("0."+e)*1e3)}for(Mn="S";Mn.length<=9;Mn+="S")se(Mn,VE);Jm=Ur("Milliseconds",!1);Dt("z",0,0,"zoneAbbr");Dt("zz",0,0,"zoneName");function HE(){return this._isUTC?"UTC":""}function qE(){return this._isUTC?"Coordinated Universal Time":""}var St=Ds.prototype;St.add=Fk;St.calendar=Hk;St.clone=qk;St.diff=Jk;St.endOf=hE;St.format=nE;St.from=rE;St.fromNow=sE;St.to=oE;St.toNow=aE;St.get=ex;St.invalidAt=yE;St.isAfter=$k;St.isBefore=Gk;St.isBetween=Kk;St.isSame=Qk;St.isSameOrAfter=Xk;St.isSameOrBefore=Zk;St.isValid=mE;St.lang=qm;St.locale=Hm;St.localeData=$m;St.max=mk;St.min=gk;St.parsingFlags=bE;St.set=ix;St.startOf=lE;St.subtract=Uk;St.toArray=dE;St.toObject=pE;St.toDate=fE;St.toISOString=eE;St.inspect=iE;typeof Symbol<"u"&&Symbol.for!=null&&(St[Symbol.for("nodejs.util.inspect.custom")]=function(){return"Moment<"+this.format()+">"});St.toJSON=gE;St.toString=tE;St.unix=uE;St.valueOf=cE;St.creationData=_E;St.eraName=xE;St.eraNarrow=kE;St.eraAbbr=EE;St.eraYear=ME;St.year=xm;St.isLeapYear=tx;St.weekYear=RE;St.isoWeekYear=DE;St.quarter=St.quarters=jE;St.month=Tm;St.daysInMonth=ux;St.week=St.weeks=_x;St.isoWeek=St.isoWeeks=vx;St.weeksInYear=NE;St.weeksInWeekYear=FE;St.isoWeeksInYear=LE;St.isoWeeksInISOWeekYear=BE;St.date=Zm;St.day=St.days=Dx;St.weekday=Lx;St.isoWeekday=Bx;St.dayOfYear=WE;St.hour=St.hours=zx;St.minute=St.minutes=YE;St.second=St.seconds=zE;St.millisecond=St.milliseconds=Jm;St.utcOffset=Ek;St.utc=Ak;St.local=Tk;St.parseZone=Ok;St.hasAlignedHourOffset=Pk;St.isDST=Ck;St.isLocal=Rk;St.isUtcOffset=Dk;St.isUtc=Wm;St.isUTC=Wm;St.zoneAbbr=HE;St.zoneName=qE;St.dates=hi("dates accessor is deprecated. Use date instead.",Zm);St.months=hi("months accessor is deprecated. Use month instead",Tm);St.years=hi("years accessor is deprecated. Use year instead",xm);St.zone=hi("moment().zone is deprecated, use moment().utcOffset instead. http://momentjs.com/guides/#/warnings/zone/",Mk);St.isDSTShifted=hi("isDSTShifted is deprecated. See http://momentjs.com/guides/#/warnings/dst-shifted/ for more information",Ik);function $E(e){return de(e*1e3)}function GE(){return de.apply(null,arguments).parseZone()}function t0(e){return e}var Xt=Pc.prototype;Xt.calendar=IS;Xt.longDateFormat=BS;Xt.invalidDate=FS;Xt.ordinal=WS;Xt.preparse=t0;Xt.postformat=t0;Xt.relativeTime=zS;Xt.pastFuture=VS;Xt.set=PS;Xt.eras=wE;Xt.erasParse=vE;Xt.erasConvertYear=SE;Xt.erasAbbrRegex=TE;Xt.erasNameRegex=AE;Xt.erasNarrowRegex=OE;Xt.months=ax;Xt.monthsShort=lx;Xt.monthsParse=cx;Xt.monthsRegex=dx;Xt.monthsShortRegex=fx;Xt.week=gx;Xt.firstDayOfYear=yx;Xt.firstDayOfWeek=bx;Xt.weekdays=Ox;Xt.weekdaysMin=Cx;Xt.weekdaysShort=Px;Xt.weekdaysParse=Rx;Xt.weekdaysRegex=Nx;Xt.weekdaysShortRegex=Fx;Xt.weekdaysMinRegex=Ux;Xt.isPM=Wx;Xt.meridiem=Vx;function ea(e,t,i,n){var r=pn(),s=Bi().set(n,t);return r[i](s,e)}function e0(e,t,i){if(cn(e)&&(t=e,e=void 0),e=e||"",t!=null)return ea(e,t,i,"month");var n,r=[];for(n=0;n<12;n++)r[n]=ea(e,n,i,"month");return r}function Gc(e,t,i,n){typeof e=="boolean"?(cn(t)&&(i=t,t=void 0),t=t||""):(t=e,i=t,e=!1,cn(t)&&(i=t,t=void 0),t=t||"");var r=pn(),s=e?r._week.dow:0,o,a=[];if(i!=null)return ea(t,(i+s)%7,n,"day");for(o=0;o<7;o++)a[o]=ea(t,(o+s)%7,n,"day");return a}function KE(e,t){return e0(e,t,"months")}function QE(e,t){return e0(e,t,"monthsShort")}function XE(e,t,i){return Gc(e,t,i,"weekdays")}function ZE(e,t,i){return Gc(e,t,i,"weekdaysShort")}function JE(e,t,i){return Gc(e,t,i,"weekdaysMin")}Tn("en",{eras:[{since:"0001-01-01",until:1/0,offset:1,name:"Anno Domini",narrow:"AD",abbr:"AD"},{since:"0000-12-31",until:-1/0,offset:1,name:"Before Christ",narrow:"BC",abbr:"BC"}],dayOfMonthOrdinalParse:/\d{1,2}(th|st|nd|rd)/,ordinal:function(e){var t=e%10,i=qt(e%100/10)===1?"th":t===1?"st":t===2?"nd":t===3?"rd":"th";return e+i}});At.lang=hi("moment.lang is deprecated. Use moment.locale instead.",Tn);At.langData=hi("moment.langData is deprecated. Use moment.localeData instead.",pn);var ji=Math.abs;function t2(){var e=this._data;return this._milliseconds=ji(this._milliseconds),this._days=ji(this._days),this._months=ji(this._months),e.milliseconds=ji(e.milliseconds),e.seconds=ji(e.seconds),e.minutes=ji(e.minutes),e.hours=ji(e.hours),e.months=ji(e.months),e.years=ji(e.years),this}function i0(e,t,i,n){var r=xi(t,i);return e._milliseconds+=n*r._milliseconds,e._days+=n*r._days,e._months+=n*r._months,e._bubble()}function e2(e,t){return i0(this,e,t,1)}function i2(e,t){return i0(this,e,t,-1)}function vd(e){return e<0?Math.floor(e):Math.ceil(e)}function n2(){var e=this._milliseconds,t=this._days,i=this._months,n=this._data,r,s,o,a,l;return e>=0&&t>=0&&i>=0||e<=0&&t<=0&&i<=0||(e+=vd(Qh(i)+t)*864e5,t=0,i=0),n.milliseconds=e%1e3,r=li(e/1e3),n.seconds=r%60,s=li(r/60),n.minutes=s%60,o=li(s/60),n.hours=o%24,t+=li(o/24),l=li(n0(t)),i+=l,t-=vd(Qh(l)),a=li(i/12),i%=12,n.days=t,n.months=i,n.years=a,this}function n0(e){return e*4800/146097}function Qh(e){return e*146097/4800}function r2(e){if(!this.isValid())return NaN;var t,i,n=this._milliseconds;if(e=ci(e),e==="month"||e==="quarter"||e==="year")switch(t=this._days+n/864e5,i=this._months+n0(t),e){case"month":return i;case"quarter":return i/3;case"year":return i/12}else switch(t=this._days+Math.round(Qh(this._months)),e){case"week":return t/7+n/6048e5;case"day":return t+n/864e5;case"hour":return t*24+n/36e5;case"minute":return t*1440+n/6e4;case"second":return t*86400+n/1e3;case"millisecond":return Math.floor(t*864e5)+n;default:throw new Error("Unknown unit "+e)}}function gn(e){return function(){return this.as(e)}}var r0=gn("ms"),s2=gn("s"),o2=gn("m"),a2=gn("h"),l2=gn("d"),h2=gn("w"),c2=gn("M"),u2=gn("Q"),f2=gn("y"),d2=r0;function p2(){return xi(this)}function g2(e){return e=ci(e),this.isValid()?this[e+"s"]():NaN}function mr(e){return function(){return this.isValid()?this._data[e]:NaN}}var m2=mr("milliseconds"),b2=mr("seconds"),y2=mr("minutes"),_2=mr("hours"),w2=mr("days"),v2=mr("months"),S2=mr("years");function x2(){return li(this.days()/7)}var $i=Math.round,Er={ss:44,s:45,m:45,h:22,d:26,w:null,M:11};function k2(e,t,i,n,r){return r.relativeTime(t||1,!!i,e,n)}function E2(e,t,i,n){var r=xi(e).abs(),s=$i(r.as("s")),o=$i(r.as("m")),a=$i(r.as("h")),l=$i(r.as("d")),h=$i(r.as("M")),c=$i(r.as("w")),u=$i(r.as("y")),f=s<=i.ss&&["s",s]||s<i.s&&["ss",s]||o<=1&&["m"]||o<i.m&&["mm",o]||a<=1&&["h"]||a<i.h&&["hh",a]||l<=1&&["d"]||l<i.d&&["dd",l];return i.w!=null&&(f=f||c<=1&&["w"]||c<i.w&&["ww",c]),f=f||h<=1&&["M"]||h<i.M&&["MM",h]||u<=1&&["y"]||["yy",u],f[2]=t,f[3]=+e>0,f[4]=n,k2.apply(null,f)}function M2(e){return e===void 0?$i:typeof e=="function"?($i=e,!0):!1}function A2(e,t){return Er[e]===void 0?!1:t===void 0?Er[e]:(Er[e]=t,e==="s"&&(Er.ss=t-1),!0)}function T2(e,t){if(!this.isValid())return this.localeData().invalidDate();var i=!1,n=Er,r,s;return typeof e=="object"&&(t=e,e=!1),typeof e=="boolean"&&(i=e),typeof t=="object"&&(n=Object.assign({},Er,t),t.s!=null&&t.ss==null&&(n.ss=t.s-1)),r=this.localeData(),s=E2(this,!i,n,r),i&&(s=r.pastFuture(+this,s)),r.postformat(s)}var nl=Math.abs;function wr(e){return(e>0)-(e<0)||+e}function xa(){if(!this.isValid())return this.localeData().invalidDate();var e=nl(this._milliseconds)/1e3,t=nl(this._days),i=nl(this._months),n,r,s,o,a=this.asSeconds(),l,h,c,u;return a?(n=li(e/60),r=li(n/60),e%=60,n%=60,s=li(i/12),i%=12,o=e?e.toFixed(3).replace(/\.?0+$/,""):"",l=a<0?"-":"",h=wr(this._months)!==wr(a)?"-":"",c=wr(this._days)!==wr(a)?"-":"",u=wr(this._milliseconds)!==wr(a)?"-":"",l+"P"+(s?h+s+"Y":"")+(i?h+i+"M":"")+(t?c+t+"D":"")+(r||n||e?"T":"")+(r?u+r+"H":"")+(n?u+n+"M":"")+(e?u+o+"S":"")):"P0D"}var $t=va.prototype;$t.isValid=vk;$t.abs=t2;$t.add=e2;$t.subtract=i2;$t.as=r2;$t.asMilliseconds=r0;$t.asSeconds=s2;$t.asMinutes=o2;$t.asHours=a2;$t.asDays=l2;$t.asWeeks=h2;$t.asMonths=c2;$t.asQuarters=u2;$t.asYears=f2;$t.valueOf=d2;$t._bubble=n2;$t.clone=p2;$t.get=g2;$t.milliseconds=m2;$t.seconds=b2;$t.minutes=y2;$t.hours=_2;$t.days=w2;$t.weeks=x2;$t.months=v2;$t.years=S2;$t.humanize=T2;$t.toISOString=xa;$t.toString=xa;$t.toJSON=xa;$t.locale=Hm;$t.localeData=$m;$t.toIsoString=hi("toIsoString() is deprecated. Please use toISOString() instead (notice the capitals)",xa);$t.lang=qm;Dt("X",0,0,"unix");Dt("x",0,0,"valueOf");Pt("x",ba);Pt("X",GS);se("X",function(e,t,i){i._d=new Date(parseFloat(e)*1e3)});se("x",function(e,t,i){i._d=new Date(qt(e))});//! moment.js
At.version="2.30.1";TS(de);At.fn=St;At.min=bk;At.max=yk;At.now=_k;At.utc=Bi;At.unix=$E;At.months=KE;At.isDate=Rs;At.locale=Tn;At.invalid=da;At.duration=xi;At.isMoment=Si;At.weekdays=XE;At.parseZone=GE;At.localeData=pn;At.isDuration=Co;At.monthsShort=QE;At.weekdaysMin=JE;At.defineLocale=jc;At.updateLocale=Gx;At.locales=Kx;At.weekdaysShort=ZE;At.normalizeUnits=ci;At.relativeTimeRounding=M2;At.relativeTimeThreshold=A2;At.calendarFormat=Vk;At.prototype=St;At.HTML5_FMT={DATETIME_LOCAL:"YYYY-MM-DDTHH:mm",DATETIME_LOCAL_SECONDS:"YYYY-MM-DDTHH:mm:ss",DATETIME_LOCAL_MS:"YYYY-MM-DDTHH:mm:ss.SSS",DATE:"YYYY-MM-DD",TIME:"HH:mm",TIME_SECONDS:"HH:mm:ss",TIME_MS:"HH:mm:ss.SSS",WEEK:"GGGG-[W]WW",MONTH:"YYYY-MM"};/*!
  * chartjs-adapter-moment v1.0.1
  * https://www.chartjs.org
  * (c) 2022 chartjs-adapter-moment Contributors
  * Released under the MIT license
  */const O2={datetime:"MMM D, YYYY, h:mm:ss a",millisecond:"h:mm:ss.SSS a",second:"h:mm:ss a",minute:"h:mm a",hour:"hA",day:"MMM D",week:"ll",month:"MMM YYYY",quarter:"[Q]Q - YYYY",year:"YYYY"};$g._date.override(typeof At=="function"?{_id:"moment",formats:function(){return O2},parse:function(e,t){return typeof e=="string"&&typeof t=="string"?e=At(e,t):e instanceof At||(e=At(e)),e.isValid()?e.valueOf():null},format:function(e,t){return At(e).format(t)},add:function(e,t,i){return At(e).add(t,i).valueOf()},diff:function(e,t,i){return At(e).diff(At(t),i)},startOf:function(e,t,i){return e=At(e),t==="isoWeek"?(i=Math.trunc(Math.min(Math.max(0,i),6)),e.isoWeekday(i).startOf("day").valueOf()):e.startOf(t).valueOf()},endOf:function(e,t){return At(e).endOf(t).valueOf()}}:{});function P2(e){let t;return{c(){t=Ct("canvas"),this.h()},l(i){t=It(i,"CANVAS",{class:!0}),Vt(t).forEach(kt),this.h()},h(){mt(t,"class","w-full svelte-w7k32v")},m(i,n){Nt(i,t,n),e[1](t)},p:Re,i:Re,o:Re,d(i){i&&kt(t),e[1](null)}}}function C2(e,t,i){let n;Xh(e,gg,h=>i(3,n=h));let r,s;const o=(h=100)=>new Promise(c=>{let u=setInterval(()=>{ly()&&(clearInterval(u),c())},h)}),a=(h=100)=>new Promise(c=>{let u=setInterval(()=>{n&&(clearInterval(u),c())},h)});kd(async()=>{await o(),await a();let h=JSON.parse(n);const c=new Date,u={datasets:[{label:"Sensor 1",data:h.map(d=>({x:d.timestamp,y:parseFloat(d.sensor1)}))},{label:"Sensor 2",data:h.map(d=>({x:d.timestamp,y:parseFloat(d.sensor2)}))}]},f={responsive:!0,maintainAspectRatio:!1,plugins:{legend:{display:!0},title:{text:"Temperatur 72h",display:!0},tooltip:{callbacks:{label(d){let g=d.dataset.label||"";return g=d.parsed.y+" Â°C",g},title(d){return new Date(d[0].label).toLocaleString("se-sw")}}}},interaction:{mode:"nearest",intersect:!1,axis:"x"},elements:{line:{tension:.2},point:{radius:1}},scales:{y:{suggestedMin:5,suggestedMax:20},x:{display:!0,type:"time",time:{unit:"day",displayFormats:{day:"DD MMM"}},min:new Date(c.getTime()-72*60*60*1e3).toISOString(),max:new Date(c.getTime()+3*60*60*1e3).toISOString()}}};return r=new Qi(s,{type:"line",data:u,options:f}),console.log(r),mg("heatpump/temperature/concat",d=>{d=JSON.parse(d),d=d.sort((y,_)=>y.timestamp-_.timestamp);const g={datasets:[{label:"Sensor 1",data:d.map(y=>({x:y.timestamp,y:parseFloat(y.sensor1)}))},{label:"Sensor 2",data:d.map(y=>({x:y.timestamp,y:parseFloat(y.sensor2)}))}]};r.data=g,r.scales.x.max=new Date(c.getTime()+3*60*60*1e3).toISOString(),r.scales.x.min=new Date(c.getTime()-72*60*60*1e3).toISOString(),r.update()}),()=>{r.destroy()}});function l(h){as[h?"unshift":"push"](()=>{s=h,i(0,s)})}return[s,l]}class I2 extends Ts{constructor(t){super(),Os(this,t,C2,P2,lr,{})}}function R2(e){let t,i,n=e[0].name.split(" ")[0]+"",r,s,o,a,l,h,c,u,f,d,g;return o=new wy({props:{class:"mt-1",icon:Sy}}),l=new dy({}),u=new I2({}),{c(){t=Ct("button"),i=Ii("Hej "),r=Ii(n),s=Ii(`! Klicka hÃ¤r fÃ¶r att logga ut
        `),ao(o.$$.fragment),a=ne(),ao(l.$$.fragment),h=ne(),c=Ct("div"),ao(u.$$.fragment),this.h()},l(y){t=It(y,"BUTTON",{class:!0});var _=Vt(t);i=Ri(_,"Hej "),r=Ri(_,n),s=Ri(_,`! Klicka hÃ¤r fÃ¶r att logga ut
        `),lo(o.$$.fragment,_),_.forEach(kt),a=re(y),lo(l.$$.fragment,y),h=re(y),c=It(y,"DIV",{class:!0});var w=Vt(c);lo(u.$$.fragment,w),w.forEach(kt),this.h()},h(){mt(t,"class","flex items-center gap-3 mt-2"),mt(c,"class","h-96 w-8/12")},m(y,_){Nt(y,t,_),Lt(t,i),Lt(t,r),Lt(t,s),ho(o,t,null),Nt(y,a,_),ho(l,y,_),Nt(y,h,_),Nt(y,c,_),ho(u,c,null),f=!0,d||(g=Ue(t,"click",e[5]),d=!0)},p(y,_){(!f||_&1)&&n!==(n=y[0].name.split(" ")[0]+"")&&Cn(r,n)},i(y){f||(yi(o.$$.fragment,y),yi(l.$$.fragment,y),yi(u.$$.fragment,y),f=!0)},o(y){Ci(o.$$.fragment,y),Ci(l.$$.fragment,y),Ci(u.$$.fragment,y),f=!1},d(y){y&&(kt(t),kt(a),kt(h),kt(c)),co(o),co(l,y),co(u),d=!1,g()}}}function D2(e){let t,i="MQTT connection failed.",n,r,s="Try Logging In Again",o,a,l,h,c;return{c(){t=Ct("h1"),t.textContent=i,n=ne(),r=Ct("button"),r.textContent=s,o=ne(),a=Ct("p"),l=Ii(e[3]),this.h()},l(u){t=It(u,"H1",{class:!0,"data-svelte-h":!0}),we(t)!=="svelte-49pb01"&&(t.textContent=i),n=re(u),r=It(u,"BUTTON",{class:!0,"data-svelte-h":!0}),we(r)!=="svelte-5g466t"&&(r.textContent=s),o=re(u),a=It(u,"P",{class:!0});var f=Vt(a);l=Ri(f,e[3]),f.forEach(kt),this.h()},h(){mt(t,"class","mt-10"),mt(r,"class","btn btn-secondary rounded-sm mt-5"),mt(a,"class","mt-10 text-red-500")},m(u,f){Nt(u,t,f),Nt(u,n,f),Nt(u,r,f),Nt(u,o,f),Nt(u,a,f),Lt(a,l),h||(c=Ue(r,"click",e[4]),h=!0)},p(u,f){f&8&&Cn(l,u[3])},i:Re,o:Re,d(u){u&&(kt(t),kt(n),kt(r),kt(o),kt(a)),h=!1,c()}}}function L2(e){let t,i="Login failed. Please try again.",n,r,s="Try Logging In Again",o,a,l,h,c;return{c(){t=Ct("h1"),t.textContent=i,n=ne(),r=Ct("button"),r.textContent=s,o=ne(),a=Ct("p"),l=Ii(e[2]),this.h()},l(u){t=It(u,"H1",{class:!0,"data-svelte-h":!0}),we(t)!=="svelte-2famt1"&&(t.textContent=i),n=re(u),r=It(u,"BUTTON",{class:!0,"data-svelte-h":!0}),we(r)!=="svelte-5g466t"&&(r.textContent=s),o=re(u),a=It(u,"P",{class:!0});var f=Vt(a);l=Ri(f,e[2]),f.forEach(kt),this.h()},h(){mt(t,"class","mt-10"),mt(r,"class","btn btn-secondary rounded-sm mt-5"),mt(a,"class","mt-10 text-red-500")},m(u,f){Nt(u,t,f),Nt(u,n,f),Nt(u,r,f),Nt(u,o,f),Nt(u,a,f),Lt(a,l),h||(c=Ue(r,"click",e[4]),h=!0)},p(u,f){f&4&&Cn(l,u[2])},i:Re,o:Re,d(u){u&&(kt(t),kt(n),kt(r),kt(o),kt(a)),h=!1,c()}}}function B2(e){let t,i="Loading...";return{c(){t=Ct("div"),t.textContent=i,this.h()},l(n){t=It(n,"DIV",{class:!0,"data-svelte-h":!0}),we(t)!=="svelte-1ng9eg1"&&(t.textContent=i),this.h()},h(){mt(t,"class","loading mt-24")},m(n,r){Nt(n,t,r)},p:Re,i:Re,o:Re,d(n){n&&kt(t)}}}function N2(e){let t,i,n,r,s;const o=[B2,L2,D2,R2],a=[];function l(h,c){return h[1]?0:h[2]?1:h[3]?2:h[0]?3:-1}return~(n=l(e))&&(r=a[n]=o[n](e)),{c(){t=Ct("div"),i=Ct("div"),r&&r.c(),this.h()},l(h){t=It(h,"DIV",{class:!0});var c=Vt(t);i=It(c,"DIV",{class:!0});var u=Vt(i);r&&r.l(u),u.forEach(kt),c.forEach(kt),this.h()},h(){mt(i,"class","w-screen md:w-7/12 lg:w-5/12 sm flex flex-col items-center"),mt(t,"class","w-screen min-h-screen bg-base-200 select-none flex justify-center")},m(h,c){Nt(h,t,c),Lt(t,i),~n&&a[n].m(i,null),s=!0},p(h,[c]){let u=n;n=l(h),n===u?~n&&a[n].p(h,c):(r&&(Ro(),Ci(a[u],1,1,()=>{a[u]=null}),Do()),~n?(r=a[n],r?r.p(h,c):(r=a[n]=o[n](h),r.c()),yi(r,1),r.m(i,null)):r=null)},i(h){s||(yi(r),s=!0)},o(h){Ci(r),s=!1},d(h){h&&kt(t),~n&&a[n].d()}}}function F2(e,t,i){let n;Xh(e,ts,c=>i(3,n=c));let r=null,s=!0,o=!1;async function a(){try{const{accessToken:c,loading:u,loginError:f}=await rl();if(u){i(1,s=!0);return}if(f){i(2,o=f),i(1,s=!1);return}if(c)i(0,r=await sl(c)),await sy();else throw new Error("No valid access token.")}catch(c){console.error("Error initializing page:",c),i(2,o=c),i(1,s=!1)}finally{i(1,s=!1)}}kd(()=>{a()});function l(){a0()}return[r,s,o,n,l,()=>l0()]}class q2 extends Ts{constructor(t){super(),Os(this,t,F2,N2,lr,{})}}export{q2 as component};
